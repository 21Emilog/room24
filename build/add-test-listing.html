<!DOCTYPE html>
<html>
<head>
  <title>Add Test Listing - Room24</title>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  <style>
    body { font-family: Arial, sans-serif; padding: 40px; background: #f5f5f5; }
    .container { max-width: 600px; margin: 0 auto; background: white; padding: 30px; border-radius: 16px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); }
    h1 { color: #14b8a6; }
    button { background: linear-gradient(135deg, #14b8a6, #06b6d4); color: white; border: none; padding: 15px 30px; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 16px; }
    button:hover { transform: translateY(-2px); }
    .success { background: #d1fae5; color: #065f46; padding: 15px; border-radius: 8px; margin-top: 20px; }
    .error { background: #fee2e2; color: #991b1b; padding: 15px; border-radius: 8px; margin-top: 20px; }
    #status { margin-top: 20px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>üè† Add Test Listing to Room24</h1>
    <p>Click the button below to add a test room listing to Firestore.</p>
    
    <button onclick="addTestListing()">Add Test Listing</button>
    
    <div id="status"></div>
  </div>

  <script>
    // Firebase config - same as your app
    const firebaseConfig = {
      apiKey: "AIzaSyDF5Rb5zyBFCDR3AO1nBz7B8w27dkjVGk0",
      authDomain: "room-rental-75dab.firebaseapp.com",
      projectId: "room-rental-75dab",
      storageBucket: "room-rental-75dab.firebasestorage.app",
      messagingSenderId: "695412638788",
      appId: "1:695412638788:web:1c2b6249e8b1e67cd9ff36"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    async function addTestListing() {
      const statusDiv = document.getElementById('status');
      statusDiv.innerHTML = '<p>Adding listing...</p>';
      
      const testListing = {
        title: "Spacious Room in Rosebank",
        description: "Beautiful furnished room in a secure complex near Rosebank Mall. Walking distance to Gautrain station. Includes WiFi, water & electricity. Safe parking available. Perfect for young professionals or students. Shared kitchen and bathroom with one other tenant. Laundry facilities on-site.",
        price: 4200,
        location: "Rosebank, Johannesburg",
        latitude: -26.1456,
        longitude: 28.0436,
        amenities: ["WiFi", "Parking", "Security", "Furnished", "Laundry"],
        photos: [
          "https://images.unsplash.com/photo-1522771739844-6a9f6d5f14af?w=800&h=600&fit=crop",
          "https://images.unsplash.com/photo-1560448204-e02f11c3d0e2?w=800&h=600&fit=crop",
          "https://images.unsplash.com/photo-1502672260266-1c1ef2d93688?w=800&h=600&fit=crop"
        ],
        availableDate: new Date().toISOString(),
        status: "available",
        landlordId: "test-landlord-room24",
        landlordName: "Room24 Test Landlord",
        landlordEmail: "landlord@room24.co.za",
        landlordPhone: "+27 82 555 1234",
        landlordPhoto: "",
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      };

      try {
        const docRef = await db.collection('listings').add(testListing);
        statusDiv.innerHTML = `<div class="success">
          <strong>‚úÖ Listing added successfully!</strong><br>
          <p>ID: ${docRef.id}</p>
          <p>Title: ${testListing.title}</p>
          <p>Location: ${testListing.location}</p>
          <p>Price: R${testListing.price}/month</p>
          <br>
          <p>Now go to <a href="https://room24-two.vercel.app" target="_blank">Room24</a> and refresh to see the listing!</p>
        </div>`;
      } catch (error) {
        statusDiv.innerHTML = `<div class="error">
          <strong>‚ùå Error adding listing:</strong><br>
          ${error.message}
        </div>`;
        console.error('Error:', error);
      }
    }
  </script>
</body>
</html>
