/*! For license information please see main.a5aca4aa.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),s=n(43),i=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function d(e){if(l(e)!==e)throw Error(a(188))}function h(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=h(e)))return t;e=e.sibling}return null}var f=Object.assign,m=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),g=Symbol.for("react.portal"),y=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),x=Symbol.for("react.consumer"),w=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),k=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),_=Symbol.for("react.lazy");Symbol.for("react.scope");var A=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var C=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var j=Symbol.iterator;function T(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=j&&e[j]||e["@@iterator"])?e:null}var I=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===I?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case y:return"Fragment";case b:return"Profiler";case v:return"StrictMode";case S:return"Suspense";case k:return"SuspenseList";case A:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case g:return"Portal";case w:return e.displayName||"Context";case x:return(e._context.displayName||"Context")+".Consumer";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case E:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case _:t=e._payload,e=e._init;try{return P(e(t))}catch(Lr){}}return null}var R=Array.isArray,D=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},M=[],F=-1;function U(e){return{current:e}}function z(e){0>F||(e.current=M[F],M[F]=null,F--)}function V(e,t){F++,M[F]=e.current,e.current=t}var B,q,H=U(null),W=U(null),K=U(null),G=U(null);function Q(e,t){switch(V(K,t),V(W,e),V(H,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?vd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=bd(t=vd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}z(H),V(H,e)}function Y(){z(H),z(W),z(K)}function X(e){null!==e.memoizedState&&V(G,e);var t=H.current,n=bd(t,e.type);t!==n&&(V(W,e),V(H,n))}function J(e){W.current===e&&(z(H),z(W)),G.current===e&&(z(G),dh._currentValue=L)}function $(e){if(void 0===B)try{throw Error()}catch(Lr){var t=Lr.stack.trim().match(/\n( *(at )?)/);B=t&&t[1]||"",q=-1<Lr.stack.indexOf("\n    at")?" (<anonymous>)":-1<Lr.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+B+e+q}var Z=!1;function ee(e,t){if(!e||Z)return"";Z=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(Lr){var r=Lr}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(i){r=i}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(a){if(a&&r&&"string"===typeof a.stack)return[a.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),a=i[0],o=i[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(s=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(r===l.length||s===c.length)for(r=l.length-1,s=c.length-1;1<=r&&0<=s&&l[r]!==c[s];)s--;for(;1<=r&&0<=s;r--,s--)if(l[r]!==c[s]){if(1!==r||1!==s)do{if(r--,0>--s||l[r]!==c[s]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=s);break}}}finally{Z=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?$(n):""}function te(e,t){switch(e.tag){case 26:case 27:case 5:return $(e.type);case 16:return $("Lazy");case 13:return e.child!==t&&null!==t?$("Suspense Fallback"):$("Suspense");case 19:return $("SuspenseList");case 0:case 15:return ee(e.type,!1);case 11:return ee(e.type.render,!1);case 1:return ee(e.type,!0);case 31:return $("Activity");default:return""}}function ne(e){try{var t="",n=null;do{t+=te(e,n),n=e,e=e.return}while(e);return t}catch(Lr){return"\nError generating stack: "+Lr.message+"\n"+Lr.stack}}var re=Object.prototype.hasOwnProperty,se=r.unstable_scheduleCallback,ie=r.unstable_cancelCallback,ae=r.unstable_shouldYield,oe=r.unstable_requestPaint,le=r.unstable_now,ce=r.unstable_getCurrentPriorityLevel,ue=r.unstable_ImmediatePriority,de=r.unstable_UserBlockingPriority,he=r.unstable_NormalPriority,fe=r.unstable_LowPriority,me=r.unstable_IdlePriority,pe=r.log,ge=r.unstable_setDisableYieldValue,ye=null,ve=null;function be(e){if("function"===typeof pe&&ge(e),ve&&"function"===typeof ve.setStrictMode)try{ve.setStrictMode(ye,e)}catch(t){}}var xe=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(we(e)/Ne|0)|0},we=Math.log,Ne=Math.LN2;var Se=256,ke=262144,Ee=4194304;function _e(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Ae(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var s=0,i=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~i)?s=_e(r):0!==(a&=o)?s=_e(a):n||0!==(n=o&~e)&&(s=_e(n)):0!==(o=r&~i)?s=_e(o):0!==a?s=_e(a):n||0!==(n=r&~e)&&(s=_e(n)),0===s?0:0!==t&&t!==s&&0===(t&i)&&((i=s&-s)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:s}function Ce(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function je(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Te(){var e=Ee;return 0===(62914560&(Ee<<=1))&&(Ee=4194304),e}function Ie(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pe(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Re(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-xe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|261930&n}function De(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-xe(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function Oe(e,t){var n=t&-t;return 0!==((n=0!==(42&n)?1:Le(n))&(e.suspendedLanes|t))?0:n}function Le(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Me(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function Fe(){var e=O.p;return 0!==e?e:void 0===(e=window.event)?32:Ah(e.type)}function Ue(e,t){var n=O.p;try{return O.p=e,t()}finally{O.p=n}}var ze=Math.random().toString(36).slice(2),Ve="__reactFiber$"+ze,Be="__reactProps$"+ze,qe="__reactContainer$"+ze,He="__reactEvents$"+ze,We="__reactListeners$"+ze,Ke="__reactHandles$"+ze,Ge="__reactResources$"+ze,Qe="__reactMarker$"+ze;function Ye(e){delete e[Ve],delete e[Be],delete e[He],delete e[We],delete e[Ke]}function Xe(e){var t=e[Ve];if(t)return t;for(var n=e.parentNode;n;){if(t=n[qe]||n[Ve]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=Md(e);null!==e;){if(n=e[Ve])return n;e=Md(e)}return t}n=(e=n).parentNode}return null}function Je(e){if(e=e[Ve]||e[qe]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function $e(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function Ze(e){var t=e[Ge];return t||(t=e[Ge]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function et(e){e[Qe]=!0}var tt=new Set,nt={};function rt(e,t){st(e,t),st(e+"Capture",t)}function st(e,t){for(nt[e]=t,e=0;e<t.length;e++)tt.add(t[e])}var it=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),at={},ot={};function lt(e,t,n){if(s=t,re.call(ot,s)||!re.call(at,s)&&(it.test(s)?ot[s]=!0:(at[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function ct(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function ut(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function dt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ht(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function ft(e){if(!e._valueTracker){var t=ht(e)?"checked":"value";e._valueTracker=function(e,t,n){var r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&"undefined"!==typeof r&&"function"===typeof r.get&&"function"===typeof r.set){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){n=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(e){n=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function mt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ht(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function pt(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var gt=/[\n"\\]/g;function yt(e){return e.replace(gt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function vt(e,t,n,r,s,i,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+dt(t)):e.value!==""+dt(t)&&(e.value=""+dt(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?xt(e,a,dt(t)):null!=n?xt(e,a,dt(n)):null!=r&&e.removeAttribute("value"),null==s&&null!=i&&(e.defaultChecked=!!i),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+dt(o):e.removeAttribute("name")}function bt(e,t,n,r,s,i,a,o){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return void ft(e);n=null!=n?""+dt(n):"",t=null!=t?""+dt(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:s)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a),ft(e)}function xt(e,t,n){"number"===t&&pt(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function wt(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+dt(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function Nt(e,t,n){null==t||((t=""+dt(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+dt(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function St(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(R(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=dt(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r),ft(e)}function kt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var Et=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _t(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||Et.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function At(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var s in t)r=t[s],t.hasOwnProperty(s)&&n[s]!==r&&_t(e,s,r)}else for(var i in t)t.hasOwnProperty(i)&&_t(e,i,t[i])}function Ct(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Tt=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function It(e){return Tt.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Pt(){}var Rt=null;function Dt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ot=null,Lt=null;function Mt(e){var t=Je(e);if(t&&(e=t.stateNode)){var n=e[Be]||null;e:switch(e=t.stateNode,t.type){case"input":if(vt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+yt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=r[Be]||null;if(!s)throw Error(a(90));vt(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&mt(r)}break e;case"textarea":Nt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&wt(e,!!n.multiple,t,!1)}}}var Ft=!1;function Ut(e,t,n){if(Ft)return e(t,n);Ft=!0;try{return e(t)}finally{if(Ft=!1,(null!==Ot||null!==Lt)&&(eu(),Ot&&(t=Ot,e=Lt,Lt=Ot=null,Mt(t),e)))for(t=0;t<e.length;t++)Mt(e[t])}}function zt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Be]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Vt=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Bt=!1;if(Vt)try{var qt={};Object.defineProperty(qt,"passive",{get:function(){Bt=!0}}),window.addEventListener("test",qt,qt),window.removeEventListener("test",qt,qt)}catch($h){Bt=!1}var Ht=null,Wt=null,Kt=null;function Gt(){if(Kt)return Kt;var e,t,n=Wt,r=n.length,s="value"in Ht?Ht.value:Ht.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Kt=s.slice(e,1<t?1-t:void 0)}function Qt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Yt(){return!0}function Xt(){return!1}function Jt(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Yt:Xt,this.isPropagationStopped=Xt,this}return f(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Yt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Yt)},persist:function(){},isPersistent:Yt}),t}var $t,Zt,en,tn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nn=Jt(tn),rn=f({},tn,{view:0,detail:0}),sn=Jt(rn),an=f({},rn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==en&&(en&&"mousemove"===e.type?($t=e.screenX-en.screenX,Zt=e.screenY-en.screenY):Zt=$t=0,en=e),$t)},movementY:function(e){return"movementY"in e?e.movementY:Zt}}),on=Jt(an),ln=Jt(f({},an,{dataTransfer:0})),cn=Jt(f({},rn,{relatedTarget:0})),un=Jt(f({},tn,{animationName:0,elapsedTime:0,pseudoElement:0})),dn=Jt(f({},tn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),hn=Jt(f({},tn,{data:0})),fn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},pn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=pn[e])&&!!t[e]}function yn(){return gn}var vn=Jt(f({},rn,{key:function(e){if(e.key){var t=fn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Qt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?mn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yn,charCode:function(e){return"keypress"===e.type?Qt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Qt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),bn=Jt(f({},an,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),xn=Jt(f({},rn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yn})),wn=Jt(f({},tn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=Jt(f({},an,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),Sn=Jt(f({},tn,{newState:0,oldState:0})),kn=[9,13,27,32],En=Vt&&"CompositionEvent"in window,_n=null;Vt&&"documentMode"in document&&(_n=document.documentMode);var An=Vt&&"TextEvent"in window&&!_n,Cn=Vt&&(!En||_n&&8<_n&&11>=_n),jn=String.fromCharCode(32),Tn=!1;function In(e,t){switch(e){case"keyup":return-1!==kn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Rn=!1;var Dn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function On(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Dn[e.type]:"textarea"===t}function Ln(e,t,n,r){Ot?Lt?Lt.push(r):Lt=[r]:Ot=r,0<(t=sd(t,"onChange")).length&&(n=new nn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Mn=null,Fn=null;function Un(e){Xu(e,0)}function zn(e){if(mt($e(e)))return e}function Vn(e,t){if("change"===e)return t}var Bn=!1;if(Vt){var qn;if(Vt){var Hn="oninput"in document;if(!Hn){var Wn=document.createElement("div");Wn.setAttribute("oninput","return;"),Hn="function"===typeof Wn.oninput}qn=Hn}else qn=!1;Bn=qn&&(!document.documentMode||9<document.documentMode)}function Kn(){Mn&&(Mn.detachEvent("onpropertychange",Gn),Fn=Mn=null)}function Gn(e){if("value"===e.propertyName&&zn(Fn)){var t=[];Ln(t,Fn,e,Dt(e)),Ut(Un,t)}}function Qn(e,t,n){"focusin"===e?(Kn(),Fn=n,(Mn=t).attachEvent("onpropertychange",Gn)):"focusout"===e&&Kn()}function Yn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return zn(Fn)}function Xn(e,t){if("click"===e)return zn(t)}function Jn(e,t){if("input"===e||"change"===e)return zn(t)}var $n="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Zn(e,t){if($n(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!re.call(t,s)||!$n(e[s],t[s]))return!1}return!0}function er(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function tr(e,t){var n,r=er(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=er(r)}}function nr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function rr(e){for(var t=pt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=pt((e=t.contentWindow).document)}return t}function sr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var ir=Vt&&"documentMode"in document&&11>=document.documentMode,ar=null,or=null,lr=null,cr=!1;function ur(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;cr||null==ar||ar!==pt(r)||("selectionStart"in(r=ar)&&sr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},lr&&Zn(lr,r)||(lr=r,0<(r=sd(or,"onSelect")).length&&(t=new nn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ar)))}function dr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var hr={animationend:dr("Animation","AnimationEnd"),animationiteration:dr("Animation","AnimationIteration"),animationstart:dr("Animation","AnimationStart"),transitionrun:dr("Transition","TransitionRun"),transitionstart:dr("Transition","TransitionStart"),transitioncancel:dr("Transition","TransitionCancel"),transitionend:dr("Transition","TransitionEnd")},fr={},mr={};function pr(e){if(fr[e])return fr[e];if(!hr[e])return e;var t,n=hr[e];for(t in n)if(n.hasOwnProperty(t)&&t in mr)return fr[e]=n[t];return e}Vt&&(mr=document.createElement("div").style,"AnimationEvent"in window||(delete hr.animationend.animation,delete hr.animationiteration.animation,delete hr.animationstart.animation),"TransitionEvent"in window||delete hr.transitionend.transition);var gr=pr("animationend"),yr=pr("animationiteration"),vr=pr("animationstart"),br=pr("transitionrun"),xr=pr("transitionstart"),wr=pr("transitioncancel"),Nr=pr("transitionend"),Sr=new Map,kr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(e,t){Sr.set(e,t),rt(t,[e])}kr.push("scrollEnd");var _r="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},Ar=[],Cr=0,jr=0;function Tr(){for(var e=Cr,t=jr=Cr=0;t<e;){var n=Ar[t];Ar[t++]=null;var r=Ar[t];Ar[t++]=null;var s=Ar[t];Ar[t++]=null;var i=Ar[t];if(Ar[t++]=null,null!==r&&null!==s){var a=r.pending;null===a?s.next=s:(s.next=a.next,a.next=s),r.pending=s}0!==i&&Dr(n,s,i)}}function Ir(e,t,n,r){Ar[Cr++]=e,Ar[Cr++]=t,Ar[Cr++]=n,Ar[Cr++]=r,jr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function Pr(e,t,n,r){return Ir(e,t,n,r),Or(e)}function Rr(e,t){return Ir(e,null,null,t),Or(e)}function Dr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var s=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(s=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,s&&null!==t&&(s=31-xe(n),null===(r=(e=i.hiddenUpdates)[s])?e[s]=[t]:r.push(t),t.lane=536870912|n),i):null}function Or(e){if(50<Wc)throw Wc=0,Kc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Mr={};function Fr(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ur(e,t,n,r){return new Fr(e,t,n,r)}function zr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Vr(e,t){var n=e.alternate;return null===n?((n=Ur(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Br(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function qr(e,t,n,r,s,i){var o=0;if(r=e,"function"===typeof e)zr(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,H.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case A:return(e=Ur(31,n,t,s)).elementType=A,e.lanes=i,e;case y:return Hr(n.children,s,i,t);case v:o=8,s|=24;break;case b:return(e=Ur(12,n,t,2|s)).elementType=b,e.lanes=i,e;case S:return(e=Ur(13,n,t,s)).elementType=S,e.lanes=i,e;case k:return(e=Ur(19,n,t,s)).elementType=k,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case w:o=10;break e;case x:o=9;break e;case N:o=11;break e;case E:o=14;break e;case _:o=16,r=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Ur(o,n,t,s)).elementType=e,t.type=r,t.lanes=i,t}function Hr(e,t,n,r){return(e=Ur(7,e,r,t)).lanes=n,e}function Wr(e,t,n){return(e=Ur(6,e,null,t)).lanes=n,e}function Kr(e){var t=Ur(18,null,null,0);return t.stateNode=e,t}function Gr(e,t,n){return(t=Ur(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Qr=new WeakMap;function Yr(e,t){if("object"===typeof e&&null!==e){var n=Qr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:ne(t)},Qr.set(e,t),t)}return{value:e,source:t,stack:ne(t)}}var Xr=[],Jr=0,$r=null,Zr=0,es=[],ts=0,ns=null,rs=1,ss="";function is(e,t){Xr[Jr++]=Zr,Xr[Jr++]=$r,$r=e,Zr=t}function as(e,t,n){es[ts++]=rs,es[ts++]=ss,es[ts++]=ns,ns=e;var r=rs;e=ss;var s=32-xe(r)-1;r&=~(1<<s),n+=1;var i=32-xe(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,rs=1<<32-xe(t)+s|n<<s|r,ss=i+e}else rs=1<<i|n<<s|r,ss=e}function os(e){null!==e.return&&(is(e,1),as(e,1,0))}function ls(e){for(;e===$r;)$r=Xr[--Jr],Xr[Jr]=null,Zr=Xr[--Jr],Xr[Jr]=null;for(;e===ns;)ns=es[--ts],es[ts]=null,ss=es[--ts],es[ts]=null,rs=es[--ts],es[ts]=null}function cs(e,t){es[ts++]=rs,es[ts++]=ss,es[ts++]=ns,rs=t.id,ss=t.overflow,ns=e}var us=null,ds=null,hs=!1,fs=null,ms=!1,ps=Error(a(519));function gs(e){throw Ns(Yr(Error(a(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),ps}function ys(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Ve]=e,t[Be]=r,n){case"dialog":Ju("cancel",t),Ju("close",t);break;case"iframe":case"object":case"embed":Ju("load",t);break;case"video":case"audio":for(n=0;n<Qu.length;n++)Ju(Qu[n],t);break;case"source":Ju("error",t);break;case"img":case"image":case"link":Ju("error",t),Ju("load",t);break;case"details":Ju("toggle",t);break;case"input":Ju("invalid",t),bt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0);break;case"select":Ju("invalid",t);break;case"textarea":Ju("invalid",t),St(t,r.value,r.defaultValue,r.children)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||ud(t.textContent,n)?(null!=r.popover&&(Ju("beforetoggle",t),Ju("toggle",t)),null!=r.onScroll&&Ju("scroll",t),null!=r.onScrollEnd&&Ju("scrollend",t),null!=r.onClick&&(t.onclick=Pt),t=!0):t=!1,t||gs(e,!0)}function vs(e){for(us=e.return;us;)switch(us.tag){case 5:case 31:case 13:return void(ms=!1);case 27:case 3:return void(ms=!0);default:us=us.return}}function bs(e){if(e!==us)return!1;if(!hs)return vs(e),hs=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||xd(e.type,e.memoizedProps)),t=!t),t&&ds&&gs(e),vs(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));ds=Ld(e)}else if(31===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));ds=Ld(e)}else 27===n?(n=ds,Ad(e.type)?(e=Od,Od=null,ds=e):ds=n):ds=us?Dd(e.stateNode.nextSibling):null;return!0}function xs(){ds=us=null,hs=!1}function ws(){var e=fs;return null!==e&&(null===Ic?Ic=e:Ic.push.apply(Ic,e),fs=null),e}function Ns(e){null===fs?fs=[e]:fs.push(e)}var Ss=U(null),ks=null,Es=null;function _s(e,t,n){V(Ss,t._currentValue),t._currentValue=n}function As(e){e._currentValue=Ss.current,z(Ss)}function Cs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function js(e,t,n,r){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var i=s.dependencies;if(null!==i){var o=s.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),Cs(i.return,n,e),r||(o=null);break e}i=l.next}}else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(i=o.alternate)&&(i.lanes|=n),Cs(o,n,e),o=null}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===e){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}}function Ts(e,t,n,r){e=null;for(var s=t,i=!1;null!==s;){if(!i)if(0!==(524288&s.flags))i=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var o=s.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=s.type;$n(s.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(s===G.current){if(null===(o=s.alternate))throw Error(a(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(dh):e=[dh])}s=s.return}null!==e&&js(t,e,n,r),t.flags|=262144}function Is(e){for(e=e.firstContext;null!==e;){if(!$n(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ps(e){ks=e,Es=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Rs(e){return Os(ks,e)}function Ds(e,t){return null===ks&&Ps(e),Os(e,t)}function Os(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===Es){if(null===e)throw Error(a(308));Es=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Es=Es.next=t;return n}var Ls="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},Ms=r.unstable_scheduleCallback,Fs=r.unstable_NormalPriority,Us={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function zs(){return{controller:new Ls,data:new Map,refCount:0}}function Vs(e){e.refCount--,0===e.refCount&&Ms(Fs,function(){e.controller.abort()})}var Bs=null,qs=0,Hs=0,Ws=null;function Ks(){if(0===--qs&&null!==Bs){null!==Ws&&(Ws.status="fulfilled");var e=Bs;Bs=null,Hs=0,Ws=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Gs=D.S;D.S=function(e,t){Dc=le(),"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Bs){var n=Bs=[];qs=0,Hs=qu(),Ws={status:"pending",value:void 0,then:function(e){n.push(e)}}}qs++,t.then(Ks,Ks)}(0,t),null!==Gs&&Gs(e,t)};var Qs=U(null);function Ys(){var e=Qs.current;return null!==e?e:pc.pooledCache}function Xs(e,t){V(Qs,null===t?Qs.current:t.pool)}function Js(){var e=Ys();return null===e?null:{parent:Us._currentValue,pool:e}}var $s=Error(a(460)),Zs=Error(a(474)),ei=Error(a(542)),ti={then:function(){}};function ni(e){return"fulfilled"===(e=e.status)||"rejected"===e}function ri(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Pt,Pt),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw oi(e=t.reason),e;default:if("string"===typeof t.status)t.then(Pt,Pt);else{if(null!==(e=pc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw oi(e=t.reason),e}throw ii=t,$s}}function si(e){try{return(0,e._init)(e._payload)}catch(Lr){if(null!==Lr&&"object"===typeof Lr&&"function"===typeof Lr.then)throw ii=Lr,$s;throw Lr}}var ii=null;function ai(){if(null===ii)throw Error(a(459));var e=ii;return ii=null,e}function oi(e){if(e===$s||e===ei)throw Error(a(483))}var li=null,ci=0;function ui(e){var t=ci;return ci+=1,null===li&&(li=[]),ri(li,e,t)}function di(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function hi(e,t){if(t.$$typeof===m)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Vr(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Wr(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===y?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===_&&si(i)===t.type)?(di(t=s(t,n.props),n),t.return=e,t):(di(t=qr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Gr(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Hr(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=Wr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case p:return di(n=qr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case g:return(t=Gr(t,e.mode,n)).return=e,t;case _:return h(e,t=si(t),n)}if(R(t)||T(t))return(t=Hr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,ui(t),n);if(t.$$typeof===w)return h(e,Ds(e,t),n);hi(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case p:return n.key===s?c(e,t,n,r):null;case g:return n.key===s?u(e,t,n,r):null;case _:return f(e,t,n=si(n),r)}if(R(n)||T(n))return null!==s?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,ui(n),r);if(n.$$typeof===w)return f(e,t,Ds(e,n),r);hi(e,n)}return null}function m(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case p:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case g:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case _:return m(e,t,n,r=si(r),s)}if(R(r)||T(r))return d(t,e=e.get(n)||null,r,s,null);if("function"===typeof r.then)return m(e,t,n,ui(r),s);if(r.$$typeof===w)return m(e,t,n,Ds(t,r),s);hi(t,r)}return null}function v(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===y&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case p:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===y){if(7===c.tag){n(l,c.sibling),(d=s(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===_&&si(b)===c.type){n(l,c.sibling),di(d=s(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===y?((d=Hr(u.props.children,l.mode,d,u.key)).return=l,l=d):(di(d=qr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case g:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=s(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Gr(u,l.mode,d)).return=l,l=d}return o(l);case _:return v(l,c,u=si(u),d)}if(R(u))return function(s,a,o,l){for(var c=null,u=null,d=a,p=a=0,g=null;null!==d&&p<o.length;p++){d.index>p?(g=d,d=null):g=d.sibling;var y=f(s,d,o[p],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(s,d),a=i(y,a,p),null===u?c=y:u.sibling=y,u=y,d=g}if(p===o.length)return n(s,d),hs&&is(s,p),c;if(null===d){for(;p<o.length;p++)null!==(d=h(s,o[p],l))&&(a=i(d,a,p),null===u?c=d:u.sibling=d,u=d);return hs&&is(s,p),c}for(d=r(d);p<o.length;p++)null!==(g=m(d,s,p,o[p],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?p:g.key),a=i(g,a,p),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(s,e)}),hs&&is(s,p),c}(l,c,u,d);if(T(u)){if("function"!==typeof(b=T(u)))throw Error(a(150));return function(s,o,l,c){if(null==l)throw Error(a(151));for(var u=null,d=null,p=o,g=o=0,y=null,v=l.next();null!==p&&!v.done;g++,v=l.next()){p.index>g?(y=p,p=null):y=p.sibling;var b=f(s,p,v.value,c);if(null===b){null===p&&(p=y);break}e&&p&&null===b.alternate&&t(s,p),o=i(b,o,g),null===d?u=b:d.sibling=b,d=b,p=y}if(v.done)return n(s,p),hs&&is(s,g),u;if(null===p){for(;!v.done;g++,v=l.next())null!==(v=h(s,v.value,c))&&(o=i(v,o,g),null===d?u=v:d.sibling=v,d=v);return hs&&is(s,g),u}for(p=r(p);!v.done;g++,v=l.next())null!==(v=m(p,s,g,v.value,c))&&(e&&null!==v.alternate&&p.delete(null===v.key?g:v.key),o=i(v,o,g),null===d?u=v:d.sibling=v,d=v);return e&&p.forEach(function(e){return t(s,e)}),hs&&is(s,g),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return v(l,c,ui(u),d);if(u.$$typeof===w)return v(l,c,Ds(l,u),d);hi(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=s(c,u)).return=l,l=d):(n(l,c),(d=Wr(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{ci=0;var s=v(e,t,n,r);return li=null,s}catch(Lr){if(Lr===$s||Lr===ei)throw Lr;var i=Ur(29,Lr,null,e.mode);return i.lanes=r,i.return=e,i}}}var mi=fi(!0),pi=fi(!1),gi=!1;function yi(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function vi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function bi(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function xi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&mc)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=Or(e),Dr(e,null,n),t}return Ir(e,r,t,n),Or(e)}function wi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,De(e,n)}}function Ni(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Si=!1;function ki(){if(Si){if(null!==Ws)throw Ws}}function Ei(e,t,n,r){Si=!1;var s=e.updateQueue;gi=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var h=-536870913&o.lane,m=h!==o.lane;if(m?(yc&h)===h:(r&h)===h){0!==h&&h===Hs&&(Si=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=e,g=o;h=t;var y=n;switch(g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(y,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=g.payload)?p.call(y,d,h):p)||void 0===h)break e;d=f({},d,h);break e;case 2:gi=!0}}null!==(h=o.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=s.callbacks)?s.callbacks=[h]:m.push(h))}else m={lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=m,l=d):u=u.next=m,a|=h;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(m=o).next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null===i&&(s.shared.lanes=0),Ec|=a,e.lanes=a,e.memoizedState=d}}function _i(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function Ai(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)_i(n[e],t)}var Ci=U(null),ji=U(0);function Ti(e,t){V(ji,e=Sc),V(Ci,t),Sc=e|t.baseLanes}function Ii(){V(ji,Sc),V(Ci,Ci.current)}function Pi(){Sc=ji.current,z(Ci),z(ji)}var Ri=U(null),Di=null;function Oi(e){var t=e.alternate;V(zi,1&zi.current),V(Ri,e),null===Di&&(null===t||null!==Ci.current||null!==t.memoizedState)&&(Di=e)}function Li(e){V(zi,zi.current),V(Ri,e),null===Di&&(Di=e)}function Mi(e){22===e.tag?(V(zi,zi.current),V(Ri,e),null===Di&&(Di=e)):Fi()}function Fi(){V(zi,zi.current),V(Ri,Ri.current)}function Ui(e){z(Ri),Di===e&&(Di=null),z(zi)}var zi=U(0);function Vi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Pd(n)||Rd(n)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(0!==(128&t.flags))return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Bi=0,qi=null,Hi=null,Wi=null,Ki=!1,Gi=!1,Qi=!1,Yi=0,Xi=0,Ji=null,$i=0;function Zi(){throw Error(a(321))}function ea(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$n(e[n],t[n]))return!1;return!0}function ta(e,t,n,r,s,i){return Bi=i,qi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=null===e||null===e.memoizedState?yo:vo,Qi=!1,i=n(r,s),Qi=!1,Gi&&(i=ra(t,n,r,s)),na(e),i}function na(e){D.H=go;var t=null!==Hi&&null!==Hi.next;if(Bi=0,Wi=Hi=qi=null,Ki=!1,Xi=0,Ji=null,t)throw Error(a(300));null===e||Do||null!==(e=e.dependencies)&&Is(e)&&(Do=!0)}function ra(e,t,n,r){qi=e;var s=0;do{if(Gi&&(Ji=null),Xi=0,Gi=!1,25<=s)throw Error(a(301));if(s+=1,Wi=Hi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}D.H=bo,i=t(n,r)}while(Gi);return i}function sa(){var e=D.H,t=e.useState()[0];return t="function"===typeof t.then?ua(t):t,e=e.useState()[0],(null!==Hi?Hi.memoizedState:null)!==e&&(qi.flags|=1024),t}function ia(){var e=0!==Yi;return Yi=0,e}function aa(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function oa(e){if(Ki){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Ki=!1}Bi=0,Wi=Hi=qi=null,Gi=!1,Xi=Yi=0,Ji=null}function la(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Wi?qi.memoizedState=Wi=e:Wi=Wi.next=e,Wi}function ca(){if(null===Hi){var e=qi.alternate;e=null!==e?e.memoizedState:null}else e=Hi.next;var t=null===Wi?qi.memoizedState:Wi.next;if(null!==t)Wi=t,Hi=e;else{if(null===e){if(null===qi.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(Hi=e).memoizedState,baseState:Hi.baseState,baseQueue:Hi.baseQueue,queue:Hi.queue,next:null},null===Wi?qi.memoizedState=Wi=e:Wi=Wi.next=e}return Wi}function ua(e){var t=Xi;return Xi+=1,null===Ji&&(Ji=[]),e=ri(Ji,e,t),t=qi,null===(null===Wi?t.memoizedState:Wi.next)&&(t=t.alternate,D.H=null===t||null===t.memoizedState?yo:vo),e}function da(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return ua(e);if(e.$$typeof===w)return Rs(e)}throw Error(a(438,String(e)))}function ha(e){var t=null,n=qi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=qi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},qi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=C;return t.index++,n}function fa(e,t){return"function"===typeof t?t(e):t}function ma(e){return pa(ca(),Hi,e)}function pa(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var s=e.baseQueue,i=r.pending;if(null!==i){if(null!==s){var o=s.next;s.next=i.next,i.next=o}t.baseQueue=s=i,r.pending=null}if(i=e.baseState,null===s)e.memoizedState=i;else{var l=o=null,c=null,u=t=s.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(yc&h)===h:(Bi&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Hs&&(d=!0);else{if((Bi&f)===f){u=u.next,f===Hs&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=i):c=c.next=h,qi.lanes|=f,Ec|=f}h=u.action,Qi&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else f={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=i):c=c.next=f,qi.lanes|=h,Ec|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=i:c.next=l,!$n(i,e.memoizedState)&&(Do=!0,d&&null!==(n=Ws)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=c,r.lastRenderedState=i}return null===s&&(r.lanes=0),[e.memoizedState,r.dispatch]}function ga(e){var t=ca(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{i=e(i,o.action),o=o.next}while(o!==s);$n(i,t.memoizedState)||(Do=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function ya(e,t,n){var r=qi,s=ca(),i=hs;if(i){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!$n((Hi||s).memoizedState,n);if(o&&(s.memoizedState=n,Do=!0),s=s.queue,Ba(xa.bind(null,r,s,e),[e]),s.getSnapshot!==t||o||null!==Wi&&1&Wi.memoizedState.tag){if(r.flags|=2048,Ma(9,{destroy:void 0},ba.bind(null,r,s,n,t),null),null===pc)throw Error(a(349));i||0!==(127&Bi)||va(r,t,n)}return n}function va(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=qi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},qi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ba(e,t,n,r){t.value=n,t.getSnapshot=r,wa(t)&&Na(e)}function xa(e,t,n){return n(function(){wa(t)&&Na(e)})}function wa(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$n(e,n)}catch(r){return!0}}function Na(e){var t=Rr(e,2);null!==t&&Yc(t,e,2)}function Sa(e){var t=la();if("function"===typeof e){var n=e;if(e=n(),Qi){be(!0);try{n()}finally{be(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:e},t}function ka(e,t,n,r){return e.baseState=n,pa(e,Hi,"function"===typeof r?r:fa)}function Ea(e,t,n,r,s){if(fo(e))throw Error(a(485));if(null!==(e=t.action)){var i={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==D.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,_a(t,i)):(i.next=n.next,t.pending=n.next=i)}}function _a(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var i=D.T,a={};D.T=a;try{var o=n(s,r),l=D.S;null!==l&&l(a,o),Aa(e,t,o)}catch(c){ja(e,t,c)}finally{null!==i&&null!==a.types&&(i.types=a.types),D.T=i}}else try{Aa(e,t,i=n(s,r))}catch(u){ja(e,t,u)}}function Aa(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){Ca(e,t,n)},function(n){return ja(e,t,n)}):Ca(e,t,n)}function Ca(e,t,n){t.status="fulfilled",t.value=n,Ta(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,_a(e,n)))}function ja(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,Ta(t),t=t.next}while(t!==r)}e.action=null}function Ta(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ia(e,t){return t}function Pa(e,t){if(hs){var n=pc.formState;if(null!==n){e:{var r=qi;if(hs){if(ds){t:{for(var s=ds,i=ms;8!==s.nodeType;){if(!i){s=null;break t}if(null===(s=Dd(s.nextSibling))){s=null;break t}}s="F!"===(i=s.data)||"F"===i?s:null}if(s){ds=Dd(s.nextSibling),r="F!"===s.data;break e}}gs(r)}r=!1}r&&(t=n[0])}}return(n=la()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:t},n.queue=r,n=co.bind(null,qi,r),r.dispatch=n,r=Sa(!1),i=ho.bind(null,qi,!1,r.queue),s={state:t,dispatch:null,action:e,pending:null},(r=la()).queue=s,n=Ea.bind(null,qi,s,i,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function Ra(e){return Da(ca(),Hi,e)}function Da(e,t,n){if(t=pa(e,t,Ia)[0],e=ma(fa)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=ua(t)}catch(Lr){if(Lr===$s)throw ei;throw Lr}else r=t;var s=(t=ca()).queue,i=s.dispatch;return n!==t.memoizedState&&(qi.flags|=2048,Ma(9,{destroy:void 0},Oa.bind(null,s,n),null)),[r,i,e]}function Oa(e,t){e.action=t}function La(e){var t=ca(),n=Hi;if(null!==n)return Da(t,n,e);ca(),t=t.memoizedState;var r=(n=ca()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function Ma(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=qi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},qi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Fa(){return ca().memoizedState}function Ua(e,t,n,r){var s=la();qi.flags|=e,s.memoizedState=Ma(1|t,{destroy:void 0},n,void 0===r?null:r)}function za(e,t,n,r){var s=ca();r=void 0===r?null:r;var i=s.memoizedState.inst;null!==Hi&&null!==r&&ea(r,Hi.memoizedState.deps)?s.memoizedState=Ma(t,i,n,r):(qi.flags|=e,s.memoizedState=Ma(1|t,i,n,r))}function Va(e,t){Ua(8390656,8,e,t)}function Ba(e,t){za(2048,8,e,t)}function qa(e){var t=ca().memoizedState;return function(e){qi.flags|=4;var t=qi.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},qi.updateQueue=t,t.events=[e];else{var n=t.events;null===n?t.events=[e]:n.push(e)}}({ref:t,nextImpl:e}),function(){if(0!==(2&mc))throw Error(a(440));return t.impl.apply(void 0,arguments)}}function Ha(e,t){return za(4,2,e,t)}function Wa(e,t){return za(4,4,e,t)}function Ka(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Ga(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,za(4,4,Ka.bind(null,t,e),n)}function Qa(){}function Ya(e,t){var n=ca();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&ea(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xa(e,t){var n=ca();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&ea(t,r[1]))return r[0];if(r=e(),Qi){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r}function Ja(e,t,n){return void 0===n||0!==(1073741824&Bi)&&0===(261930&yc)?e.memoizedState=t:(e.memoizedState=n,e=Qc(),qi.lanes|=e,Ec|=e,n)}function $a(e,t,n,r){return $n(n,t)?n:null!==Ci.current?(e=Ja(e,n,r),$n(e,t)||(Do=!0),e):0===(42&Bi)||0!==(1073741824&Bi)&&0===(261930&yc)?(Do=!0,e.memoizedState=n):(e=Qc(),qi.lanes|=e,Ec|=e,t)}function Za(e,t,n,r,s){var i=O.p;O.p=0!==i&&8>i?i:8;var a=D.T,o={};D.T=o,ho(e,!1,t,n);try{var l=s(),c=D.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)uo(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Gc());else uo(e,t,r,Gc())}catch(u){uo(e,t,{then:function(){},status:"rejected",reason:u},Gc())}finally{O.p=i,null!==a&&null!==o.types&&(a.types=o.types),D.T=a}}function eo(){}function to(e,t,n,r){if(5!==e.tag)throw Error(a(476));var s=no(e).queue;Za(e,s,t,L,null===n?eo:function(){return ro(e),n(r)})}function no(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:L},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fa,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function ro(e){var t=no(e);null===t.next&&(t=e.alternate.memoizedState),uo(e,t.next.queue,{},Gc())}function so(){return Rs(dh)}function io(){return ca().memoizedState}function ao(){return ca().memoizedState}function oo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Gc(),r=xi(t,e=bi(n),n);return null!==r&&(Yc(r,t,n),wi(r,t,n)),t={cache:zs()},void(e.payload=t)}t=t.return}}function lo(e,t,n){var r=Gc();n={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},fo(e)?mo(t,n):null!==(n=Pr(e,t,n,r))&&(Yc(n,e,r),po(n,t,r))}function co(e,t,n){uo(e,t,n,Gc())}function uo(e,t,n,r){var s={lane:r,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(fo(e))mo(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,$n(o,a))return Ir(e,t,s,0),null===pc&&Tr(),!1}catch(l){}if(null!==(n=Pr(e,t,s,r)))return Yc(n,e,r),po(n,t,r),!0}return!1}function ho(e,t,n,r){if(r={lane:2,revertLane:qu(),gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},fo(e)){if(t)throw Error(a(479))}else null!==(t=Pr(e,n,r,2))&&Yc(t,e,2)}function fo(e){var t=e.alternate;return e===qi||null!==t&&t===qi}function mo(e,t){Gi=Ki=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function po(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,De(e,n)}}var go={readContext:Rs,use:da,useCallback:Zi,useContext:Zi,useEffect:Zi,useImperativeHandle:Zi,useLayoutEffect:Zi,useInsertionEffect:Zi,useMemo:Zi,useReducer:Zi,useRef:Zi,useState:Zi,useDebugValue:Zi,useDeferredValue:Zi,useTransition:Zi,useSyncExternalStore:Zi,useId:Zi,useHostTransitionStatus:Zi,useFormState:Zi,useActionState:Zi,useOptimistic:Zi,useMemoCache:Zi,useCacheRefresh:Zi};go.useEffectEvent=Zi;var yo={readContext:Rs,use:da,useCallback:function(e,t){return la().memoizedState=[e,void 0===t?null:t],e},useContext:Rs,useEffect:Va,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,Ua(4194308,4,Ka.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ua(4194308,4,e,t)},useInsertionEffect:function(e,t){Ua(4,2,e,t)},useMemo:function(e,t){var n=la();t=void 0===t?null:t;var r=e();if(Qi){be(!0);try{e()}finally{be(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=la();if(void 0!==n){var s=n(t);if(Qi){be(!0);try{n(t)}finally{be(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=lo.bind(null,qi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},la().memoizedState=e},useState:function(e){var t=(e=Sa(e)).queue,n=co.bind(null,qi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Qa,useDeferredValue:function(e,t){return Ja(la(),e,t)},useTransition:function(){var e=Sa(!1);return e=Za.bind(null,qi,e.queue,!0,!1),la().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=qi,s=la();if(hs){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===pc)throw Error(a(349));0!==(127&yc)||va(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,Va(xa.bind(null,r,i,e),[e]),r.flags|=2048,Ma(9,{destroy:void 0},ba.bind(null,r,i,n,t),null),n},useId:function(){var e=la(),t=pc.identifierPrefix;if(hs){var n=ss;t="_"+t+"R_"+(n=(rs&~(1<<32-xe(rs)-1)).toString(32)+n),0<(n=Yi++)&&(t+="H"+n.toString(32)),t+="_"}else t="_"+t+"r_"+(n=$i++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:so,useFormState:Pa,useActionState:Pa,useOptimistic:function(e){var t=la();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=ho.bind(null,qi,!0,n),n.dispatch=t,[e,t]},useMemoCache:ha,useCacheRefresh:function(){return la().memoizedState=oo.bind(null,qi)},useEffectEvent:function(e){var t=la(),n={impl:e};return t.memoizedState=n,function(){if(0!==(2&mc))throw Error(a(440));return n.impl.apply(void 0,arguments)}}},vo={readContext:Rs,use:da,useCallback:Ya,useContext:Rs,useEffect:Ba,useImperativeHandle:Ga,useInsertionEffect:Ha,useLayoutEffect:Wa,useMemo:Xa,useReducer:ma,useRef:Fa,useState:function(){return ma(fa)},useDebugValue:Qa,useDeferredValue:function(e,t){return $a(ca(),Hi.memoizedState,e,t)},useTransition:function(){var e=ma(fa)[0],t=ca().memoizedState;return["boolean"===typeof e?e:ua(e),t]},useSyncExternalStore:ya,useId:io,useHostTransitionStatus:so,useFormState:Ra,useActionState:Ra,useOptimistic:function(e,t){return ka(ca(),0,e,t)},useMemoCache:ha,useCacheRefresh:ao};vo.useEffectEvent=qa;var bo={readContext:Rs,use:da,useCallback:Ya,useContext:Rs,useEffect:Ba,useImperativeHandle:Ga,useInsertionEffect:Ha,useLayoutEffect:Wa,useMemo:Xa,useReducer:ga,useRef:Fa,useState:function(){return ga(fa)},useDebugValue:Qa,useDeferredValue:function(e,t){var n=ca();return null===Hi?Ja(n,e,t):$a(n,Hi.memoizedState,e,t)},useTransition:function(){var e=ga(fa)[0],t=ca().memoizedState;return["boolean"===typeof e?e:ua(e),t]},useSyncExternalStore:ya,useId:io,useHostTransitionStatus:so,useFormState:La,useActionState:La,useOptimistic:function(e,t){var n=ca();return null!==Hi?ka(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:ha,useCacheRefresh:ao};function xo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:f({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}bo.useEffectEvent=qa;var wo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Gc(),s=bi(r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=xi(e,s,r))&&(Yc(t,e,r),wi(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Gc(),s=bi(r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=xi(e,s,r))&&(Yc(t,e,r),wi(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Gc(),r=bi(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=xi(e,r,n))&&(Yc(t,e,n),wi(t,e,n))}};function No(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!Zn(n,r)||!Zn(s,i))}function So(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&wo.enqueueReplaceState(t,t.state,null)}function ko(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var s in n===t&&(n=f({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}function Eo(e){_r(e)}function _o(e){console.error(e)}function Ao(e){_r(e)}function Co(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function jo(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function To(e,t,n){return(n=bi(n)).tag=3,n.payload={element:null},n.callback=function(){Co(e,t)},n}function Io(e){return(e=bi(e)).tag=3,e}function Po(e,t,n,r){var s=n.type.getDerivedStateFromError;if("function"===typeof s){var i=r.value;e.payload=function(){return s(i)},e.callback=function(){jo(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){jo(t,n,r),"function"!==typeof s&&(null===Mc?Mc=new Set([this]):Mc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var Ro=Error(a(461)),Do=!1;function Oo(e,t,n,r){t.child=null===e?pi(t,null,n,r):mi(t,e.child,n,r)}function Lo(e,t,n,r,s){n=n.render;var i=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return Ps(t),r=ta(e,t,n,a,i,s),o=ia(),null===e||Do?(hs&&o&&os(t),t.flags|=1,Oo(e,t,r,s),t.child):(aa(e,t,s),il(e,t,s))}function Mo(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||zr(i)||void 0!==i.defaultProps||null!==n.compare?((e=qr(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Fo(e,t,i,r,s))}if(i=e.child,!al(e,s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:Zn)(a,r)&&e.ref===t.ref)return il(e,t,s)}return t.flags|=1,(e=Vr(i,r)).ref=t.ref,e.return=t,t.child=e}function Fo(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(Zn(i,r)&&e.ref===t.ref){if(Do=!1,t.pendingProps=r=i,!al(e,s))return t.lanes=e.lanes,il(e,t,s);0!==(131072&e.flags)&&(Do=!0)}}return Wo(e,t,n,r,s)}function Uo(e,t,n,r){var s=r.children,i=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===r.mode){if(0!==(128&t.flags)){if(i=null!==i?i.baseLanes|n:n,null!==e){for(r=t.child=e.child,s=0;null!==r;)s=s|r.lanes|r.childLanes,r=r.sibling;r=s&~i}else r=0,t.child=null;return Vo(e,t,i,n,r)}if(0===(536870912&n))return r=t.lanes=536870912,Vo(e,t,null!==i?i.baseLanes|n:n,n,r);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Xs(0,null!==i?i.cachePool:null),null!==i?Ti(t,i):Ii(),Mi(t)}else null!==i?(Xs(0,i.cachePool),Ti(t,i),Fi(),t.memoizedState=null):(null!==e&&Xs(0,null),Ii(),Fi());return Oo(e,t,s,n),t.child}function zo(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Vo(e,t,n,r,s){var i=Ys();return i=null===i?null:{parent:Us._currentValue,pool:i},t.memoizedState={baseLanes:n,cachePool:i},null!==e&&Xs(0,null),Ii(),Mi(t),null!==e&&Ts(e,t,r,!0),t.childLanes=s,null}function Bo(e,t){return(t=el({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function qo(e,t,n){return mi(t,e.child,null,n),(e=Bo(t,t.pendingProps)).flags|=2,Ui(t),t.memoizedState=null,e}function Ho(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Wo(e,t,n,r,s){return Ps(t),n=ta(e,t,n,r,void 0,s),r=ia(),null===e||Do?(hs&&r&&os(t),t.flags|=1,Oo(e,t,n,s),t.child):(aa(e,t,s),il(e,t,s))}function Ko(e,t,n,r,s,i){return Ps(t),t.updateQueue=null,n=ra(t,r,n,s),na(e),r=ia(),null===e||Do?(hs&&r&&os(t),t.flags|=1,Oo(e,t,n,i),t.child):(aa(e,t,i),il(e,t,i))}function Go(e,t,n,r,s){if(Ps(t),null===t.stateNode){var i=Mr,a=n.contextType;"object"===typeof a&&null!==a&&(i=Rs(a)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=wo,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},yi(t),a=n.contextType,i.context="object"===typeof a&&null!==a?Rs(a):Mr,i.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(xo(t,n,a,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(a=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),a!==i.state&&wo.enqueueReplaceState(i,i.state,null),Ei(t,r,i,s),ki(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var o=t.memoizedProps,l=ko(n,o);i.props=l;var c=i.context,u=n.contextType;a=Mr,"object"===typeof u&&null!==u&&(a=Rs(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o||c!==a)&&So(t,i,r,a),gi=!1;var h=t.memoizedState;i.state=h,Ei(t,r,i,s),ki(),c=t.memoizedState,o||h!==c||gi?("function"===typeof d&&(xo(t,n,d,r),c=t.memoizedState),(l=gi||No(t,n,l,r,h,c,a))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=a,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,vi(e,t),u=ko(n,a=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=n.contextType,l=Mr,"object"===typeof c&&null!==c&&(l=Rs(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==d||h!==l)&&So(t,i,r,l),gi=!1,h=t.memoizedState,i.state=h,Ei(t,r,i,s),ki();var f=t.memoizedState;a!==d||h!==f||gi||null!==e&&null!==e.dependencies&&Is(e.dependencies)?("function"===typeof o&&(xo(t,n,o,r),f=t.memoizedState),(u=gi||No(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&Is(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=l,r=u):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Ho(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=mi(t,e.child,null,s),t.child=mi(t,null,n,s)):Oo(e,t,n,s),t.memoizedState=i.state,e=t.child):e=il(e,t,s),e}function Qo(e,t,n,r){return xs(),t.flags|=256,Oo(e,t,n,r),t.child}var Yo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Xo(e){return{baseLanes:e,cachePool:Js()}}function Jo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=Cc),e}function $o(e,t,n){var r,s=t.pendingProps,i=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&zi.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(hs){if(i?Oi(t):Fi(),(e=ds)?null!==(e=null!==(e=Id(e,ms))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ns?{id:rs,overflow:ss}:null,retryLane:536870912,hydrationErrors:null},(n=Kr(e)).return=t,t.child=n,us=t,ds=null):e=null,null===e)throw gs(t);return Rd(e)?t.lanes=32:t.lanes=536870912,null}var l=s.children;return s=s.fallback,i?(Fi(),l=el({mode:"hidden",children:l},i=t.mode),s=Hr(s,i,n,null),l.return=t,s.return=t,l.sibling=s,t.child=l,(s=t.child).memoizedState=Xo(n),s.childLanes=Jo(e,r,n),t.memoizedState=Yo,zo(null,s)):(Oi(t),Zo(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(o)256&t.flags?(Oi(t),t.flags&=-257,t=tl(e,t,n)):null!==t.memoizedState?(Fi(),t.child=e.child,t.flags|=128,t=null):(Fi(),l=s.fallback,i=t.mode,s=el({mode:"visible",children:s.children},i),(l=Hr(l,i,n,null)).flags|=2,s.return=t,l.return=t,s.sibling=l,t.child=s,mi(t,e.child,null,n),(s=t.child).memoizedState=Xo(n),s.childLanes=Jo(e,r,n),t.memoizedState=Yo,t=zo(null,s));else if(Oi(t),Rd(l)){if(r=l.nextSibling&&l.nextSibling.dataset)var u=r.dgst;r=u,(s=Error(a(419))).stack="",s.digest=r,Ns({value:s,source:null,stack:null}),t=tl(e,t,n)}else if(Do||Ts(e,t,n,!1),r=0!==(n&e.childLanes),Do||r){if(null!==(r=pc)&&(0!==(s=Oe(r,n))&&s!==c.retryLane))throw c.retryLane=s,Rr(e,s),Yc(r,e,s),Ro;Pd(l)||ou(),t=tl(e,t,n)}else Pd(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,ds=Dd(l.nextSibling),us=t,hs=!0,fs=null,ms=!1,null!==e&&cs(t,e),(t=Zo(t,s.children)).flags|=4096);return t}return i?(Fi(),l=s.fallback,i=t.mode,u=(c=e.child).sibling,(s=Vr(c,{mode:"hidden",children:s.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=Vr(u,l):(l=Hr(l,i,n,null)).flags|=2,l.return=t,s.return=t,s.sibling=l,t.child=s,zo(null,s),s=t.child,null===(l=e.child.memoizedState)?l=Xo(n):(null!==(i=l.cachePool)?(c=Us._currentValue,i=i.parent!==c?{parent:c,pool:c}:i):i=Js(),l={baseLanes:l.baseLanes|n,cachePool:i}),s.memoizedState=l,s.childLanes=Jo(e,r,n),t.memoizedState=Yo,zo(e.child,s)):(Oi(t),e=(n=e.child).sibling,(n=Vr(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Zo(e,t){return(t=el({mode:"visible",children:t},e.mode)).return=e,e.child=t}function el(e,t){return(e=Ur(22,e,null,t)).lanes=0,e}function tl(e,t,n){return mi(t,e.child,null,n),(e=Zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function nl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Cs(e.return,t,n)}function rl(e,t,n,r,s,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s,treeForkCount:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s,a.treeForkCount=i)}function sl(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;r=r.children;var a=zi.current,o=0!==(2&a);if(o?(a=1&a|2,t.flags|=128):a&=1,V(zi,a),Oo(e,t,r,n),r=hs?Zr:0,!o&&null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nl(e,n,t);else if(19===e.tag)nl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===Vi(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),rl(t,!1,s,n,i,r);break;case"backwards":case"unstable_legacy-backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===Vi(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}rl(t,!0,n,null,i,r);break;case"together":rl(t,!1,null,null,void 0,r);break;default:t.memoizedState=null}return t.child}function il(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ec|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ts(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Vr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Vr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function al(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Is(e))}function ol(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Do=!0;else{if(!al(e,n)&&0===(128&t.flags))return Do=!1,function(e,t,n){switch(t.tag){case 3:Q(t,t.stateNode.containerInfo),_s(0,Us,e.memoizedState.cache),xs();break;case 27:case 5:X(t);break;case 4:Q(t,t.stateNode.containerInfo);break;case 10:_s(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,Li(t),null;break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(Oi(t),t.flags|=128,null):0!==(n&t.child.childLanes)?$o(e,t,n):(Oi(t),null!==(e=il(e,t,n))?e.sibling:null);Oi(t);break;case 19:var s=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ts(e,t,n,!1),r=0!==(n&t.childLanes)),s){if(r)return sl(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),V(zi,zi.current),r)break;return null;case 22:return t.lanes=0,Uo(e,t,n,t.pendingProps);case 24:_s(0,Us,e.memoizedState.cache)}return il(e,t,n)}(e,t,n);Do=0!==(131072&e.flags)}else Do=!1,hs&&0!==(1048576&t.flags)&&as(t,Zr,t.index);switch(t.lanes=0,t.tag){case 16:e:{var r=t.pendingProps;if(e=si(t.elementType),t.type=e,"function"!==typeof e){if(void 0!==e&&null!==e){var s=e.$$typeof;if(s===N){t.tag=11,t=Lo(null,t,e,r,n);break e}if(s===E){t.tag=14,t=Mo(null,t,e,r,n);break e}}throw t=P(e)||e,Error(a(306,t,""))}zr(e)?(r=ko(e,r),t.tag=1,t=Go(null,t,e,r,n)):(t.tag=0,t=Wo(null,t,e,r,n))}return t;case 0:return Wo(e,t,t.type,t.pendingProps,n);case 1:return Go(e,t,r=t.type,s=ko(r,t.pendingProps),n);case 3:e:{if(Q(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var i=t.memoizedState;s=i.element,vi(e,t),Ei(t,r,null,n);var o=t.memoizedState;if(r=o.cache,_s(0,Us,r),r!==i.cache&&js(t,[Us],n,!0),ki(),r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Qo(e,t,r,n);break e}if(r!==s){Ns(s=Yr(Error(a(424)),t)),t=Qo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ds=Dd(e.firstChild),us=t,hs=!0,fs=null,ms=!0,n=pi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(xs(),r===s){t=il(e,t,n);break e}Oo(e,t,r,n)}t=t.child}return t;case 26:return Ho(e,t),null===e?(n=Kd(t.type,null,t.pendingProps,null))?t.memoizedState=n:hs||(n=t.type,e=t.pendingProps,(r=yd(K.current).createElement(n))[Ve]=t,r[Be]=e,fd(r,n,e),et(r),t.stateNode=r):t.memoizedState=Kd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return X(t),null===e&&hs&&(r=t.stateNode=Fd(t.type,t.pendingProps,K.current),us=t,ms=!0,s=ds,Ad(t.type)?(Od=s,ds=Dd(r.firstChild)):ds=s),Oo(e,t,t.pendingProps.children,n),Ho(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&hs&&((s=r=ds)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Qe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===i)return e}if(null===(e=Dd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,ms))?(t.stateNode=r,us=t,ds=Dd(r.firstChild),ms=!1,s=!0):s=!1),s||gs(t)),X(t),s=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,r=i.children,xd(s,i)?r=null:null!==o&&xd(s,o)&&(t.flags|=32),null!==t.memoizedState&&(s=ta(e,t,sa,null,null,n),dh._currentValue=s),Ho(e,t),Oo(e,t,r,n),t.child;case 6:return null===e&&hs&&((e=n=ds)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=Dd(e.nextSibling)))return null}return e}(n,t.pendingProps,ms))?(t.stateNode=n,us=t,ds=null,e=!0):e=!1),e||gs(t)),null;case 13:return $o(e,t,n);case 4:return Q(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=mi(t,null,r,n):Oo(e,t,r,n),t.child;case 11:return Lo(e,t,t.type,t.pendingProps,n);case 7:return Oo(e,t,t.pendingProps,n),t.child;case 8:case 12:return Oo(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,_s(0,t.type,r.value),Oo(e,t,r.children,n),t.child;case 9:return s=t.type._context,r=t.pendingProps.children,Ps(t),r=r(s=Rs(s)),t.flags|=1,Oo(e,t,r,n),t.child;case 14:return Mo(e,t,t.type,t.pendingProps,n);case 15:return Fo(e,t,t.type,t.pendingProps,n);case 19:return sl(e,t,n);case 31:return function(e,t,n){var r=t.pendingProps,s=0!==(128&t.flags);if(t.flags&=-129,null===e){if(hs){if("hidden"===r.mode)return e=Bo(t,r),t.lanes=536870912,zo(null,e);if(Li(t),(e=ds)?null!==(e=null!==(e=Id(e,ms))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ns?{id:rs,overflow:ss}:null,retryLane:536870912,hydrationErrors:null},(n=Kr(e)).return=t,t.child=n,us=t,ds=null):e=null,null===e)throw gs(t);return t.lanes=536870912,null}return Bo(t,r)}var i=e.memoizedState;if(null!==i){var o=i.dehydrated;if(Li(t),s)if(256&t.flags)t.flags&=-257,t=qo(e,t,n);else{if(null===t.memoizedState)throw Error(a(558));t.child=e.child,t.flags|=128,t=null}else if(Do||Ts(e,t,n,!1),s=0!==(n&e.childLanes),Do||s){if(null!==(r=pc)&&0!==(o=Oe(r,n))&&o!==i.retryLane)throw i.retryLane=o,Rr(e,o),Yc(r,e,o),Ro;ou(),t=qo(e,t,n)}else e=i.treeContext,ds=Dd(o.nextSibling),us=t,hs=!0,fs=null,ms=!1,null!==e&&cs(t,e),(t=Bo(t,r)).flags|=4096;return t}return(e=Vr(e.child,{mode:r.mode,children:r.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,n);case 22:return Uo(e,t,n,t.pendingProps);case 24:return Ps(t),r=Rs(Us),null===e?(null===(s=Ys())&&(s=pc,i=zs(),s.pooledCache=i,i.refCount++,null!==i&&(s.pooledCacheLanes|=n),s=i),t.memoizedState={parent:r,cache:s},yi(t),_s(0,Us,s)):(0!==(e.lanes&n)&&(vi(e,t),Ei(t,null,null,n),ki()),s=e.memoizedState,i=t.memoizedState,s.parent!==r?(s={parent:r,cache:r},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),_s(0,Us,r)):(r=i.cache,_s(0,Us,r),r!==s.cache&&js(t,[Us],n,!0))),Oo(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function ll(e){e.flags|=4}function cl(e,t,n,r,s){if((t=0!==(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&s)===s)if(e.stateNode.complete)e.flags|=8192;else{if(!su())throw ii=ti,Zs;e.flags|=8192}}else e.flags&=-16777217}function ul(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!ih(t)){if(!su())throw ii=ti,Zs;e.flags|=8192}}function dl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Te():536870912,e.lanes|=t,jc|=t)}function hl(e,t){if(!hs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function fl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=65011712&s.subtreeFlags,r|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function ml(e,t,n){var r=t.pendingProps;switch(ls(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return fl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),As(Us),Y(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(bs(t)?ll(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,ws())),fl(t),null;case 26:var s=t.type,i=t.memoizedState;return null===e?(ll(t),null!==i?(fl(t),ul(t,i)):(fl(t),cl(t,s,0,0,n))):i?i!==e.memoizedState?(ll(t),fl(t),ul(t,i)):(fl(t),t.flags&=-16777217):((e=e.memoizedProps)!==r&&ll(t),fl(t),cl(t,s,0,0,n)),null;case 27:if(J(t),n=K.current,s=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return fl(t),null}e=H.current,bs(t)?ys(t):(e=Fd(s,r,n),t.stateNode=e,ll(t))}return fl(t),null;case 5:if(J(t),s=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return fl(t),null}if(i=H.current,bs(t))ys(t);else{var o=yd(K.current);switch(i){case 1:i=o.createElementNS("http://www.w3.org/2000/svg",s);break;case 2:i=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;default:switch(s){case"svg":i=o.createElementNS("http://www.w3.org/2000/svg",s);break;case"math":i=o.createElementNS("http://www.w3.org/1998/Math/MathML",s);break;case"script":(i=o.createElement("div")).innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i="string"===typeof r.is?o.createElement("select",{is:r.is}):o.createElement("select"),r.multiple?i.multiple=!0:r.size&&(i.size=r.size);break;default:i="string"===typeof r.is?o.createElement(s,{is:r.is}):o.createElement(s)}}i[Ve]=t,i[Be]=r;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)i.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=i;e:switch(fd(i,s,r),s){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}r&&ll(t)}}return fl(t),cl(t,t.type,null===e||e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&ll(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=K.current,bs(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(s=us))switch(s.tag){case 27:case 5:r=s.memoizedProps}e[Ve]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||ud(e.nodeValue,n)))||gs(t,!0)}else(e=yd(e).createTextNode(r))[Ve]=t,t.stateNode=e}return fl(t),null;case 31:if(n=t.memoizedState,null===e||null!==e.memoizedState){if(r=bs(t),null!==n){if(null===e){if(!r)throw Error(a(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(a(557));e[Ve]=t}else xs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fl(t),e=!1}else n=ws(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return 256&t.flags?(Ui(t),t):(Ui(t),null);if(0!==(128&t.flags))throw Error(a(558))}return fl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=bs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[Ve]=t}else xs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fl(t),s=!1}else s=ws(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(Ui(t),t):(Ui(t),null)}return Ui(t),0!==(128&t.flags)?(t.lanes=n,t):(n=null!==r,e=null!==e&&null!==e.memoizedState,n&&(s=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(s=r.alternate.memoizedState.cachePool.pool),i=null,null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==s&&(r.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),dl(t,t.updateQueue),fl(t),null);case 4:return Y(),null===e&&ed(t.stateNode.containerInfo),fl(t),null;case 10:return As(t.type),fl(t),null;case 19:if(z(zi),null===(r=t.memoizedState))return fl(t),null;if(s=0!==(128&t.flags),null===(i=r.rendering))if(s)hl(r,!1);else{if(0!==kc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=Vi(e))){for(t.flags|=128,hl(r,!1),e=i.updateQueue,t.updateQueue=e,dl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Br(n,e),n=n.sibling;return V(zi,1&zi.current|2),hs&&is(t,r.treeForkCount),t.child}e=e.sibling}null!==r.tail&&le()>Oc&&(t.flags|=128,s=!0,hl(r,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=Vi(i))){if(t.flags|=128,s=!0,e=e.updateQueue,t.updateQueue=e,dl(t,e),hl(r,!0),null===r.tail&&"hidden"===r.tailMode&&!i.alternate&&!hs)return fl(t),null}else 2*le()-r.renderingStartTime>Oc&&536870912!==n&&(t.flags|=128,s=!0,hl(r,!1),t.lanes=4194304);r.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=r.last)?e.sibling=i:t.child=i,r.last=i)}return null!==r.tail?(e=r.tail,r.rendering=e,r.tail=e.sibling,r.renderingStartTime=le(),e.sibling=null,n=zi.current,V(zi,s?1&n|2:1&n),hs&&is(t,r.treeForkCount),e):(fl(t),null);case 22:case 23:return Ui(t),Pi(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(fl(t),6&t.subtreeFlags&&(t.flags|=8192)):fl(t),null!==(n=t.updateQueue)&&dl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&z(Qs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),As(Us),fl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function pl(e,t){switch(ls(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return As(Us),Y(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return J(t),null;case 31:if(null!==t.memoizedState){if(Ui(t),null===t.alternate)throw Error(a(340));xs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Ui(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));xs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return z(zi),null;case 4:return Y(),null;case 10:return As(t.type),null;case 22:case 23:return Ui(t),Pi(),null!==e&&z(Qs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return As(Us),null;default:return null}}function gl(e,t){switch(ls(t),t.tag){case 3:As(Us),Y();break;case 26:case 27:case 5:J(t);break;case 4:Y();break;case 31:null!==t.memoizedState&&Ui(t);break;case 13:Ui(t);break;case 19:z(zi);break;case 10:As(t.type);break;case 22:case 23:Ui(t),Pi(),null!==e&&z(Qs);break;case 24:As(Us)}}function yl(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var i=n.create,a=n.inst;r=i(),a.destroy=r}n=n.next}while(n!==s)}}catch(o){ku(t,t.return,o)}}function vl(e,t,n){try{var r=t.updateQueue,s=null!==r?r.lastEffect:null;if(null!==s){var i=s.next;r=i;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,s=t;var l=n,c=o;try{c()}catch(u){ku(s,l,u)}}}r=r.next}while(r!==i)}}catch(u){ku(t,t.return,u)}}function bl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{Ai(t,n)}catch(r){ku(e,e.return,r)}}}function xl(e,t,n){n.props=ko(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){ku(e,t,r)}}function wl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(s){ku(e,t,s)}}function Nl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(s){ku(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){ku(e,t,i)}else n.current=null}function Sl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){ku(e,e.return,s)}}function kl(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,i=null,o=null,l=null,c=null,u=null,d=null;for(m in n){var h=n[m];if(n.hasOwnProperty(m)&&null!=h)switch(m){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(m)||dd(e,t,m,null,r,h)}}for(var f in r){var m=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=m||null!=h))switch(f){case"type":i=m;break;case"name":s=m;break;case"checked":u=m;break;case"defaultChecked":d=m;break;case"value":o=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(a(137,t));break;default:m!==h&&dd(e,t,f,m,r,h)}}return void vt(e,o,l,c,u,d,i,s);case"select":for(i in m=o=l=f=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":m=c;default:r.hasOwnProperty(i)||dd(e,t,i,null,r,c)}for(s in r)if(i=r[s],c=n[s],r.hasOwnProperty(s)&&(null!=i||null!=c))switch(s){case"value":f=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&dd(e,t,s,i,r,c)}return t=l,n=o,r=m,void(null!=f?wt(e,!!n,f,!1):!!r!==!!n&&(null!=t?wt(e,!!n,t,!0):wt(e,!!n,n?[]:"",!1)));case"textarea":for(l in m=f=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:dd(e,t,l,null,r,s)}for(o in r)if(s=r[o],i=n[o],r.hasOwnProperty(o)&&(null!=s||null!=i))switch(o){case"value":f=s;break;case"defaultValue":m=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(a(91));break;default:s!==i&&dd(e,t,o,s,r,i)}return void Nt(e,f,m);case"option":for(var p in n)if(f=n[p],n.hasOwnProperty(p)&&null!=f&&!r.hasOwnProperty(p))if("selected"===p)e.selected=!1;else dd(e,t,p,null,r,f);for(c in r)if(f=r[c],m=n[c],r.hasOwnProperty(c)&&f!==m&&(null!=f||null!=m))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else dd(e,t,c,f,r,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&dd(e,t,g,null,r,f);for(u in r)if(f=r[u],m=n[u],r.hasOwnProperty(u)&&f!==m&&(null!=f||null!=m))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:dd(e,t,u,f,r,m)}return;default:if(Ct(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&hd(e,t,y,void 0,r,f);for(d in r)f=r[d],m=n[d],!r.hasOwnProperty(d)||f===m||void 0===f&&void 0===m||hd(e,t,d,f,r,m);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&dd(e,t,v,null,r,f);for(h in r)f=r[h],m=n[h],!r.hasOwnProperty(h)||f===m||null==f&&null==m||dd(e,t,h,f,r,m)}(r,e.type,n,t),r[Be]=t}catch(s){ku(e,e.return,s)}}function El(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Ad(e.type)||4===e.tag}function _l(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||El(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Ad(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Al(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Pt));else if(4!==r&&(27===r&&Ad(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(Al(e,t,n),e=e.sibling;null!==e;)Al(e,t,n),e=e.sibling}function Cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&Ad(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(Cl(e,t,n),e=e.sibling;null!==e;)Cl(e,t,n),e=e.sibling}function jl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);fd(t,r,n),t[Ve]=e,t[Be]=n}catch(i){ku(e,e.return,i)}}var Tl=!1,Il=!1,Pl=!1,Rl="function"===typeof WeakSet?WeakSet:Set,Dl=null;function Ol(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Yl(e,n),4&r&&yl(5,n);break;case 1:if(Yl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){ku(n,n.return,a)}else{var s=ko(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){ku(n,n.return,o)}}64&r&&bl(n),512&r&&wl(n,n.return);break;case 3:if(Yl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{Ai(e,t)}catch(a){ku(n,n.return,a)}}break;case 27:null===t&&4&r&&jl(n);case 26:case 5:Yl(e,n),null===t&&4&r&&Sl(n),512&r&&wl(n,n.return);break;case 12:Yl(e,n);break;case 31:Yl(e,n),4&r&&Vl(e,n);break;case 13:Yl(e,n),4&r&&Bl(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=Cu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||Tl)){t=null!==t&&null!==t.memoizedState||Il,s=Tl;var i=Il;Tl=r,(Il=t)&&!i?Jl(e,n,0!==(8772&n.subtreeFlags)):Yl(e,n),Tl=s,Il=i}break;case 30:break;default:Yl(e,n)}}function Ll(e){var t=e.alternate;null!==t&&(e.alternate=null,Ll(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ye(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Ml=null,Fl=!1;function Ul(e,t,n){for(n=n.child;null!==n;)zl(e,t,n),n=n.sibling}function zl(e,t,n){if(ve&&"function"===typeof ve.onCommitFiberUnmount)try{ve.onCommitFiberUnmount(ye,n)}catch(i){}switch(n.tag){case 26:Il||Nl(n,t),Ul(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:Il||Nl(n,t);var r=Ml,s=Fl;Ad(n.type)&&(Ml=n.stateNode,Fl=!1),Ul(e,t,n),Ud(n.stateNode),Ml=r,Fl=s;break;case 5:Il||Nl(n,t);case 6:if(r=Ml,s=Fl,Ml=null,Ul(e,t,n),Fl=s,null!==(Ml=r))if(Fl)try{(9===Ml.nodeType?Ml.body:"HTML"===Ml.nodeName?Ml.ownerDocument.body:Ml).removeChild(n.stateNode)}catch(a){ku(n,t,a)}else try{Ml.removeChild(n.stateNode)}catch(a){ku(n,t,a)}break;case 18:null!==Ml&&(Fl?(Cd(9===(e=Ml).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Wh(e)):Cd(Ml,n.stateNode));break;case 4:r=Ml,s=Fl,Ml=n.stateNode.containerInfo,Fl=!0,Ul(e,t,n),Ml=r,Fl=s;break;case 0:case 11:case 14:case 15:vl(2,n,t),Il||vl(4,n,t),Ul(e,t,n);break;case 1:Il||(Nl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&xl(n,t,r)),Ul(e,t,n);break;case 21:Ul(e,t,n);break;case 22:Il=(r=Il)||null!==n.memoizedState,Ul(e,t,n),Il=r;break;default:Ul(e,t,n)}}function Vl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Wh(e)}catch(n){ku(t,t.return,n)}}}function Bl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Wh(e)}catch(n){ku(t,t.return,n)}}function ql(e,t){var n=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Rl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Rl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){if(!n.has(t)){n.add(t);var r=ju.bind(null,e,t);t.then(r,r)}})}function Hl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r],i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(Ad(l.type)){Ml=l.stateNode,Fl=!1;break e}break;case 5:Ml=l.stateNode,Fl=!1;break e;case 3:case 4:Ml=l.stateNode.containerInfo,Fl=!0;break e}l=l.return}if(null===Ml)throw Error(a(160));zl(i,o,s),Ml=null,Fl=!1,null!==(i=s.alternate)&&(i.return=null),s.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Kl(t,e),t=t.sibling}var Wl=null;function Kl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Hl(t,e),Gl(e),4&r&&(vl(3,e,e.return),yl(3,e),vl(5,e,e.return));break;case 1:Hl(t,e),Gl(e),512&r&&(Il||null===n||Nl(n,n.return)),64&r&&Tl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var s=Wl;if(Hl(t,e),Gl(e),512&r&&(Il||null===n||Nl(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":(!(i=s.getElementsByTagName("title")[0])||i[Qe]||i[Ve]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=s.createElement(r),s.head.insertBefore(i,s.querySelector("head > title"))),fd(i,r,n),i[Ve]=e,et(i),r=i;break e;case"link":var o=rh("link","href",s).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((i=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}fd(i=s.createElement(r),r,n),s.head.appendChild(i);break;case"meta":if(o=rh("meta","content",s).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((i=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}fd(i=s.createElement(r),r,n),s.head.appendChild(i);break;default:throw Error(a(468,r))}i[Ve]=e,et(i),r=i}e.stateNode=r}else sh(s,e.type,e.stateNode);else e.stateNode=$d(s,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?sh(s,e.type,e.stateNode):$d(s,r,e.memoizedProps)):null===r&&null!==e.stateNode&&kl(e,e.memoizedProps,n.memoizedProps)}break;case 27:Hl(t,e),Gl(e),512&r&&(Il||null===n||Nl(n,n.return)),null!==n&&4&r&&kl(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Hl(t,e),Gl(e),512&r&&(Il||null===n||Nl(n,n.return)),32&e.flags){s=e.stateNode;try{kt(s,"")}catch(p){ku(e,e.return,p)}}4&r&&null!=e.stateNode&&kl(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&r&&(Pl=!0);break;case 6:if(Hl(t,e),Gl(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(p){ku(e,e.return,p)}}break;case 3:if(nh=null,s=Wl,Wl=Bd(t.containerInfo),Hl(t,e),Wl=s,Gl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Wh(t.containerInfo)}catch(p){ku(e,e.return,p)}Pl&&(Pl=!1,Ql(e));break;case 4:r=Wl,Wl=Bd(e.stateNode.containerInfo),Hl(t,e),Gl(e),Wl=r;break;case 12:default:Hl(t,e),Gl(e);break;case 31:case 19:Hl(t,e),Gl(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,ql(e,r)));break;case 13:Hl(t,e),Gl(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Rc=le()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,ql(e,r)));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=Tl,d=Il;if(Tl=u||s,Il=d||c,Hl(t,e),Il=d,Tl=u,Gl(e),8192&r)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||Tl||Il||Xl(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,s)"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(p){ku(c,c.return,p)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(p){ku(c,c.return,p)}}}else if(18===t.tag){if(null===n){c=t;try{var m=c.stateNode;s?jd(m,!0):jd(c.stateNode,!1)}catch(p){ku(c,c.return,p)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,ql(e,n))));case 30:case 21:}}function Gl(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(El(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var s=n.stateNode;Cl(e,_l(e),s);break;case 5:var i=n.stateNode;32&n.flags&&(kt(i,""),n.flags&=-33),Cl(e,_l(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;Al(e,_l(e),o);break;default:throw Error(a(161))}}catch(l){ku(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ql(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ql(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Yl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Ol(e,t.alternate,t),t=t.sibling}function Xl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:vl(4,t,t.return),Xl(t);break;case 1:Nl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&xl(t,t.return,n),Xl(t);break;case 27:Ud(t.stateNode);case 26:case 5:Nl(t,t.return),Xl(t);break;case 22:null===t.memoizedState&&Xl(t);break;default:Xl(t)}e=e.sibling}}function Jl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,s=e,i=t,a=i.flags;switch(i.tag){case 0:case 11:case 15:Jl(s,i,n),yl(4,i);break;case 1:if(Jl(s,i,n),"function"===typeof(s=(r=i).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){ku(r,r.return,c)}if(null!==(s=(r=i).updateQueue)){var o=r.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)_i(l[s],o)}catch(c){ku(r,r.return,c)}}n&&64&a&&bl(i),wl(i,i.return);break;case 27:jl(i);case 26:case 5:Jl(s,i,n),n&&null===r&&4&a&&Sl(i),wl(i,i.return);break;case 12:Jl(s,i,n);break;case 31:Jl(s,i,n),n&&4&a&&Vl(s,i);break;case 13:Jl(s,i,n),n&&4&a&&Bl(s,i);break;case 22:null===i.memoizedState&&Jl(s,i,n),wl(i,i.return);break;case 30:break;default:Jl(s,i,n)}t=t.sibling}}function $l(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Vs(n))}function Zl(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Vs(e))}function ec(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)tc(e,t,n,r),t=t.sibling}function tc(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:ec(e,t,n,r),2048&s&&yl(9,t);break;case 1:case 31:case 13:default:ec(e,t,n,r);break;case 3:ec(e,t,n,r),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Vs(e)));break;case 12:if(2048&s){ec(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,a=i.id,o=i.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){ku(t,t.return,l)}}else ec(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,a=t.alternate,null!==t.memoizedState?2&i._visibility?ec(e,t,n,r):rc(e,t):2&i._visibility?ec(e,t,n,r):(i._visibility|=2,nc(e,t,n,r,0!==(10256&t.subtreeFlags)||!1)),2048&s&&$l(a,t);break;case 24:ec(e,t,n,r),2048&s&&Zl(t.alternate,t)}}function nc(e,t,n,r,s){for(s=s&&(0!==(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var i=e,a=t,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:nc(i,a,o,l,s),yl(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?nc(i,a,o,l,s):rc(i,a):(u._visibility|=2,nc(i,a,o,l,s)),s&&2048&c&&$l(a.alternate,a);break;case 24:nc(i,a,o,l,s),s&&2048&c&&Zl(a.alternate,a);break;default:nc(i,a,o,l,s)}t=t.sibling}}function rc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:rc(n,r),2048&s&&$l(r.alternate,r);break;case 24:rc(n,r),2048&s&&Zl(r.alternate,r);break;default:rc(n,r)}t=t.sibling}}var sc=8192;function ic(e,t,n){if(e.subtreeFlags&sc)for(e=e.child;null!==e;)ac(e,t,n),e=e.sibling}function ac(e,t,n){switch(e.tag){case 26:ic(e,t,n),e.flags&sc&&null!==e.memoizedState&&function(e,t,n,r){if("stylesheet"===n.type&&("string"!==typeof r.media||!1!==matchMedia(r.media).matches)&&0===(4&n.state.loading)){if(null===n.instance){var s=Gd(r.href),i=t.querySelector(Qd(s));if(i)return null!==(t=i._p)&&"object"===typeof t&&"function"===typeof t.then&&(e.count++,e=oh.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=i,void et(i);i=t.ownerDocument||t,r=Yd(r),(s=zd.get(s))&&eh(r,s),et(i=i.createElement("link"));var a=i;a._p=new Promise(function(e,t){a.onload=e,a.onerror=t}),fd(i,"link",r),n.instance=i}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&0===(3&n.state.loading)&&(e.count++,n=oh.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}(n,Wl,e.memoizedState,e.memoizedProps);break;case 5:default:ic(e,t,n);break;case 3:case 4:var r=Wl;Wl=Bd(e.stateNode.containerInfo),ic(e,t,n),Wl=r;break;case 22:null===e.memoizedState&&(null!==(r=e.alternate)&&null!==r.memoizedState?(r=sc,sc=16777216,ic(e,t,n),sc=r):ic(e,t,n))}}function oc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function lc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Dl=r,dc(r,e)}oc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)cc(e),e=e.sibling}function cc(e){switch(e.tag){case 0:case 11:case 15:lc(e),2048&e.flags&&vl(9,e,e.return);break;case 3:case 12:default:lc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,uc(e)):lc(e)}}function uc(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];Dl=r,dc(r,e)}oc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:vl(8,t,t.return),uc(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,uc(t));break;default:uc(t)}e=e.sibling}}function dc(e,t){for(;null!==Dl;){var n=Dl;switch(n.tag){case 0:case 11:case 15:vl(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Vs(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,Dl=r;else e:for(n=e;null!==Dl;){var s=(r=Dl).sibling,i=r.return;if(Ll(r),r===n){Dl=null;break e}if(null!==s){s.return=i,Dl=s;break e}Dl=i}}}var hc={getCacheForType:function(e){var t=Rs(Us),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Rs(Us).controller.signal}},fc="function"===typeof WeakMap?WeakMap:Map,mc=0,pc=null,gc=null,yc=0,vc=0,bc=null,xc=!1,wc=!1,Nc=!1,Sc=0,kc=0,Ec=0,_c=0,Ac=0,Cc=0,jc=0,Tc=null,Ic=null,Pc=!1,Rc=0,Dc=0,Oc=1/0,Lc=null,Mc=null,Fc=0,Uc=null,zc=null,Vc=0,Bc=0,qc=null,Hc=null,Wc=0,Kc=null;function Gc(){return 0!==(2&mc)&&0!==yc?yc&-yc:null!==D.T?qu():Fe()}function Qc(){if(0===Cc)if(0===(536870912&yc)||hs){var e=ke;0===(3932160&(ke<<=1))&&(ke=262144),Cc=e}else Cc=536870912;return null!==(e=Ri.current)&&(e.flags|=32),Cc}function Yc(e,t,n){(e!==pc||2!==vc&&9!==vc)&&null===e.cancelPendingCommit||(nu(e,0),Zc(e,yc,Cc,!1)),Pe(e,n),0!==(2&mc)&&e===pc||(e===pc&&(0===(2&mc)&&(_c|=n),4===kc&&Zc(e,yc,Cc,!1)),Lu(e))}function Xc(e,t,n){if(0!==(6&mc))throw Error(a(327));for(var r=!n&&0===(127&t)&&0===(t&e.expiredLanes)||Ce(e,t),s=r?function(e,t){var n=mc;mc|=2;var r=iu(),s=au();pc!==e||yc!==t?(Lc=null,Oc=le()+500,nu(e,t)):wc=Ce(e,t);e:for(;;)try{if(0!==vc&&null!==gc){t=gc;var i=bc;t:switch(vc){case 1:vc=0,bc=null,fu(e,t,i,1);break;case 2:case 9:if(ni(i)){vc=0,bc=null,hu(t);break}t=function(){2!==vc&&9!==vc||pc!==e||(vc=7),Lu(e)},i.then(t,t);break e;case 3:vc=7;break e;case 4:vc=5;break e;case 7:ni(i)?(vc=0,bc=null,hu(t)):(vc=0,bc=null,fu(e,t,i,7));break;case 5:var o=null;switch(gc.tag){case 26:o=gc.memoizedState;case 5:case 27:var l=gc;if(o?ih(o):l.stateNode.complete){vc=0,bc=null;var c=l.sibling;if(null!==c)gc=c;else{var u=l.return;null!==u?(gc=u,mu(u)):gc=null}break t}}vc=0,bc=null,fu(e,t,i,5);break;case 6:vc=0,bc=null,fu(e,t,i,6);break;case 8:tu(),kc=6;break e;default:throw Error(a(462))}}uu();break}catch(d){ru(e,d)}return Es=ks=null,D.H=r,D.A=s,mc=n,null!==gc?0:(pc=null,yc=0,Tr(),kc)}(e,t):lu(e,t,!0),i=r;;){if(0===s){wc&&!r&&Zc(e,t,0,!1);break}if(n=e.current.alternate,!i||$c(n)){if(2===s){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;s=Tc;var c=l.current.memoizedState.isDehydrated;if(c&&(nu(l,o).flags|=256),2!==(o=lu(l,o,!1))){if(Nc&&!c){l.errorRecoveryDisabledLanes|=i,_c|=i,s=4;break e}i=Ic,Ic=s,null!==i&&(null===Ic?Ic=i:Ic.push.apply(Ic,i))}s=o}if(i=!1,2!==s)continue}}if(1===s){nu(e,0),Zc(e,t,0,!0);break}e:{switch(r=e,i=s){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:Zc(r,t,Cc,!xc);break e;case 2:Ic=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(s=Rc+300-le())){if(Zc(r,t,Cc,!xc),0!==Ae(r,0,!0))break e;Vc=t,r.timeoutHandle=Nd(Jc.bind(null,r,n,Ic,Lc,Pc,t,Cc,_c,jc,xc,i,"Throttled",-0,0),s)}else Jc(r,n,Ic,Lc,Pc,t,Cc,_c,jc,xc,i,null,-0,0)}break}s=lu(e,t,!1),i=!1}Lu(e)}function Jc(e,t,n,r,s,i,a,o,l,c,u,d,h,f){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||16785408===(16785408&d)){ac(t,i,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Pt});var m=(62914560&i)===i?Rc-le():(4194048&i)===i?Dc-le():0;if(m=function(e,t){return e.stylesheets&&0===e.count&&ch(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var r=setTimeout(function(){if(e.stylesheets&&ch(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===ah&&(ah=62500*function(){if("function"===typeof performance.getEntriesByType){for(var e=0,t=0,n=performance.getEntriesByType("resource"),r=0;r<n.length;r++){var s=n[r],i=s.transferSize,a=s.initiatorType,o=s.duration;if(i&&o&&md(a)){for(a=0,o=s.responseEnd,r+=1;r<n.length;r++){var l=n[r],c=l.startTime;if(c>o)break;var u=l.transferSize,d=l.initiatorType;u&&md(d)&&(a+=u*((l=l.responseEnd)<o?1:(o-c)/(l-c)))}if(--r,t+=8*(i+a)/(s.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,"number"===typeof e)?e:5}());var s=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&ch(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>ah?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(r),clearTimeout(s)}}:null}(d,m),null!==m)return Vc=i,e.cancelPendingCommit=m(gu.bind(null,e,t,i,n,r,s,a,o,l,u,d,null,h,f)),void Zc(e,i,a,!c)}gu(e,t,i,n,r,s,a,o,l)}function $c(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!$n(i(),s))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Zc(e,t,n,r){t&=~Ac,t&=~_c,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var i=31-xe(s),a=1<<i;r[i]=-1,s&=~a}0!==n&&Re(e,n,t)}function eu(){return 0!==(6&mc)||(Mu(0,!1),!1)}function tu(){if(null!==gc){if(0===vc)var e=gc.return;else Es=ks=null,oa(e=gc),li=null,ci=0,e=gc;for(;null!==e;)gl(e.alternate,e),e=e.return;gc=null}}function nu(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,Sd(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Vc=0,tu(),pc=e,gc=n=Vr(e.current,null),yc=t,vc=0,bc=null,xc=!1,wc=Ce(e,t),Nc=!1,jc=Cc=Ac=_c=Ec=kc=0,Ic=Tc=null,Pc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var s=31-xe(r),i=1<<s;t|=e[s],r&=~i}return Sc=t,Tr(),n}function ru(e,t){qi=null,D.H=go,t===$s||t===ei?(t=ai(),vc=3):t===Zs?(t=ai(),vc=4):vc=t===Ro?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,bc=t,null===gc&&(kc=1,Co(e,Yr(t,e.current)))}function su(){var e=Ri.current;return null===e||((4194048&yc)===yc?null===Di:((62914560&yc)===yc||0!==(536870912&yc))&&e===Di)}function iu(){var e=D.H;return D.H=go,null===e?go:e}function au(){var e=D.A;return D.A=hc,e}function ou(){kc=4,xc||(4194048&yc)!==yc&&null!==Ri.current||(wc=!0),0===(134217727&Ec)&&0===(134217727&_c)||null===pc||Zc(pc,yc,Cc,!1)}function lu(e,t,n){var r=mc;mc|=2;var s=iu(),i=au();pc===e&&yc===t||(Lc=null,nu(e,t)),t=!1;var a=kc;e:for(;;)try{if(0!==vc&&null!==gc){var o=gc,l=bc;switch(vc){case 8:tu(),a=6;break e;case 3:case 2:case 9:case 6:null===Ri.current&&(t=!0);var c=vc;if(vc=0,bc=null,fu(e,o,l,c),n&&wc){a=0;break e}break;default:c=vc,vc=0,bc=null,fu(e,o,l,c)}}cu(),a=kc;break}catch(u){ru(e,u)}return t&&e.shellSuspendCounter++,Es=ks=null,mc=r,D.H=s,D.A=i,null===gc&&(pc=null,yc=0,Tr()),a}function cu(){for(;null!==gc;)du(gc)}function uu(){for(;null!==gc&&!ae();)du(gc)}function du(e){var t=ol(e.alternate,e,Sc);e.memoizedProps=e.pendingProps,null===t?mu(e):gc=t}function hu(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Ko(n,t,t.pendingProps,t.type,void 0,yc);break;case 11:t=Ko(n,t,t.pendingProps,t.type.render,t.ref,yc);break;case 5:oa(t);default:gl(n,t),t=ol(n,t=gc=Br(t,Sc),Sc)}e.memoizedProps=e.pendingProps,null===t?mu(e):gc=t}function fu(e,t,n,r){Es=ks=null,oa(t),li=null,ci=0;var s=t.return;try{if(function(e,t,n,r,s){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ts(t,n,s,!0),null!==(n=Ri.current)){switch(n.tag){case 31:case 13:return null===Di?ou():null===n.alternate&&0===kc&&(kc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===ti?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),Eu(e,r,s)),!1;case 22:return n.flags|=65536,r===ti?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),Eu(e,r,s)),!1}throw Error(a(435,n.tag))}return Eu(e,r,s),ou(),!1}if(hs)return null!==(t=Ri.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,r!==ps&&Ns(Yr(e=Error(a(422),{cause:r}),n))):(r!==ps&&Ns(Yr(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,r=Yr(r,n),Ni(e,s=To(e.stateNode,r,s)),4!==kc&&(kc=2)),!1;var i=Error(a(520),{cause:r});if(i=Yr(i,n),null===Tc?Tc=[i]:Tc.push(i),4!==kc&&(kc=2),null===t)return!0;r=Yr(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,Ni(n,e=To(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===Mc||!Mc.has(i))))return n.flags|=65536,s&=-s,n.lanes|=s,Po(s=Io(s),e,n,r),Ni(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,yc))return kc=1,Co(e,Yr(n,e.current)),void(gc=null)}catch(i){if(null!==s)throw gc=s,i;return kc=1,Co(e,Yr(n,e.current)),void(gc=null)}32768&t.flags?(hs||1===r?e=!0:wc||0!==(536870912&yc)?e=!1:(xc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=Ri.current)&&13===r.tag&&(r.flags|=16384))),pu(t,e)):mu(t)}function mu(e){var t=e;do{if(0!==(32768&t.flags))return void pu(t,xc);e=t.return;var n=ml(t.alternate,t,Sc);if(null!==n)return void(gc=n);if(null!==(t=t.sibling))return void(gc=t);gc=t=e}while(null!==t);0===kc&&(kc=5)}function pu(e,t){do{var n=pl(e.alternate,e);if(null!==n)return n.flags&=32767,void(gc=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(gc=e);gc=e=n}while(null!==e);kc=6,gc=null}function gu(e,t,n,r,s,i,o,l,c){e.cancelPendingCommit=null;do{wu()}while(0!==Fc);if(0!==(6&mc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,s,i){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-xe(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&Re(e,r,0),0!==i&&0===s&&0!==e.tag&&(e.suspendedLanes|=i&~(a&~t))}(e,n,i|=jr,o,l,c),e===pc&&(gc=pc=null,yc=0),zc=t,Uc=e,Vc=n,Bc=i,qc=s,Hc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,se(he,function(){return Nu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=D.T,D.T=null,s=O.p,O.p=2,o=mc,mc|=4;try{!function(e,t){if(e=e.containerInfo,pd=xh,sr(e=rr(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==i||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===i&&++d===r&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(gd={focusedElem:e,selectionRange:n},xh=!1,Dl=t;null!==Dl;)if(e=(t=Dl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Dl=e;else for(;null!==Dl;){switch(i=(t=Dl).alternate,e=t.flags,t.tag){case 0:if(0!==(4&e)&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(n=0;n<e.length;n++)(s=e[n]).ref.impl=s.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,s=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var p=ko(n.type,s);e=r.getSnapshotBeforeUpdate(p,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){ku(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))Td(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Td(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,Dl=e;break}Dl=t.return}}(e,t)}finally{mc=o,O.p=s,D.T=r}}Fc=1,yu(),vu(),bu()}}function yu(){if(1===Fc){Fc=0;var e=Uc,t=zc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=D.T,D.T=null;var r=O.p;O.p=2;var s=mc;mc|=4;try{Kl(t,e);var i=gd,a=rr(e.containerInfo),o=i.focusedElem,l=i.selectionRange;if(a!==o&&o&&o.ownerDocument&&nr(o.ownerDocument.documentElement,o)){if(null!==l&&sr(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),m=o.textContent.length,p=Math.min(l.start,m),g=void 0===l.end?p:Math.min(l.end,m);!f.extend&&p>g&&(a=g,g=p,p=a);var y=tr(o,p),v=tr(o,g);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),f.removeAllRanges(),p>g?(f.addRange(b),f.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),f.addRange(b))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var x=d[o];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}xh=!!pd,gd=pd=null}finally{mc=s,O.p=r,D.T=n}}e.current=t,Fc=2}}function vu(){if(2===Fc){Fc=0;var e=Uc,t=zc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=D.T,D.T=null;var r=O.p;O.p=2;var s=mc;mc|=4;try{Ol(e,t.alternate,t)}finally{mc=s,O.p=r,D.T=n}}Fc=3}}function bu(){if(4===Fc||3===Fc){Fc=0,oe();var e=Uc,t=zc,n=Vc,r=Hc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?Fc=5:(Fc=0,zc=Uc=null,xu(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(Mc=null),Me(n),t=t.stateNode,ve&&"function"===typeof ve.onCommitFiberRoot)try{ve.onCommitFiberRoot(ye,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=D.T,s=O.p,O.p=2,D.T=null;try{for(var i=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];i(o.value,{componentStack:o.stack})}}finally{D.T=t,O.p=s}}0!==(3&Vc)&&wu(),Lu(e),s=e.pendingLanes,0!==(261930&n)&&0!==(42&s)?e===Kc?Wc++:(Wc=0,Kc=e):Wc=0,Mu(0,!1)}}function xu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Vs(t)))}function wu(){return yu(),vu(),bu(),Nu()}function Nu(){if(5!==Fc)return!1;var e=Uc,t=Bc;Bc=0;var n=Me(Vc),r=D.T,s=O.p;try{O.p=32>n?32:n,D.T=null,n=qc,qc=null;var i=Uc,o=Vc;if(Fc=0,zc=Uc=null,Vc=0,0!==(6&mc))throw Error(a(331));var l=mc;if(mc|=4,cc(i.current),tc(i,i.current,o,n),mc=l,Mu(0,!1),ve&&"function"===typeof ve.onPostCommitFiberRoot)try{ve.onPostCommitFiberRoot(ye,i)}catch(c){}return!0}finally{O.p=s,D.T=r,xu(e,t)}}function Su(e,t,n){t=Yr(n,t),null!==(e=xi(e,t=To(e.stateNode,t,2),2))&&(Pe(e,2),Lu(e))}function ku(e,t,n){if(3===e.tag)Su(e,e,n);else for(;null!==t;){if(3===t.tag){Su(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Mc||!Mc.has(r))){e=Yr(n,e),null!==(r=xi(t,n=Io(2),2))&&(Po(n,r,t,e),Pe(r,2),Lu(r));break}}t=t.return}}function Eu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new fc;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(Nc=!0,s.add(n),e=_u.bind(null,e,t,n),t.then(e,e))}function _u(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,pc===e&&(yc&n)===n&&(4===kc||3===kc&&(62914560&yc)===yc&&300>le()-Rc?0===(2&mc)&&nu(e,0):Ac|=n,jc===yc&&(jc=0)),Lu(e)}function Au(e,t){0===t&&(t=Te()),null!==(e=Rr(e,t))&&(Pe(e,t),Lu(e))}function Cu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Au(e,n)}function ju(e,t){var n=0;switch(e.tag){case 31:case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),Au(e,n)}var Tu=null,Iu=null,Pu=!1,Ru=!1,Du=!1,Ou=0;function Lu(e){e!==Iu&&null===e.next&&(null===Iu?Tu=Iu=e:Iu=Iu.next=e),Ru=!0,Pu||(Pu=!0,Ed(function(){0!==(6&mc)?se(ue,Fu):Uu()}))}function Mu(e,t){if(!Du&&Ru){Du=!0;do{for(var n=!1,r=Tu;null!==r;){if(!t)if(0!==e){var s=r.pendingLanes;if(0===s)var i=0;else{var a=r.suspendedLanes,o=r.pingedLanes;i=(1<<31-xe(42|e)+1)-1,i=201326741&(i&=s&~(a&~o))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,Bu(r,i))}else i=yc,0===(3&(i=Ae(r,r===pc?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||Ce(r,i)||(n=!0,Bu(r,i));r=r.next}}while(n);Du=!1}}function Fu(){Uu()}function Uu(){Ru=Pu=!1;var e=0;0!==Ou&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==wd&&(wd=e,!0);return wd=null,!1}()&&(e=Ou);for(var t=le(),n=null,r=Tu;null!==r;){var s=r.next,i=zu(r,t);0===i?(r.next=null,null===n?Tu=s:n.next=s,null===s&&(Iu=n)):(n=r,(0!==e||0!==(3&i))&&(Ru=!0)),r=s}0!==Fc&&5!==Fc||Mu(e,!1),0!==Ou&&(Ou=0)}function zu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var a=31-xe(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=je(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}if(n=yc,n=Ae(e,e===(t=pc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===vc||9===vc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&ie(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||Ce(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&ie(r),Me(n)){case 2:case 8:n=de;break;case 32:default:n=he;break;case 268435456:n=me}return r=Vu.bind(null,e),n=se(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&ie(r),e.callbackPriority=2,e.callbackNode=null,2}function Vu(e,t){if(0!==Fc&&5!==Fc)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(wu()&&e.callbackNode!==n)return null;var r=yc;return 0===(r=Ae(e,e===pc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Xc(e,r,t),zu(e,le()),null!=e.callbackNode&&e.callbackNode===n?Vu.bind(null,e):null)}function Bu(e,t){if(wu())return null;Xc(e,t,!0)}function qu(){if(0===Ou){var e=Hs;0===e&&(e=Se,0===(261888&(Se<<=1))&&(Se=256)),Ou=e}return Ou}function Hu(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:It(""+e)}function Wu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ku=0;Ku<kr.length;Ku++){var Gu=kr[Ku];Er(Gu.toLowerCase(),"on"+(Gu[0].toUpperCase()+Gu.slice(1)))}Er(gr,"onAnimationEnd"),Er(yr,"onAnimationIteration"),Er(vr,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(br,"onTransitionRun"),Er(xr,"onTransitionStart"),Er(wr,"onTransitionCancel"),Er(Nr,"onTransitionEnd"),st("onMouseEnter",["mouseout","mouseover"]),st("onMouseLeave",["mouseout","mouseover"]),st("onPointerEnter",["pointerout","pointerover"]),st("onPointerLeave",["pointerout","pointerover"]),rt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),rt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),rt("onBeforeInput",["compositionend","keypress","textInput","paste"]),rt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),rt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Yu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Qu));function Xu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){_r(u)}s.currentTarget=null,i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){_r(u)}s.currentTarget=null,i=l}}}}function Ju(e,t){var n=t[He];void 0===n&&(n=t[He]=new Set);var r=e+"__bubble";n.has(r)||(td(t,e,2,!1),n.add(r))}function $u(e,t,n){var r=0;t&&(r|=4),td(n,e,r,t)}var Zu="_reactListening"+Math.random().toString(36).slice(2);function ed(e){if(!e[Zu]){e[Zu]=!0,tt.forEach(function(t){"selectionchange"!==t&&(Yu.has(t)||$u(t,!1,e),$u(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Zu]||(t[Zu]=!0,$u("selectionchange",!1,t))}}function td(e,t,n,r){switch(Ah(t)){case 2:var s=wh;break;case 8:s=Nh;break;default:s=Sh}n=s.bind(null,t,n,e),s=void 0,!Bt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function nd(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===s)return;a=a.return}for(;null!==o;){if(null===(a=Xe(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=i=a;continue e}o=o.parentNode}}r=r.return}Ut(function(){var r=i,s=Dt(n),a=[];e:{var o=Sr.get(e);if(void 0!==o){var c=nn,u=e;switch(e){case"keypress":if(0===Qt(n))break e;case"keydown":case"keyup":c=vn;break;case"focusin":u="focus",c=cn;break;case"focusout":u="blur",c=cn;break;case"beforeblur":case"afterblur":c=cn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=on;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=ln;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=xn;break;case gr:case yr:case vr:c=un;break;case Nr:c=wn;break;case"scroll":case"scrollend":c=sn;break;case"wheel":c=Nn;break;case"copy":case"cut":case"paste":c=dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=bn;break;case"toggle":case"beforetoggle":c=Sn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=r;null!==p;){var g=p;if(m=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===m||null===f||null!=(g=zt(p,f))&&d.push(rd(p,g,m)),h)break;p=p.return}0<d.length&&(o=new c(o,u,null,n,s),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===Rt||!(u=n.relatedTarget||n.fromElement)||!Xe(u)&&!u[qe])&&(c||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?Xe(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=on,g="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=bn,g="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==c?o:$e(c),m=null==u?o:$e(u),(o=new d(g,p+"leave",c,n,s)).target=h,o.relatedTarget=m,g=null,Xe(s)===r&&((d=new d(f,p+"enter",u,n,s)).target=m,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(d=id,p=u,m=0,g=f=c;g;g=d(g))m++;g=0;for(var y=p;y;y=d(y))g++;for(;0<m-g;)f=d(f),m--;for(;0<g-m;)p=d(p),g--;for(;m--;){if(f===p||null!==p&&f===p.alternate){d=f;break e}f=d(f),p=d(p)}d=null}else d=null;null!==c&&ad(a,o,c,d,!1),null!==u&&null!==h&&ad(a,h,u,d,!0)}if("select"===(c=(o=r?$e(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var v=Vn;else if(On(o))if(Bn)v=Jn;else{v=Yn;var b=Qn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&Ct(r.elementType)&&(v=Vn):v=Xn;switch(v&&(v=v(e,r))?Ln(a,v,n,s):(b&&b(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&xt(o,"number",o.value)),b=r?$e(r):window,e){case"focusin":(On(b)||"true"===b.contentEditable)&&(ar=b,or=r,lr=null);break;case"focusout":lr=or=ar=null;break;case"mousedown":cr=!0;break;case"contextmenu":case"mouseup":case"dragend":cr=!1,ur(a,n,s);break;case"selectionchange":if(ir)break;case"keydown":case"keyup":ur(a,n,s)}var x;if(En)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Rn?In(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(Cn&&"ko"!==n.locale&&(Rn||"onCompositionStart"!==w?"onCompositionEnd"===w&&Rn&&(x=Gt()):(Wt="value"in(Ht=s)?Ht.value:Ht.textContent,Rn=!0)),0<(b=sd(r,w)).length&&(w=new hn(w,e,null,n,s),a.push({event:w,listeners:b}),x?w.data=x:null!==(x=Pn(n))&&(w.data=x))),(x=An?function(e,t){switch(e){case"compositionend":return Pn(t);case"keypress":return 32!==t.which?null:(Tn=!0,jn);case"textInput":return(e=t.data)===jn&&Tn?null:e;default:return null}}(e,n):function(e,t){if(Rn)return"compositionend"===e||!En&&In(e,t)?(e=Gt(),Kt=Wt=Ht=null,Rn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Cn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=sd(r,"onBeforeInput")).length&&(b=new hn("onBeforeInput","beforeinput",null,n,s),a.push({event:b,listeners:w}),b.data=x)),function(e,t,n,r,s){if("submit"===t&&n&&n.stateNode===s){var i=Hu((s[Be]||null).action),a=r.submitter;a&&null!==(t=(t=a[Be]||null)?Hu(t.formAction):a.getAttribute("formAction"))&&(i=t,a=null);var o=new nn("action","action",null,r,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Ou){var e=a?Wu(s,a):new FormData(s);to(n,{pending:!0,data:e,method:s.method,action:i},null,e)}}else"function"===typeof i&&(o.preventDefault(),e=a?Wu(s,a):new FormData(s),to(n,{pending:!0,data:e,method:s.method,action:i},i,e))},currentTarget:s}]})}}(a,e,r,n,s)}Xu(a,t)})}function rd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function sd(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===i||(null!=(s=zt(e,n))&&r.unshift(rd(e,s,i)),null!=(s=zt(e,t))&&r.push(rd(e,s,i))),3===e.tag)return r;e=e.return}return[]}function id(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function ad(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,s?null!=(c=zt(n,i))&&a.unshift(rd(n,c,l)):s||null!=(c=zt(n,i))&&a.push(rd(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var od=/\r\n?/g,ld=/\u0000|\uFFFD/g;function cd(e){return("string"===typeof e?e:""+e).replace(od,"\n").replace(ld,"")}function ud(e,t){return t=cd(t),cd(e)===t}function dd(e,t,n,r,s,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||kt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&kt(e,""+r);break;case"className":ct(e,"class",r);break;case"tabIndex":ct(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":ct(e,n,r);break;case"style":At(e,r,i);break;case"data":if("object"!==t){ct(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=It(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&dd(e,t,"name",s.name,s,null),dd(e,t,"formEncType",s.formEncType,s,null),dd(e,t,"formMethod",s.formMethod,s,null),dd(e,t,"formTarget",s.formTarget,s,null)):(dd(e,t,"encType",s.encType,s,null),dd(e,t,"method",s.method,s,null),dd(e,t,"target",s.target,s,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=It(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=Pt);break;case"onScroll":null!=r&&Ju("scroll",e);break;case"onScrollEnd":null!=r&&Ju("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=It(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Ju("beforetoggle",e),Ju("toggle",e),lt(e,"popover",r);break;case"xlinkActuate":ut(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":ut(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":ut(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":ut(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":ut(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":ut(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":ut(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":ut(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":ut(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":lt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&lt(e,n=jt.get(n)||n,r)}}function hd(e,t,n,r,s,i){switch(n){case"style":At(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?kt(e,r):("number"===typeof r||"bigint"===typeof r)&&kt(e,""+r);break;case"onScroll":null!=r&&Ju("scroll",e);break;case"onScrollEnd":null!=r&&Ju("scrollend",e);break;case"onClick":null!=r&&(e.onclick=Pt);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:nt.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"===typeof(i=null!=(i=e[Be]||null)?i[n]:null)&&e.removeEventListener(t,i,s),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):lt(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,s)))}}function fd(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ju("error",e),Ju("load",e);var r,s=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:dd(e,t,r,o,n,null)}}return i&&dd(e,t,"srcSet",n.srcSet,n,null),void(s&&dd(e,t,"src",n.src,n,null));case"input":Ju("invalid",e);var l=r=o=i=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(null!=d)switch(s){case"name":i=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:dd(e,t,s,d,n,null)}}return void bt(e,r,l,c,u,o,i,!1);case"select":for(i in Ju("invalid",e),s=o=r=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:dd(e,t,i,l,n,null)}return t=r,n=o,e.multiple=!!s,void(null!=t?wt(e,!!s,t,!1):null!=n&&wt(e,!!s,n,!0));case"textarea":for(o in Ju("invalid",e),r=i=s=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":s=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:dd(e,t,o,l,n,null)}return void St(e,s,i,r);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else dd(e,t,c,s,n,null);return;case"dialog":Ju("beforetoggle",e),Ju("toggle",e),Ju("cancel",e),Ju("close",e);break;case"iframe":case"object":Ju("load",e);break;case"video":case"audio":for(s=0;s<Qu.length;s++)Ju(Qu[s],e);break;case"image":Ju("error",e),Ju("load",e);break;case"details":Ju("toggle",e);break;case"embed":case"source":case"link":Ju("error",e),Ju("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(s=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:dd(e,t,u,s,n,null)}return;default:if(Ct(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(s=n[d])&&hd(e,t,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(s=n[l])&&dd(e,t,l,s,n,null))}function md(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var pd=null,gd=null;function yd(e){return 9===e.nodeType?e:e.ownerDocument}function vd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function bd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function xd(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var wd=null;var Nd="function"===typeof setTimeout?setTimeout:void 0,Sd="function"===typeof clearTimeout?clearTimeout:void 0,kd="function"===typeof Promise?Promise:void 0,Ed="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof kd?function(e){return kd.resolve(null).then(e).catch(_d)}:Nd;function _d(e){setTimeout(function(){throw e})}function Ad(e){return"head"===e}function Cd(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)||"/&"===n){if(0===r)return e.removeChild(s),void Wh(t);r--}else if("$"===n||"$?"===n||"$~"===n||"$!"===n||"&"===n)r++;else if("html"===n)Ud(e.ownerDocument.documentElement);else if("head"===n){Ud(n=e.ownerDocument.head);for(var i=n.firstChild;i;){var a=i.nextSibling,o=i.nodeName;i[Qe]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===i.rel.toLowerCase()||n.removeChild(i),i=a}}else"body"===n&&Ud(e.ownerDocument.body);n=s}while(n);Wh(t)}function jd(e,t){var n=e;e=0;do{var r=n.nextSibling;if(1===n.nodeType?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",""===n.getAttribute("style")&&n.removeAttribute("style")):3===n.nodeType&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===e)break;e--}else"$"!==n&&"$?"!==n&&"$~"!==n&&"$!"!==n||e++;n=r}while(n)}function Td(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":Td(n),Ye(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function Id(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=Dd(e.nextSibling)))return null}return e}function Pd(e){return"$?"===e.data||"$~"===e.data}function Rd(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function Dd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Od=null;function Ld(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n||"/&"===n){if(0===t)return Dd(e.nextSibling);t--}else"$"!==n&&"$!"!==n&&"$?"!==n&&"$~"!==n&&"&"!==n||t++}e=e.nextSibling}return null}function Md(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n||"$~"===n||"&"===n){if(0===t)return e;t--}else"/$"!==n&&"/&"!==n||t++}e=e.previousSibling}return null}function Fd(e,t,n){switch(t=yd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function Ud(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ye(e)}var zd=new Map,Vd=new Set;function Bd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var qd=O.d;O.d={f:function(){var e=qd.f(),t=eu();return e||t},r:function(e){var t=Je(e);null!==t&&5===t.tag&&"form"===t.type?ro(t):qd.r(e)},D:function(e){qd.D(e),Wd("dns-prefetch",e,null)},C:function(e,t){qd.C(e,t),Wd("preconnect",e,t)},L:function(e,t,n){qd.L(e,t,n);var r=Hd;if(r&&e&&t){var s='link[rel="preload"][as="'+yt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+yt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(s+='[imagesizes="'+yt(n.imageSizes)+'"]')):s+='[href="'+yt(e)+'"]';var i=s;switch(t){case"style":i=Gd(e);break;case"script":i=Xd(e)}zd.has(i)||(e=f({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),zd.set(i,e),null!==r.querySelector(s)||"style"===t&&r.querySelector(Qd(i))||"script"===t&&r.querySelector(Jd(i))||(fd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}},m:function(e,t){qd.m(e,t);var n=Hd;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+yt(r)+'"][href="'+yt(e)+'"]',i=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Xd(e)}if(!zd.has(i)&&(e=f({rel:"modulepreload",href:e},t),zd.set(i,e),null===n.querySelector(s))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Jd(i)))return}fd(r=n.createElement("link"),"link",e),et(r),n.head.appendChild(r)}}},X:function(e,t){qd.X(e,t);var n=Hd;if(n&&e){var r=Ze(n).hoistableScripts,s=Xd(e),i=r.get(s);i||((i=n.querySelector(Jd(s)))||(e=f({src:e,async:!0},t),(t=zd.get(s))&&th(e,t),et(i=n.createElement("script")),fd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}},S:function(e,t,n){qd.S(e,t,n);var r=Hd;if(r&&e){var s=Ze(r).hoistableStyles,i=Gd(e);t=t||"default";var a=s.get(i);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(Qd(i)))o.loading=5;else{e=f({rel:"stylesheet",href:e,"data-precedence":t},n),(n=zd.get(i))&&eh(e,n);var l=a=r.createElement("link");et(l),fd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Zd(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},s.set(i,a)}}},M:function(e,t){qd.M(e,t);var n=Hd;if(n&&e){var r=Ze(n).hoistableScripts,s=Xd(e),i=r.get(s);i||((i=n.querySelector(Jd(s)))||(e=f({src:e,async:!0,type:"module"},t),(t=zd.get(s))&&th(e,t),et(i=n.createElement("script")),fd(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}}};var Hd="undefined"===typeof document?null:document;function Wd(e,t,n){var r=Hd;if(r&&"string"===typeof t&&t){var s=yt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof n&&(s+='[crossorigin="'+n+'"]'),Vd.has(s)||(Vd.add(s),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(s)&&(fd(t=r.createElement("link"),"link",e),et(t),r.head.appendChild(t)))}}function Kd(e,t,n,r){var s,i,o,l,c=(c=K.current)?Bd(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=Gd(n.href),(r=(n=Ze(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=Gd(n.href);var u=Ze(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Qd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),zd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},zd.set(e,n),u||(s=c,i=e,o=n,l=d.state,s.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=s.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),fd(i,"link",o),et(i),s.head.appendChild(i))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Xd(n),(r=(n=Ze(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function Gd(e){return'href="'+yt(e)+'"'}function Qd(e){return'link[rel="stylesheet"]['+e+"]"}function Yd(e){return f({},e,{"data-precedence":e.precedence,precedence:null})}function Xd(e){return'[src="'+yt(e)+'"]'}function Jd(e){return"script[async]"+e}function $d(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+yt(n.href)+'"]');if(r)return t.instance=r,et(r),r;var s=f({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return et(r=(e.ownerDocument||e).createElement("style")),fd(r,"style",s),Zd(r,n.precedence,e),t.instance=r;case"stylesheet":s=Gd(n.href);var i=e.querySelector(Qd(s));if(i)return t.state.loading|=4,t.instance=i,et(i),i;r=Yd(n),(s=zd.get(s))&&eh(r,s),et(i=(e.ownerDocument||e).createElement("link"));var o=i;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),fd(i,"link",r),t.state.loading|=4,Zd(i,n.precedence,e),t.instance=i;case"script":return i=Xd(n.src),(s=e.querySelector(Jd(i)))?(t.instance=s,et(s),s):(r=n,(s=zd.get(i))&&th(r=f({},n),s),et(s=(e=e.ownerDocument||e).createElement("script")),fd(s,"link",r),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Zd(r,n.precedence,e));return t.instance}function Zd(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,i=s,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)i=o;else if(i!==s)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function eh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function th(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var nh=null;function rh(e,t,n){if(null===nh){var r=new Map,s=nh=new Map;s.set(n,r)}else(r=(s=nh).get(n))||(r=new Map,s.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var i=n[s];if(!(i[Qe]||i[Ve]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var a=i.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(i):r.set(a,[i])}}return r}function sh(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function ih(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var ah=0;function oh(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)ch(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var lh=null;function ch(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,lh=new Map,t.forEach(uh,e),lh=null,oh.call(e))}function uh(e,t){if(!(4&t.state.loading)){var n=lh.get(e);if(n)var r=n.get(null);else{n=new Map,lh.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<s.length;i++){var a=s[i];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(s=t.instance).getAttribute("data-precedence"),(i=n.get(a)||r)===r&&n.set(null,s),n.set(a,s),this.count++,r=oh.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),i?i.parentNode.insertBefore(s,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var dh={$$typeof:w,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function hh(e,t,n,r,s,i,a,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ie(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ie(0),this.hiddenUpdates=Ie(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function fh(e,t,n,r,s,i,a,o,l,c,u,d){return e=new hh(e,t,n,a,l,c,u,d,o),t=1,!0===i&&(t|=24),i=Ur(3,null,null,t),e.current=i,i.stateNode=e,(t=zs()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},yi(i),e}function mh(e){return e?e=Mr:Mr}function ph(e,t,n,r,s,i){s=mh(s),null===r.context?r.context=s:r.pendingContext=s,(r=bi(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=xi(e,r,t))&&(Yc(n,0,t),wi(n,e,t))}function gh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function yh(e,t){gh(e,t),(e=e.alternate)&&gh(e,t)}function vh(e){if(13===e.tag||31===e.tag){var t=Rr(e,67108864);null!==t&&Yc(t,0,67108864),yh(e,67108864)}}function bh(e){if(13===e.tag||31===e.tag){var t=Gc(),n=Rr(e,t=Le(t));null!==n&&Yc(n,0,t),yh(e,t)}}var xh=!0;function wh(e,t,n,r){var s=D.T;D.T=null;var i=O.p;try{O.p=2,Sh(e,t,n,r)}finally{O.p=i,D.T=s}}function Nh(e,t,n,r){var s=D.T;D.T=null;var i=O.p;try{O.p=8,Sh(e,t,n,r)}finally{O.p=i,D.T=s}}function Sh(e,t,n,r){if(xh){var s=kh(r);if(null===s)nd(e,t,r,Eh,n),Lh(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return jh=Mh(jh,e,t,n,r,s),!0;case"dragenter":return Th=Mh(Th,e,t,n,r,s),!0;case"mouseover":return Ih=Mh(Ih,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return Ph.set(i,Mh(Ph.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Rh.set(i,Mh(Rh.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Lh(e,r),4&t&&-1<Oh.indexOf(e)){for(;null!==s;){var i=Je(s);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var a=_e(i.pendingLanes);if(0!==a){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-xe(a);o.entanglements[1]|=l,a&=~l}Lu(i),0===(6&mc)&&(Oc=le()+500,Mu(0,!1))}}break;case 31:case 13:null!==(o=Rr(i,2))&&Yc(o,0,2),eu(),yh(i,2)}if(null===(i=kh(r))&&nd(e,t,r,Eh,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else nd(e,t,r,null,n)}}function kh(e){return _h(e=Dt(e))}var Eh=null;function _h(e){if(Eh=null,null!==(e=Xe(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(31===n){if(null!==(e=u(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Eh=e,null}function Ah(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ce()){case ue:return 2;case de:return 8;case he:case fe:return 32;case me:return 268435456;default:return 32}default:return 32}}var Ch=!1,jh=null,Th=null,Ih=null,Ph=new Map,Rh=new Map,Dh=[],Oh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lh(e,t){switch(e){case"focusin":case"focusout":jh=null;break;case"dragenter":case"dragleave":Th=null;break;case"mouseover":case"mouseout":Ih=null;break;case"pointerover":case"pointerout":Ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rh.delete(t.pointerId)}}function Mh(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=Je(t))&&vh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Fh(e){var t=Xe(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void Ue(e.priority,function(){bh(n)})}else if(31===t){if(null!==(t=u(n)))return e.blockedOn=t,void Ue(e.priority,function(){bh(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Uh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=kh(e.nativeEvent);if(null!==n)return null!==(t=Je(n))&&vh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);Rt=r,n.target.dispatchEvent(r),Rt=null,t.shift()}return!0}function zh(e,t,n){Uh(e)&&n.delete(t)}function Vh(){Ch=!1,null!==jh&&Uh(jh)&&(jh=null),null!==Th&&Uh(Th)&&(Th=null),null!==Ih&&Uh(Ih)&&(Ih=null),Ph.forEach(zh),Rh.forEach(zh)}function Bh(e,t){e.blockedOn===t&&(e.blockedOn=null,Ch||(Ch=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Vh)))}var qh=null;function Hh(e){qh!==e&&(qh=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){qh===e&&(qh=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],s=e[t+2];if("function"!==typeof r){if(null===_h(r||n))continue;break}var i=Je(n);null!==i&&(e.splice(t,3),t-=3,to(i,{pending:!0,data:s,method:n.method,action:r},r,s))}}))}function Wh(e){function t(t){return Bh(t,e)}null!==jh&&Bh(jh,e),null!==Th&&Bh(Th,e),null!==Ih&&Bh(Ih,e),Ph.forEach(t),Rh.forEach(t);for(var n=0;n<Dh.length;n++){var r=Dh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<Dh.length&&null===(n=Dh[0]).blockedOn;)Fh(n),null===n.blockedOn&&Dh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var s=n[r],i=n[r+1],a=s[Be]||null;if("function"===typeof i)a||Hh(n);else if(a){var o=null;if(i&&i.hasAttribute("formAction")){if(s=i,a=i[Be]||null)o=a.formAction;else if(null!==_h(s))continue}else o=a.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Hh(n)}}}function Kh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return s=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==s&&(s(),s=null),r||setTimeout(n,20)}function n(){if(!r&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"===typeof navigation){var r=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){r=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==s&&(s(),s=null)}}}function Gh(e){this._internalRoot=e}function Qh(e){this._internalRoot=e}Qh.prototype.render=Gh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));ph(t.current,Gc(),e,t,null,null)},Qh.prototype.unmount=Gh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;ph(e.current,2,null,e,null,null),eu(),t[qe]=null}},Qh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Fe();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dh.length&&0!==t&&t<Dh[n].priority;n++);Dh.splice(n,0,e),0===n&&Fh(e)}};var Yh=s.version;if("19.2.0"!==Yh)throw Error(a(527,Yh,"19.2.0"));O.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(r=s.return)){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return d(s),e;if(i===r)return d(s),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?h(e):null)?null:e.stateNode};var Xh={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.2.0"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Jh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jh.isDisabled&&Jh.supportsFiber)try{ye=Jh.inject(Xh),ve=Jh}catch(Zh){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,r="",s=Eo,i=_o,l=Ao;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=fh(e,1,!1,null,0,n,r,null,s,i,l,Kh),e[qe]=t.current,ed(e),new Gh(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var r=!1,s="",i=Eo,l=_o,c=Ao,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.formState&&(u=n.formState)),(t=fh(e,1,!0,t,0,r,s,u,i,l,c,Kh)).context=mh(null),n=t.current,(s=bi(r=Le(r=Gc()))).callback=null,xi(n,s,r),n=r,t.current.lanes=n,Pe(t,n),Lu(t),e[qe]=t.current,ed(e),new Qh(t)},t.version="19.2.0"},6:(e,t,n)=>{n.d(t,{A:()=>r});const r=(0,n(784).A)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},43:(e,t,n)=>{e.exports=n(288)},88:(e,t,n)=>{n.d(t,{A:()=>r});const r=(0,n(784).A)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]])},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.for("react.activity"),m=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,y={};function v(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}function b(){}function x(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=v.prototype;var w=x.prototype=new b;w.constructor=x,g(w,v.prototype),w.isPureReactComponent=!0;var N=Array.isArray;function S(){}var k={H:null,A:null,T:null,S:null},E=Object.prototype.hasOwnProperty;function _(e,t,r){var s=r.ref;return{$$typeof:n,type:e,key:t,ref:void 0!==s?s:null,props:r}}function A(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var C=/\/+/g;function j(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return T((u=e._init)(e._payload),t,s,i,a)}}if(u)return a=a(e),u=""===i?"."+j(e,0):i,N(a)?(s="",null!=u&&(s=u.replace(C,"$&/")+"/"),T(a,t,s,"",function(e){return e})):null!=a&&(A(a)&&(l=a,c=s+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(C,"$&/")+"/")+u,a=_(l.type,c,l.props)),t.push(a)),1;u=0;var d,f=""===i?".":i+":";if(N(e))for(var p=0;p<e.length;p++)u+=T(i=e[p],t,s,o=f+j(i,p),a);else if("function"===typeof(p=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=m&&d[m]||d["@@iterator"])?d:null))for(e=p.call(e),p=0;!(i=e.next()).done;)u+=T(i=i.value,t,s,o=f+j(i,p++),a);else if("object"===o){if("function"===typeof e.then)return T(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(S,S):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,i,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function I(e,t,n){if(null==e)return e;var r=[],s=0;return T(e,r,"","",function(e){return t.call(n,e,s++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)},D={map:I,forEach:function(e,t,n){I(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!A(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};t.Activity=f,t.Children=D,t.Component=v,t.Fragment=s,t.Profiler=a,t.PureComponent=x,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=k,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return k.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cacheSignal=function(){return null},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=g({},e.props),s=e.key;if(null!=t)for(i in void 0!==t.key&&(s=""+t.key),t)!E.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var a=Array(i),o=0;o<i;o++)a[o]=arguments[o+2];r.children=a}return _(e.type,s,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,s={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)E.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(s[r]=t[r]);var a=arguments.length-2;if(1===a)s.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];s.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===s[r]&&(s[r]=a[r]);return _(e,i,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=A,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=k.T,n={};k.T=n;try{var r=e(),s=k.S;null!==s&&s(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(S,R)}catch(i){R(i)}finally{null!==t&&null!==n.types&&(t.types=n.types),k.T=t}},t.unstable_useCacheRefresh=function(){return k.H.useCacheRefresh()},t.use=function(e){return k.H.use(e)},t.useActionState=function(e,t,n){return k.H.useActionState(e,t,n)},t.useCallback=function(e,t){return k.H.useCallback(e,t)},t.useContext=function(e){return k.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return k.H.useDeferredValue(e,t)},t.useEffect=function(e,t){return k.H.useEffect(e,t)},t.useEffectEvent=function(e){return k.H.useEffectEvent(e)},t.useId=function(){return k.H.useId()},t.useImperativeHandle=function(e,t,n){return k.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return k.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return k.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return k.H.useMemo(e,t)},t.useOptimistic=function(e,t){return k.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return k.H.useReducer(e,t,n)},t.useRef=function(e){return k.H.useRef(e)},t.useState=function(e){return k.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return k.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return k.H.useTransition()},t.version="19.2.0"},384:(e,t,n)=>{n.d(t,{A:()=>r});const r=(0,n(784).A)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},457:(e,t,n)=>{n.d(t,{A:()=>f});var r=n(43),s=n(658),i=n(88),a=n(918),o=n(6),l=n(384),c=n(944),u=n(459),d=n(579);function h(e){const t=Date.now()-e.getTime(),n=Math.floor(t/1e3);if(n<45)return"Just now";const r=Math.floor(n/60);if(r<60)return"".concat(r,"m ago");const s=Math.floor(r/60);if(s<24)return"".concat(s,"h ago");const i=Math.floor(s/24);if(i<7)return"".concat(i,"d ago");const a=Math.floor(i/7);if(a<4)return"".concat(a,"w ago");const o=Math.floor(i/30);if(o<12)return"".concat(o,"mo ago");const l=Math.floor(i/365);return"".concat(l,"y ago")}function f(e){var t;let{listing:n,onClick:f,isFavorite:m,onToggleFavorite:p}=e;const g=[n.streetAddress,n.location].filter(Boolean).join(", "),[y,v]=(0,r.useState)(!1),[b,x]=(0,r.useState)(!1),w=n.reviews||[],N=w.length>0?(w.reduce((e,t)=>e+(t.rating||0),0)/w.length).toFixed(1):null,S=n.createdAt&&Date.now()-new Date(n.createdAt).getTime()<864e5,k=n.availableDate?new Date(n.availableDate):null,E=k&&k>new Date&&k-new Date<6048e5,_=!k||k<=new Date,A="number"===typeof n.price?n.price.toLocaleString("en-ZA"):(null===(t=parseFloat(n.price))||void 0===t?void 0:t.toLocaleString("en-ZA"))||n.price;return(0,d.jsxs)("div",{onClick:f,className:"bg-white rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 cursor-pointer overflow-hidden border border-gray-100 hover:border-teal-300 hover:-translate-y-1 group ".concat(n.premium?"ring-2 ring-amber-400 ring-offset-2":""),children:[n.photos&&n.photos.length>0?(0,d.jsxs)("div",{className:"relative bg-gray-200 aspect-[4/3] overflow-hidden",children:[!y&&!b&&(0,d.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 animate-pulse"}),b&&(0,d.jsx)("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:(0,d.jsx)(s.A,{className:"w-12 h-12 text-gray-300"})}),(0,d.jsx)("img",{src:n.photos[0],alt:"Room",className:"w-full h-full object-cover group-hover:scale-110 transition-all duration-500 ease-out ".concat(y?"opacity-100":"opacity-0"),loading:"lazy",onLoad:()=>v(!0),onError:()=>x(!0)}),(0,d.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),p&&(0,d.jsx)("button",{onClick:e=>{e.stopPropagation(),p&&p(n.id)},className:"absolute top-3 left-3 rounded-xl p-2.5 shadow-lg transition-all duration-300 hover:scale-110 active:scale-95 z-10 ".concat(m?"bg-rose-500 hover:bg-rose-600":"bg-white/95 backdrop-blur-sm hover:bg-white"),"aria-label":m?"Remove from favorites":"Add to favorites",children:(0,d.jsx)(a.A,{className:"w-5 h-5 transition-all duration-300 ".concat(m?"fill-white text-white":"text-gray-600 hover:text-rose-500")})}),(0,d.jsxs)("div",{className:"absolute top-3 right-3 flex gap-2 flex-wrap justify-end",children:[n.photos.length>1&&(0,d.jsxs)("div",{className:"bg-black/70 backdrop-blur-sm text-white px-2.5 py-1 rounded-lg text-xs font-semibold flex items-center gap-1",children:[(0,d.jsx)("span",{children:"\ud83d\udcf7"})," ",n.photos.length]}),(0,d.jsx)("div",{className:"px-2.5 py-1 rounded-lg text-xs font-bold uppercase tracking-wide ".concat("available"===n.status?"bg-gradient-to-r from-emerald-500 to-green-500 text-white shadow-lg shadow-emerald-500/30":"bg-gray-700/90 text-white"),children:"available"===n.status?"\u2713 Available":"Rented"})]}),(0,d.jsxs)("div",{className:"absolute top-12 right-3 flex flex-col gap-1.5 items-end",children:[S&&(0,d.jsx)("div",{className:"px-2 py-1 rounded-lg text-[10px] font-bold bg-gradient-to-r from-teal-500 to-cyan-500 text-white shadow-lg uppercase tracking-wider animate-pulse",children:"\u2728 New"}),(n.landlordVerified||n.landlord&&n.landlord.idNumber)&&(0,d.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 rounded-lg text-[10px] font-bold bg-blue-600 text-white shadow-lg",children:[(0,d.jsx)(l.A,{className:"w-3 h-3"})," Verified"]}),n.premium&&(0,d.jsxs)("div",{className:"px-2 py-1 rounded-lg text-[10px] font-bold bg-gradient-to-r from-amber-400 to-orange-400 text-amber-900 shadow-lg flex items-center gap-1",children:[(0,d.jsx)(c.A,{className:"w-3 h-3 fill-current"})," Premium"]})]}),(0,d.jsxs)("div",{className:"absolute bottom-3 left-3 flex items-center gap-2",children:[(0,d.jsx)("div",{className:"w-9 h-9 rounded-xl bg-white shadow-lg ring-2 ring-white overflow-hidden flex items-center justify-center",children:n.landlordPhoto?(0,d.jsx)("img",{src:n.landlordPhoto,alt:n.landlordName,className:"w-full h-full object-cover"}):(0,d.jsx)(u.A,{className:"w-5 h-5 text-gray-400"})}),n.landlordName&&(0,d.jsx)("span",{className:"hidden sm:inline-block text-xs font-semibold bg-white/95 backdrop-blur-sm px-2.5 py-1 rounded-lg text-gray-700 shadow-lg",children:n.landlordName.split(" ")[0]})]})]}):(0,d.jsxs)("div",{className:"bg-gradient-to-br from-gray-100 to-gray-200 aspect-[4/3] flex items-center justify-center relative",children:[(0,d.jsx)("div",{className:"w-16 h-16 rounded-2xl bg-white/80 flex items-center justify-center shadow-lg",children:(0,d.jsx)(s.A,{className:"w-8 h-8 text-gray-400"})}),(0,d.jsx)("div",{className:"absolute top-3 right-3 px-2.5 py-1 rounded-lg text-xs font-bold ".concat("available"===n.status?"bg-emerald-500 text-white":"bg-gray-700 text-white"),children:"available"===n.status?"\u2713 Available":"Rented"})]}),(0,d.jsxs)("div",{className:"p-4",children:[(0,d.jsxs)("div",{className:"mb-3",children:[(0,d.jsxs)("div",{className:"flex items-start justify-between gap-2 mb-1.5",children:[(0,d.jsx)("h3",{className:"font-bold text-base text-gray-900 group-hover:text-teal-600 transition-colors line-clamp-1 flex-1",children:n.title}),n.createdAt&&(0,d.jsxs)("span",{className:"text-[10px] font-medium text-gray-400 bg-gray-50 px-2 py-0.5 rounded-md flex-shrink-0 flex items-center gap-1",children:[(0,d.jsx)(i.A,{className:"w-3 h-3"}),h(new Date(n.createdAt))]})]}),(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsxs)("p",{className:"text-rose-600 font-extrabold text-xl tracking-tight",children:["R",A,(0,d.jsx)("span",{className:"text-sm font-medium text-gray-400 ml-0.5",children:"/mo"})]}),N&&(0,d.jsxs)("div",{className:"flex items-center gap-1 text-xs bg-amber-50 px-2 py-1 rounded-lg border border-amber-100",children:[(0,d.jsx)(c.A,{className:"w-3.5 h-3.5 fill-amber-400 text-amber-400"}),(0,d.jsx)("span",{className:"font-bold text-gray-700",children:N}),(0,d.jsxs)("span",{className:"text-gray-400",children:["(",w.length,")"]})]})]})]}),(0,d.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[n.paymentMethod&&(0,d.jsxs)("span",{className:"inline-flex items-center gap-1.5 bg-emerald-50 text-emerald-700 text-xs px-2.5 py-1 rounded-lg font-medium border border-emerald-100",children:[(0,d.jsx)("span",{children:"\ud83d\udcb3"})," ",n.paymentMethod]}),_?(0,d.jsxs)("span",{className:"inline-flex items-center gap-1.5 bg-green-50 text-green-700 text-xs px-2.5 py-1 rounded-lg font-medium border border-green-100",children:[(0,d.jsx)("span",{children:"\ud83c\udfe0"})," Available Now"]}):E&&(0,d.jsxs)("span",{className:"inline-flex items-center gap-1.5 bg-blue-50 text-blue-700 text-xs px-2.5 py-1 rounded-lg font-medium border border-blue-100",children:[(0,d.jsx)("span",{children:"\ud83d\udcc5"})," ",k.toLocaleDateString("en-ZA",{day:"numeric",month:"short"})]})]}),(0,d.jsxs)("div",{className:"flex items-center text-gray-500 text-sm mb-3",children:[(0,d.jsx)(o.A,{className:"w-4 h-4 mr-1.5 text-teal-500 flex-shrink-0"}),(0,d.jsx)("span",{className:"truncate font-medium",children:g||n.location||"Location TBA"})]}),n.amenities&&n.amenities.length>0&&(0,d.jsxs)("div",{className:"flex flex-wrap gap-1.5 mb-4",children:[n.amenities.slice(0,3).map((e,t)=>(0,d.jsx)("span",{className:"inline-block bg-gray-100 text-gray-600 text-[11px] px-2.5 py-1 rounded-lg font-medium",children:e},t)),n.amenities.length>3&&(0,d.jsxs)("span",{className:"inline-block bg-teal-50 text-teal-600 text-[11px] px-2.5 py-1 rounded-lg font-semibold",children:["+",n.amenities.length-3," more"]})]}),(0,d.jsxs)("button",{className:"w-full bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white py-3 rounded-xl font-semibold text-sm transition-all duration-200 shadow-md hover:shadow-lg hover:shadow-teal-500/25 active:scale-[0.98] flex items-center justify-center gap-2 group/btn",children:[(0,d.jsx)("span",{children:"View Details"}),(0,d.jsx)("svg",{className:"w-4 h-4 transform group-hover/btn:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,d.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})]})]})]})}},459:(e,t,n)=>{n.d(t,{A:()=>r});const r=(0,n(784).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},555:(e,t,n)=>{function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=r(s))return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function i(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach(function(t){i(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>o})},579:(e,t,n)=>{e.exports=n(799)},658:(e,t,n)=>{n.d(t,{A:()=>r});const r=(0,n(784).A)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]])},672:(e,t,n)=>{var r=n(43);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(s(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:i}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:s,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.2.0"},784:(e,t,n)=>{n.d(t,{A:()=>h});var r=n(555),s=n(986),i=n(43);const a=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const c=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],u=(0,i.forwardRef)((e,t)=>{let{color:n="currentColor",size:a=24,strokeWidth:u=2,absoluteStrokeWidth:d,className:h="",children:f,iconNode:m}=e,p=(0,s.A)(e,c);return(0,i.createElement)("svg",(0,r.A)((0,r.A)((0,r.A)({ref:t},l),{},{width:a,height:a,stroke:n,strokeWidth:d?24*Number(u)/Number(a):u,className:o("lucide",h)},!f&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(p)&&{"aria-hidden":"true"}),p),[...m.map(e=>{let[t,n]=e;return(0,i.createElement)(t,n)}),...Array.isArray(f)?f:[f]])}),d=["className"],h=(e,t)=>{const n=(0,i.forwardRef)((n,l)=>{let{className:c}=n,h=(0,s.A)(n,d);return(0,i.createElement)(u,(0,r.A)({ref:l,iconNode:t,className:o("lucide-".concat((f=a(e),f.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),c)},h));var f});return n.displayName=a(e),n}},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function s(e,t,r){var s=null;if(void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:s,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=s,t.jsxs=s},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function N(e){if(g=!1,w(e),!p)if(null!==r(c))p=!0,k||(k=!0,S());else{var t=r(u);null!==t&&P(N,t.startTime-e)}}var S,k=!1,E=-1,_=5,A=-1;function C(){return!!y||!(t.unstable_now()-A<_)}function j(){if(y=!1,k){var e=t.unstable_now();A=e;var n=!0;try{e:{p=!1,g&&(g=!1,b(E),E=-1),m=!0;var i=f;try{t:{for(w(e),h=r(c);null!==h&&!(h.expirationTime>e&&C());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,w(e),n=!0;break t}h===r(c)&&s(c),w(e)}else s(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&P(N,l.startTime-e),n=!1}}break e}finally{h=null,f=i,m=!1}n=void 0}}finally{n?S():k=!1}}}if("function"===typeof x)S=function(){x(j)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,I=T.port2;T.port1.onmessage=j,S=function(){I.postMessage(null)}}else S=function(){v(j,0)};function P(e,n){E=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(b(E),E=-1):g=!0,P(N,i-a))):(e.sortIndex=o,n(c,e),p||m||(p=!0,k||(k=!0,S()))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},918:(e,t,n)=>{n.d(t,{A:()=>r});const r=(0,n(784).A)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]])},944:(e,t,n)=>{n.d(t,{A:()=>r});const r=(0,n(784).A)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]])},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)},986:(e,t,n)=>{function r(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}n.d(t,{A:()=>r})}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".51b21e3f.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="room-rental-platform:";n.l=(r,s,i,a)=>{if(e[r])e[r].push(s);else{var o,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+i),o.src=r),e[r]=[s];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var s=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var i=new Promise((n,r)=>s=e[t]=[n,r]);r.push(s[2]=i);var a=n.p+n.u(t),o=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",o.name="ChunkLoadError",o.type=i,o.request=a,s[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var s,i,[a,o,l]=r,c=0;if(a.some(t=>0!==e[t])){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)l(n)}for(t&&t(r);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkroom_rental_platform=self.webpackChunkroom_rental_platform||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(43),s=n(391),i=n(555);const a=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(a(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==o)throw new l;const c=t<<2|i>>4;if(r.push(c),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class l extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const c=function(e){return function(e){const t=a(e);return o.encodeByteArray(t,!0)}(e).replace(/\./g,"")},u=function(e){try{return o.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function d(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const h=()=>{try{return d().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAMw5vMNHvqNECNKX_wzXEA8ghDsl9c2eU",REACT_APP_FIREBASE_APP_ID:"1:725213786064:web:7c7e3709410266b98d13d5",REACT_APP_FIREBASE_AUTH_DOMAIN:"room-24.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-G7XPLZ4K10",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"725213786064",REACT_APP_FIREBASE_PROJECT_ID:"room-24",REACT_APP_FIREBASE_STORAGE_BUCKET:"room-24.firebasestorage.app"}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&u(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},f=e=>{var t;return null===(t=h())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},m=()=>{var e;return null===(e=h())||void 0===e?void 0:e.config},p=e=>{var t;return null===(t=h())||void 0===t?void 0:t["_".concat(e)]};class g{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function y(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function v(e){return(await fetch(e,{credentials:"include"})).ok}const b={};let x=!1;function w(e,t){if("undefined"===typeof window||"undefined"===typeof document||!y(window.location.host)||b[e]===t||b[e]||x)return;function n(e){return"__firebase__banner__".concat(e)}b[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(b))b[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{x=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}s?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function N(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function S(){var e;const t=null===(e=h())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function k(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function E(){return!S()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function _(){try{return"object"===typeof indexedDB}catch(e){return!1}}function A(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}function C(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class j extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,j.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,T.prototype.create)}}class T{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(I,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new j(n,i,t)}}const I=/\{\$([^}]+)}/g;function P(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(R(n)&&R(i)){if(!P(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function R(e){return null!==e&&"object"===typeof e}function D(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function O(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function L(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class M{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=F),void 0===r.error&&(r.error=F),void 0===r.complete&&(r.complete=F);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function F(){}function U(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3)*Math.pow(t,e),r=Math.round(.5*n*(Math.random()-.5)*2);return Math.min(144e5,n+r)}function z(e){return e&&e._delegate?e._delegate:e}class V{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const B="[DEFAULT]";class q{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new g;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:B})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===B?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;return this.component?this.component.multipleInstances?e:B:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class H{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new q(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const W=[];var K;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(K||(K={}));const G={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},Q=K.INFO,Y={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},X=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=Y[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class J{constructor(e){this.name=e,this._logLevel=Q,this._logHandler=X,this._userLogHandler=null,W.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in K))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?G[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...t),this._logHandler(this,K.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...t),this._logHandler(this,K.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,K.INFO,...t),this._logHandler(this,K.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,K.WARN,...t),this._logHandler(this,K.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,K.ERROR,...t),this._logHandler(this,K.ERROR,...t)}}let $,Z;const ee=new WeakMap,te=new WeakMap,ne=new WeakMap,re=new WeakMap,se=new WeakMap;let ie={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return te.get(e);if("objectStoreNames"===t)return e.objectStoreNames||ne.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return le(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ae(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Z||(Z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ce(this),n),le(ee.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return le(e.apply(ce(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(ce(this),t,...r);return ne.set(i,t.sort?t.sort():[t]),le(i)}}function oe(e){return"function"===typeof e?ae(e):(e instanceof IDBTransaction&&function(e){if(te.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});te.set(e,t)}(e),t=e,($||($=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,ie):e);var t}function le(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(le(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&ee.set(t,e)}).catch(()=>{}),se.set(t,e),t}(e);if(re.has(e))return re.get(e);const t=oe(e);return t!==e&&(re.set(e,t),se.set(t,e)),t}const ce=e=>se.get(e);function ue(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=le(a);return r&&a.addEventListener("upgradeneeded",e=>{r(le(a.result),e.oldVersion,e.newVersion,le(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}function de(e){let{blocked:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=indexedDB.deleteDatabase(e);return t&&n.addEventListener("blocked",e=>t(e.oldVersion,e)),le(n).then(()=>{})}const he=["get","getKey","getAll","getAllKeys","count"],fe=["put","add","delete","clear"],me=new Map;function pe(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(me.get(t))return me.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=fe.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!he.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return me.set(t,i),i}ie=(e=>(0,i.A)((0,i.A)({},e),{},{get:(t,n,r)=>pe(t,n)||e.get(t,n,r),has:(t,n)=>!!pe(t,n)||e.has(t,n)}))(ie);class ge{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const ye="@firebase/app",ve="0.14.6",be=new J("@firebase/app"),xe="@firebase/app-compat",we="@firebase/analytics-compat",Ne="@firebase/analytics",Se="@firebase/app-check-compat",ke="@firebase/app-check",Ee="@firebase/auth",_e="@firebase/auth-compat",Ae="@firebase/database",Ce="@firebase/data-connect",je="@firebase/database-compat",Te="@firebase/functions",Ie="@firebase/functions-compat",Pe="@firebase/installations",Re="@firebase/installations-compat",De="@firebase/messaging",Oe="@firebase/messaging-compat",Le="@firebase/performance",Me="@firebase/performance-compat",Fe="@firebase/remote-config",Ue="@firebase/remote-config-compat",ze="@firebase/storage",Ve="@firebase/storage-compat",Be="@firebase/firestore",qe="@firebase/ai",He="@firebase/firestore-compat",We="firebase",Ke="[DEFAULT]",Ge={[ye]:"fire-core",[xe]:"fire-core-compat",[Ne]:"fire-analytics",[we]:"fire-analytics-compat",[ke]:"fire-app-check",[Se]:"fire-app-check-compat",[Ee]:"fire-auth",[_e]:"fire-auth-compat",[Ae]:"fire-rtdb",[Ce]:"fire-data-connect",[je]:"fire-rtdb-compat",[Te]:"fire-fn",[Ie]:"fire-fn-compat",[Pe]:"fire-iid",[Re]:"fire-iid-compat",[De]:"fire-fcm",[Oe]:"fire-fcm-compat",[Le]:"fire-perf",[Me]:"fire-perf-compat",[Fe]:"fire-rc",[Ue]:"fire-rc-compat",[ze]:"fire-gcs",[Ve]:"fire-gcs-compat",[Be]:"fire-fst",[He]:"fire-fst-compat",[qe]:"fire-vertex","fire-js":"fire-js",[We]:"fire-js-all"},Qe=new Map,Ye=new Map,Xe=new Map;function Je(e,t){try{e.container.addComponent(t)}catch(n){be.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function $e(e){const t=e.name;if(Xe.has(t))return be.debug("There were multiple attempts to register component ".concat(t,".")),!1;Xe.set(t,e);for(const n of Qe.values())Je(n,e);for(const n of Ye.values())Je(n,e);return!0}function Ze(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function et(e){return null!==e&&void 0!==e&&void 0!==e.settings}const tt=new T("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class nt{constructor(e,t,n){this._isDeleted=!1,this._options=(0,i.A)({},e),this._config=(0,i.A)({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new V("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tt.create("app-deleted",{appName:this._name})}}const rt="12.6.0";function st(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=(0,i.A)({name:Ke,automaticDataCollectionEnabled:!0},t),s=r.name;if("string"!==typeof s||!s)throw tt.create("bad-app-name",{appName:String(s)});if(n||(n=m()),!n)throw tt.create("no-options");const a=Qe.get(s);if(a){if(P(n,a.options)&&P(r,a.config))return a;throw tt.create("duplicate-app",{appName:s})}const o=new H(s);for(const i of Xe.values())o.addComponent(i);const l=new nt(n,r,o);return Qe.set(s,l),l}function it(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ke;const t=Qe.get(e);if(!t&&e===Ke&&m())return st();if(!t)throw tt.create("no-app",{appName:e});return t}function at(e,t,n){var r;let s=null!==(r=Ge[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),i&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void be.warn(e.join(" "))}$e(new V("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const ot="firebase-heartbeat-store";let lt=null;function ct(){return lt||(lt=ue("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ot)}catch(n){console.warn(n)}}}).catch(e=>{throw tt.create("idb-open",{originalErrorMessage:e.message})})),lt}async function ut(e,t){try{const n=(await ct()).transaction(ot,"readwrite"),r=n.objectStore(ot);await r.put(t,dt(e)),await n.done}catch(n){if(n instanceof j)be.warn(n.message);else{const e=tt.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});be.warn(e.message)}}}function dt(e){return"".concat(e.name,"!").concat(e.options.appId)}class ht{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new mt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ft();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){be.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ft(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),pt(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),pt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=c(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return be.warn(t),""}}}function ft(){return(new Date).toISOString().substring(0,10)}class mt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!_()&&A().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ct()).transaction(ot),n=await t.objectStore(ot).get(dt(e));return await t.done,n}catch(t){if(t instanceof j)be.warn(t.message);else{const e=tt.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});be.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return ut(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return ut(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function pt(e){return c(JSON.stringify({version:2,heartbeats:e})).length}var gt;gt="",$e(new V("platform-logger",e=>new ge(e),"PRIVATE")),$e(new V("heartbeat",e=>new ht(e),"PRIVATE")),at(ye,ve,gt),at(ye,ve,"esm2020"),at("fire-js","");at("firebase","12.6.0","app");const yt="@firebase/installations",vt="0.6.19",bt=1e4,xt="w:".concat(vt),wt="FIS_v2",Nt=36e5,St=new T("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function kt(e){return e instanceof j&&e.code.includes("request-failed")}function Et(e){let{projectId:t}=e;return"".concat("https://firebaseinstallations.googleapis.com/v1","/projects/").concat(t,"/installations")}function _t(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function At(e,t){const n=(await t.json()).error;return St.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function Ct(e){let{apiKey:t}=e;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function jt(e,t){let{refreshToken:n}=t;const r=Ct(e);return r.append("Authorization",function(e){return"".concat(wt," ").concat(e)}(n)),r}async function Tt(e){const t=await e();return t.status>=500&&t.status<600?e():t}function It(e){return new Promise(t=>{setTimeout(t,e)})}const Pt=/^[cdef][\w-]{21}$/;function Rt(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){const t=(n=e,btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_"));var n;return t.substr(0,22)}(e);return Pt.test(t)?t:""}catch(e){return""}}function Dt(e){return"".concat(e.appName,"!").concat(e.appId)}const Ot=new Map;function Lt(e,t){const n=Dt(e);Mt(n,t),function(e,t){const n=Ut();n&&n.postMessage({key:e,fid:t});zt()}(n,t)}function Mt(e,t){const n=Ot.get(e);if(n)for(const r of n)r(t)}let Ft=null;function Ut(){return!Ft&&"BroadcastChannel"in self&&(Ft=new BroadcastChannel("[Firebase] FID Change"),Ft.onmessage=e=>{Mt(e.data.key,e.data.fid)}),Ft}function zt(){0===Ot.size&&Ft&&(Ft.close(),Ft=null)}const Vt="firebase-installations-store";let Bt=null;function qt(){return Bt||(Bt=ue("firebase-installations-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(Vt)}})),Bt}async function Ht(e,t){const n=Dt(e),r=(await qt()).transaction(Vt,"readwrite"),s=r.objectStore(Vt),i=await s.get(n);return await s.put(t,n),await r.done,i&&i.fid===t.fid||Lt(e,t.fid),t}async function Wt(e){const t=Dt(e),n=(await qt()).transaction(Vt,"readwrite");await n.objectStore(Vt).delete(t),await n.done}async function Kt(e,t){const n=Dt(e),r=(await qt()).transaction(Vt,"readwrite"),s=r.objectStore(Vt),i=await s.get(n),a=t(i);return void 0===a?await s.delete(n):await s.put(a,n),await r.done,!a||i&&i.fid===a.fid||Lt(e,a.fid),a}async function Gt(e){let t;const n=await Kt(e.appConfig,n=>{const r=function(e){const t=e||{fid:Rt(),registrationStatus:0};return Xt(t)}(n),s=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine){return{installationEntry:t,registrationPromise:Promise.reject(St.create("app-offline"))}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=async function(e,t){try{const n=await async function(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e,{fid:s}=t;const i=Et(n),a=Ct(n),o=r.getImmediate({optional:!0});if(o){const e=await o.getHeartbeatsHeader();e&&a.append("x-firebase-client",e)}const l={fid:s,authVersion:wt,appId:n.appId,sdkVersion:xt},c={method:"POST",headers:a,body:JSON.stringify(l)},u=await Tt(()=>fetch(i,c));if(u.ok){const e=await u.json();return{fid:e.fid||s,registrationStatus:2,refreshToken:e.refreshToken,authToken:_t(e.authToken)}}throw await At("Create Installation",u)}(e,t);return Ht(e.appConfig,n)}catch(n){throw kt(n)&&409===n.customData.serverCode?await Wt(e.appConfig):await Ht(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}(e,n);return{installationEntry:n,registrationPromise:r}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:Qt(e)}:{installationEntry:t}}(e,r);return t=s.registrationPromise,s.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function Qt(e){let t=await Yt(e.appConfig);for(;1===t.registrationStatus;)await It(100),t=await Yt(e.appConfig);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await Gt(e);return n||t}return t}function Yt(e){return Kt(e,e=>{if(!e)throw St.create("installation-not-found");return Xt(e)})}function Xt(e){return 1===(t=e).registrationStatus&&t.registrationTime+bt<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function Jt(e,t){let{appConfig:n,heartbeatServiceProvider:r}=e;const s=function(e,t){let{fid:n}=t;return"".concat(Et(e),"/").concat(n,"/authTokens:generate")}(n,t),i=jt(n,t),a=r.getImmediate({optional:!0});if(a){const e=await a.getHeartbeatsHeader();e&&i.append("x-firebase-client",e)}const o={installation:{sdkVersion:xt,appId:n.appId}},l={method:"POST",headers:i,body:JSON.stringify(o)},c=await Tt(()=>fetch(s,l));if(c.ok){return _t(await c.json())}throw await At("Generate Auth Token",c)}async function $t(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=await Kt(e.appConfig,r=>{if(!en(r))throw St.create("not-registered");const s=r.authToken;if(!n&&function(e){return 2===e.requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Nt}(e)}(s))return r;if(1===s.requestStatus)return t=async function(e,t){let n=await Zt(e.appConfig);for(;1===n.authToken.requestStatus;)await It(100),n=await Zt(e.appConfig);const r=n.authToken;return 0===r.requestStatus?$t(e,t):r}(e,n),r;{if(!navigator.onLine)throw St.create("app-offline");const n=function(e){const t={requestStatus:1,requestTime:Date.now()};return(0,i.A)((0,i.A)({},e),{},{authToken:t})}(r);return t=async function(e,t){try{const n=await Jt(e,t),r=(0,i.A)((0,i.A)({},t),{},{authToken:n});return await Ht(e.appConfig,r),n}catch(n){if(!kt(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=(0,i.A)((0,i.A)({},t),{},{authToken:{requestStatus:0}});await Ht(e.appConfig,n)}else await Wt(e.appConfig);throw n}}(e,n),n}});return t?await t:r.authToken}function Zt(e){return Kt(e,e=>{if(!en(e))throw St.create("not-registered");const t=e.authToken;return 1===(n=t).requestStatus&&n.requestTime+bt<Date.now()?(0,i.A)((0,i.A)({},e),{},{authToken:{requestStatus:0}}):e;var n})}function en(e){return void 0!==e&&2===e.registrationStatus}async function tn(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=e;await async function(e){const{registrationPromise:t}=await Gt(e);t&&await t}(n);return(await $t(n,t)).token}function nn(e){return St.create("missing-app-config-values",{valueName:e})}const rn="installations",sn=e=>{const t=Ze(e.getProvider("app").getImmediate(),rn).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await Gt(t);return r?r.catch(console.error):$t(t).catch(console.error),n.fid}(t),getToken:e=>tn(t,e)}};$e(new V(rn,e=>{const t=e.getProvider("app").getImmediate(),n=function(e){if(!e||!e.options)throw nn("App Configuration");if(!e.name)throw nn("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw nn(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t);return{app:t,appConfig:n,heartbeatServiceProvider:Ze(t,"heartbeat"),_delete:()=>Promise.resolve()}},"PUBLIC")),$e(new V("installations-internal",sn,"PRIVATE")),at(yt,vt),at(yt,vt,"esm2020");const an="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",on="google.c.a.c_id",ln=1e4;var cn,un;function dn(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function hn(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let s=0;s<n.length;++s)r[s]=n.charCodeAt(s);return r}!function(e){e[e.DATA_MESSAGE=1]="DATA_MESSAGE",e[e.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"}(cn||(cn={})),function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(un||(un={}));const fn="fcm_token_details_db",mn="fcm_token_object_Store";const pn="firebase-messaging-store";let gn=null;function yn(){return gn||(gn=ue("firebase-messaging-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(pn)}})),gn}async function vn(e){const t=xn(e),n=await yn(),r=await n.transaction(pn).objectStore(pn).get(t);if(r)return r;{const t=await async function(e){if("databases"in indexedDB){const e=(await indexedDB.databases()).map(e=>e.name);if(!e.includes(fn))return null}let t=null;return(await ue(fn,5,{upgrade:async(n,r,s,i)=>{if(r<2)return;if(!n.objectStoreNames.contains(mn))return;const a=i.objectStore(mn),o=await a.index("fcmSenderId").get(e);if(await a.clear(),o)if(2===r){var l;const e=o;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(l=e.createTime)&&void 0!==l?l:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"===typeof e.vapidKey?e.vapidKey:dn(e.vapidKey)}}}else if(3===r){const e=o;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:dn(e.auth),p256dh:dn(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:dn(e.vapidKey)}}}else if(4===r){const e=o;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:dn(e.auth),p256dh:dn(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:dn(e.vapidKey)}}}}})).close(),await de(fn),await de("fcm_vapid_details_db"),await de("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"===typeof e.createTime&&e.createTime>0&&"string"===typeof e.token&&e.token.length>0&&"string"===typeof t.auth&&t.auth.length>0&&"string"===typeof t.p256dh&&t.p256dh.length>0&&"string"===typeof t.endpoint&&t.endpoint.length>0&&"string"===typeof t.swScope&&t.swScope.length>0&&"string"===typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null}(e.appConfig.senderId);if(t)return await bn(e,t),t}}async function bn(e,t){const n=xn(e),r=(await yn()).transaction(pn,"readwrite");return await r.objectStore(pn).put(t,n),await r.done,t}function xn(e){let{appConfig:t}=e;return t.appId}const wn=new T("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function Nn(e,t){const n={method:"DELETE",headers:await kn(e)};try{const r=await fetch("".concat(Sn(e.appConfig),"/").concat(t),n),s=await r.json();if(s.error){const e=s.error.message;throw wn.create("token-unsubscribe-failed",{errorInfo:e})}}catch(r){throw wn.create("token-unsubscribe-failed",{errorInfo:null===r||void 0===r?void 0:r.toString()})}}function Sn(e){let{projectId:t}=e;return"".concat("https://fcmregistrations.googleapis.com/v1","/projects/").concat(t,"/registrations")}async function kn(e){let{appConfig:t,installations:n}=e;const r=await n.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":"FIS ".concat(r)})}function En(e){let{p256dh:t,auth:n,endpoint:r,vapidKey:s}=e;const i={web:{endpoint:r,auth:n,p256dh:t}};return s!==an&&(i.web.applicationPubKey=s),i}async function _n(e){const t=await async function(e,t){const n=await e.pushManager.getSubscription();if(n)return n;return e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:hn(t)})}(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:dn(t.getKey("auth")),p256dh:dn(t.getKey("p256dh"))},r=await vn(e.firebaseDependencies);if(r){if(function(e,t){const n=t.vapidKey===e.vapidKey,r=t.endpoint===e.endpoint,s=t.auth===e.auth,i=t.p256dh===e.p256dh;return n&&r&&s&&i}(r.subscriptionOptions,n))return Date.now()>=r.createTime+6048e5?async function(e,t){try{const n=await async function(e,t){const n=await kn(e),r=En(t.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{const n=await fetch("".concat(Sn(e.appConfig),"/").concat(t.token),s);i=await n.json()}catch(a){throw wn.create("token-update-failed",{errorInfo:null===a||void 0===a?void 0:a.toString()})}if(i.error){const e=i.error.message;throw wn.create("token-update-failed",{errorInfo:e})}if(!i.token)throw wn.create("token-update-no-token");return i.token}(e.firebaseDependencies,t),r=(0,i.A)((0,i.A)({},t),{},{token:n,createTime:Date.now()});return await bn(e.firebaseDependencies,r),n}catch(n){throw n}}(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await Nn(e.firebaseDependencies,r.token)}catch(s){console.warn(s)}return An(e.firebaseDependencies,n)}return An(e.firebaseDependencies,n)}async function An(e,t){const n=await async function(e,t){const n=await kn(e),r=En(t),s={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{const t=await fetch(Sn(e.appConfig),s);i=await t.json()}catch(a){throw wn.create("token-subscribe-failed",{errorInfo:null===a||void 0===a?void 0:a.toString()})}if(i.error){const e=i.error.message;throw wn.create("token-subscribe-failed",{errorInfo:e})}if(!i.token)throw wn.create("token-subscribe-no-token");return i.token}(e,t),r={token:n,createTime:Date.now(),subscriptionOptions:t};return await bn(e,r),r.token}function Cn(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcmMessageId};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const s=t.notification.image;s&&(e.notification.image=s);const i=t.notification.icon;i&&(e.notification.icon=i)}(t,e),function(e,t){if(!t.data)return;e.data=t.data}(t,e),function(e,t){var n,r,s,i,a;if(!t.fcmOptions&&(null===(n=t.notification)||void 0===n||!n.click_action))return;e.fcmOptions={};const o=null!==(r=null===(s=t.fcmOptions)||void 0===s?void 0:s.link)&&void 0!==r?r:null===(i=t.notification)||void 0===i?void 0:i.click_action;o&&(e.fcmOptions.link=o);const l=null===(a=t.fcmOptions)||void 0===a?void 0:a.analytics_label;l&&(e.fcmOptions.analyticsLabel=l)}(t,e),t}function jn(e){return wn.create("missing-app-config-values",{valueName:e})}!function(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));n.join("")}("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Tn{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(e){if(!e||!e.options)throw jn("App Configuration Object");if(!e.name)throw jn("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw jn(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}async function In(e){try{e.swRegistration=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),e.swRegistration.update().catch(()=>{}),await async function(e){return new Promise((t,n)=>{const r=setTimeout(()=>n(new Error("Service worker not registered after ".concat(ln," ms"))),ln),s=e.installing||e.waiting;e.active?(clearTimeout(r),t()):s?s.onstatechange=e=>{var n;"activated"===(null===(n=e.target)||void 0===n?void 0:n.state)&&(s.onstatechange=null,clearTimeout(r),t())}:(clearTimeout(r),n(new Error("No incoming service worker found.")))})}(e.swRegistration)}catch(t){throw wn.create("failed-service-worker-registration",{browserErrorMessage:null===t||void 0===t?void 0:t.message})}}async function Pn(e,t){if(!navigator)throw wn.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw wn.create("permission-blocked");return await async function(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=an)}(e,null===t||void 0===t?void 0:t.vapidKey),await async function(e,t){if(t||e.swRegistration||await In(e),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw wn.create("invalid-sw-registration");e.swRegistration=t}}(e,null===t||void 0===t?void 0:t.serviceWorkerRegistration),_n(e)}async function Rn(e,t,n){const r=function(e){switch(e){case un.NOTIFICATION_CLICKED:return"notification_open";case un.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[on],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}async function Dn(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===un.PUSH_RECEIVED&&("function"===typeof e.onMessageHandler?e.onMessageHandler(Cn(n)):e.onMessageHandler.next(Cn(n)));const r=n.data;var s;"object"===typeof(s=r)&&s&&on in s&&"1"===r["google.c.a.e"]&&await Rn(e,n.messageType,r)}const On="@firebase/messaging",Ln="0.12.23",Mn=e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>Pn(t,e)}};function Fn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it();return async function(){try{await A()}catch(e){return!1}return"undefined"!==typeof window&&_()&&C()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}().then(e=>{if(!e)throw wn.create("unsupported-browser")},e=>{throw wn.create("indexed-db-unsupported")}),Ze(z(e),"messaging").getImmediate()}function Un(e,t){return function(e,t){if(!navigator)throw wn.create("only-available-in-window");return e.onMessageHandler=t,()=>{e.onMessageHandler=null}}(e=z(e),t)}$e(new V("messaging",e=>{const t=new Tn(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>Dn(t,e)),t},"PUBLIC")),$e(new V("messaging-internal",Mn,"PRIVATE")),at(On,Ln),at(On,Ln,"esm2020");const zn="analytics",Vn="https://www.googletagmanager.com/gtag/js",Bn=new J("@firebase/analytics"),qn=new T("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function Hn(e){if(!e.startsWith(Vn)){const t=qn.create("invalid-gtag-resource",{gtagURL:e});return Bn.warn(t.message),""}return e}function Wn(e){return Promise.all(e.map(e=>e.catch(e=>e)))}function Kn(e,t){const n=function(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}("firebase-js-sdk-policy",{createScriptURL:Hn}),r=document.createElement("script"),s="".concat(Vn,"?l=").concat(e,"&id=").concat(t);r.src=n?null===n||void 0===n?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function Gn(e,t,n,r){return async function(s){try{for(var i=arguments.length,a=new Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];if("event"===s){const[r,s]=a;await async function(e,t,n,r,s){try{let i=[];if(s&&s.send_to){let e=s.send_to;Array.isArray(e)||(e=[e]);const r=await Wn(n);for(const n of e){const e=r.find(e=>e.measurementId===n),s=e&&t[e.appId];if(!s){i=[];break}i.push(s)}}0===i.length&&(i=Object.values(t)),await Promise.all(i),e("event",r,s||{})}catch(i){Bn.error(i)}}(e,t,n,r,s)}else if("config"===s){const[s,i]=a;await async function(e,t,n,r,s,i){const a=r[s];try{if(a)await t[a];else{const e=(await Wn(n)).find(e=>e.measurementId===s);e&&await t[e.appId]}}catch(o){Bn.error(o)}e("config",s,i)}(e,t,n,r,s,i)}else if("consent"===s){const[t,n]=a;e("consent",t,n)}else if("get"===s){const[t,n,r]=a;e("get",t,n,r)}else if("set"===s){const[t]=a;e("set",t)}else e(s,...a)}catch(l){Bn.error(l)}}}const Qn=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function Yn(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Xn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Qn,n=arguments.length>2?arguments[2]:void 0;const{appId:r,apiKey:s,measurementId:i}=e.options;if(!r)throw qn.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw qn.create("no-api-key")}const a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new $n;return setTimeout(async()=>{o.abort()},void 0!==n?n:6e4),Jn({appId:r,apiKey:s,measurementId:i},a,o,t)}async function Jn(e,t,n){let{throttleEndTimeMillis:r,backoffCount:s}=t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Qn;const{appId:a,measurementId:o}=e;try{await function(e,t){return new Promise((n,r)=>{const s=Math.max(t-Date.now(),0),i=setTimeout(n,s);e.addEventListener(()=>{clearTimeout(i),r(qn.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(n,r)}catch(c){if(o)return Bn.warn("Timed out fetching this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(o)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===c||void 0===c?void 0:c.message,"]")),{appId:a,measurementId:o};throw c}try{const t=await async function(e){const{appId:t,apiKey:n}=e,r={method:"GET",headers:Yn(n)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",t),i=await fetch(s,r);if(200!==i.status&&304!==i.status){let e="";try{var a;const t=await i.json();null!==(a=t.error)&&void 0!==a&&a.message&&(e=t.error.message)}catch(o){}throw qn.create("config-fetch-failed",{httpStatus:i.status,responseMessage:e})}return i.json()}(e);return i.deleteThrottleMetadata(a),t}catch(c){var l;const t=c;if(!function(e){if(!(e instanceof j)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(t)){if(i.deleteThrottleMetadata(a),o)return Bn.warn("Failed to fetch this Firebase app's measurement ID from the server."+" Falling back to the measurement ID ".concat(o)+' provided in the "measurementId" field in the local Firebase config. ['.concat(null===t||void 0===t?void 0:t.message,"]")),{appId:a,measurementId:o};throw c}const r=503===Number(null===t||void 0===t||null===(l=t.customData)||void 0===l?void 0:l.httpStatus)?U(s,i.intervalMillis,30):U(s,i.intervalMillis),u={throttleEndTimeMillis:Date.now()+r,backoffCount:s+1};return i.setThrottleMetadata(a,u),Bn.debug("Calling attemptFetch again in ".concat(r," millis")),Jn(e,u,n,i)}}class $n{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}let Zn,er;function tr(e){er=e}function nr(e){Zn=e}async function rr(e,t,n,r,s,i,a){var o;const l=Xn(e);l.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Bn.warn("The measurement ID in the local Firebase config (".concat(e.options.measurementId,")")+" does not match the measurement ID fetched from the server (".concat(t.measurementId,").")+" To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(e=>Bn.error(e)),t.push(l);const c=async function(){if(!_())return Bn.warn(qn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await A()}catch(e){return Bn.warn(qn.create("indexeddb-unavailable",{errorInfo:null===e||void 0===e?void 0:e.toString()}).message),!1}return!0}().then(e=>e?r.getId():void 0),[u,d]=await Promise.all([l,c]);(function(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Vn)&&n.src.includes(e))return n;return null})(i)||Kn(i,u.measurementId),er&&(s("consent","default",er),tr(void 0)),s("js",new Date);const h=null!==(o=null===a||void 0===a?void 0:a.config)&&void 0!==o?o:{};return h.origin="firebase",h.update=!0,null!=d&&(h.firebase_id=d),s("config",u.measurementId,h),Zn&&(s("set",Zn),nr(void 0)),u.measurementId}class sr{constructor(e){this.app=e}_delete(){return delete ir[this.app.options.appId],Promise.resolve()}}let ir={},ar=[];const or={};let lr,cr,ur="dataLayer",dr="gtag",hr=!1;function fr(e,t,n){!function(){const e=[];if(k()&&e.push("This is a browser extension environment."),C()||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>"(".concat(t+1,") ").concat(e)).join(" "),n=qn.create("invalid-analytics-context",{errorInfo:t});Bn.warn(n.message)}}();const r=e.options.appId;if(!r)throw qn.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw qn.create("no-api-key");Bn.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest'+" measurement ID for this Firebase app. Falling back to the measurement ID ".concat(e.options.measurementId)+' provided in the "measurementId" field in the local Firebase config.')}if(null!=ir[r])throw qn.create("already-exists",{id:r});if(!hr){!function(e){let t=[];Array.isArray(window[e])?t=window[e]:window[e]=t}(ur);const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,s){let i=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];window[r].push(arguments)};return window[s]&&"function"===typeof window[s]&&(i=window[s]),window[s]=Gn(i,e,t,n),{gtagCore:i,wrappedGtag:window[s]}}(ir,ar,or,ur,dr);cr=e,lr=t,hr=!0}ir[r]=rr(e,ar,or,t,lr,ur,n);return new sr(e)}function mr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it();e=z(e);const t=Ze(e,zn);return t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Ze(e,zn);if(n.isInitialized()){const e=n.getImmediate();if(P(t,n.getOptions()))return e;throw qn.create("already-initialized")}const r=n.initialize({options:t});return r}(e)}function pr(e,t,n){e=z(e),async function(e,t,n,r){if(r&&r.global){const t={};for(const e of Object.keys(n))t["user_properties.".concat(e)]=n[e];return e("set",t),Promise.resolve()}e("config",await t,{update:!0,user_properties:n})}(cr,ir[e.app.options.appId],t,n).catch(e=>Bn.error(e))}function gr(e,t,n,r){e=z(e),async function(e,t,n,r,s){if(s&&s.global)e("event",n,r);else{const s=await t;e("event",n,(0,i.A)((0,i.A)({},r),{},{send_to:s}))}}(cr,ir[e.app.options.appId],t,n,r).catch(e=>Bn.error(e))}const yr="@firebase/analytics",vr="0.10.19";$e(new V(zn,(e,t)=>{let{options:n}=t;return fr(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),n)},"PUBLIC")),$e(new V("analytics-internal",function(e){try{const t=e.getProvider(zn).getImmediate();return{logEvent:(e,n,r)=>gr(t,e,n,r),setUserProperties:(e,n)=>pr(t,e,n)}}catch(t){throw qn.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),at(yr,vr),at(yr,vr,"esm2020");var br,xr,wr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Nr={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}function n(e,t,n){n||(n=0);const r=Array(16);if("string"===typeof t)for(var s=0;s<16;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;s<16;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];let i,a=e.g[3];i=t+(a^n&(s^a))+r[0]+3614090360&4294967295,i=a+(s^(t=n+(i<<7&4294967295|i>>>25))&(n^s))+r[1]+3905402710&4294967295,a=t+(i<<12&4294967295|i>>>20),i=s+(n^a&(t^n))+r[2]+606105819&4294967295,i=n+(t^(s=a+(i<<17&4294967295|i>>>15))&(a^t))+r[3]+3250441966&4294967295,i=t+(a^(n=s+(i<<22&4294967295|i>>>10))&(s^a))+r[4]+4118548399&4294967295,i=a+(s^(t=n+(i<<7&4294967295|i>>>25))&(n^s))+r[5]+1200080426&4294967295,a=t+(i<<12&4294967295|i>>>20),i=s+(n^a&(t^n))+r[6]+2821735955&4294967295,i=n+(t^(s=a+(i<<17&4294967295|i>>>15))&(a^t))+r[7]+4249261313&4294967295,i=t+(a^(n=s+(i<<22&4294967295|i>>>10))&(s^a))+r[8]+1770035416&4294967295,i=a+(s^(t=n+(i<<7&4294967295|i>>>25))&(n^s))+r[9]+2336552879&4294967295,a=t+(i<<12&4294967295|i>>>20),i=s+(n^a&(t^n))+r[10]+4294925233&4294967295,i=n+(t^(s=a+(i<<17&4294967295|i>>>15))&(a^t))+r[11]+2304563134&4294967295,i=t+(a^(n=s+(i<<22&4294967295|i>>>10))&(s^a))+r[12]+1804603682&4294967295,i=a+(s^(t=n+(i<<7&4294967295|i>>>25))&(n^s))+r[13]+4254626195&4294967295,a=t+(i<<12&4294967295|i>>>20),i=s+(n^a&(t^n))+r[14]+2792965006&4294967295,i=n+(t^(s=a+(i<<17&4294967295|i>>>15))&(a^t))+r[15]+1236535329&4294967295,i=t+(s^a&((n=s+(i<<22&4294967295|i>>>10))^s))+r[1]+4129170786&4294967295,i=a+(n^s&((t=n+(i<<5&4294967295|i>>>27))^n))+r[6]+3225465664&4294967295,a=t+(i<<9&4294967295|i>>>23),i=s+(t^n&(a^t))+r[11]+643717713&4294967295,i=n+(a^t&((s=a+(i<<14&4294967295|i>>>18))^a))+r[0]+3921069994&4294967295,i=t+(s^a&((n=s+(i<<20&4294967295|i>>>12))^s))+r[5]+3593408605&4294967295,i=a+(n^s&((t=n+(i<<5&4294967295|i>>>27))^n))+r[10]+38016083&4294967295,a=t+(i<<9&4294967295|i>>>23),i=s+(t^n&(a^t))+r[15]+3634488961&4294967295,i=n+(a^t&((s=a+(i<<14&4294967295|i>>>18))^a))+r[4]+3889429448&4294967295,i=t+(s^a&((n=s+(i<<20&4294967295|i>>>12))^s))+r[9]+568446438&4294967295,i=a+(n^s&((t=n+(i<<5&4294967295|i>>>27))^n))+r[14]+3275163606&4294967295,a=t+(i<<9&4294967295|i>>>23),i=s+(t^n&(a^t))+r[3]+4107603335&4294967295,i=n+(a^t&((s=a+(i<<14&4294967295|i>>>18))^a))+r[8]+1163531501&4294967295,i=t+(s^a&((n=s+(i<<20&4294967295|i>>>12))^s))+r[13]+2850285829&4294967295,i=a+(n^s&((t=n+(i<<5&4294967295|i>>>27))^n))+r[2]+4243563512&4294967295,a=t+(i<<9&4294967295|i>>>23),i=s+(t^n&(a^t))+r[7]+1735328473&4294967295,i=n+(a^t&((s=a+(i<<14&4294967295|i>>>18))^a))+r[12]+2368359562&4294967295,i=t+((n=s+(i<<20&4294967295|i>>>12))^s^a)+r[5]+4294588738&4294967295,i=a+((t=n+(i<<4&4294967295|i>>>28))^n^s)+r[8]+2272392833&4294967295,a=t+(i<<11&4294967295|i>>>21),i=s+(a^t^n)+r[11]+1839030562&4294967295,i=n+((s=a+(i<<16&4294967295|i>>>16))^a^t)+r[14]+4259657740&4294967295,i=t+((n=s+(i<<23&4294967295|i>>>9))^s^a)+r[1]+2763975236&4294967295,i=a+((t=n+(i<<4&4294967295|i>>>28))^n^s)+r[4]+1272893353&4294967295,a=t+(i<<11&4294967295|i>>>21),i=s+(a^t^n)+r[7]+4139469664&4294967295,i=n+((s=a+(i<<16&4294967295|i>>>16))^a^t)+r[10]+3200236656&4294967295,i=t+((n=s+(i<<23&4294967295|i>>>9))^s^a)+r[13]+681279174&4294967295,i=a+((t=n+(i<<4&4294967295|i>>>28))^n^s)+r[0]+3936430074&4294967295,a=t+(i<<11&4294967295|i>>>21),i=s+(a^t^n)+r[3]+3572445317&4294967295,i=n+((s=a+(i<<16&4294967295|i>>>16))^a^t)+r[6]+76029189&4294967295,i=t+((n=s+(i<<23&4294967295|i>>>9))^s^a)+r[9]+3654602809&4294967295,i=a+((t=n+(i<<4&4294967295|i>>>28))^n^s)+r[12]+3873151461&4294967295,a=t+(i<<11&4294967295|i>>>21),i=s+(a^t^n)+r[15]+530742520&4294967295,i=n+((s=a+(i<<16&4294967295|i>>>16))^a^t)+r[2]+3299628645&4294967295,i=t+(s^((n=s+(i<<23&4294967295|i>>>9))|~a))+r[0]+4096336452&4294967295,i=a+(n^((t=n+(i<<6&4294967295|i>>>26))|~s))+r[7]+1126891415&4294967295,a=t+(i<<10&4294967295|i>>>22),i=s+(t^(a|~n))+r[14]+2878612391&4294967295,i=n+(a^((s=a+(i<<15&4294967295|i>>>17))|~t))+r[5]+4237533241&4294967295,i=t+(s^((n=s+(i<<21&4294967295|i>>>11))|~a))+r[12]+1700485571&4294967295,i=a+(n^((t=n+(i<<6&4294967295|i>>>26))|~s))+r[3]+2399980690&4294967295,a=t+(i<<10&4294967295|i>>>22),i=s+(t^(a|~n))+r[10]+4293915773&4294967295,i=n+(a^((s=a+(i<<15&4294967295|i>>>17))|~t))+r[1]+2240044497&4294967295,i=t+(s^((n=s+(i<<21&4294967295|i>>>11))|~a))+r[8]+1873313359&4294967295,i=a+(n^((t=n+(i<<6&4294967295|i>>>26))|~s))+r[15]+4264355552&4294967295,a=t+(i<<10&4294967295|i>>>22),i=s+(t^(a|~n))+r[6]+2734768916&4294967295,i=n+(a^((s=a+(i<<15&4294967295|i>>>17))|~t))+r[13]+1309151649&4294967295,i=t+(s^((n=s+(i<<21&4294967295|i>>>11))|~a))+r[4]+4149444226&4294967295,i=a+(n^((t=n+(i<<6&4294967295|i>>>26))|~s))+r[11]+3174756917&4294967295,a=t+(i<<10&4294967295|i>>>22),i=s+(t^(a|~n))+r[2]+718787259&4294967295,i=n+(a^((s=a+(i<<15&4294967295|i>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(i<<21&4294967295|i>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+a&4294967295}function r(e,t){this.h=t;const n=[];let r=!0;for(let s=e.length-1;s>=0;s--){const i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.F=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.D=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.v=function(e,t){void 0===t&&(t=e.length);const r=t-this.blockSize,s=this.C;let i=this.h,a=0;for(;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var n=e.length-8;n<e.length;++n)e[n]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,n=0;n<4;++n)for(let r=0;r<32;r+=8)e[t++]=this.g[n]>>>r&255;return e};var s={};function i(e){return-128<=e&&e<128?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],e<0?-1:0)}):new r([0|e],e<0?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(e<0)return h(a(-e));const t=[];let n=1;for(let r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new r(t,0)}var o=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){const t=e.g.length,n=[];for(let r=0;r<t;r++)n[r]=~e.g[r];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new p(o,o);if(d(e))return t=g(h(e),t),new p(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new p(h(t.g),t.h);if(e.g.length>30){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;r.l(e)<=0;)n=y(n),r=y(r);var s=v(n,1),i=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=i.add(r);c.l(e)<=0&&(s=s.add(n),i=c),r=v(r,1),n=v(n,1)}return t=f(e,s.j(t)),new p(s,t)}for(s=o;e.l(t)>=0;){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=(r=Math.ceil(Math.log(n)/Math.LN2))<=48?1:Math.pow(2,r-48),c=(i=a(n)).j(t);d(c)||c.l(e)>0;)c=(i=a(n-=r)).j(t);u(i)&&(i=l),s=s.add(i),e=f(e,c)}return new p(s,e)}function y(e){const t=e.g.length+1,n=[];for(let r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new r(n,e.h)}function v(e,t){const n=t>>5;t%=32;const s=e.g.length-n,i=[];for(let r=0;r<s;r++)i[r]=t>0?e.i(r+n)>>>t|e.i(r+n+1)<<32-t:e.i(r+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();let e=0,t=1;for(let n=0;n<this.g.length;n++){const r=this.i(n);e+=(r>=0?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);const t=a(Math.pow(e,6));var n=this;let r="";for(;;){const s=g(n,t).g;let i=(((n=f(n,s.j(t))).g.length>0?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;i.length<6;)i="0"+i;r=i+r}},e.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){const t=Math.max(this.g.length,e.g.length),n=[];let s=0;for(let r=0;r<=t;r++){let t=s+(65535&this.i(r))+(65535&e.i(r)),i=(t>>>16)+(this.i(r)>>>16)+(e.i(r)>>>16);s=i>>>16,t&=65535,i&=65535,n[r]=i<<16|t}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(this.l(c)<0&&e.l(c)<0)return a(this.m()*e.m());const t=this.g.length+e.g.length,n=[];for(var s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(let t=0;t<e.g.length;t++){const r=this.i(s)>>>16,i=65535&this.i(s),a=e.i(t)>>>16,o=65535&e.i(t);n[2*s+2*t]+=i*o,m(n,2*s+2*t),n[2*s+2*t+1]+=r*o,m(n,2*s+2*t+1),n[2*s+2*t+1]+=i*a,m(n,2*s+2*t+1),n[2*s+2*t+2]+=r*a,m(n,2*s+2*t+2)}for(e=0;e<t;e++)n[e]=n[2*e+1]<<16|n[2*e];for(e=t;e<2*t;e++)n[e]=0;return new r(n,0)},e.B=function(e){return g(this,e).h},e.and=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new r(n,this.h&e.h)},e.or=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new r(n,this.h|e.h)},e.xor=function(e){const t=Math.max(this.g.length,e.g.length),n=[];for(let r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.A,t.prototype.reset=t.prototype.u,t.prototype.update=t.prototype.v,xr=Nr.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.B,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if((n=n||10)<2||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');const r=a(Math.pow(n,8));let s=o;for(let o=0;o<t.length;o+=8){var i=Math.min(8,t.length-o);const e=parseInt(t.substring(o,o+i),n);i<8?(i=a(Math.pow(n,i)),s=s.j(i).add(a(e))):(s=s.j(r),s=s.add(a(e)))}return s},br=Nr.Integer=r}).apply("undefined"!==typeof wr?wr:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var Sr,kr,Er,_r,Ar,Cr,jr,Tr,Ir="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Pr={};(function(){var e,t=Object.defineProperty;var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Ir&&Ir];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);function r(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}r("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),r("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),r("Object.entries",function(e){return e||function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push([t,e[t]]);return n}});var s=s||{},i=this||self;function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){return(l=o).apply(null,arguments)}function c(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function u(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Ob=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}var d="undefined"!==typeof AsyncContext&&"function"===typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function h(e){const t=e.length;if(t>0){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let r=1;r<arguments.length;r++){const t=arguments[r];var n=typeof t;if("array"==(n="object"!=n?n:t?Array.isArray(t)?"array":n:"null")||"object"==n&&"number"==typeof t.length){n=e.length||0;const r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function m(e){i.setTimeout(()=>{throw e},0)}function p(){var e=x;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var g=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new y,e=>e.reset());class y{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let v,b=!1,x=new class{constructor(){this.h=this.g=null}add(e,t){const n=g.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},w=()=>{const e=Promise.resolve(void 0);v=()=>{e.then(N)}};function N(){for(var e;e=p();){try{e.h.call(e.g)}catch(n){m(n)}var t=g;t.j(e),t.h<100&&(t.h++,e.next=t.g,t.g=e)}b=!1}function S(){this.u=this.u,this.C=this.C}function k(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},k.prototype.h=function(){this.defaultPrevented=!0};var E=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function _(e){return/^[\s\xa0]*$/.test(e)}function A(e,t){k.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}u(A,k),A.prototype.init=function(e,t){const n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement)),this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&A.Z.h.call(this)},A.prototype.h=function(){A.Z.h.call(this);const e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var C="closure_listenable_"+(1e6*Math.random()|0),j=0;function T(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++j,this.da=this.fa=!1}function I(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function P(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function R(e){const t={};for(const n in e)t[n]=e[n];return t}const D="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<D.length;t++)n=D[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function L(e){this.src=e,this.g={},this.h=0}function M(e,t){const n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=i>=0)&&Array.prototype.splice.call(s,i,1),r&&(I(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function F(e,t,n,r){for(let s=0;s<e.length;++s){const i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}L.prototype.add=function(e,t,n,r,s){const i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);const a=F(e,t,r,s);return a>-1?(t=e[a],n||(t.fa=!1)):((t=new T(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var U="closure_lm_"+(1e6*Math.random()|0),z={};function V(e,t,n,r,s){if(r&&r.once)return q(e,t,n,r,s);if(Array.isArray(t)){for(let i=0;i<t.length;i++)V(e,t[i],n,r,s);return null}return n=X(n),e&&e[C]?e.J(t,n,a(r)?!!r.capture:!!r,s):B(e,t,n,!1,r,s)}function B(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");const o=a(s)?!!s.capture:!!s;let l=Q(e);if(l||(e[U]=l=new L(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=G;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)E||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(K(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function q(e,t,n,r,s){if(Array.isArray(t)){for(let i=0;i<t.length;i++)q(e,t[i],n,r,s);return null}return n=X(n),e&&e[C]?e.K(t,n,a(r)?!!r.capture:!!r,s):B(e,t,n,!0,r,s)}function H(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)H(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=X(n),e&&e[C]?(e=e.i,(i=String(t).toString())in e.g&&((n=F(t=e.g[i],n,r,s))>-1&&(I(t[n]),Array.prototype.splice.call(t,n,1),0==t.length&&(delete e.g[i],e.h--)))):e&&(e=Q(e))&&(t=e.g[t.toString()],e=-1,t&&(e=F(t,n,r,s)),(n=e>-1?t[e]:null)&&W(n))}function W(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[C])M(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(K(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Q(t))?(M(n,e),0==n.h&&(n.src=null,t[U]=null)):I(e)}}}function K(e){return e in z?z[e]:z[e]="on"+e}function G(e,t){if(e.da)e=!0;else{t=new A(t,this);const n=e.listener,r=e.ha||e.src;e.fa&&W(e),e=n.call(r,t)}return e}function Q(e){return(e=e[U])instanceof L?e:null}var Y="__closure_events_fn_"+(1e9*Math.random()>>>0);function X(e){return"function"===typeof e?e:(e[Y]||(e[Y]=function(t){return e.handleEvent(t)}),e[Y])}function J(){S.call(this),this.i=new L(this),this.M=this,this.G=null}function $(e,t){var n,r=e.G;if(r)for(n=[];r;r=r.G)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new k(t,e);else if(t instanceof k)t.target=t.target||e;else{var s=t;O(t=new k(r,e),s)}let i,a;if(s=!0,n)for(a=n.length-1;a>=0;a--)i=t.g=n[a],s=Z(i,r,!0,t)&&s;if(i=t.g=e,s=Z(i,r,!0,t)&&s,s=Z(i,r,!1,t)&&s,n)for(a=0;a<n.length;a++)i=t.g=n[a],s=Z(i,r,!1,t)&&s}function Z(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let s=!0;for(let i=0;i<t.length;++i){const a=t[i];if(a&&!a.da&&a.capture==n){const t=a.listener,n=a.ha||a.src;a.fa&&M(e.i,a),s=!1!==t.call(n,r)&&s}}return s&&!r.defaultPrevented}function ee(e){e.g=function(e,t){if("function"!==typeof e){if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=l(e.handleEvent,e)}return Number(t)>2147483647?-1:i.setTimeout(e,t||0)}(()=>{e.g=null,e.i&&(e.i=!1,ee(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}u(J,S),J.prototype[C]=!0,J.prototype.removeEventListener=function(e,t,n,r){H(this,e,t,n,r)},J.prototype.N=function(){if(J.Z.N.call(this),this.i){var e=this.i;for(const t in e.g){const n=e.g[t];for(let e=0;e<n.length;e++)I(n[e]);delete e.g[t],e.h--}}this.G=null},J.prototype.J=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},J.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class te extends S{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ee(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ne(e){S.call(this),this.h=e,this.g={}}u(ne,S);var re=[];function se(e){P(e.g,function(e,t){this.g.hasOwnProperty(t)&&W(e)},e),e.g={}}ne.prototype.N=function(){ne.Z.N.call(this),se(this)},ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ie=i.JSON.stringify,ae=i.JSON.parse,oe=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function le(){}function ce(){}var ue={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function de(){k.call(this,"d")}function he(){k.call(this,"c")}u(de,k),u(he,k);var fe={},me=null;function pe(){return me=me||new J}function ge(e){k.call(this,fe.Ia,e)}function ye(e){const t=pe();$(t,new ge(t))}function ve(e,t){k.call(this,fe.STAT_EVENT,e),this.stat=t}function be(e){const t=pe();$(t,new ve(t,e))}function xe(e,t){k.call(this,fe.Ja,e),this.size=t}function we(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ne(){this.g=!0}function Se(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{const i=JSON.parse(t);if(i)for(e=0;e<i.length;e++)if(Array.isArray(i[e])){var n=i[e];if(!(n.length<2)){var r=n[1];if(Array.isArray(r)&&!(r.length<1)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(let e=1;e<r.length;e++)r[e]=""}}}return ie(i)}catch(i){return t}}(e,n)+(r?" "+r:"")})}fe.Ia="serverreachability",u(ge,k),fe.STAT_EVENT="statevent",u(ve,k),fe.Ja="timingevent",u(xe,k),Ne.prototype.ua=function(){this.g=!1},Ne.prototype.info=function(){};var ke,Ee={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},_e={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function Ae(){}function Ce(e){return encodeURIComponent(String(e))}function je(e){var t=1;e=e.split(":");const n=[];for(;t>0&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Te(e,t,n,r){this.j=e,this.i=t,this.l=n,this.S=r||1,this.V=new ne(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ie}function Ie(){this.i=null,this.g="",this.h=!1}u(Ae,le),Ae.prototype.g=function(){return new XMLHttpRequest},ke=new Ae;var Pe={},Re={};function De(e,t,n){e.M=1,e.A=it(et(t)),e.u=n,e.R=!0,Oe(e,null)}function Oe(e,t){e.F=Date.now(),Fe(e),e.B=et(e.A);var n=e.B,r=e.S;Array.isArray(r)||(r=[String(r)]),bt(n.i,"t",r),e.C=0,n=e.j.L,e.h=new Ie,e.g=an(e.j,n?t:null,!e.u),e.P>0&&(e.O=new te(l(e.Y,e,e.g),e.P)),t=e.V,n=e.g,r=e.ba;var s="readystatechange";Array.isArray(s)||(s&&(re[0]=s.toString()),s=re);for(let i=0;i<s.length;i++){const e=V(n,s[i],r||t.handleEvent,!1,t.h||t);if(!e)break;t.g[e.key]=e}t=e.J?R(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ye(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i){var a="",o=i.split("&");for(let e=0;e<o.length;e++){var l=o[e].split("=");if(l.length>1){const e=l[0];l=l[1];const t=e.split("_");a=t.length>=2&&"type"==t[1]?a+(e+"=")+l+"&":a+(e+"=redacted&")}}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.v,e.B,e.l,e.S,e.u)}function Le(e){return!!e.g&&("GET"==e.v&&2!=e.M&&e.j.Aa)}function Me(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Re:(n=Number(t.substring(n,r)),isNaN(n)?Pe:(r+=1)+n>t.length?Re:(t=t.slice(r,r+n),e.C=r+n,t))}function Fe(e){e.T=Date.now()+e.H,Ue(e,e.H)}function Ue(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=we(l(e.aa,e),t)}function ze(e){e.D&&(i.clearTimeout(e.D),e.D=null)}function Ve(e){0==e.j.I||e.K||en(e.j,e)}function Be(e){ze(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,se(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function qe(e,t){try{var n=e.j;if(0!=n.I&&(n.g==e||Qe(n.h,e)))if(!e.L&&Qe(n.h,e)&&3==n.I){try{var r=n.Ba.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.v){if(n.g){if(!(n.g.F+3e3<e.F))break e;Zt(n),qt(n)}Xt(n),be(18)}}else n.xa=s[1],0<n.xa-n.K&&s[2]<37500&&n.F&&0==n.A&&!n.C&&(n.C=we(l(n.Va,n),6e3));Ge(n.h)<=1&&n.ta&&(n.ta=void 0)}else nn(n,11)}else if((e.L||n.g==e)&&Zt(n),!_(t))for(s=n.Ba.g.parse(t),t=0;t<s.length;t++){let l=s[t];const u=l[0];if(!(u<=n.K))if(n.K=u,l=l[1],2==n.I)if("c"==l[0]){n.M=l[1],n.ba=l[2];const t=l[3];null!=t&&(n.ka=t,n.j.info("VER="+n.ka));const s=l[4];null!=s&&(n.za=s,n.j.info("SVER="+n.za));const u=l[5];null!=u&&"number"===typeof u&&u>0&&(r=1.5*u,n.O=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(Ye(i,i.h),i.h=null))}if(r.G){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.wa=e,st(r.J,r.G,e))}}n.I=3,n.l&&n.l.ra(),n.aa&&(n.T=Date.now()-e.F,n.j.info("Handshake RTT: "+n.T+"ms"));var a=e;if((r=n).na=sn(r,r.L?r.ba:null,r.W),a.L){Xe(r.h,a);var o=a,c=r.O;c&&(o.H=c),o.D&&(ze(o),Fe(o)),r.g=a}else Yt(r);n.i.length>0&&Wt(n)}else"stop"!=l[0]&&"close"!=l[0]||nn(n,7);else 3==n.I&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?nn(n,7):Bt(n):"noop"!=l[0]&&n.l&&n.l.qa(l),n.A=0)}ye()}catch(u){}}Te.prototype.ba=function(e){e=e.target;const t=this.O;t&&3==Ft(e)?t.j():this.Y(e)},Te.prototype.Y=function(e){try{if(e==this.g)e:{const l=Ft(this.g),c=this.g.ya();this.g.ca();if(!(l<3)&&(3!=l||this.g&&(this.h.h||this.g.la()||Ut(this.g)))){this.K||4!=l||7==c||ye(),ze(this);var t=this.g.ca();this.X=t;var n=function(e){if(!Le(e))return e.g.la();const t=Ut(e.g);if(""===t)return"";let n="";const r=t.length,s=4==Ft(e.g);if(!e.h.i){if("undefined"===typeof TextDecoder)return Be(e),Ve(e),"";e.h.i=new i.TextDecoder}for(let i=0;i<r;i++)e.h.h=!0,n+=e.h.i.decode(t[i],{stream:!(s&&i==r-1)});return t.length=0,e.h.g+=n,e.C=0,e.h.g}(this);if(this.o=200==t,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.v,this.B,this.l,this.S,l,t),this.o){if(this.U&&!this.L){t:{if(this.g){var r,s=this.g;if((r=s.g?s.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(r)){var a=r;break t}}a=null}if(!(e=a)){this.o=!1,this.m=3,be(12),Be(this),Ve(this);break e}Se(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,qe(this,e)}if(this.R){let t;for(e=!0;!this.K&&this.C<n.length;){if(t=Me(this,n),t==Re){4==l&&(this.m=4,be(14),e=!1),Se(this.i,this.l,null,"[Incomplete Response]");break}if(t==Pe){this.m=4,be(15),Se(this.i,this.l,n,"[Invalid Chunk]"),e=!1;break}Se(this.i,this.l,t,null),qe(this,t)}if(Le(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=l||0!=n.length||this.h.h||(this.m=1,be(16),e=!1),this.o=this.o&&e,e){if(n.length>0&&!this.W){this.W=!0;var o=this.j;o.g==this&&o.aa&&!o.P&&(o.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),Jt(o),o.P=!0,be(11))}}else Se(this.i,this.l,n,"[Invalid Chunked Response]"),Be(this),Ve(this)}else Se(this.i,this.l,n,null),qe(this,n);4==l&&Be(this),this.o&&!this.K&&(4==l?en(this.j,this):(this.o=!1,Fe(this)))}else(function(e){const t={};e=(e.g&&Ft(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(_(e[r]))continue;var n=je(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==t&&n.indexOf("Unknown SID")>0?(this.m=3,be(12)):(this.m=0,be(13)),Be(this),Ve(this)}}}catch(hs){}},Te.prototype.cancel=function(){this.K=!0,Be(this)},Te.prototype.aa=function(){this.D=null;const e=Date.now();e-this.T>=0?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.B),2!=this.M&&(ye(),be(17)),Be(this),this.m=2,Ve(this)):Ue(this,this.T-e)};var He=class{constructor(e,t){this.g=e,this.map=t}};function We(e){this.l=e||10,i.PerformanceNavigationTiming?e=(e=i.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ke(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Ge(e){return e.h?1:e.g?e.g.size:0}function Qe(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Ye(e,t){e.g?e.g.add(t):e.h=t}function Xe(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Je(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.G);return t}return h(e.i)}We.prototype.cancel=function(){if(this.i=Je(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var $e=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ze(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof Ze?(this.l=e.l,tt(this,e.j),this.o=e.o,this.g=e.g,nt(this,e.u),this.h=e.h,rt(this,xt(e.i)),this.m=e.m):e&&(t=String(e).match($e))?(this.l=!1,tt(this,t[1]||"",!0),this.o=at(t[2]||""),this.g=at(t[3]||"",!0),nt(this,t[4]),this.h=at(t[5]||"",!0),rt(this,t[6]||"",!0),this.m=at(t[7]||"")):(this.l=!1,this.i=new mt(null,this.l))}function et(e){return new Ze(e)}function tt(e,t,n){e.j=n?at(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function nt(e,t){if(t){if(t=Number(t),isNaN(t)||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function rt(e,t,n){t instanceof mt?(e.i=t,function(e,t){t&&!e.j&&(pt(e),e.i=null,e.g.forEach(function(e,t){const n=t.toLowerCase();t!=n&&(gt(this,t),bt(this,n,e))},e)),e.j=t}(e.i,e.l)):(n||(t=ot(t,ht)),e.i=new mt(t,e.l))}function st(e,t,n){e.i.set(t,n)}function it(e){return st(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function at(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ot(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,lt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function lt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Ze.prototype.toString=function(){const e=[];var t=this.j;t&&e.push(ot(t,ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ot(t,ct,!0),"@"),e.push(Ce(n).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.u)&&e.push(":",String(n))),(n=this.h)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ot(n,"/"==n.charAt(0)?dt:ut,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ot(n,ft)),e.join("")},Ze.prototype.resolve=function(e){const t=et(this);let n=!!e.j;n?tt(t,e.j):n=!!e.o,n?t.o=e.o:n=!!e.g,n?t.g=e.g:n=null!=e.u;var r=e.h;if(n)nt(t,e.u);else if(n=!!e.h){if("/"!=r.charAt(0))if(this.g&&!this.h)r="/"+r;else{var s=t.h.lastIndexOf("/");-1!=s&&(r=t.h.slice(0,s+1)+r)}if(".."==(s=r)||"."==s)r="";else if(-1!=s.indexOf("./")||-1!=s.indexOf("/.")){r=0==s.lastIndexOf("/",0),s=s.split("/");const e=[];for(let t=0;t<s.length;){const n=s[t++];"."==n?r&&t==s.length&&e.push(""):".."==n?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),r&&t==s.length&&e.push("")):(e.push(n),r=!0)}r=e.join("/")}else r=s}return n?t.h=r:n=""!==e.i.toString(),n?rt(t,xt(e.i)):n=!!e.m,n&&(t.m=e.m),t};var ct=/[#\/\?@]/g,ut=/[#\?:]/g,dt=/[#\?]/g,ht=/[#\?@]/g,ft=/#/g;function mt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function pt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let n=0;n<e.length;n++){const r=e[n].indexOf("=");let s,i=null;r>=0?(s=e[n].substring(0,r),i=e[n].substring(r+1)):s=e[n],t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function gt(e,t){pt(e),t=wt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function yt(e,t){return pt(e),t=wt(e,t),e.g.has(t)}function vt(e,t){pt(e);let n=[];if("string"===typeof t)yt(e,t)&&(n=n.concat(e.g.get(wt(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)n=n.concat(e[t]);return n}function bt(e,t,n){gt(e,t),n.length>0&&(e.i=null,e.g.set(wt(e,t),h(n)),e.h+=n.length)}function xt(e){const t=new mt;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function wt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Nt(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function St(){this.g=new oe}function kt(e){this.i=e.Sb||null,this.h=e.ab||!1}function Et(e,t){J.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function _t(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function At(e){e.readyState=4,e.l=null,e.j=null,e.B=null,Ct(e)}function Ct(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function jt(e){let t="";return P(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Tt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=jt(n),"string"===typeof e?null!=n&&Ce(n):st(e,t,n))}function It(e){J.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(e=mt.prototype).add=function(e,t){pt(this),this.i=null,e=wt(this,e);let n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){pt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.set=function(e,t){return pt(this),this.i=null,yt(this,e=wt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&(e=vt(this,e)).length>0?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(let r=0;r<t.length;r++){var n=t[r];const s=Ce(n);n=vt(this,n);for(let t=0;t<n.length;t++){let r=s;""!==n[t]&&(r+="="+Ce(n[t])),e.push(r)}}return this.i=e.join("&")},u(kt,le),kt.prototype.g=function(){return new Et(this.i,this.h)},u(Et,J),(e=Et.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,Ct(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||i).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,At(this)),this.readyState=0},e.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ct(this)),this.g&&(this.readyState=3,Ct(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_t(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},e.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?At(this):Ct(this),3==this.readyState&&_t(this)}},e.Oa=function(e){this.g&&(this.response=this.responseText=e,At(this))},e.Na=function(e){this.g&&(this.response=e,At(this))},e.ga=function(){this.g&&At(this)},e.setRequestHeader=function(e,t){this.A.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Et.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),u(It,J);var Pt=/^https?$/i,Rt=["POST","PUT"];function Dt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,Ot(e),Mt(e)}function Ot(e){e.A||(e.A=!0,$(e,"complete"),$(e,"error"))}function Lt(e){if(e.h&&"undefined"!=typeof s)if(e.v&&4==Ft(e))setTimeout(e.Ca.bind(e),0);else if($(e,"readystatechange"),4==Ft(e)){e.h=!1;try{const s=e.ca();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===s){let t=String(e.D).match($e)[1]||null;!t&&i.self&&i.self.location&&(t=i.self.location.protocol.slice(0,-1)),r=!Pt.test(t?t.toLowerCase():"")}n=r}if(n)$(e,"complete"),$(e,"success");else{e.o=6;try{var a=Ft(e)>2?e.g.statusText:""}catch(o){a=""}e.l=a+" ["+e.ca()+"]",Ot(e)}}finally{Mt(e)}}}function Mt(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);const r=e.g;e.g=null,t||$(e,"ready");try{r.onreadystatechange=null}catch(n){}}}function Ft(e){return e.g?e.g.readyState:0}function Ut(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function zt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Vt(e){this.za=0,this.i=[],this.j=new Ne,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=zt("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=zt("baseRetryDelayMs",5e3,e),this.Za=zt("retryDelaySeedMs",1e4,e),this.Ta=zt("forwardChannelMaxRetries",2,e),this.va=zt("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new We(e&&e.concurrentRequestLimit),this.Ba=new St,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function Bt(e){if(Ht(e),3==e.I){var t=e.V++,n=et(e.J);if(st(n,"SID",e.M),st(n,"RID",t),st(n,"TYPE","terminate"),Gt(e,n),(t=new Te(e,e.j,t)).M=2,t.A=it(et(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.A.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.A,n=!0),n||(t.g=an(t.j,null),t.g.ea(t.A)),t.F=Date.now(),Fe(t)}rn(e)}function qt(e){e.g&&(Jt(e),e.g.cancel(),e.g=null)}function Ht(e){qt(e),e.v&&(i.clearTimeout(e.v),e.v=null),Zt(e),e.h.cancel(),e.m&&("number"===typeof e.m&&i.clearTimeout(e.m),e.m=null)}function Wt(e){if(!Ke(e.h)&&!e.m){e.m=!0;var t=e.Ea;v||w(),b||(v(),b=!0),x.add(t,e),e.D=0}}function Kt(e,t){var n;n=t?t.l:e.V++;const r=et(e.J);st(r,"SID",e.M),st(r,"RID",n),st(r,"AID",e.K),Gt(e,r),e.u&&e.o&&Tt(r,e.u,e.o),n=new Te(e,e.j,n,e.D+1),null===e.u&&(n.J=e.o),t&&(e.i=t.G.concat(e.i)),t=Qt(e,n,1e3),n.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),Ye(e.h,n),De(n,r,t)}function Gt(e,t){e.H&&P(e.H,function(e,n){st(t,n,e)}),e.l&&P({},function(e,n){st(t,n,e)})}function Qt(e,t,n){n=Math.min(e.i.length,n);const r=e.l?l(e.l.Ka,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?n>0?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let c=0;c<n;c++){var i=s[c].g;const n=s[c].map;if((i-=t)<0)t=Math.max(0,s[c].g-100),l=!1;else try{i="req"+i+"_"||0;try{var o=n instanceof Map?n:Object.entries(n);for(const[t,n]of o){let r=n;a(n)&&(r=ie(n)),e.push(i+t+"="+encodeURIComponent(r))}}catch(Dr){throw e.push(i+"type="+encodeURIComponent("_badmap")),Dr}}catch(Dr){r&&r(n)}}if(l){o=e.join("&");break e}}o=void 0}return e=e.i.splice(0,n),t.G=e,o}function Yt(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;v||w(),b||(v(),b=!0),x.add(t,e),e.A=0}}function Xt(e){return!(e.g||e.v||e.A>=3)&&(e.Y++,e.v=we(l(e.Da,e),tn(e,e.A)),e.A++,!0)}function Jt(e){null!=e.B&&(i.clearTimeout(e.B),e.B=null)}function $t(e){e.g=new Te(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=et(e.na);st(t,"RID","rpc"),st(t,"SID",e.M),st(t,"AID",e.K),st(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&st(t,"TO",e.ia),st(t,"TYPE","xmlhttp"),Gt(e,t),e.u&&e.o&&Tt(t,e.u,e.o),e.O&&(e.g.H=e.O);var n=e.g;e=e.ba,n.M=1,n.A=it(et(t)),n.u=null,n.R=!0,Oe(n,e)}function Zt(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function en(e,t){var n=null;if(e.g==t){Zt(e),Jt(e),e.g=null;var r=2}else{if(!Qe(e.h,t))return;n=t.G,Xe(e.h,t),r=1}if(0!=e.I)if(t.o)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.F;var s=e.D;$(r=pe(),new xe(r,n)),Wt(e)}else Yt(e);else if(3==(s=t.m)||0==s&&t.X>0||!(1==r&&function(e,t){return!(Ge(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.G.concat(e.i),!0):!(1==e.I||2==e.I||e.D>=(e.Sa?0:e.Ta))&&(e.m=we(l(e.Ea,e,t),tn(e,e.D)),e.D++,!0))}(e,t)||2==r&&Xt(e)))switch(n&&n.length>0&&(t=e.h,t.i=t.i.concat(n)),s){case 1:nn(e,5);break;case 4:nn(e,10);break;case 3:nn(e,6);break;default:nn(e,2)}}function tn(e,t){let n=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(n*=2),n*t}function nn(e,t){if(e.j.info("Error code "+t),2==t){var n=l(e.bb,e),r=e.Ua;const t=!r;r=new Ze(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||tt(r,"https"),it(r),t?function(e,t){const n=new Ne;if(i.Image){const r=new Image;r.onload=c(Nt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=c(Nt,n,"TestLoadImage: error",!1,t,r),r.onabort=c(Nt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=c(Nt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ne;const n=new AbortController,r=setTimeout(()=>{n.abort(),Nt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Nt(0,0,!0,t):Nt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Nt(0,0,!1,t)})}(r.toString(),n)}else be(2);e.I=0,e.l&&e.l.pa(t),rn(e),Ht(e)}function rn(e){if(e.I=0,e.ja=[],e.l){const t=Je(e.h);0==t.length&&0==e.i.length||(f(e.ja,t),f(e.ja,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.oa()}}function sn(e,t,n){var r=n instanceof Ze?et(n):new Ze(n);if(""!=r.g)t&&(r.g=t+"."+r.g),nt(r,r.u);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;const e=new Ze(null);r&&tt(e,r),t&&(e.g=t),s&&nt(e,s),n&&(e.h=n),r=e}return n=e.G,t=e.wa,n&&t&&st(r,n,t),st(r,"VER",e.ka),Gt(e,r),r}function an(e,t,n){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Aa&&!e.ma?new It(new kt({ab:n})):new It(e.ma)).Fa(e.L),t}function on(){}function ln(){}function cn(e,t){J.call(this),this.g=new Vt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!_(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!_(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new hn(this)}function un(e){de.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function dn(){he.call(this),this.status=1}function hn(e){this.g=e}(e=It.prototype).Fa=function(e){this.H=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ke.g(),this.g.onreadystatechange=d(l(this.Ca,this));try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Dt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(Array.prototype.indexOf.call(Rt,t,void 0)>=0)||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(e),this.v=!1}catch(a){Dt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,$(this,"complete"),$(this,"abort"),Mt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Mt(this,!0)),It.Z.N.call(this)},e.Ca=function(){this.u||(this.B||this.v||this.j?Lt(this):this.Xa())},e.Xa=function(){Lt(this)},e.isActive=function(){return!!this.g},e.ca=function(){try{return Ft(this)>2?this.g.status:-1}catch(e){return-1}},e.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},e.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),ae(t)}},e.ya=function(){return this.o},e.Ha=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Vt.prototype).ka=8,e.I=1,e.connect=function(e,t,n,r){be(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.J=sn(this,null,this.W),Wt(this)},e.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const s=new Te(this,this.j,e);let i=this.o;if(this.U&&(i?(i=R(i),O(i,this.U)):i=this.U),null!==this.u||this.R||(s.J=i,i=null),this.S)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if((t+=r)>4096){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Qt(this,s,t),st(n=et(this.J),"RID",e),st(n,"CVER",22),this.G&&st(n,"X-HTTP-Session-Id",this.G),Gt(this,n),i&&(this.R?t="headers="+Ce(jt(i))+"&"+t:this.u&&Tt(n,this.u,i)),Ye(this.h,s),this.Ra&&st(n,"TYPE","init"),this.S?(st(n,"$req",t),st(n,"SID","null"),s.U=!0,De(s,n,null)):De(s,n,t),this.I=2}}else 3==this.I&&(e?Kt(this,e):0==this.i.length||Ke(this.h)||Kt(this))},e.Da=function(){if(this.v=null,$t(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=we(l(this.Wa,this),e)}},e.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,be(10),qt(this),$t(this))},e.Va=function(){null!=this.C&&(this.C=null,qt(this),Xt(this),be(19))},e.bb=function(e){e?(this.j.info("Successfully pinged google.com"),be(2)):(this.j.info("Failed to ping google.com"),be(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=on.prototype).ra=function(){},e.qa=function(){},e.pa=function(){},e.oa=function(){},e.isActive=function(){return!0},e.Ka=function(){},ln.prototype.g=function(e,t){return new cn(e,t)},u(cn,J),cn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},cn.prototype.close=function(){Bt(this.g)},cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=ie(e),e=n);t.i.push(new He(t.Ya++,e)),3==t.I&&Wt(t)},cn.prototype.N=function(){this.g.l=null,delete this.j,Bt(this.g),delete this.g,cn.Z.N.call(this)},u(un,de),u(dn,he),u(hn,on),hn.prototype.ra=function(){$(this.g,"a")},hn.prototype.qa=function(e){$(this.g,new un(e))},hn.prototype.pa=function(e){$(this.g,new dn)},hn.prototype.oa=function(){$(this.g,"b")},ln.prototype.createWebChannel=ln.prototype.g,cn.prototype.send=cn.prototype.o,cn.prototype.open=cn.prototype.m,cn.prototype.close=cn.prototype.close,Tr=Pr.createWebChannelTransport=function(){return new ln},jr=Pr.getStatEventTarget=function(){return pe()},Cr=Pr.Event=fe,Ar=Pr.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Ee.NO_ERROR=0,Ee.TIMEOUT=8,Ee.HTTP_ERROR=6,_r=Pr.ErrorCode=Ee,_e.COMPLETE="complete",Er=Pr.EventType=_e,ce.EventType=ue,ue.OPEN="a",ue.CLOSE="b",ue.ERROR="c",ue.MESSAGE="d",J.prototype.listen=J.prototype.J,kr=Pr.WebChannel=ce,Pr.FetchXmlHttpFactory=kt,It.prototype.listenOnce=It.prototype.K,It.prototype.getLastError=It.prototype.Ha,It.prototype.getLastErrorCode=It.prototype.ya,It.prototype.getStatus=It.prototype.ca,It.prototype.getResponseJson=It.prototype.La,It.prototype.getResponseText=It.prototype.la,It.prototype.send=It.prototype.ea,It.prototype.setWithCredentials=It.prototype.Fa,Sr=Pr.XhrIo=It}).apply("undefined"!==typeof Ir?Ir:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const Rr="@firebase/firestore",Dr="4.9.2";class Or{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Or.UNAUTHENTICATED=new Or(null),Or.GOOGLE_CREDENTIALS=new Or("google-credentials-uid"),Or.FIRST_PARTY=new Or("first-party-uid"),Or.MOCK_USER=new Or("mock-user");let Lr="12.3.0";const Mr=new J("@firebase/firestore");function Fr(){return Mr.logLevel}function Ur(e){if(Mr.logLevel<=K.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Br);Mr.debug("Firestore (".concat(Lr,"): ").concat(e),...s)}}function zr(e){if(Mr.logLevel<=K.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Br);Mr.error("Firestore (".concat(Lr,"): ").concat(e),...s)}}function Vr(e){if(Mr.logLevel<=K.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Br);Mr.warn("Firestore (".concat(Lr,"): ").concat(e),...s)}}function Br(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function qr(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,Hr(e,r,n)}function Hr(e,t,n){let r="FIRESTORE (".concat(Lr,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw zr(r),new Error(r)}function Wr(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||Hr(t,s,r)}function Kr(e,t){return e}const Gr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qr extends j{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Yr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Xr{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Jr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Or.UNAUTHENTICATED))}shutdown(){}}class $r{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Zr{constructor(e){this.t=e,this.currentUser=Or.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Wr(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new Yr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Yr,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{Ur("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(Ur("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Yr)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(Ur("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Wr("string"==typeof t.accessToken,31837,{l:t}),new Xr(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Wr(null===e||"string"==typeof e,2055,{h:e}),new Or(e)}}class es{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=Or.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ts{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new es(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(Or.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ns{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class rs{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,et(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Wr(void 0===this.o,3512);const n=e=>{null!=e.error&&Ur("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,Ur("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{Ur("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):Ur("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new ns(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Wr("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new ns(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function ss(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class is{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=ss(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function as(e,t){return e<t?-1:e>t?1:0}function os(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),s=t.charAt(r);if(n!==s)return us(n)===us(s)?as(n,s):us(n)?1:-1}return as(e.length,t.length)}const ls=55296,cs=57343;function us(e){const t=e.charCodeAt(0);return t>=ls&&t<=cs}function ds(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const hs="__name__";class fs{constructor(e,t,n){void 0===t?t=0:t>e.length&&qr(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&qr(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===fs.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof fs?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=fs.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return as(e.length,t.length)}static compareSegments(e,t){const n=fs.isNumericId(e),r=fs.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?fs.extractNumericId(e).compare(fs.extractNumericId(t)):os(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return br.fromString(e.substring(4,e.length-2))}}class ms extends fs{construct(e,t,n){return new ms(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new Qr(Gr.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new ms(e)}static emptyPath(){return new ms([])}}const ps=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class gs extends fs{construct(e,t,n){return new gs(e,t,n)}static isValidIdentifier(e){return ps.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),gs.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===hs}static keyField(){return new gs([hs])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new Qr(Gr.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Qr(Gr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Qr(Gr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new Qr(Gr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new gs(t)}static emptyPath(){return new gs([])}}class ys{constructor(e){this.path=e}static fromPath(e){return new ys(ms.fromString(e))}static fromName(e){return new ys(ms.fromString(e).popFirst(5))}static empty(){return new ys(ms.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ms.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ms.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ys(new ms(e.slice()))}}function vs(e,t,n){if(!n)throw new Qr(Gr.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function bs(e){if(!ys.isDocumentKey(e))throw new Qr(Gr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function xs(e){if(ys.isDocumentKey(e))throw new Qr(Gr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function ws(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Ns(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":qr(12329,{type:typeof e})}function Ss(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Qr(Gr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ns(e);throw new Qr(Gr.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function ks(e,t){const n={typeString:e};return t&&(n.value=t),n}function Es(e,t){if(!ws(e))throw new Qr(Gr.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(s&&typeof a!==s){n="JSON field '".concat(r,"' must be a ").concat(s,".");break}if(void 0!==i&&a!==i.value){n="Expected '".concat(r,"' field to equal '").concat(i.value,"'");break}}if(n)throw new Qr(Gr.INVALID_ARGUMENT,n);return!0}const _s=-62135596800,As=1e6;class Cs{static now(){return Cs.fromMillis(Date.now())}static fromDate(e){return Cs.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*As);return new Cs(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Qr(Gr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Qr(Gr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<_s)throw new Qr(Gr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Qr(Gr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/As}_compareTo(e){return this.seconds===e.seconds?as(this.nanoseconds,e.nanoseconds):as(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Cs._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Es(e,Cs._jsonSchema))return new Cs(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_s;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Cs._jsonSchemaVersion="firestore/timestamp/1.0",Cs._jsonSchema={type:ks("string",Cs._jsonSchemaVersion),seconds:ks("number"),nanoseconds:ks("number")};class js{static fromTimestamp(e){return new js(e)}static min(){return new js(new Cs(0,0))}static max(){return new js(new Cs(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const Ts=-1;class Is{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Is.UNKNOWN_ID=-1;function Ps(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=js.fromTimestamp(1e9===r?new Cs(n+1,0):new Cs(n,r));return new Ds(s,ys.empty(),t)}function Rs(e){return new Ds(e.readTime,e.key,Ts)}class Ds{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Ds(js.min(),ys.empty(),Ts)}static max(){return new Ds(js.max(),ys.empty(),Ts)}}function Os(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ys.comparator(e.documentKey,t.documentKey),0!==n?n:as(e.largestBatchId,t.largestBatchId))}const Ls="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ms{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Fs(e){if(e.code!==Gr.FAILED_PRECONDITION||e.message!==Ls)throw e;Ur("LocalStore","Unexpectedly lost primary lease")}class Us{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&qr(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Us((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Us?t:Us.resolve(t)}catch(e){return Us.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Us.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Us.reject(t)}static resolve(e){return new Us((t,n)=>{t(e)})}static reject(e){return new Us((t,n)=>{n(e)})}static waitFor(e){return new Us((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=Us.resolve(!1);for(const n of e)t=t.next(e=>e?Us.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new Us((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new Us((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function zs(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Vs(e){return"IndexedDbTransactionError"===e.name}class Bs{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Bs.ce=-1;const qs=-1;function Hs(e){return null==e}function Ws(e){return 0===e&&1/e==-1/0}function Ks(e){return"number"==typeof e&&Number.isInteger(e)&&!Ws(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Gs="\x01";function Qs(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Xs(t)),t=Ys(e.get(n),t);return Xs(t)}function Ys(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case Gs:n+="\x01\x11";break;default:n+=t}}return n}function Xs(e){return e+Gs+"\x01"}const Js="remoteDocuments",$s="owner",Zs="mutationQueues",ei="mutations";const ti="documentMutations",ni="remoteDocumentsV14",ri="remoteDocumentGlobal",si="targets",ii="targetDocuments",ai="targetGlobal",oi="collectionParents",li="clientMetadata",ci="bundles",ui="namedQueries",di="indexConfiguration",hi="indexState",fi="indexEntries",mi="documentOverlays",pi="globals",gi=[Zs,ei,ti,Js,si,$s,ai,ii,li,ri,oi,ci,ui],yi=[Zs,ei,ti,ni,si,$s,ai,ii,li,ri,oi,ci,ui,mi],vi=yi,bi=[...vi,di,hi,fi];function xi(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function wi(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ni(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Si{constructor(e,t){this.comparator=e,this.root=t||Ei.EMPTY}insert(e,t){return new Si(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ei.BLACK,null,null))}remove(e){return new Si(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ei.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ki(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ki(this.root,e,this.comparator,!1)}getReverseIterator(){return new ki(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ki(this.root,e,this.comparator,!0)}}class ki{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ei{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:Ei.RED,this.left=null!=r?r:Ei.EMPTY,this.right=null!=s?s:Ei.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new Ei(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Ei.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Ei.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ei.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ei.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw qr(43730,{key:this.key,value:this.value});if(this.right.isRed())throw qr(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw qr(27949);return e+(this.isRed()?0:1)}}Ei.EMPTY=null,Ei.RED=!0,Ei.BLACK=!1,Ei.EMPTY=new class{constructor(){this.size=0}get key(){throw qr(57766)}get value(){throw qr(16141)}get color(){throw qr(16727)}get left(){throw qr(29726)}get right(){throw qr(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new Ei(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class _i{constructor(e){this.comparator=e,this.data=new Si(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Ai(this.data.getIterator())}getIteratorFrom(e){return new Ai(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof _i))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new _i(this.comparator);return t.data=e,t}}class Ai{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class Ci{constructor(e){this.fields=e,e.sort(gs.comparator)}static empty(){return new Ci([])}unionWith(e){let t=new _i(gs.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new Ci(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return ds(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class ji extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ti{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ji("Invalid base64 string: "+e):e}}(e);return new Ti(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Ti(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return as(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ti.EMPTY_BYTE_STRING=new Ti("");const Ii=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Pi(e){if(Wr(!!e,39018),"string"==typeof e){let t=0;const n=Ii.exec(e);if(Wr(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Ri(e.seconds),nanos:Ri(e.nanos)}}function Ri(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Di(e){return"string"==typeof e?Ti.fromBase64String(e):Ti.fromUint8Array(e)}const Oi="server_timestamp",Li="__type__",Mi="__previous_value__",Fi="__local_write_time__";function Ui(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Li])||void 0===t?void 0:t.stringValue)===Oi}function zi(e){const t=e.mapValue.fields[Mi];return Ui(t)?zi(t):t}function Vi(e){const t=Pi(e.mapValue.fields[Fi].timestampValue);return new Cs(t.seconds,t.nanos)}class Bi{constructor(e,t,n,r,s,i,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const qi="(default)";class Hi{constructor(e,t){this.projectId=e,this.database=t||qi}static empty(){return new Hi("","")}get isDefaultDatabase(){return this.database===qi}isEqual(e){return e instanceof Hi&&e.projectId===this.projectId&&e.database===this.database}}const Wi="__type__",Ki="__max__",Gi={mapValue:{fields:{__type__:{stringValue:Ki}}}},Qi="__vector__",Yi="value";function Xi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Ui(e)?4:fa(e)?9007199254740991:da(e)?10:11:qr(28295,{value:e})}function Ji(e,t){if(e===t)return!0;const n=Xi(e);if(n!==Xi(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Vi(e).isEqual(Vi(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Pi(e.timestampValue),r=Pi(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Di(e.bytesValue).isEqual(Di(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Ri(e.geoPointValue.latitude)===Ri(t.geoPointValue.latitude)&&Ri(e.geoPointValue.longitude)===Ri(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Ri(e.integerValue)===Ri(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=Ri(e.doubleValue),r=Ri(t.doubleValue);return n===r?Ws(n)===Ws(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ds(e.arrayValue.values||[],t.arrayValue.values||[],Ji);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(xi(n)!==xi(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Ji(n[s],r[s])))return!1;return!0}(e,t);default:return qr(52216,{left:e})}}function $i(e,t){return void 0!==(e.values||[]).find(e=>Ji(e,t))}function Zi(e,t){if(e===t)return 0;const n=Xi(e),r=Xi(t);if(n!==r)return as(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return as(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=Ri(e.integerValue||e.doubleValue),r=Ri(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return ea(e.timestampValue,t.timestampValue);case 4:return ea(Vi(e),Vi(t));case 5:return os(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Di(e),r=Di(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=as(n[s],r[s]);if(0!==e)return e}return as(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=as(Ri(e.latitude),Ri(t.latitude));return 0!==n?n:as(Ri(e.longitude),Ri(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return ta(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,s,i;const a=e.fields||{},o=t.fields||{},l=null===(n=a[Yi])||void 0===n?void 0:n.arrayValue,c=null===(r=o[Yi])||void 0===r?void 0:r.arrayValue,u=as((null===l||void 0===l||null===(s=l.values)||void 0===s?void 0:s.length)||0,(null===c||void 0===c||null===(i=c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:ta(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Gi.mapValue&&t===Gi.mapValue)return 0;if(e===Gi.mapValue)return 1;if(t===Gi.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=os(r[a],i[a]);if(0!==e)return e;const t=Zi(n[r[a]],s[i[a]]);if(0!==t)return t}return as(r.length,i.length)}(e.mapValue,t.mapValue);default:throw qr(23264,{he:n})}}function ea(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return as(e,t);const n=Pi(e),r=Pi(t),s=as(n.seconds,r.seconds);return 0!==s?s:as(n.nanos,r.nanos)}function ta(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=Zi(n[s],r[s]);if(e)return e}return as(n.length,r.length)}function na(e){return ra(e)}function ra(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Pi(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Di(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ys.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=ra(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(ra(e.fields[s]));return n+"}"}(e.mapValue):qr(61005,{value:e})}function sa(e){switch(Xi(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=zi(e);return t?16+sa(t):16;case 5:return 2*e.stringValue.length;case 6:return Di(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+sa(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return wi(e.fields,(e,n)=>{t+=e.length+sa(n)}),t}(e.mapValue);default:throw qr(13486,{value:e})}}function ia(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function aa(e){return!!e&&"integerValue"in e}function oa(e){return!!e&&"arrayValue"in e}function la(e){return!!e&&"nullValue"in e}function ca(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function ua(e){return!!e&&"mapValue"in e}function da(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Wi])||void 0===t?void 0:t.stringValue)===Qi}function ha(e){if(e.geoPointValue)return{geoPointValue:(0,i.A)({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:(0,i.A)({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return wi(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=ha(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ha(e.arrayValue.values[n]);return t}return(0,i.A)({},e)}function fa(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Ki}class ma{constructor(e){this.value=e}static empty(){return new ma({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!ua(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ha(t)}setAll(e){let t=gs.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=ha(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());ua(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Ji(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];ua(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){wi(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new ma(ha(this.value))}}function pa(e){const t=[];return wi(e.fields,(e,n)=>{const r=new gs([e]);if(ua(n)){const e=pa(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Ci(t)}class ga{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new ga(e,0,js.min(),js.min(),js.min(),ma.empty(),0)}static newFoundDocument(e,t,n,r){return new ga(e,1,t,js.min(),n,r,0)}static newNoDocument(e,t){return new ga(e,2,t,js.min(),js.min(),ma.empty(),0)}static newUnknownDocument(e,t){return new ga(e,3,t,js.min(),js.min(),ma.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(js.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ma.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ma.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=js.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof ga&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ga(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class ya{constructor(e,t){this.position=e,this.inclusive=t}}function va(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?ys.comparator(ys.fromName(a.referenceValue),n.key):Zi(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function ba(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ji(e.position[n],t.position[n]))return!1;return!0}class xa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function wa(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Na{}class Sa extends Na{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Ia(e,t,n):"array-contains"===t?new Oa(e,n):"in"===t?new La(e,n):"not-in"===t?new Ma(e,n):"array-contains-any"===t?new Fa(e,n):new Sa(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Pa(e,n):new Ra(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Zi(t,this.value)):null!==t&&Xi(this.value)===Xi(t)&&this.matchesComparison(Zi(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return qr(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ka extends Na{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new ka(e,t)}matches(e){return Ea(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Ea(e){return"and"===e.op}function _a(e){return Aa(e)&&Ea(e)}function Aa(e){for(const t of e.filters)if(t instanceof ka)return!1;return!0}function Ca(e){if(e instanceof Sa)return e.field.canonicalString()+e.op.toString()+na(e.value);if(_a(e))return e.filters.map(e=>Ca(e)).join(",");{const t=e.filters.map(e=>Ca(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function ja(e,t){return e instanceof Sa?function(e,t){return t instanceof Sa&&e.op===t.op&&e.field.isEqual(t.field)&&Ji(e.value,t.value)}(e,t):e instanceof ka?function(e,t){return t instanceof ka&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&ja(n,t.filters[r]),!0)}(e,t):void qr(19439)}function Ta(e){return e instanceof Sa?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(na(e.value))}(e):e instanceof ka?function(e){return e.op.toString()+" {"+e.getFilters().map(Ta).join(" ,")+"}"}(e):"Filter"}class Ia extends Sa{constructor(e,t,n){super(e,t,n),this.key=ys.fromName(n.referenceValue)}matches(e){const t=ys.comparator(e.key,this.key);return this.matchesComparison(t)}}class Pa extends Sa{constructor(e,t){super(e,"in",t),this.keys=Da("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Ra extends Sa{constructor(e,t){super(e,"not-in",t),this.keys=Da("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Da(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ys.fromName(e.referenceValue))}class Oa extends Sa{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return oa(t)&&$i(t.arrayValue,this.value)}}class La extends Sa{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&$i(this.value.arrayValue,t)}}class Ma extends Sa{constructor(e,t){super(e,"not-in",t)}matches(e){if($i(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!$i(this.value.arrayValue,t)}}class Fa extends Sa{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!oa(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>$i(this.value.arrayValue,e))}}class Ua{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.Te=null}}function za(e){return new Ua(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Va(e){const t=Kr(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Ca(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Hs(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>na(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>na(e)).join(",")),t.Te=e}return t.Te}function Ba(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!wa(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!ja(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!ba(e.startAt,t.startAt)&&ba(e.endAt,t.endAt)}function qa(e){return ys.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Ha{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Wa(e,t,n,r,s,i,a,o){return new Ha(e,t,n,r,s,i,a,o)}function Ka(e){return new Ha(e)}function Ga(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Qa(e){return null!==e.collectionGroup}function Ya(e){const t=Kr(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new _i(gs.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new xa(r,n))}),e.has(gs.keyField().canonicalString())||t.Ie.push(new xa(gs.keyField(),n))}return t.Ie}function Xa(e){const t=Kr(e);return t.Ee||(t.Ee=Ja(t,Ya(e))),t.Ee}function Ja(e,t){if("F"===e.limitType)return za(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new xa(e.field,t)});const n=e.endAt?new ya(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new ya(e.startAt.position,e.startAt.inclusive):null;return za(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function $a(e,t){const n=e.filters.concat([t]);return new Ha(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Za(e,t,n){return new Ha(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function eo(e,t){return Ba(Xa(e),Xa(t))&&e.limitType===t.limitType}function to(e){return"".concat(Va(Xa(e)),"|lt:").concat(e.limitType)}function no(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Ta(e)).join(", "),"]")),Hs(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>na(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>na(e)).join(",")),"Target(".concat(t,")")}(Xa(e)),"; limitType=").concat(e.limitType,")")}function ro(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ys.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ya(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=va(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ya(e),t))&&!(e.endAt&&!function(e,t,n){const r=va(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ya(e),t))}(e,t)}function so(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function io(e){return(t,n)=>{let r=!1;for(const s of Ya(e)){const e=ao(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function ao(e,t,n){const r=e.field.isKeyField()?ys.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?Zi(r,s):qr(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return qr(19790,{direction:e.dir})}}class oo{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){wi(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return Ni(this.inner)}size(){return this.innerSize}}const lo=new Si(ys.comparator);function co(){return lo}const uo=new Si(ys.comparator);function ho(){let e=uo;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function fo(e){let t=uo;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function mo(){return go()}function po(){return go()}function go(){return new oo(e=>e.toString(),(e,t)=>e.isEqual(t))}const yo=new Si(ys.comparator),vo=new _i(ys.comparator);function bo(){let e=vo;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const xo=new _i(as);function wo(){return xo}function No(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ws(t)?"-0":t}}function So(e){return{integerValue:""+e}}function ko(e,t){return Ks(t)?So(t):No(e,t)}class Eo{constructor(){this._=void 0}}function _o(e,t,n){return e instanceof jo?function(e,t){const n={fields:{[Li]:{stringValue:Oi},[Fi]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Ui(t)&&(t=zi(t)),t&&(n.fields[Mi]=t),{mapValue:n}}(n,t):e instanceof To?Io(e,t):e instanceof Po?Ro(e,t):function(e,t){const n=Co(e,t),r=Oo(n)+Oo(e.Ae);return aa(n)&&aa(e.Ae)?So(r):No(e.serializer,r)}(e,t)}function Ao(e,t,n){return e instanceof To?Io(e,t):e instanceof Po?Ro(e,t):n}function Co(e,t){return e instanceof Do?function(e){return aa(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class jo extends Eo{}class To extends Eo{constructor(e){super(),this.elements=e}}function Io(e,t){const n=Lo(t);for(const r of e.elements)n.some(e=>Ji(e,r))||n.push(r);return{arrayValue:{values:n}}}class Po extends Eo{constructor(e){super(),this.elements=e}}function Ro(e,t){let n=Lo(t);for(const r of e.elements)n=n.filter(e=>!Ji(e,r));return{arrayValue:{values:n}}}class Do extends Eo{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Oo(e){return Ri(e.integerValue||e.doubleValue)}function Lo(e){return oa(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Mo{constructor(e,t){this.field=e,this.transform=t}}class Fo{constructor(e,t){this.version=e,this.transformResults=t}}class Uo{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Uo}static exists(e){return new Uo(void 0,e)}static updateTime(e){return new Uo(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function zo(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Vo{}function Bo(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new $o(e.key,Uo.none()):new Go(e.key,e.data,Uo.none());{const n=e.data,r=ma.empty();let s=new _i(gs.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new Qo(e.key,r,new Ci(s.toArray()),Uo.none())}}function qo(e,t,n){e instanceof Go?function(e,t,n){const r=e.value.clone(),s=Xo(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Qo?function(e,t,n){if(!zo(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Xo(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Yo(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ho(e,t,n,r){return e instanceof Go?function(e,t,n,r){if(!zo(e.precondition,t))return n;const s=e.value.clone(),i=Jo(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof Qo?function(e,t,n,r){if(!zo(e.precondition,t))return n;const s=Jo(e.fieldTransforms,r,t),i=t.data;return i.setAll(Yo(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return zo(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Wo(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Co(r.transform,e||null);null!=s&&(null===n&&(n=ma.empty()),n.set(r.field,s))}return n||null}function Ko(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ds(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof To&&t instanceof To||e instanceof Po&&t instanceof Po?ds(e.elements,t.elements,Ji):e instanceof Do&&t instanceof Do?Ji(e.Ae,t.Ae):e instanceof jo&&t instanceof jo}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Go extends Vo{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Qo extends Vo{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Yo(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Xo(e,t,n){const r=new Map;Wr(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,Ao(a,o,n[s]))}return r}function Jo(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,_o(e,i,t))}return r}class $o extends Vo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Zo extends Vo{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class el{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&qo(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Ho(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Ho(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=po();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=Bo(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(js.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),bo())}isEqual(e){return this.batchId===e.batchId&&ds(this.mutations,e.mutations,(e,t)=>Ko(e,t))&&ds(this.baseMutations,e.baseMutations,(e,t)=>Ko(e,t))}}class tl{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Wr(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=yo;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new tl(e,t,n,r)}}class nl{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class rl{constructor(e,t){this.count=e,this.unchangedNames=t}}var sl,il;function al(e){switch(e){case Gr.OK:return qr(64938);case Gr.CANCELLED:case Gr.UNKNOWN:case Gr.DEADLINE_EXCEEDED:case Gr.RESOURCE_EXHAUSTED:case Gr.INTERNAL:case Gr.UNAVAILABLE:case Gr.UNAUTHENTICATED:return!1;case Gr.INVALID_ARGUMENT:case Gr.NOT_FOUND:case Gr.ALREADY_EXISTS:case Gr.PERMISSION_DENIED:case Gr.FAILED_PRECONDITION:case Gr.ABORTED:case Gr.OUT_OF_RANGE:case Gr.UNIMPLEMENTED:case Gr.DATA_LOSS:return!0;default:return qr(15467,{code:e})}}function ol(e){if(void 0===e)return zr("GRPC error has no .code"),Gr.UNKNOWN;switch(e){case sl.OK:return Gr.OK;case sl.CANCELLED:return Gr.CANCELLED;case sl.UNKNOWN:return Gr.UNKNOWN;case sl.DEADLINE_EXCEEDED:return Gr.DEADLINE_EXCEEDED;case sl.RESOURCE_EXHAUSTED:return Gr.RESOURCE_EXHAUSTED;case sl.INTERNAL:return Gr.INTERNAL;case sl.UNAVAILABLE:return Gr.UNAVAILABLE;case sl.UNAUTHENTICATED:return Gr.UNAUTHENTICATED;case sl.INVALID_ARGUMENT:return Gr.INVALID_ARGUMENT;case sl.NOT_FOUND:return Gr.NOT_FOUND;case sl.ALREADY_EXISTS:return Gr.ALREADY_EXISTS;case sl.PERMISSION_DENIED:return Gr.PERMISSION_DENIED;case sl.FAILED_PRECONDITION:return Gr.FAILED_PRECONDITION;case sl.ABORTED:return Gr.ABORTED;case sl.OUT_OF_RANGE:return Gr.OUT_OF_RANGE;case sl.UNIMPLEMENTED:return Gr.UNIMPLEMENTED;case sl.DATA_LOSS:return Gr.DATA_LOSS;default:return qr(39323,{code:e})}}(il=sl||(sl={}))[il.OK=0]="OK",il[il.CANCELLED=1]="CANCELLED",il[il.UNKNOWN=2]="UNKNOWN",il[il.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",il[il.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",il[il.NOT_FOUND=5]="NOT_FOUND",il[il.ALREADY_EXISTS=6]="ALREADY_EXISTS",il[il.PERMISSION_DENIED=7]="PERMISSION_DENIED",il[il.UNAUTHENTICATED=16]="UNAUTHENTICATED",il[il.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",il[il.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",il[il.ABORTED=10]="ABORTED",il[il.OUT_OF_RANGE=11]="OUT_OF_RANGE",il[il.UNIMPLEMENTED=12]="UNIMPLEMENTED",il[il.INTERNAL=13]="INTERNAL",il[il.UNAVAILABLE=14]="UNAVAILABLE",il[il.DATA_LOSS=15]="DATA_LOSS";let ll=null;function cl(){return new TextEncoder}const ul=new br([4294967295,4294967295],0);function dl(e){const t=cl().encode(e),n=new xr;return n.update(t),new Uint8Array(n.digest())}function hl(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new br([n,r],0),new br([s,i],0)]}class fl{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new ml("Invalid padding: ".concat(t));if(n<0)throw new ml("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new ml("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new ml("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=br.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(br.fromNumber(n)));return 1===r.compare(ul)&&(r=new br([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=dl(e),[n,r]=hl(t);for(let s=0;s<this.hashCount;s++){const e=this.ye(n,r,s);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new fl(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.ge)return;const t=dl(e),[n,r]=hl(t);for(let s=0;s<this.hashCount;s++){const e=this.ye(n,r,s);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class pl{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,gl.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new pl(js.min(),r,new Si(as),co(),bo())}}class gl{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new gl(n,t,bo(),bo(),bo())}}class yl{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class vl{constructor(e,t){this.targetId=e,this.Ce=t}}class bl{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ti.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class xl{constructor(){this.ve=0,this.Fe=Sl(),this.Me=Ti.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=bo(),t=bo(),n=bo();return this.Fe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:qr(38017,{changeType:s})}}),new gl(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=Sl()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Wr(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class wl{constructor(e){this.Ge=e,this.ze=new Map,this.je=co(),this.Je=Nl(),this.He=Nl(),this.Ye=new Si(as)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:qr(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(qa(i))if(0===n){const e=new ys(i.path);this.et(t,e,ga.newNoDocument(e,js.min()))}else Wr(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var s;const n=this.ut(e),i=n?this.ct(n,e,r):1;if(0!==i){this.it(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(s=ll)||void 0===s||s.lt(function(e,t,n,r,s){var i,a,o,l,c;const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===s,hashCount:null!==(i=null===d||void 0===d?void 0:d.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(a=null===d||void 0===d||null===(o=d.bits)||void 0===o||null===(o=o.bitmap)||void 0===o?void 0:o.length)&&void 0!==a?a:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=Di(n).toUint8Array()}catch(e){if(e instanceof ji)return Vr("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new fl(i,r,s)}catch(e){return Vr(e instanceof ml?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Ge.ht(),i="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const s=this.ot(r);if(s){if(n.current&&qa(s.target)){const t=new ys(s.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,ga.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=bo();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new pl(e,t,this.Ye,this.je,n);return this.je=co(),this.Je=Nl(),this.He=Nl(),this.Ye=new Si(as),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new xl,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new _i(as),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new _i(as),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||Ur("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new xl),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function Nl(){return new Si(ys.comparator)}function Sl(){return new Si(ys.comparator)}const kl={asc:"ASCENDING",desc:"DESCENDING"},El={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},_l={and:"AND",or:"OR"};class Al{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Cl(e,t){return e.useProto3Json||Hs(t)?t:{value:t}}function jl(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Tl(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Il(e,t){return jl(e,t.toTimestamp())}function Pl(e){return Wr(!!e,49232),js.fromTimestamp(function(e){const t=Pi(e);return new Cs(t.seconds,t.nanos)}(e))}function Rl(e,t){return Dl(e,t).canonicalString()}function Dl(e,t){const n=function(e){return new ms(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function Ol(e){const t=ms.fromString(e);return Wr(tc(t),10190,{key:t.toString()}),t}function Ll(e,t){return Rl(e.databaseId,t.path)}function Ml(e,t){const n=Ol(t);if(n.get(1)!==e.databaseId.projectId)throw new Qr(Gr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Qr(Gr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ys(Vl(n))}function Fl(e,t){return Rl(e.databaseId,t)}function Ul(e){const t=Ol(e);return 4===t.length?ms.emptyPath():Vl(t)}function zl(e){return new ms(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Vl(e){return Wr(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Bl(e,t,n){return{name:Ll(e,t),fields:n.value.mapValue.fields}}function ql(e,t){let n;if(t instanceof Go)n={update:Bl(e,t.key,t.value)};else if(t instanceof $o)n={delete:Ll(e,t.key)};else if(t instanceof Qo)n={update:Bl(e,t.key,t.data),updateMask:ec(t.fieldMask)};else{if(!(t instanceof Zo))return qr(16599,{Vt:t.type});n={verify:Ll(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof jo)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof To)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Po)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Do)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw qr(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Il(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:qr(27497)}(e,t.precondition)),n}function Hl(e,t){return{documents:[Fl(e,t.path)]}}function Wl(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Fl(e,s);const i=function(e){if(0!==e.length)return Zl(ka.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Jl(e.field),direction:Ql(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Cl(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:s}}function Kl(e){let t=Ul(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Wr(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Gl(e);return t instanceof ka&&_a(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new xa($l(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Hs(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new ya(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new ya(n,t)}(n.endAt)),Wa(t,s,a,i,o,"F",l,c)}function Gl(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=$l(e.unaryFilter.field);return Sa.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=$l(e.unaryFilter.field);return Sa.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=$l(e.unaryFilter.field);return Sa.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=$l(e.unaryFilter.field);return Sa.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return qr(61313);default:return qr(60726)}}(e):void 0!==e.fieldFilter?function(e){return Sa.create($l(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return qr(58110);default:return qr(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return ka.create(e.compositeFilter.filters.map(e=>Gl(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return qr(1026)}}(e.compositeFilter.op))}(e):qr(30097,{filter:e})}function Ql(e){return kl[e]}function Yl(e){return El[e]}function Xl(e){return _l[e]}function Jl(e){return{fieldPath:e.canonicalString()}}function $l(e){return gs.fromServerFormat(e.fieldPath)}function Zl(e){return e instanceof Sa?function(e){if("=="===e.op){if(ca(e.value))return{unaryFilter:{field:Jl(e.field),op:"IS_NAN"}};if(la(e.value))return{unaryFilter:{field:Jl(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ca(e.value))return{unaryFilter:{field:Jl(e.field),op:"IS_NOT_NAN"}};if(la(e.value))return{unaryFilter:{field:Jl(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Jl(e.field),op:Yl(e.op),value:e.value}}}(e):e instanceof ka?function(e){const t=e.getFilters().map(e=>Zl(e));return 1===t.length?t[0]:{compositeFilter:{op:Xl(e.op),filters:t}}}(e):qr(54877,{filter:e})}function ec(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function tc(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class nc{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:js.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:js.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ti.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new nc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new nc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new nc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new nc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class rc{constructor(e){this.yt=e}}function sc(e){const t=Kl({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Za(t,t.limit,"L"):t}class ic{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(Ri(e.integerValue));else if("doubleValue"in e){const n=Ri(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Ws(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=Pi(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(Di(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?fa(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):da(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):qr(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const s=Yi,i=(null===(n=r[s].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(Ri(i)),this.Ot(s,t),this.Ct(r[s],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),ys.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}ic.Kt=new ic;class ac{constructor(){this.Cn=new oc}addToCollectionParentIndex(e,t){return this.Cn.add(t),Us.resolve()}getCollectionParents(e,t){return Us.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return Us.resolve()}deleteFieldIndex(e,t){return Us.resolve()}deleteAllFieldIndexes(e){return Us.resolve()}createTargetIndexes(e,t){return Us.resolve()}getDocumentsMatchingTarget(e,t){return Us.resolve(null)}getIndexType(e,t){return Us.resolve(0)}getFieldIndexes(e,t){return Us.resolve([])}getNextCollectionGroupToUpdate(e){return Us.resolve(null)}getMinOffset(e,t){return Us.resolve(Ds.min())}getMinOffsetFromCollectionGroup(e,t){return Us.resolve(Ds.min())}updateCollectionGroup(e,t,n){return Us.resolve()}updateIndexEntries(e,t){return Us.resolve()}}class oc{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new _i(ms.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new _i(ms.comparator)).toArray()}}new Uint8Array(0);const lc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},cc=41943040;class uc{static withCacheSize(e){return new uc(e,uc.DEFAULT_COLLECTION_PERCENTILE,uc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}uc.DEFAULT_COLLECTION_PERCENTILE=10,uc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,uc.DEFAULT=new uc(cc,uc.DEFAULT_COLLECTION_PERCENTILE,uc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),uc.DISABLED=new uc(-1,0,0);class dc{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new dc(0)}static cr(){return new dc(-1)}}const hc="LruGarbageCollector",fc=1048576;function mc(e,t){let[n,r]=e,[s,i]=t;const a=as(n,s);return 0===a?as(r,i):a}class pc{constructor(e){this.Ir=e,this.buffer=new _i(mc),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();mc(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gc{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){Ur(hc,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Vs(e)?Ur(hc,"Ignoring IndexedDB error during garbage collection: ",e):await Fs(e)}await this.Vr(3e5)})}}class yc{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Us.resolve(Bs.ce);const n=new pc(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ur("LruGarbageCollector","Garbage collection skipped; disabled"),Us.resolve(lc)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Ur("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),lc):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,s,i,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(Ur("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Fr()<=K.DEBUG&&Ur("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-i)+"ms\n"+"\tRemoved ".concat(s," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),Us.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function vc(e,t){return new yc(e,t)}class bc{constructor(){this.changes=new oo(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ga.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Us.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class xc{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class wc{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Ho(n.mutation,e,Ci.empty(),Cs.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,bo()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:bo();const r=mo();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=ho();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=mo();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,bo()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=co();const i=go(),a=go();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Qo)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),Ho(a.mutation,t,a.mutation.getFieldMask(),Cs.now())):i.set(t.key,Ci.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new xc(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=go();let r=new Si((e,t)=>e-t),s=bo();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||Ci.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||bo()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=po();l.forEach(e=>{if(!s.has(e)){const r=Bo(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return Us.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ys.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Qa(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):Us.resolve(mo());let a=Ts,o=s;return i.next(t=>Us.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?Us.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,bo())).next(e=>({batchId:a,changes:fo(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ys(t)).next(e=>{let t=ho();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=ho();return this.indexManager.getCollectionParents(e,s).next(a=>Us.forEach(a,a=>{const o=function(e,t){return new Ha(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,ga.newInvalidDocument(r)))});let n=ho();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&Ho(i.mutation,r,Ci.empty(),Cs.now()),ro(t,r)&&(n=n.insert(e,r))}),n})}}class Nc{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return Us.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Pl(e.createTime)}}(t)),Us.resolve()}getNamedQuery(e,t){return Us.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:sc(e.bundledQuery),readTime:Pl(e.readTime)}}(t)),Us.resolve()}}class Sc{constructor(){this.overlays=new Si(ys.comparator),this.qr=new Map}getOverlay(e,t){return Us.resolve(this.overlays.get(t))}getOverlays(e,t){const n=mo();return Us.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),Us.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),Us.resolve()}getOverlaysForCollection(e,t,n){const r=mo(),s=t.length+1,i=new ys(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return Us.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Si((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=mo(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=mo(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return Us.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new nl(t,n));let s=this.qr.get(t);void 0===s&&(s=bo(),this.qr.set(t,s)),this.qr.set(t,s.add(n.key))}}class kc{constructor(){this.sessionToken=Ti.EMPTY_BYTE_STRING}getSessionToken(e){return Us.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Us.resolve()}}class Ec{constructor(){this.Qr=new _i(_c.$r),this.Ur=new _i(_c.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new _c(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new _c(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new ys(new ms([])),n=new _c(t,e),r=new _c(t,e+1),s=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),s.push(e.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ys(new ms([])),n=new _c(t,e),r=new _c(t,e+1);let s=bo();return this.Ur.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new _c(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class _c{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ys.comparator(e.key,t.key)||as(e.Yr,t.Yr)}static Kr(e,t){return as(e.Yr,t.Yr)||ys.comparator(e.key,t.key)}}class Ac{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new _i(_c.$r)}checkEmpty(e){return Us.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new el(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.Zr=this.Zr.add(new _c(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Us.resolve(i)}lookupMutationBatch(e,t){return Us.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),s=r<0?0:r;return Us.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Us.resolve(0===this.mutationQueue.length?qs:this.tr-1)}getAllMutationBatches(e){return Us.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new _c(t,0),r=new _c(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);s.push(t)}),Us.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new _i(as);return t.forEach(e=>{const t=new _c(e,0),r=new _c(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),Us.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;ys.isDocumentKey(s)||(s=s.child(""));const i=new _c(new ys(s),0);let a=new _i(as);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},i),Us.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Wr(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return Us.forEach(t.mutations,r=>{const s=new _c(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new _c(t,0),r=this.Zr.firstAfterOrEqual(n);return Us.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Us.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Cc{constructor(e){this.ri=e,this.docs=new Si(ys.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Us.resolve(n?n.document.mutableCopy():ga.newInvalidDocument(t))}getEntries(e,t){let n=co();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():ga.newInvalidDocument(e))}),Us.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=co();const i=t.path,a=new ys(i.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Os(Rs(a),n)<=0||(r.has(a.key)||ro(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return Us.resolve(s)}getAllFromCollectionGroup(e,t,n,r){qr(9500)}ii(e,t){return Us.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new jc(this)}getSize(e){return Us.resolve(this.size)}}class jc extends bc{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),Us.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class Tc{constructor(e){this.persistence=e,this.si=new oo(e=>Va(e),Ba),this.lastRemoteSnapshotVersion=js.min(),this.highestTargetId=0,this.oi=0,this._i=new Ec,this.targetCount=0,this.ai=dc.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),Us.resolve()}getLastRemoteSnapshotVersion(e){return Us.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Us.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),Us.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),Us.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new dc(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,Us.resolve()}updateTargetData(e,t){return this.Pr(t),Us.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,Us.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.si.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Us.waitFor(s).next(()=>r)}getTargetCount(e){return Us.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return Us.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),Us.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),Us.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),Us.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return Us.resolve(n)}containsKey(e,t){return Us.resolve(this._i.containsKey(t))}}class Ic{constructor(e,t){this.ui={},this.overlays={},this.ci=new Bs(0),this.li=!1,this.li=!0,this.hi=new kc,this.referenceDelegate=e(this),this.Pi=new Tc(this),this.indexManager=new ac,this.remoteDocumentCache=function(e){return new Cc(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new rc(t),this.Ii=new Nc(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Sc,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new Ac(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){Ur("MemoryPersistence","Starting transaction:",e);const r=new Pc(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return Us.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class Pc extends Ms{constructor(e){super(),this.currentSequenceNumber=e}}class Rc{constructor(e){this.persistence=e,this.Ri=new Ec,this.Vi=null}static mi(e){return new Rc(e)}get fi(){if(this.Vi)return this.Vi;throw qr(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),Us.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),Us.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),Us.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Us.forEach(this.fi,n=>{const r=ys.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,js.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return Us.or([()=>Us.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Dc{constructor(e,t){this.persistence=e,this.pi=new oo(e=>Qs(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=vc(this,t)}static mi(e,t){return new Dc(e,t)}Ei(){}di(e){return Us.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return Us.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?Us.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,s.removeEntry(r,js.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),Us.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Us.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),Us.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),Us.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=sa(e.data.value)),t}br(e,t,n){return Us.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return Us.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Oc{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=bo(),r=bo();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new Oc(e,t.fromCache,n,r)}}class Lc{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Mc{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=E()?8:zs(N())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ys(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.ws(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new Lc;return this.Ss(e,t,n).next(r=>{if(s.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>s.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(Fr()<=K.DEBUG&&Ur("QueryEngine","SDK will not create cache indexes for query:",no(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),Us.resolve()):(Fr()<=K.DEBUG&&Ur("QueryEngine","Query:",no(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Fr()<=K.DEBUG&&Ur("QueryEngine","The SDK decides to create cache indexes for query:",no(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Xa(t))):Us.resolve())}ys(e,t){if(Ga(t))return Us.resolve(null);let n=Xa(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Za(t,null,"F"),n=Xa(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=bo(...r);return this.ps.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.Ds(t,r);return this.Cs(t,i,s,n.readTime)?this.ys(e,Za(t,null,"F")):this.vs(e,i,t,n)}))})))}ws(e,t,n,r){return Ga(t)||r.isEqual(js.min())?Us.resolve(null):this.ps.getDocuments(e,n).next(s=>{const i=this.Ds(t,s);return this.Cs(t,i,n,r)?Us.resolve(null):(Fr()<=K.DEBUG&&Ur("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),no(t)),this.vs(e,i,t,Ps(r,Ts)).next(e=>e))})}Ds(e,t){let n=new _i(io(e));return t.forEach((t,r)=>{ro(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,t,n){return Fr()<=K.DEBUG&&Ur("QueryEngine","Using full collection scan to execute query:",no(t)),this.ps.getDocumentsMatchingQuery(e,t,Ds.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Fc="LocalStore";class Uc{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new Si(as),this.xs=new oo(e=>Va(e),Ba),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wc(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function zc(e,t,n,r){return new Uc(e,t,n,r)}async function Vc(e,t){const n=Kr(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=bo();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:s,addedBatchIds:i}))})})}function Bc(e){const t=Kr(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function qc(e,t,n){let r=bo(),s=bo();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=co();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(js.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):Ur(Fc,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{ks:r,qs:s}})}function Hc(e,t){const n=Kr(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=qs),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Wc(e,t){const n=Kr(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(s=>s?(r=s,Us.resolve(r)):n.Pi.allocateTargetId(e).next(s=>(r=new nc(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Kc(e,t,n){const r=Kr(e),s=r.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!Vs(e))throw e;Ur(Fc,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(s.target)}function Gc(e,t,n){const r=Kr(e);let s=js.min(),i=bo();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Kr(e),s=r.xs.get(n);return void 0!==s?Us.resolve(r.Ms.get(s)):r.Pi.getTargetData(t,n)}(r,e,Xa(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?s:js.min(),n?i:bo())).next(e=>(Qc(r,so(t),e),{documents:e,Qs:i})))}function Qc(e,t,n){let r=e.Os.get(t)||js.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Yc{constructor(){this.activeTargetIds=wo()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Xc{constructor(){this.Mo=new Yc,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Yc,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Jc{Oo(e){}shutdown(){}}const $c="ConnectivityMonitor";class Zc{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ur($c,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ur($c,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let eu=null;function tu(){return null===eu?eu=268435456+Math.round(2147483648*Math.random()):eu++,"0x"+eu.toString(16)}const nu="RestConnection",ru={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class su{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===qi?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,s){const i=tu(),a=this.zo(e,t.toUriEncodedString());Ur(nu,"Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,s);const{host:l}=new URL(a),c=y(l);return this.Jo(e,a,o,n,c).then(t=>(Ur(nu,"Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw Vr(nu,"RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,s,i){return this.Go(e,t,n,r,s)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Lr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=ru[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class iu{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const au="WebChannelConnection";class ou extends su{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,s){const i=tu();return new Promise((s,a)=>{const o=new Sr;o.setWithCredentials(!0),o.listenOnce(Er.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case _r.NO_ERROR:const n=o.getResponseJson();Ur(au,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(n)),s(n);break;case _r.TIMEOUT:Ur(au,"RPC '".concat(e,"' ").concat(i," timed out")),a(new Qr(Gr.DEADLINE_EXCEEDED,"Request time out"));break;case _r.HTTP_ERROR:const r=o.getStatus();if(Ur(au,"RPC '".concat(e,"' ").concat(i," failed with status:"),r,"response text:",o.getResponseText()),r>0){var t;let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Gr).indexOf(t)>=0?t:Gr.UNKNOWN}(n.status);a(new Qr(e,n.message))}else a(new Qr(Gr.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Qr(Gr.UNAVAILABLE,"Connection failed."));break;default:qr(9055,{l_:e,streamId:i,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{Ur(au,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);Ur(au,"RPC '".concat(e,"' ").concat(i," sending request:"),r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=tu(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Tr(),a=jr(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");Ur(au,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=i.createWebChannel(c,o);this.I_(u);let d=!1,h=!1;const f=new iu({Yo:t=>{h?Ur(au,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(Ur(au,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),Ur(au,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(u,kr.EventType.OPEN,()=>{h||(Ur(au,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),m(u,kr.EventType.CLOSE,()=>{h||(h=!0,Ur(au,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),m(u,kr.EventType.ERROR,t=>{h||(h=!0,Vr(au,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new Qr(Gr.UNAVAILABLE,"The operation could not be completed")))}),m(u,kr.EventType.MESSAGE,t=>{if(!h){var n;const s=t.data[0];Wr(!!s,16349);const i=s,a=(null===i||void 0===i?void 0:i.error)||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){Ur(au,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=sl[e];if(void 0!==t)return ol(t)}(t),s=a.message;void 0===n&&(n=Gr.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),h=!0,f.a_(new Qr(n,s)),u.close()}else Ur(au,"RPC '".concat(e,"' stream ").concat(r," received:"),s),f.u_(s)}}),m(a,Cr.STAT_EVENT,t=>{t.stat===Ar.PROXY?Ur(au,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Ar.NOPROXY&&Ur(au,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function lu(){return"undefined"!=typeof document?document:null}function cu(e){return new Al(e,!0)}class uu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&Ur("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const du="PersistentStream";class hu{constructor(e,t,n,r,s,i,a,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new uu(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===Gr.RESOURCE_EXHAUSTED?(zr(t.toString()),zr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Gr.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new Qr(Gr.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ur(du,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(Ur(du,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class fu extends hu{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:qr(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(Wr(void 0===t||"string"==typeof t,58123),Ti.fromBase64String(t||"")):(Wr(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),Ti.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?Gr.UNKNOWN:ol(e.code);return new Qr(t,e.message||"")}(a);n=new bl(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ml(e,r.document.name),i=Pl(r.document.updateTime),a=r.document.createTime?Pl(r.document.createTime):js.min(),o=new ma({mapValue:{fields:r.document.fields}}),l=ga.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new yl(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Ml(e,r.document),i=r.readTime?Pl(r.readTime):js.min(),a=ga.newNoDocument(s,i),o=r.removedTargetIds||[];n=new yl([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Ml(e,r.document),i=r.removedTargetIds||[];n=new yl([],i,s,null)}else{if(!("filter"in t))return qr(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new rl(r,s),a=e.targetId;n=new vl(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return js.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?js.min():t.readTime?Pl(t.readTime):js.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=zl(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=qa(r)?{documents:Hl(e,r)}:{query:Wl(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Tl(e,t.resumeToken);const r=Cl(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(js.min())>0){n.readTime=jl(e,t.snapshotVersion.toTimestamp());const r=Cl(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return qr(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=zl(this.serializer),t.removeTarget=e,this.q_(t)}}class mu extends hu{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Wr(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Wr(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){Wr(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(Wr(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Pl(e.updateTime):Pl(t);return n.isEqual(js.min())&&(n=Pl(t)),new Fo(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Pl(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=zl(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>ql(this.serializer,e))};this.q_(t)}}class pu{}class gu extends pu{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Qr(Gr.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.Go(e,Dl(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Gr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Qr(Gr.UNKNOWN,e.toString())})}Ho(e,t,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,o]=i;return this.connection.Ho(e,Dl(t,n),r,a,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Gr.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Qr(Gr.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class yu{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(zr(t),this.aa=!1):Ur("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const vu="RemoteStore";class bu{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{Cu(this)&&(Ur(vu,"Restarting streams for network reachability change."),await async function(e){const t=Kr(e);t.Ea.add(4),await wu(t),t.Ra.set("Unknown"),t.Ea.delete(4),await xu(t)}(this))})}),this.Ra=new yu(n,r)}}async function xu(e){if(Cu(e))for(const t of e.da)await t(!0)}async function wu(e){for(const t of e.da)await t(!1)}function Nu(e,t){const n=Kr(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),Au(n)?_u(n):Gu(n).O_()&&ku(n,t))}function Su(e,t){const n=Kr(e),r=Gu(n);n.Ia.delete(t),r.O_()&&Eu(n,t),0===n.Ia.size&&(r.O_()?r.L_():Cu(n)&&n.Ra.set("Unknown"))}function ku(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(js.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Gu(e).Y_(t)}function Eu(e,t){e.Va.Ue(t),Gu(e).Z_(t)}function _u(e){e.Va=new wl({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Gu(e).start(),e.Ra.ua()}function Au(e){return Cu(e)&&!Gu(e).x_()&&e.Ia.size>0}function Cu(e){return 0===Kr(e).Ea.size}function ju(e){e.Va=void 0}async function Tu(e){e.Ra.set("Online")}async function Iu(e){e.Ia.forEach((t,n)=>{ku(e,t)})}async function Pu(e,t){ju(e),Au(e)?(e.Ra.ha(t),_u(e)):e.Ra.set("Unknown")}async function Ru(e,t,n){if(e.Ra.set("Online"),t instanceof bl&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){Ur(vu,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Du(e,n)}else if(t instanceof yl?e.Va.Ze(t):t instanceof vl?e.Va.st(t):e.Va.tt(t),!n.isEqual(js.min()))try{const t=await Bc(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Ia.get(r);s&&e.Ia.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(Ti.EMPTY_BYTE_STRING,r.snapshotVersion)),Eu(e,t);const s=new nc(r.target,t,n,r.sequenceNumber);ku(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){Ur(vu,"Failed to raise snapshot:",t),await Du(e,t)}}async function Du(e,t,n){if(!Vs(t))throw t;e.Ea.add(1),await wu(e),e.Ra.set("Offline"),n||(n=()=>Bc(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{Ur(vu,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await xu(e)})}function Ou(e,t){return t().catch(n=>Du(e,n,t))}async function Lu(e){const t=Kr(e),n=Qu(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:qs;for(;Mu(t);)try{const e=await Hc(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Fu(t,e)}catch(e){await Du(t,e)}Uu(t)&&zu(t)}function Mu(e){return Cu(e)&&e.Ta.length<10}function Fu(e,t){e.Ta.push(t);const n=Qu(e);n.O_()&&n.X_&&n.ea(t.mutations)}function Uu(e){return Cu(e)&&!Qu(e).x_()&&e.Ta.length>0}function zu(e){Qu(e).start()}async function Vu(e){Qu(e).ra()}async function Bu(e){const t=Qu(e);for(const n of e.Ta)t.ea(n.mutations)}async function qu(e,t,n){const r=e.Ta.shift(),s=tl.from(r,t,n);await Ou(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Lu(e)}async function Hu(e,t){t&&Qu(e).X_&&await async function(e,t){if(function(e){return al(e)&&e!==Gr.ABORTED}(t.code)){const n=e.Ta.shift();Qu(e).B_(),await Ou(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Lu(e)}}(e,t),Uu(e)&&zu(e)}async function Wu(e,t){const n=Kr(e);n.asyncQueue.verifyOperationInProgress(),Ur(vu,"RemoteStore received new credentials");const r=Cu(n);n.Ea.add(3),await wu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await xu(n)}async function Ku(e,t){const n=Kr(e);t?(n.Ea.delete(2),await xu(n)):t||(n.Ea.add(2),await wu(n),n.Ra.set("Unknown"))}function Gu(e){return e.ma||(e.ma=function(e,t,n){const r=Kr(e);return r.sa(),new fu(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:Tu.bind(null,e),t_:Iu.bind(null,e),r_:Pu.bind(null,e),H_:Ru.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),Au(e)?_u(e):e.Ra.set("Unknown")):(await e.ma.stop(),ju(e))})),e.ma}function Qu(e){return e.fa||(e.fa=function(e,t,n){const r=Kr(e);return r.sa(),new mu(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Vu.bind(null,e),r_:Hu.bind(null,e),ta:Bu.bind(null,e),na:qu.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Lu(e)):(await e.fa.stop(),e.Ta.length>0&&(Ur(vu,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Yu{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Yr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new Yu(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Qr(Gr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Xu(e,t){if(zr("AsyncQueue","".concat(t,": ").concat(e)),Vs(e))return new Qr(Gr.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Ju{static emptySet(e){return new Ju(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ys.comparator(t.key,n.key):(e,t)=>ys.comparator(e.key,t.key),this.keyedMap=ho(),this.sortedSet=new Si(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ju))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Ju;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class $u{constructor(){this.ga=new Si(ys.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):qr(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Zu{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Zu(e,t,Ju.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&eo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class ed{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class td{constructor(){this.queries=nd(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Kr(e),r=n.queries;n.queries=nd(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new Qr(Gr.ABORTED,"Firestore shutting down"))}}function nd(){return new oo(e=>to(e),eo)}async function rd(e,t){const n=Kr(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.ba()&&t.Da()&&(r=2):(i=new ed,r=t.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=Xu(e,"Initialization of query '".concat(no(t.query),"' failed"));return void t.onError(n)}n.queries.set(s,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&od(n)}async function sd(e,t){const n=Kr(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.Sa.indexOf(t);e>=0&&(i.Sa.splice(e,1),0===i.Sa.length?s=t.Da()?0:1:!i.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function id(e,t){const n=Kr(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(s)&&(r=!0);t.wa=s}}r&&od(n)}function ad(e,t,n){const r=Kr(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function od(e){e.Ca.forEach(e=>{e.next()})}var ld,cd;(cd=ld||(ld={})).Ma="default",cd.Cache="cache";class ud{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Zu(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Zu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==ld.Cache}}class dd{constructor(e){this.key=e}}class hd{constructor(e){this.key=e}}class fd{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=bo(),this.mutatedKeys=bo(),this.eu=io(e),this.tu=new Ju(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new $u,r=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=ro(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.eu(u,o)>0||l&&this.eu(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{tu:i,iu:n,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return qr(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const a=t&&!r?this._u():[],o=0===this.Xa.size&&this.current&&!r?1:0,l=o!==this.Za;return this.Za=o,0!==i.length||l?{snapshot:new Zu(this.query,e.tu,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new $u,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=bo(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new hd(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new dd(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=bo();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Zu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const md="SyncEngine";class pd{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class gd{constructor(e){this.key=e,this.hu=!1}}class yd{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new oo(e=>to(e),eo),this.Iu=new Map,this.Eu=new Set,this.du=new Si(ys.comparator),this.Au=new Map,this.Ru=new Ec,this.Vu={},this.mu=new Map,this.fu=dc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function vd(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=Ud(e);let s;const i=r.Tu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await xd(r,t,n,!0),s}async function bd(e,t){const n=Ud(e);await xd(n,t,!0,!1)}async function xd(e,t,n,r){const s=await Wc(e.localStore,Xa(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await wd(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&Nu(e.remoteStore,s),o}async function wd(e,t,n,r,s){e.pu=(t,n,r)=>async function(e,t,n,r){let s=t.view.ru(n);s.Cs&&(s=await Gc(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,s)}));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return Rd(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const i=await Gc(e.localStore,t,!0),a=new fd(t,i.Qs),o=a.ru(i.documents),l=gl.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);Rd(e,n,c.au);const u=new pd(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function Nd(e,t,n){const r=Kr(e),s=r.Tu.get(t),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(e=>!eo(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Kc(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Su(r.remoteStore,s.targetId),Id(r,s.targetId)}).catch(Fs)):(Id(r,s.targetId),await Kc(r.localStore,s.targetId,!0))}async function Sd(e,t){const n=Kr(e),r=n.Tu.get(t),s=n.Iu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Su(n.remoteStore,r.targetId))}async function kd(e,t){const n=Kr(e);try{const e=await function(e,t){const n=Kr(e),r=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Ti.EMPTY_BYTE_STRING,js.min()).withLastLimboFreeSnapshotVersion(js.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,i)&&a.push(n.Pi.updateTargetData(e,c))});let o=co(),l=bo();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(qc(e,i,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!r.isEqual(js.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return Us.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(Wr(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?Wr(r.hu,14607):e.removedDocuments.size>0&&(Wr(r.hu,42227),r.hu=!1))}),await Ld(n,e,t)}catch(e){await Fs(e)}}function Ed(e,t,n){const r=Kr(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const s=r.view.va(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=Kr(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.Sa)s.va(t)&&(r=!0)}),r&&od(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function _d(e,t,n){const r=Kr(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Au.get(t),i=s&&s.key;if(i){let e=new Si(ys.comparator);e=e.insert(i,ga.newNoDocument(i,js.min()));const n=bo().add(i),s=new pl(js.min(),new Map,new Si(as),e,n);await kd(r,s),r.du=r.du.remove(i),r.Au.delete(t),Od(r)}else await Kc(r.localStore,t,!1).then(()=>Id(r,t,n)).catch(Fs)}async function Ad(e,t){const n=Kr(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Kr(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=Us.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);Wr(null!==i,48541),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=bo();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Td(n,r,null),jd(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ld(n,e)}catch(e){await Fs(e)}}async function Cd(e,t,n){const r=Kr(e);try{const e=await function(e,t){const n=Kr(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Wr(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Td(r,t,n),jd(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Ld(r,e)}catch(n){await Fs(n)}}function jd(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function Td(e,t,n){const r=Kr(e);let s=r.Vu[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Vu[r.currentUser.toKey()]=s}}function Id(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||Pd(e,t)})}function Pd(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(Su(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Od(e))}function Rd(e,t,n){for(const r of n)r instanceof dd?(e.Ru.addReference(r.key,t),Dd(e,r)):r instanceof hd?(Ur(md,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||Pd(e,r.key)):qr(19791,{wu:r})}function Dd(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(Ur(md,"New document in limbo: "+n),e.Eu.add(r),Od(e))}function Od(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ys(ms.fromString(t)),r=e.fu.next();e.Au.set(r,new gd(n)),e.du=e.du.insert(n,r),Nu(e.remoteStore,new nc(Xa(Ka(n.path)),r,"TargetPurposeLimboResolution",Bs.ce))}}async function Ld(e,t,n){const r=Kr(e),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{a.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const s=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=Oc.As(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(e,t){const n=Kr(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Us.forEach(t,t=>Us.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Us.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Vs(e))throw e;Ur(Fc,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,s)}}}(r.localStore,i))}async function Md(e,t){const n=Kr(e);if(!n.currentUser.isEqual(t)){Ur(md,"User change. New user:",t.toKey());const e=await Vc(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new Qr(Gr.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Ld(n,e.Ls)}}function Fd(e,t){const n=Kr(e),r=n.Au.get(t);if(r&&r.hu)return bo().add(r.key);{let e=bo();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function Ud(e){const t=Kr(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=kd.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Fd.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=_d.bind(null,t),t.Pu.H_=id.bind(null,t.eventManager),t.Pu.yu=ad.bind(null,t.eventManager),t}function zd(e){const t=Kr(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Ad.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Cd.bind(null,t),t}class Vd{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return zc(this.persistence,new Mc,e.initialUser,this.serializer)}Cu(e){return new Ic(Rc.mi,this.serializer)}Du(e){return new Xc}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vd.provider={build:()=>new Vd};class Bd extends Vd{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Wr(this.persistence.referenceDelegate instanceof Dc,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new gc(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?uc.withCacheSize(this.cacheSizeBytes):uc.DEFAULT;return new Ic(e=>Dc.mi(e,t),this.serializer)}}class qd{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Ed(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Md.bind(null,this.syncEngine),await Ku(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new td}createDatastore(e){const t=cu(e.databaseInfo.databaseId),n=function(e){return new ou(e)}(e.databaseInfo);return function(e,t,n,r){return new gu(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new bu(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>Ed(this.syncEngine,e,0),Zc.v()?new Zc:new Jc)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new yd(e,t,n,r,s,i);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Kr(e);Ur(vu,"RemoteStore shutting down."),t.Ea.add(5),await wu(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}qd.provider={build:()=>new qd};class Hd{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):zr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}const Wd="FirestoreClient";class Kd{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=Or.UNAUTHENTICATED,this.clientId=is.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{Ur(Wd,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(Ur(Wd,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Yr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Xu(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Gd(e,t){e.asyncQueue.verifyOperationInProgress(),Ur(Wd,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Vc(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Qd(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Yd(e);Ur(Wd,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Wu(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Wu(t.remoteStore,n)),e._onlineComponents=t}async function Yd(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){Ur(Wd,"Using user provided OfflineComponentProvider");try{await Gd(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Gr.FAILED_PRECONDITION||e.code===Gr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Vr("Error using user provided cache. Falling back to memory cache: "+n),await Gd(e,new Vd)}}else Ur(Wd,"Using default OfflineComponentProvider"),await Gd(e,new Bd(void 0));return e._offlineComponents}async function Xd(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(Ur(Wd,"Using user provided OnlineComponentProvider"),await Qd(e,e._uninitializedComponentsProvider._online)):(Ur(Wd,"Using default OnlineComponentProvider"),await Qd(e,new qd))),e._onlineComponents}function Jd(e){return Xd(e).then(e=>e.syncEngine)}async function $d(e){const t=await Xd(e),n=t.eventManager;return n.onListen=vd.bind(null,t.syncEngine),n.onUnlisten=Nd.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=bd.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Sd.bind(null,t.syncEngine),n}function Zd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Yr;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Hd({next:o=>{i.Nu(),t.enqueueAndForget(()=>sd(e,a));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new Qr(Gr.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new Qr(Gr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),a=new ud(Ka(n.path),i,{includeMetadataChanges:!0,qa:!0});return rd(e,a)}(await $d(e),e.asyncQueue,t,n,r)),r.promise}function eh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Yr;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Hd({next:n=>{i.Nu(),t.enqueueAndForget(()=>sd(e,a)),n.fromCache&&"server"===r.source?s.reject(new Qr(Gr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new ud(n,i,{includeMetadataChanges:!0,qa:!0});return rd(e,a)}(await $d(e),e.asyncQueue,t,n,r)),r.promise}function th(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const nh=new Map,rh="firestore.googleapis.com",sh=!0;class ih{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Qr(Gr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=rh,this.ssl=sh}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:sh;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=cc;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<fc)throw new Qr(Gr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Qr(Gr.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=th(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Qr(Gr.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Qr(Gr.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Qr(Gr.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ah{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ih({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Qr(Gr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Qr(Gr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ih(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Jr;switch(e.type){case"firstParty":return new ts(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Qr(Gr.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=nh.get(e);t&&(Ur("ComponentProvider","Removing Datastore"),nh.delete(e),t.terminate())}(this),Promise.resolve()}}function oh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=Ss(e,ah);const s=y(t),a=e._getSettings(),o=(0,i.A)((0,i.A)({},a),{},{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);s&&(v("https://".concat(l)),w("Firestore",!0)),a.host!==rh&&a.host!==l&&Vr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u=(0,i.A)((0,i.A)({},a),{},{host:l,ssl:s,emulatorOptions:r});if(!P(u,o)&&(e._setSettings(u),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=Or.MOCK_USER;else{var d;t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=(0,i.A)({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[c(JSON.stringify({alg:"none",type:"JWT"})),c(JSON.stringify(a)),""].join(".")}(r.mockUserToken,null===(d=e._app)||void 0===d?void 0:d.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Qr(Gr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new Or(s)}e._authCredentials=new $r(new Xr(t,n))}}class lh{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new lh(this.firestore,e,this._query)}}class ch{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new uh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ch(this.firestore,e,this._key)}toJSON(){return{type:ch._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(Es(t,ch._jsonSchema))return new ch(e,n||null,new ys(ms.fromString(t.referencePath)))}}ch._jsonSchemaVersion="firestore/documentReference/1.0",ch._jsonSchema={type:ks("string",ch._jsonSchemaVersion),referencePath:ks("string")};class uh extends lh{constructor(e,t,n){super(e,t,Ka(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ch(this.firestore,null,new ys(e))}withConverter(e){return new uh(this.firestore,e,this._path)}}function dh(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=z(e),vs("collection","path",t),e instanceof ah){const n=ms.fromString(t,...r);return xs(n),new uh(e,null,n)}{if(!(e instanceof ch||e instanceof uh))throw new Qr(Gr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ms.fromString(t,...r));return xs(n),new uh(e.firestore,null,n)}}function hh(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=z(e),1===arguments.length&&(t=is.newId()),vs("doc","path",t),e instanceof ah){const n=ms.fromString(t,...r);return bs(n),new ch(e,null,new ys(n))}{if(!(e instanceof ch||e instanceof uh))throw new Qr(Gr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ms.fromString(t,...r));return bs(n),new ch(e.firestore,e instanceof uh?e.converter:null,new ys(n))}}const fh="AsyncQueue";class mh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new uu(this,"async_queue_retry"),this._c=()=>{const e=lu();e&&Ur(fh,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=lu();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=lu();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Yr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Vs(e))throw e;Ur(fh,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,zr("INTERNAL UNHANDLED ERROR: ",ph(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Yu.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&qr(47125,{Pc:ph(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function ph(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function gh(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class yh extends ah{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new mh,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mh(e),this._firestoreClient=void 0,await e}}}function vh(e,t){const n="object"==typeof e?e:it(),r="string"==typeof e?e:t||qi,s=Ze(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=(e=>{const t=f(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&oh(s,...e)}return s}function bh(e){if(e._terminated)throw new Qr(Gr.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||xh(e),e._firestoreClient}function xh(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new Bi(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,th(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||null!==(n=s.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=s.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new Kd(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class wh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wh(Ti.fromBase64String(e))}catch(e){throw new Qr(Gr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new wh(Ti.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:wh._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Es(e,wh._jsonSchema))return wh.fromBase64String(e.bytes)}}wh._jsonSchemaVersion="firestore/bytes/1.0",wh._jsonSchema={type:ks("string",wh._jsonSchemaVersion),bytes:ks("string")};class Nh{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Qr(Gr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new gs(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Sh{constructor(e){this._methodName=e}}class kh{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Qr(Gr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Qr(Gr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return as(this._lat,e._lat)||as(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:kh._jsonSchemaVersion}}static fromJSON(e){if(Es(e,kh._jsonSchema))return new kh(e.latitude,e.longitude)}}kh._jsonSchemaVersion="firestore/geoPoint/1.0",kh._jsonSchema={type:ks("string",kh._jsonSchemaVersion),latitude:ks("number"),longitude:ks("number")};class Eh{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Eh._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Es(e,Eh._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new Eh(e.vectorValues);throw new Qr(Gr.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Eh._jsonSchemaVersion="firestore/vectorValue/1.0",Eh._jsonSchema={type:ks("string",Eh._jsonSchemaVersion),vectorValues:ks("object")};const _h=/^__.*__$/;class Ah{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Qo(e,this.data,this.fieldMask,t,this.fieldTransforms):new Go(e,this.data,t,this.fieldTransforms)}}function Ch(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw qr(40011,{Ac:e})}}class jh{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new jh((0,i.A)((0,i.A)({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(Ch(this.Ac)&&_h.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Th{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||cu(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new jh({Ac:e,methodName:t,Dc:n,path:gs.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ih(e){const t=e._freezeSettings(),n=cu(e._databaseId);return new Th(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Ph(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(i.merge||i.mergeFields?2:0,t,n,s);Fh("Data must be an object, but it was:",a,r);const o=Lh(r,a);let l,c;if(i.merge)l=new Ci(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=Uh(t,r,n);if(!a.contains(s))throw new Qr(Gr.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));qh(e,s)||e.push(s)}l=new Ci(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new Ah(new ma(o),l,c)}class Rh extends Sh{_toFieldTransform(e){return new Mo(e.path,new jo)}isEqual(e){return e instanceof Rh}}function Dh(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Oh(n,e.Cc(r?4:3,t))}function Oh(e,t){if(Mh(e=z(e)))return Fh("Unsupported field value:",t,e),Lh(e,t);if(e instanceof Sh)return function(e,t){if(!Ch(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=Oh(s,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=z(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return ko(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=Cs.fromDate(e);return{timestampValue:jl(t.serializer,n)}}if(e instanceof Cs){const n=new Cs(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:jl(t.serializer,n)}}if(e instanceof kh)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof wh)return{bytesValue:Tl(t.serializer,e._byteString)};if(e instanceof ch){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Rl(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Eh)return function(e,t){return{mapValue:{fields:{[Wi]:{stringValue:Qi},[Yi]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return No(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(Ns(e)))}(e,t)}function Lh(e,t){const n={};return Ni(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):wi(e,(e,r)=>{const s=Oh(r,t.mc(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function Mh(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof Cs||e instanceof kh||e instanceof wh||e instanceof ch||e instanceof Sh||e instanceof Eh)}function Fh(e,t,n){if(!Mh(n)||!ws(n)){const r=Ns(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Uh(e,t,n){if((t=z(t))instanceof Nh)return t._internalPath;if("string"==typeof t)return Vh(e,t);throw Bh("Field path arguments must be of type string or ",e,!1,void 0,n)}const zh=new RegExp("[~\\*/\\[\\]]");function Vh(e,t,n){if(t.search(zh)>=0)throw Bh("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Nh(...t.split("."))._internalPath}catch(r){throw Bh("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Bh(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(s)),l+=")"),new Qr(Gr.INVALID_ARGUMENT,o+e+l)}function qh(e,t){return e.some(e=>e.isEqual(t))}class Hh{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ch(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Wh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Kh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Wh extends Hh{data(){return super.data()}}function Kh(e,t){return"string"==typeof t?Vh(e,t):t instanceof Nh?t._internalPath:t._delegate._internalPath}function Gh(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Qr(Gr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qh{}class Yh extends Qh{}function Xh(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof Qh&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof $h).length,n=e.filter(e=>e instanceof Jh).length;if(t>1||t>0&&n>0)throw new Qr(Gr.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Jh extends Yh{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Jh(e,t,n)}_apply(e){const t=this._parse(e);return rf(e._query,t),new lh(e.firestore,e.converter,$a(e._query,t))}_parse(e){const t=Ih(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new Qr(Gr.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){nf(a,i);const t=[];for(const n of a)t.push(tf(r,e,n));o={arrayValue:{values:t}}}else o=tf(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||nf(a,i),o=Dh(n,t,a,"in"===i||"not-in"===i);return Sa.create(s,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class $h extends Qh{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new $h(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:ka.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)rf(n,s),n=$a(n,s)}(e._query,t),new lh(e.firestore,e.converter,$a(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Zh extends Yh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Zh(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Qr(Gr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Qr(Gr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xa(t,n)}(e._query,this._field,this._direction);return new lh(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Ha(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function ef(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Kh("orderBy",e);return Zh._create(n,t)}function tf(e,t,n){if("string"==typeof(n=z(n))){if(""===n)throw new Qr(Gr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Qa(t)&&-1!==n.indexOf("/"))throw new Qr(Gr.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ms.fromString(n));if(!ys.isDocumentKey(r))throw new Qr(Gr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return ia(e,new ys(r))}if(n instanceof ch)return ia(e,n._key);throw new Qr(Gr.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Ns(n),"."))}function nf(e,t){if(!Array.isArray(e)||0===e.length)throw new Qr(Gr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function rf(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Qr(Gr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Qr(Gr.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class sf{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Xi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ri(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Di(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw qr(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return wi(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Yi].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>Ri(e.doubleValue));return new Eh(n)}convertGeoPoint(e){return new kh(Ri(e.latitude),Ri(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=zi(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Vi(e));default:return null}}convertTimestamp(e){const t=Pi(e);return new Cs(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ms.fromString(e);Wr(tc(n),9688,{name:e});const r=new Hi(n.get(1),n.get(3)),s=new ys(n.popFirst(5));return r.isEqual(t)||zr("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function af(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class of{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lf extends Hh{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new cf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Kh("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Qr(Gr.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=lf._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}lf._jsonSchemaVersion="firestore/documentSnapshot/1.0",lf._jsonSchema={type:ks("string",lf._jsonSchemaVersion),bundleSource:ks("string","DocumentSnapshot"),bundleName:ks("string"),bundle:ks("string")};class cf extends lf{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class uf{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new of(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new cf(this._firestore,this._userDataWriter,n.key,n,new of(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Qr(Gr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new cf(e._firestore,e._userDataWriter,n.doc.key,n.doc,new of(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new cf(e._firestore,e._userDataWriter,t.doc.key,t.doc,new of(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:df(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Qr(Gr.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=uf._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=is.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function df(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return qr(61501,{type:e})}}uf._jsonSchemaVersion="firestore/querySnapshot/1.0",uf._jsonSchema={type:ks("string",uf._jsonSchemaVersion),bundleSource:ks("string","QuerySnapshot"),bundleName:ks("string"),bundle:ks("string")};class hf extends sf{constructor(e){super(),this.firestore=e}convertBytes(e){return new wh(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ch(this.firestore,null,t)}}function ff(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=z(e);let s={includeMetadataChanges:!1,source:"default"},i=0;"object"!=typeof n[i]||gh(n[i])||(s=n[i++]);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(gh(n[i])){var o,l,c;const e=n[i];n[i]=null===(o=e.next)||void 0===o?void 0:o.bind(e),n[i+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[i+2]=null===(c=e.complete)||void 0===c?void 0:c.bind(e)}let u,d,h;if(e instanceof ch)d=Ss(e.firestore,yh),h=Ka(e._key.path),u={next:t=>{n[i]&&n[i](pf(d,e,t))},error:n[i+1],complete:n[i+2]};else{const t=Ss(e,lh);d=Ss(t.firestore,yh),h=t._query;const r=new hf(d);u={next:e=>{n[i]&&n[i](new uf(d,r,t,e))},error:n[i+1],complete:n[i+2]},Gh(e._query)}return function(e,t,n,r){const s=new Hd(r),i=new ud(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>rd(await $d(e),i)),()=>{s.Nu(),e.asyncQueue.enqueueAndForget(async()=>sd(await $d(e),i))}}(bh(d),h,a,u)}function mf(e,t){return function(e,t){const n=new Yr;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=zd(e);try{const e=await function(e,t){const n=Kr(e),r=Cs.now(),s=t.reduce((e,t)=>e.add(t.key),bo());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=co(),l=bo();return n.Ns.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=Wo(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new Qo(e.key,t,pa(t.value.mapValue),Uo.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:fo(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new Si(as)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Ld(r,e.changes),await Lu(r.remoteStore)}catch(e){const t=Xu(e,"Failed to persist write");n.reject(t)}}(await Jd(e),t,n)),n.promise}(bh(e),t)}function pf(e,t,n){const r=n.docs.get(t._key),s=new hf(e);return new lf(e,s,t._key,r,new of(n.hasPendingWrites,n.fromCache),t.converter)}function gf(){return new Rh("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Lr=e}(rt),$e(new V("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const a=e.getProvider("app").getImmediate(),o=new yh(new Zr(e.getProvider("auth-internal")),new rs(a,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Qr(Gr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hi(e.options.projectId,t)}(a,r),a);return s=(0,i.A)({useFetchStreams:t},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),at(Rr,Dr,e),at(Rr,Dr,"esm2020")}();var yf=n(986);const vf=["providerId"],bf=["uid","auth","stsTokenManager"],xf=["providerId","signInMethod"];function wf(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Nf=wf,Sf=new T("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),kf=new J("@firebase/auth");function Ef(e){if(kf.logLevel<=K.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];kf.error("Auth (".concat(rt,"): ").concat(e),...n)}}function _f(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw If(e,...n)}function Af(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return If(e,...n)}function Cf(e,t,n){const r=(0,i.A)((0,i.A)({},Nf()),{},{[t]:n});return new T("auth","Firebase",r).create(t,{appName:e.name})}function jf(e){return Cf(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tf(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&_f(e,"argument-error"),Cf(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function If(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Sf.create(e,...n)}function Pf(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw If(t,...r)}}function Rf(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Ef(t),new Error(t)}function Df(e,t){e||Rf(t)}function Of(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Lf(){return"http:"===Mf()||"https:"===Mf()}function Mf(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class Ff{constructor(e,t){this.shortDelay=e,this.longDelay=t,Df(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(N())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Lf()||k()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Uf(e,t){Df(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class zf{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void Rf("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void Rf("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void Rf("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Vf={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Bf=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qf=new Ff(3e4,6e4);function Hf(e,t){return e.tenantId&&!t.tenantId?(0,i.A)((0,i.A)({},t),{},{tenantId:e.tenantId}):t}async function Wf(e,t,n,r){return Kf(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},a={};r&&("GET"===t?a=r:s={body:JSON.stringify(r)});const o=D((0,i.A)({key:e.config.apiKey},a)).slice(1),l=await e._getAdditionalHeaders();l["Content-Type"]="application/json",e.languageCode&&(l["X-Firebase-Locale"]=e.languageCode);const c=(0,i.A)({method:t,headers:l},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(c.referrerPolicy="no-referrer"),e.emulatorConfig&&y(e.emulatorConfig.host)&&(c.credentials="include"),zf.fetch()(await Qf(e,e.config.apiHost,n,o),c)})}async function Kf(e,t,n){e._canInitEmulator=!1;const r=(0,i.A)((0,i.A)({},Vf),t);try{const t=new Xf(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Jf(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Jf(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw Jf(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw Jf(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Cf(e,o,a);_f(e,o)}}catch(s){if(s instanceof j)throw s;_f(e,"network-request-failed",{message:String(s)})}}async function Gf(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await Wf(e,t,n,r,s);return"mfaPendingCredential"in i&&_f(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function Qf(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r),i=e,a=i.config.emulator?Uf(e.config,s):"".concat(e.config.apiScheme,"://").concat(s);if(Bf.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(a).toString()}return a}function Yf(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Xf{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Af(this.auth,"network-request-failed")),qf.get())})}}function Jf(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Af(e,t,r);return s.customData._tokenResponse=n,s}function $f(e){return void 0!==e&&void 0!==e.getResponse}function Zf(e){return void 0!==e&&void 0!==e.enterprise}class em{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Yf(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function tm(e,t){return Wf(e,"GET","/v2/recaptchaConfig",Hf(e,t))}async function nm(e,t){return Wf(e,"POST","/v1/accounts:lookup",t)}function rm(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function sm(e){return 1e3*Number(e)}function im(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Ef("JWT malformed, contained fewer than 3 sections"),null;try{const e=u(n);return e?JSON.parse(e):(Ef("Failed to decode base64 JWT payload"),null)}catch(s){return Ef("Caught error parsing JWT payload as JSON",null===s||void 0===s?void 0:s.toString()),null}}function am(e){const t=im(e);return Pf(t,"internal-error"),Pf("undefined"!==typeof t.exp,"internal-error"),Pf("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function om(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof j&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class lm{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class cm{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=rm(this.lastLoginAt),this.creationTime=rm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function um(e){var t;const n=e.auth,r=await e.getIdToken(),s=await om(e,nm(n,{idToken:r}));Pf(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=null!==(t=i.providerUserInfo)&&void 0!==t&&t.length?dm(i.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&i.passwordHash)&&!(null!==o&&void 0!==o&&o.length),h=!!u&&d,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new cm(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function dm(e){return e.map(e=>{let{providerId:t}=e,n=(0,yf.A)(e,vf);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class hm{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Pf(e.idToken,"internal-error"),Pf("undefined"!==typeof e.idToken,"internal-error"),Pf("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):am(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Pf(0!==e.length,"internal-error");const t=am(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Pf(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await Kf(e,{},async()=>{const n=D({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=await Qf(e,r,"/v1/token","key=".concat(s)),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&y(e.emulatorConfig.host)&&(o.credentials="include"),zf.fetch()(i,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new hm;return n&&(Pf("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(Pf("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(Pf("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hm,this.toJSON())}_performRefresh(){return Rf("not implemented")}}function fm(e,t){Pf("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class mm{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,s=(0,yf.A)(e,bf);this.providerId="firebase",this.proactiveRefresh=new lm(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new cm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await om(this,this.stsTokenManager.getToken(this.auth,e));return Pf(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=z(e),r=await n.getIdToken(t),s=im(r);Pf(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:rm(sm(s.auth_time)),issuedAtTime:rm(sm(s.iat)),expirationTime:rm(sm(s.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=z(e);await um(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Pf(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>(0,i.A)({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new mm((0,i.A)((0,i.A)({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Pf(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await um(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(et(this.auth.app))return Promise.reject(jf(this.auth));const e=await this.getIdToken();return await om(this,async function(e,t){return Wf(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return(0,i.A)((0,i.A)({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>(0,i.A)({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,a,o,l,c,u;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,m=null!==(a=t.photoURL)&&void 0!==a?a:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(l=t._redirectEventId)&&void 0!==l?l:void 0,y=null!==(c=t.createdAt)&&void 0!==c?c:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:b,emailVerified:x,isAnonymous:w,providerData:N,stsTokenManager:S}=t;Pf(b&&S,e,"internal-error");const k=hm.fromJSON(this.name,S);Pf("string"===typeof b,e,"internal-error"),fm(d,e.name),fm(h,e.name),Pf("boolean"===typeof x,e,"internal-error"),Pf("boolean"===typeof w,e,"internal-error"),fm(f,e.name),fm(m,e.name),fm(p,e.name),fm(g,e.name),fm(y,e.name),fm(v,e.name);const E=new mm({uid:b,auth:e,email:h,emailVerified:x,displayName:d,isAnonymous:w,photoURL:m,phoneNumber:f,tenantId:p,stsTokenManager:k,createdAt:y,lastLoginAt:v});return N&&Array.isArray(N)&&(E.providerData=N.map(e=>(0,i.A)({},e))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new hm;r.updateFromServerResponse(t);const s=new mm({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await um(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Pf(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?dm(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null!==s&&void 0!==s&&s.length),a=new hm;a.updateFromIdToken(n);const o=new mm({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new cm(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==s&&void 0!==s&&s.length)};return Object.assign(o,l),o}}const pm=new Map;function gm(e){Df(e instanceof Function,"Expected a class definition");let t=pm.get(e);return t?(Df(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,pm.set(e,t),t)}class ym{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ym.type="NONE";const vm=ym;function bm(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class xm{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=bm(this.userKey,r.apiKey,s),this.fullPersistenceKey=bm("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await nm(this.auth,{idToken:e}).catch(()=>{});return t?mm._fromGetAccountInfoResponse(this.auth,t,e):null}return mm._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new xm(gm(vm),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||gm(vm);const i=bm(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){let n;if("string"===typeof t){const r=await nm(e,{idToken:t}).catch(()=>{});if(!r)break;n=await mm._fromGetAccountInfoResponse(e,r,t)}else n=mm._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(t){}})),new xm(s,e,n)):new xm(s,e,n)}}function wm(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Em(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Nm(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Am(t))return"Blackberry";if(Cm(t))return"Webos";if(Sm(t))return"Safari";if((t.includes("chrome/")||km(t))&&!t.includes("edge/"))return"Chrome";if(_m(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Nm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N();return/firefox\//i.test(e)}function Sm(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:N()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function km(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N();return/crios\//i.test(e)}function Em(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N();return/iemobile/i.test(e)}function _m(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N();return/android/i.test(e)}function Am(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N();return/blackberry/i.test(e)}function Cm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N();return/webos/i.test(e)}function jm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Tm(){return function(){const e=N();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Im(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:N();return jm(e)||_m(e)||Cm(e)||Am(e)||/windows phone/i.test(e)||Em(e)}function Pm(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=wm(N());break;case"Worker":t="".concat(wm(N()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(rt,"/").concat(r)}class Rm{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(s){r(s)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Dm{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class Om{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mm(this),this.idTokenSubscription=new Mm(this),this.beforeStateQueue=new Rm(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sf,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gm(t)),this._initializationPromise=this.queue(async()=>{var n,r,s;if(!this._deleted&&(this.persistenceManager=await xm.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(s=this.currentUser)||void 0===s?void 0:s.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await nm(this,{idToken:e}),n=await mm._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(et(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var s,i;await this.getOrInitRedirectPersistenceManager();const t=null===(s=this.redirectUser)||void 0===s?void 0:s._redirectEventId,a=null===(i=n)||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);t&&t!==a||null===o||void 0===o||!o.user||(n=o.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return Pf(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await um(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(et(this.app))return Promise.reject(jf(this));const t=e?z(e):null;return t&&Pf(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Pf(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return et(this.app)?Promise.reject(jf(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return et(this.app)?Promise.reject(jf(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gm(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Wf(e,"GET","/v2/passwordPolicy",Hf(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Dm(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new T("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Wf(e,"POST","/v2/accounts:revokeToken",Hf(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&gm(e)||this._popupRedirectResolver;Pf(t,this,"argument-error"),this.redirectPersistenceManager=await xm.create(this,[gm(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Pf(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Pf(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pm(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(et(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(kf.logLevel<=K.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];kf.warn("Auth (".concat(rt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Lm(e){return z(e)}class Mm{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new M(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Pf(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Fm={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Um(e){return Fm.loadJS(e)}function zm(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}const Vm=1e12;class Bm{constructor(e){this.auth=e,this.counter=Vm,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Wm(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Vm;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||Vm;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||Vm;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class qm{constructor(){this.enterprise=new Hm}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Hm{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Wm{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;Pf(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Km="NO_RECAPTCHA";class Gm{constructor(e){this.type="recaptcha-enterprise",this.auth=Lm(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;Zf(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Km)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new qm).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{tm(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new em(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&Zf(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Fm.recaptchaEnterpriseScript;0!==t.length&&(t+=s),Um(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Qm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const a=new Gm(e);let o;if(s)o=Km;else try{o=await a.verify(n)}catch(c){o=await a.verify(n,!0)}const l=(0,i.A)({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in l){const e=l.phoneEnrollmentInfo.phoneNumber,t=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const e=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Ym(e,t,n,r,s){if("EMAIL_PASSWORD_PROVIDER"===s){var i;if(null!==(i=e._getRecaptchaConfig())&&void 0!==i&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Qm(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await Qm(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}if("PHONE_PROVIDER"===s){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const s=await Qm(e,t,n);return r(e,s).catch(async s=>{var i;if("AUDIT"===(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.getProviderEnforcementState("PHONE_PROVIDER"))&&(s.code==="auth/".concat("missing-recaptcha-token")||s.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const s=await Qm(e,t,n,!1,!0);return r(e,s)}return Promise.reject(s)})}{const s=await Qm(e,t,n,!1,!0);return r(e,s)}}return Promise.reject(s+" provider is not supported.")}async function Xm(e){const t=Lm(e),n=await tm(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new em(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Gm(t).verify()}}function Jm(e,t,n){const r=Lm(e);Pf(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!(null===n||void 0===n||!n.disableWarnings),i=$m(t),{host:a,port:o}=function(e){const t=$m(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Zm(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Zm(t)}}}(t),l=null===o?"":":".concat(o),c={url:"".concat(i,"//").concat(a).concat(l,"/")},u=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator)return Pf(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void Pf(P(c,r.config.emulator)&&P(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,y(a)?(v("".concat(i,"//").concat(a).concat(l)),w("Auth",!0)):s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function $m(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Zm(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class ep{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Rf("not implemented")}_getIdTokenResponse(e){return Rf("not implemented")}_linkToIdToken(e,t){return Rf("not implemented")}_getReauthenticationResolver(e){return Rf("not implemented")}}async function tp(e,t){return Wf(e,"POST","/v1/accounts:signUp",t)}async function np(e,t){return Gf(e,"POST","/v1/accounts:signInWithPassword",Hf(e,t))}async function rp(e,t){return Wf(e,"POST","/v1/accounts:sendOobCode",Hf(e,t))}async function sp(e,t){return rp(e,t)}class ip extends ep{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new ip(e,t,"password")}static _fromEmailAndCode(e,t){return new ip(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Ym(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",np,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Gf(e,"POST","/v1/accounts:signInWithEmailLink",Hf(e,t))}(e,{email:this._email,oobCode:this._password});default:_f(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ym(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tp,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Gf(e,"POST","/v1/accounts:signInWithEmailLink",Hf(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:_f(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function ap(e,t){return Gf(e,"POST","/v1/accounts:signInWithIdp",Hf(e,t))}class op extends ep{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new op(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):_f("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=(0,yf.A)(t,xf);if(!n||!r)return null;const i=new op(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return ap(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,ap(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,ap(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=D(t)}return e}}async function lp(e,t){return Wf(e,"POST","/v1/accounts:sendVerificationCode",Hf(e,t))}const cp={USER_NOT_FOUND:"user-not-found"};class up extends ep{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new up({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new up({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Gf(e,"POST","/v1/accounts:signInWithPhoneNumber",Hf(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Gf(e,"POST","/v1/accounts:signInWithPhoneNumber",Hf(e,t));if(n.temporaryProof)throw Jf(e,"account-exists-with-different-credential",n);return n}(e,(0,i.A)({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Gf(e,"POST","/v1/accounts:signInWithPhoneNumber",Hf(e,(0,i.A)((0,i.A)({},t),{},{operation:"REAUTH"})),cp)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new up({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class dp{constructor(e){var t,n,r,s,i,a;const o=O(L(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Pf(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.lang)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=O(L(e)).link,n=t?O(L(t)).deep_link_id:null,r=O(L(e)).deep_link_id;return(r?O(L(r)).link:null)||r||n||t||e}(e);try{return new dp(t)}catch(n){return null}}}class hp{constructor(){this.providerId=hp.PROVIDER_ID}static credential(e,t){return ip._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=dp.parseLink(t);return Pf(n,"argument-error"),ip._fromEmailAndCode(e,n.code,n.tenantId)}}hp.PROVIDER_ID="password",hp.EMAIL_PASSWORD_SIGN_IN_METHOD="password",hp.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class fp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class mp extends fp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class pp extends mp{constructor(){super("facebook.com")}static credential(e){return op._fromParams({providerId:pp.PROVIDER_ID,signInMethod:pp.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pp.credentialFromTaggedObject(e)}static credentialFromError(e){return pp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return pp.credential(t.oauthAccessToken)}catch(n){return null}}}pp.FACEBOOK_SIGN_IN_METHOD="facebook.com",pp.PROVIDER_ID="facebook.com";class gp extends mp{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return op._fromParams({providerId:gp.PROVIDER_ID,signInMethod:gp.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return gp.credentialFromTaggedObject(e)}static credentialFromError(e){return gp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return gp.credential(n,r)}catch(s){return null}}}gp.GOOGLE_SIGN_IN_METHOD="google.com",gp.PROVIDER_ID="google.com";class yp extends mp{constructor(){super("github.com")}static credential(e){return op._fromParams({providerId:yp.PROVIDER_ID,signInMethod:yp.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return yp.credentialFromTaggedObject(e)}static credentialFromError(e){return yp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return yp.credential(t.oauthAccessToken)}catch(n){return null}}}yp.GITHUB_SIGN_IN_METHOD="github.com",yp.PROVIDER_ID="github.com";class vp extends mp{constructor(){super("twitter.com")}static credential(e,t){return op._fromParams({providerId:vp.PROVIDER_ID,signInMethod:vp.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return vp.credentialFromTaggedObject(e)}static credentialFromError(e){return vp.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return vp.credential(n,r)}catch(s){return null}}}async function bp(e,t){return Gf(e,"POST","/v1/accounts:signUp",Hf(e,t))}vp.TWITTER_SIGN_IN_METHOD="twitter.com",vp.PROVIDER_ID="twitter.com";class xp{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await mm._fromIdTokenResponse(e,n,r),i=wp(n);return new xp({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=wp(n);return new xp({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function wp(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Np extends j{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Np.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Np(e,t,n,r)}}function Sp(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Np._fromErrorAndOperation(e,n,t,r);throw n})}async function kp(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await om(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return xp._forOperation(e,"link",r)}async function Ep(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(et(r.app))return Promise.reject(jf(r));const s="reauthenticate";try{const i=await om(e,Sp(r,s,t,e),n);Pf(i.idToken,r,"internal-error");const a=im(i.idToken);Pf(a,r,"internal-error");const{sub:o}=a;return Pf(e.uid===o,r,"user-mismatch"),xp._forOperation(e,s,i)}catch(i){throw(null===i||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&_f(r,"user-mismatch"),i}}async function _p(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(et(e.app))return Promise.reject(jf(e));const r="signIn",s=await Sp(e,r,t),i=await xp._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function Ap(e,t){return _p(Lm(e),t)}function Cp(e,t,n){var r;Pf((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),Pf("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),Pf("undefined"===typeof n.linkDomain||n.linkDomain.length>0,e,"invalid-hosting-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.linkDomain=n.linkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(Pf(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(Pf(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function jp(e){const t=Lm(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Tp(e,t){let{displayName:n,photoURL:r}=t;if(void 0===n&&void 0===r)return;const s=z(e),i={idToken:await s.getIdToken(),displayName:n,photoUrl:r,returnSecureToken:!0},a=await om(s,async function(e,t){return Wf(e,"POST","/v1/accounts:update",t)}(s.auth,i));s.displayName=a.displayName||null,s.photoURL=a.photoUrl||null;const o=s.providerData.find(e=>{let{providerId:t}=e;return"password"===t});o&&(o.displayName=s.displayName,o.photoURL=s.photoURL),await s._updateTokensIfNecessary(a)}function Ip(e,t){return Wf(e,"POST","/v2/accounts/mfaEnrollment:start",Hf(e,t))}new WeakMap;const Pp="__sak";class Rp{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Pp,"1"),this.storage.removeItem(Pp),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Dp extends Rp{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Im(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);Tm()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Dp.type="LOCAL";const Op=Dp;function Lp(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),s=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(s))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function Mp(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Fp{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Mp(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Lp(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Mp(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Mp(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Lp(n);const s=setInterval(()=>{const e=Lp(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(s))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Fp.type="COOKIE";class Up extends Rp{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Up.type="SESSION";const zp=Up;class Vp{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Vp(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(null===i||void 0===i||!i.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Bp(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Vp.receivers=[];class qp{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=Bp("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function Hp(){return window}function Wp(){return"undefined"!==typeof Hp().WorkerGlobalScope&&"function"===typeof Hp().importScripts}const Kp="firebaseLocalStorageDb",Gp="firebaseLocalStorage",Qp="fbase_key";class Yp{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Xp(e,t){return e.transaction([Gp],t?"readwrite":"readonly").objectStore(Gp)}function Jp(){const e=indexedDB.open(Kp,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Gp,{keyPath:Qp})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Gp)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Kp);return new Yp(e).toPromise()}(),t(await Jp()))})})}async function $p(e,t,n){const r=Xp(e,!0).put({[Qp]:t,value:n});return new Yp(r).toPromise()}function Zp(e,t){const n=Xp(e,!0).delete(t);return new Yp(n).toPromise()}class eg{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Jp()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Wp()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vp._getInstance(Wp()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new qp(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jp();return await $p(e,Pp,"1"),await Zp(e,Pp),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>$p(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Xp(e,!1).get(t),r=await new Yp(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Zp(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Xp(e,!1).getAll();return new Yp(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}eg.type="LOCAL";const tg=eg;function ng(e,t){return Wf(e,"POST","/v2/accounts/mfaSignIn:start",Hf(e,t))}const rg=zm("rcb"),sg=new Ff(3e4,6e4);class ig{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(e=Hp().grecaptcha)||void 0===e||!e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Pf(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&$f(Hp().grecaptcha)?Promise.resolve(Hp().grecaptcha):new Promise((n,r)=>{const s=Hp().setTimeout(()=>{r(Af(e,"network-request-failed"))},sg.get());Hp()[rg]=()=>{Hp().clearTimeout(s),delete Hp()[rg];const i=Hp().grecaptcha;if(!i||!$f(i))return void r(Af(e,"internal-error"));const a=i.render;i.render=(e,t)=>{const n=a(e,t);return this.counter++,n},this.hostLanguage=t,n(i)};Um("".concat(Fm.recaptchaV2Script,"?").concat(D({onload:rg,render:"explicit",hl:t}))).catch(()=>{clearTimeout(s),r(Af(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!(null===(t=Hp().grecaptcha)||void 0===t||!t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ag{async load(e){return new Bm(e)}clearedOneInstance(){}}const og="recaptcha",lg={theme:"light",type:"image"};class cg{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,i.A)({},lg);this.parameters=n,this.type=og,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Lm(e),this.isInvisible="invisible"===this.parameters.size,Pf("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;Pf(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ag:new ig,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){Pf(!this.parameters.sitekey,this.auth,"argument-error"),Pf(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Pf("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"===typeof e)e(t);else if("string"===typeof e){const n=Hp()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){Pf(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){Pf(Lf()&&!Wp(),this.auth,"internal-error"),await function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Wf(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);Pf(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return Pf(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ug{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=up._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function dg(e,t,n){if(!e._getRecaptchaConfig())try{await Xm(e)}catch(s){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){Pf("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},i=async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Km){Pf((null===n||void 0===n?void 0:n.type)===og,e,"argument-error");return Ip(e,await hg(e,t,n))}return Ip(e,t)},a=Ym(e,r,"mfaSmsEnrollment",i,"PHONE_PROVIDER");return(await a.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;Pf("signin"===t.type,e,"internal-error");const i=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;Pf(i,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Km){Pf((null===n||void 0===n?void 0:n.type)===og,e,"argument-error");return ng(e,await hg(e,t,n))}return ng(e,t)},l=Ym(e,a,"mfaSmsSignIn",o,"PHONE_PROVIDER");return(await l.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=async(e,t)=>{if(t.captchaResponse===Km){Pf((null===n||void 0===n?void 0:n.type)===og,e,"argument-error");return lp(e,await hg(e,t,n))}return lp(e,t)},i=Ym(e,t,"sendVerificationCode",r,"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function hg(e,t,n){Pf(n.type===og,e,"argument-error");const r=await n.verify();Pf("string"===typeof r,e,"argument-error");const s=(0,i.A)({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,i=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class fg{constructor(e){this.providerId=fg.PROVIDER_ID,this.auth=Lm(e)}verifyPhoneNumber(e,t){return dg(this.auth,e,z(t))}static credential(e,t){return up._fromVerification(e,t)}static credentialFromResult(e){const t=e;return fg.credentialFromTaggedObject(t)}static credentialFromError(e){return fg.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?up._fromTokenResponse(n,r):null}}function mg(e,t){return t?gm(t):(Pf(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}fg.PROVIDER_ID="phone",fg.PHONE_SIGN_IN_METHOD="phone";class pg extends ep{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ap(e,this._buildIdpRequest())}_linkToIdToken(e,t){return ap(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return ap(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function gg(e){return _p(e.auth,new pg(e),e.bypassAuthState)}function yg(e){const{auth:t,user:n}=e;return Pf(n,t,"internal-error"),Ep(n,new pg(e),e.bypassAuthState)}async function vg(e){const{auth:t,user:n}=e;return Pf(n,t,"internal-error"),kp(n,new pg(e),e.bypassAuthState)}class bg{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gg;case"linkViaPopup":case"linkViaRedirect":return vg;case"reauthViaPopup":case"reauthViaRedirect":return yg;default:_f(this.auth,"internal-error")}}resolve(e){Df(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Df(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const xg=new Ff(2e3,1e4);class wg extends bg{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,wg.currentPopupAction&&wg.currentPopupAction.cancel(),wg.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Pf(e,this.auth,"internal-error"),e}async onExecution(){Df(1===this.filter.length,"Popup operations only handle one event");const e=Bp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Af(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Af(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wg.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Af(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,xg.get())};e()}}wg.currentPopupAction=null;const Ng=new Map;class Sg extends bg{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Ng.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=_g(t),r=Eg(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Ng.set(this.auth._key(),e)}return this.bypassAuthState||Ng.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function kg(e,t){Ng.set(e._key(),t)}function Eg(e){return gm(e._redirectPersistence)}function _g(e){return bm("pendingRedirect",e.config.apiKey,e.name)}async function Ag(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(et(e.app))return Promise.reject(jf(e));const r=Lm(e),s=mg(r,t),i=new Sg(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Cg{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Tg(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Tg(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Af(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(jg(e))}saveEventToCache(e){this.cachedEventUids.add(jg(e)),this.lastProcessedEventTime=Date.now()}}function jg(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Tg(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Ig=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pg=/^https?/;async function Rg(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Wf(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Dg(r))return}catch(n){}_f(e,"unauthorized-domain")}function Dg(e){const t=Of(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!Pg.test(n))return!1;if(Ig.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const Og=new Ff(3e4,6e4);function Lg(){const e=Hp().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Mg(e){return new Promise((t,n)=>{var r,s;function i(){Lg(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Lg(),n(Af(e,"network-request-failed"))},timeout:Og.get()})}if(null!==(r=Hp().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(s=Hp().gapi)||void 0===s||!s.load){const t=zm("iframefcb");return Hp()[t]=()=>{gapi.load?i():n(Af(e,"network-request-failed"))},Um("".concat(Fm.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}i()}}).catch(e=>{throw Fg=null,e})}let Fg=null;const Ug=new Ff(5e3,15e3),zg={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vg=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bg(e){const t=e.config;Pf(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Uf(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:rt},s=Vg.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(D(r).slice(1))}async function qg(e){const t=await function(e){return Fg=Fg||Mg(e),Fg}(e),n=Hp().gapi;return Pf(n,e,"internal-error"),t.open({where:document.body,url:Bg(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zg,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=Af(e,"network-request-failed"),i=Hp().setTimeout(()=>{r(s)},Ug.get());function a(){Hp().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}const Hg={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Wg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Kg(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const a=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=(0,i.A)((0,i.A)({},Hg),{},{width:r.toString(),height:s.toString(),top:a,left:o}),u=N().toLowerCase();n&&(l=km(u)?"_blank":n),Nm(u)&&(t=t||"http://localhost",c.scrollbars="yes");const d=Object.entries(c).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return jm(arguments.length>0&&void 0!==arguments[0]?arguments[0]:N())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(u)&&"_self"!==l)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",l),new Wg(null);const h=window.open(t||"",l,d);Pf(h,e,"popup-blocked");try{h.focus()}catch(f){}return new Wg(h)}const Gg="__/auth/handler",Qg="emulator/auth/handler",Yg=encodeURIComponent("fac");async function Xg(e,t,n,r,s,i){Pf(e.config.authDomain,e,"auth-domain-config-required"),Pf(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:rt,eventId:s};if(t instanceof fp){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof mp){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Yg,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Gg);return Uf(t,Qg)}(e),"?").concat(D(o).slice(1)).concat(c)}const Jg="webStorageSupport";const $g=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zp,this._completeRedirectFn=Ag,this._overrideRedirectResult=kg}async _openPopup(e,t,n,r){var s;Df(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return Kg(e,await Xg(e,t,n,Of(),r),Bp())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Hp().location.href=e}(await Xg(e,t,n,Of(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Df(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await qg(e),n=new Cg(e);return t.register("authEvent",t=>{Pf(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Jg,{type:Jg},n=>{var r;const s=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[Jg];void 0!==s&&t(!!s),_f(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Rg(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Im()||Sm()||jm()}};var Zg="@firebase/auth",ey="1.11.1";class ty{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Pf(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ny=p("authIdTokenMaxAge")||300;let ry=null;function sy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it();const t=Ze(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=Ze(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(P(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;_f(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:$g,persistence:[tg,Op,zp]}),r=p("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>ny)return;const r=null===t||void 0===t?void 0:t.token;ry!==r&&(ry=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){z(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){z(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const i=f("auth");return i&&Jm(n,"http://".concat(i)),n}var iy;Fm={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Af("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},iy="Browser",$e(new V("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Pf(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:iy,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pm(iy)},c=new Om(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gm);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),$e(new V("auth-internal",e=>(e=>new ty(e))(Lm(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),at(Zg,ey,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(iy)),at(Zg,ey,"esm2020");const ay={apiKey:"AIzaSyAMw5vMNHvqNECNKX_wzXEA8ghDsl9c2eU",authDomain:"room-24.firebaseapp.com",projectId:"room-24",storageBucket:"room-24.firebasestorage.app",messagingSenderId:"725213786064",appId:"1:725213786064:web:7c7e3709410266b98d13d5",measurementId:"G-G7XPLZ4K10"};let oy,ly,cy,uy,dy;function hy(){dy=st(ay);try{oy=Fn(dy)}catch(e){console.warn("Messaging not available",e)}try{cy=vh(dy),console.log("Firestore initialized")}catch(e){console.warn("Firestore not available",e)}try{uy=sy(dy),console.log("Auth initialized")}catch(e){console.warn("Auth not available",e)}return dy}function fy(){return!uy&&dy&&(uy=sy(dy)),uy}function my(){return!cy&&dy&&(cy=vh(dy)),cy}async function py(e,t,n){const r=fy();if(!r)throw new Error("Auth not initialized");const s=await async function(e,t,n){if(et(e.app))return Promise.reject(jf(e));const r=Lm(e),s=Ym(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",bp,"EMAIL_PASSWORD_PROVIDER"),i=await s.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&jp(e),t}),a=await xp._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}(r,e,t);return n&&await Tp(s.user,{displayName:n}),s.user}async function gy(e,t){const n=fy();if(!n)throw new Error("Auth not initialized");const r=await function(e,t,n){return et(e.app)?Promise.reject(jf(e)):Ap(z(e),hp.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&jp(e),t})}(n,e,t);return r.user}async function yy(){const e=fy();if(!e)throw new Error("Auth not initialized");const t=new gp,n=await async function(e,t,n){if(et(e.app))return Promise.reject(Af(e,"operation-not-supported-in-this-environment"));const r=Lm(e);Tf(e,t,fp);const s=mg(r,n);return new wg(r,"signInViaPopup",t,s).executeNotNull()}(e,t);return n.user}async function vy(){const e=fy();if(!e)throw new Error("Auth not initialized");await function(e){return z(e).signOut()}(e)}function by(e){const t=fy();return t?function(e,t,n,r){return z(e).onAuthStateChanged(t,n,r)}(t,e):(console.warn("Auth not initialized"),()=>{})}async function xy(e){const t=fy();if(!t)throw new Error("Auth not initialized");await async function(e,t,n){const r=Lm(e),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&Cp(r,s,n),await Ym(r,s,"getOobCode",sp,"EMAIL_PASSWORD_PROVIDER")}(t,e)}let wy=null,Ny=null;async function Sy(e){const t=fy();if(!t)throw new Error("Auth not initialized");if(!wy)throw new Error("reCAPTCHA not initialized. Call initRecaptcha first.");let n=e.trim();n.startsWith("0")?n="+27"+n.slice(1):n.startsWith("+")||(n="+27"+n);try{return Ny=await async function(e,t,n){if(et(e.app))return Promise.reject(jf(e));const r=Lm(e),s=await dg(r,t,z(n));return new ug(s,e=>Ap(r,e))}(t,n,wy),console.log("OTP sent successfully"),{success:!0,formattedNumber:n}}catch(r){if(console.error("Error sending OTP:",r),wy)try{wy.clear(),wy=null}catch(s){}throw r}}function ky(){const e=fy();return null!==e&&void 0!==e&&e.currentUser?e.currentUser.providerData.map(e=>e.providerId):[]}async function Ey(){const e=fy();if(null===e||void 0===e||!e.currentUser)throw new Error("No user logged in");try{const t=new gp,n=await async function(e,t,n){const r=z(e);Tf(r.auth,t,fp);const s=mg(r.auth,n);return new wg(r.auth,"linkViaPopup",t,s,r).executeNotNull()}(e.currentUser,t);return console.log("Google account linked successfully"),n.user}catch(t){if(console.error("Error linking Google account:",t),"auth/credential-already-in-use"===t.code)throw new Error("This Google account is already linked to another user");throw t}}async function _y(e){const t=my();if(!t)return null;try{const n=hh(t,"users",e),r=await function(e){e=Ss(e,ch);const t=Ss(e.firestore,yh);return Zd(bh(t),e._key).then(n=>pf(t,e,n))}(n);return r.exists()?(0,i.A)({id:r.id},r.data()):null}catch(n){return console.error("Error fetching user profile:",n),null}}async function Ay(e,t){const n=my();if(!n)throw new Error("Firestore not initialized");try{const r=hh(n,"users",e);return await function(e,t,n){e=Ss(e,ch);const r=Ss(e.firestore,yh),s=af(e.converter,t,n);return mf(r,[Ph(Ih(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,Uo.none())])}(r,(0,i.A)((0,i.A)({},t),{},{updatedAt:gf()}),{merge:!0}),console.log("User profile saved:",e),!0}catch(r){throw console.error("Error saving user profile:",r),r}}async function Cy(){const e=my();if(!e)return console.warn("Firestore not initialized, using localStorage"),null;try{const t=Xh(dh(e,"listings"),ef("createdAt","desc")),n=(await function(e){e=Ss(e,lh);const t=Ss(e.firestore,yh),n=bh(t),r=new hf(t);return Gh(e._query),eh(n,e._query).then(n=>new uf(t,r,e,n))}(t)).docs.map(e=>{var t,n,r,s,a,o;return(0,i.A)((0,i.A)({id:e.id},e.data()),{},{createdAt:(null===(t=e.data().createdAt)||void 0===t||null===(n=t.toDate)||void 0===n||null===(r=n.call(t))||void 0===r?void 0:r.toISOString())||e.data().createdAt,availableDate:(null===(s=e.data().availableDate)||void 0===s||null===(a=s.toDate)||void 0===a||null===(o=a.call(s))||void 0===o?void 0:o.toISOString())||e.data().availableDate})});return console.log("Fetched ".concat(n.length," listings from Firestore")),n}catch(t){return console.error("Error fetching listings from Firestore:",t),null}}async function jy(e){const t=my();if(!t)return console.warn("Firestore not initialized"),null;try{const n=dh(t,"listings"),r=await function(e,t){const n=Ss(e.firestore,yh),r=hh(e),s=af(e.converter,t);return mf(n,[Ph(Ih(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,Uo.exists(!1))]).then(()=>r)}(n,(0,i.A)((0,i.A)({},e),{},{createdAt:gf(),status:"available"}));return console.log("Listing added with ID:",r.id),r.id}catch(n){throw console.error("Error adding listing to Firestore:",n),n}}async function Ty(e){const t=my();if(!t)return console.warn("Firestore not initialized"),!1;try{const r=hh(t,"listings",e);return await(n=r,mf(Ss(n.firestore,yh),[new $o(n._key,Uo.none())])),console.log("Listing deleted:",e),!0}catch(r){throw console.error("Error deleting listing from Firestore:",r),r}var n}function Iy(e){if("true"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAMw5vMNHvqNECNKX_wzXEA8ghDsl9c2eU",REACT_APP_FIREBASE_APP_ID:"1:725213786064:web:7c7e3709410266b98d13d5",REACT_APP_FIREBASE_AUTH_DOMAIN:"room-24.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-G7XPLZ4K10",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"725213786064",REACT_APP_FIREBASE_PROJECT_ID:"room-24",REACT_APP_FIREBASE_STORAGE_BUCKET:"room-24.firebasestorage.app"}.REACT_APP_ENABLE_ANALYTICS)return;if("yes"===localStorage.getItem("analytics-consent"))try{ly=mr(e),console.log("Analytics initialized")}catch(t){console.warn("Analytics not available",t)}}function Py(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(ly)try{gr(ly,e,t)}catch(n){console.warn("Event tracking failed",n)}}async function Ry(){if(!oy)return null;if("granted"!==await Notification.requestPermission())return console.log("Notification permission denied"),null;try{const t={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAMw5vMNHvqNECNKX_wzXEA8ghDsl9c2eU",REACT_APP_FIREBASE_APP_ID:"1:725213786064:web:7c7e3709410266b98d13d5",REACT_APP_FIREBASE_AUTH_DOMAIN:"room-24.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-G7XPLZ4K10",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"725213786064",REACT_APP_FIREBASE_PROJECT_ID:"room-24",REACT_APP_FIREBASE_STORAGE_BUCKET:"room-24.firebasestorage.app"}.REACT_APP_FIREBASE_VAPID_KEY,n=await async function(e,t){return Pn(e=z(e),t)}(oy,{vapidKey:t});if(n){console.log("FCM token:",n);try{const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAMw5vMNHvqNECNKX_wzXEA8ghDsl9c2eU",REACT_APP_FIREBASE_APP_ID:"1:725213786064:web:7c7e3709410266b98d13d5",REACT_APP_FIREBASE_AUTH_DOMAIN:"room-24.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-G7XPLZ4K10",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"725213786064",REACT_APP_FIREBASE_PROJECT_ID:"room-24",REACT_APP_FIREBASE_STORAGE_BUCKET:"room-24.firebasestorage.app"}.REACT_APP_BACKEND_URL;e&&await fetch("".concat(e.replace(/\/$/,""),"/api/push/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:n})})}catch(e){console.warn("Token persistence failed",e)}return n}return console.log("No registration token available."),null}catch(t){return console.error("An error occurred while retrieving token.",t),null}}var Dy=n(784);const Oy=(0,Dy.A)("smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),Ly=(0,Dy.A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),My=(0,Dy.A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Fy=(0,Dy.A)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);var Uy=n(459);const zy=(0,Dy.A)("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Vy=(0,Dy.A)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),By=(0,Dy.A)("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]);var qy=n(658);const Hy=(0,Dy.A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),Wy=(0,Dy.A)("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]),Ky=(0,Dy.A)("link-2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]),Gy=(0,Dy.A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Qy=(0,Dy.A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]);var Yy=n(918),Xy=n(6);const Jy=(0,Dy.A)("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),$y=(0,Dy.A)("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),Zy=(0,Dy.A)("menu",[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]]);var ev=n(579);function tv(e){let{currentUser:t,previewAsRenter:n,setPreviewAsRenter:s,openAuthModal:i,handleSignOut:a,setCurrentView:o,showToast:l,unreadCount:c,onOpenNotifications:u}=e;const[d,h]=(0,r.useState)(!1);return(0,ev.jsxs)("header",{className:"bg-white/95 backdrop-blur-md border-b border-gray-100 sticky top-0 z-50 shadow-sm",role:"banner",children:[(0,ev.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-2.5 md:py-3",children:[(0,ev.jsxs)("div",{className:"flex items-center justify-between min-h-[52px]",children:[(0,ev.jsxs)("button",{onClick:()=>o("browse"),className:"text-xl md:text-2xl font-extrabold flex items-center gap-1.5 focus:outline-none focus-visible:ring-2 focus-visible:ring-teal-500 px-1 rounded-lg transition-transform hover:scale-105 active:scale-95","aria-label":"Go to browse",children:[(0,ev.jsx)("div",{className:"w-8 h-8 md:w-9 md:h-9 bg-gradient-to-br from-teal-500 to-teal-600 rounded-lg flex items-center justify-center shadow-md",children:(0,ev.jsx)(qy.A,{className:"w-4 h-4 md:w-5 md:h-5 text-white"})}),(0,ev.jsx)("span",{className:"bg-gradient-to-r from-teal-600 to-cyan-600 bg-clip-text text-transparent",children:"Room"}),(0,ev.jsx)("span",{className:"text-rose-500",children:"24"})]}),(0,ev.jsxs)("div",{className:"hidden md:flex items-center gap-3",children:[!t&&(0,ev.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ev.jsx)("button",{onClick:()=>i("renter"),className:"text-gray-600 hover:text-teal-600 px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Sign in"}),(0,ev.jsxs)("button",{onClick:()=>i("landlord"),className:"bg-gradient-to-r from-rose-500 to-pink-500 hover:from-rose-600 hover:to-pink-600 text-white px-5 py-2.5 rounded-xl text-sm font-semibold shadow-md hover:shadow-lg transition-all duration-200 flex items-center gap-2",children:[(0,ev.jsx)(qy.A,{className:"w-4 h-4"}),"List Your Room"]})]}),t&&(0,ev.jsxs)(ev.Fragment,{children:[u&&(0,ev.jsxs)("button",{onClick:u,className:"relative p-2.5 text-gray-500 hover:text-teal-600 hover:bg-teal-50 rounded-xl transition-all duration-200","aria-label":"Notifications",children:[(0,ev.jsx)(Wy,{className:"w-5 h-5 ".concat(c>0?"text-teal-600":"")}),c>0&&(0,ev.jsx)("span",{className:"absolute -top-0.5 -right-0.5 bg-gradient-to-r from-rose-500 to-pink-500 text-white text-[10px] font-bold rounded-full min-w-[20px] h-[20px] flex items-center justify-center shadow-md animate-pulse",children:c>99?"99+":c})]}),(0,ev.jsxs)("div",{className:"flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-gray-50 cursor-pointer transition-colors group",onClick:()=>o("profile"),children:[(0,ev.jsx)("div",{className:"w-10 h-10 rounded-xl bg-gradient-to-br from-teal-400 to-cyan-500 flex items-center justify-center text-white font-bold shadow-md ring-2 ring-white group-hover:shadow-lg transition-all duration-200 overflow-hidden",children:t.photo?(0,ev.jsx)("img",{src:t.photo,alt:t.name,className:"w-full h-full object-cover"}):(0,ev.jsx)("span",{className:"text-sm",children:t.name.charAt(0).toUpperCase()})}),(0,ev.jsxs)("div",{className:"hidden lg:block",children:[(0,ev.jsx)("p",{className:"font-semibold text-gray-800 leading-tight group-hover:text-teal-600 transition text-sm",children:t.name}),(0,ev.jsx)("p",{className:"text-xs text-gray-500 leading-tight flex items-center gap-1.5",children:n?(0,ev.jsxs)(ev.Fragment,{children:[(0,ev.jsx)("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full animate-pulse"})," Preview Mode"]}):"landlord"===t.type?(0,ev.jsxs)(ev.Fragment,{children:[(0,ev.jsx)("span",{className:"w-1.5 h-1.5 bg-teal-500 rounded-full"})," Property Owner"]}):(0,ev.jsxs)(ev.Fragment,{children:[(0,ev.jsx)("span",{className:"w-1.5 h-1.5 bg-blue-500 rounded-full"})," Looking for a Room"]})})]})]}),"landlord"===t.type&&(0,ev.jsx)("button",{onClick:()=>s(!n),className:"text-xs px-3 py-1.5 rounded-lg font-medium transition-all duration-200 ".concat(n?"bg-amber-100 text-amber-700 border border-amber-300 hover:bg-amber-200":"bg-gray-100 text-gray-600 border border-gray-200 hover:bg-teal-50 hover:text-teal-700 hover:border-teal-200"),"aria-pressed":n?"true":"false",children:n?"\u2715 Exit Preview":"\ud83d\udc41 Preview"}),(0,ev.jsx)("button",{onClick:a,className:"text-xs text-gray-500 hover:text-rose-600 px-3 py-1.5 rounded-lg border border-gray-200 hover:border-rose-200 hover:bg-rose-50 transition-all duration-200 font-medium",children:"Sign Out"})]})]}),(0,ev.jsx)("div",{className:"flex md:hidden items-center gap-2",children:t?(0,ev.jsxs)(ev.Fragment,{children:[u&&(0,ev.jsxs)("button",{onClick:u,className:"relative p-2 text-gray-500 hover:text-teal-600 hover:bg-gray-50 rounded-xl transition","aria-label":"Notifications",children:[(0,ev.jsx)(Wy,{className:"w-5 h-5"}),c>0&&(0,ev.jsx)("span",{className:"absolute -top-0.5 -right-0.5 bg-gradient-to-r from-rose-500 to-pink-500 text-white text-[9px] font-bold rounded-full w-5 h-5 flex items-center justify-center shadow",children:c>9?"9+":c})]}),(0,ev.jsx)("button",{onClick:()=>h(!d),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-xl transition","aria-label":"Menu",children:d?(0,ev.jsx)(My,{className:"w-6 h-6"}):(0,ev.jsx)(Zy,{className:"w-6 h-6"})})]}):(0,ev.jsxs)(ev.Fragment,{children:[(0,ev.jsx)("button",{onClick:()=>i("renter"),className:"text-sm text-gray-600 hover:text-teal-600 px-3 py-1.5 font-medium transition-colors",children:"Sign in"}),(0,ev.jsx)("button",{onClick:()=>i("landlord"),className:"text-sm bg-gradient-to-r from-rose-500 to-pink-500 text-white px-4 py-2 rounded-xl font-semibold shadow-md",children:"List Room"})]})})]}),t&&d&&(0,ev.jsxs)("div",{className:"md:hidden mt-2 pb-4 border-t border-gray-100 pt-4 animate-slideDown",role:"navigation","aria-label":"Mobile",children:[(0,ev.jsxs)("div",{className:"flex items-center gap-3 mb-4 pb-4 border-b border-gray-100 px-1",children:[(0,ev.jsx)("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-teal-400 to-cyan-500 flex items-center justify-center text-white font-bold text-lg shadow-md",children:t.photo?(0,ev.jsx)("img",{src:t.photo,alt:t.name,className:"w-full h-full rounded-xl object-cover"}):t.name.charAt(0).toUpperCase()}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("p",{className:"font-semibold text-gray-800",children:t.name}),(0,ev.jsxs)("p",{className:"text-xs text-gray-500 flex items-center gap-1.5",children:[(0,ev.jsx)("span",{className:"w-2 h-2 rounded-full ".concat("landlord"===t.type?"bg-teal-500":"bg-blue-500")}),"landlord"===t.type?"Property Owner":"Looking for a Room"]})]})]}),(0,ev.jsxs)("div",{className:"space-y-1 px-1",children:[(0,ev.jsxs)("button",{onClick:()=>{o("profile"),h(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-gray-700 hover:bg-teal-50 hover:text-teal-700 rounded-xl transition font-medium",children:[(0,ev.jsx)(Uy.A,{className:"w-5 h-5"}),(0,ev.jsx)("span",{children:"My Profile"})]}),"landlord"===t.type&&(0,ev.jsxs)("button",{onClick:()=>{s(!n),h(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl transition text-sm font-medium ".concat(n?"bg-amber-50 text-amber-700 hover:bg-amber-100":"text-gray-600 hover:bg-gray-50"),"aria-pressed":n?"true":"false",children:[(0,ev.jsx)("span",{className:"text-lg",children:n?"\u2715":"\ud83d\udc41"}),(0,ev.jsx)("span",{children:n?"Exit Renter Preview":"Preview as Renter"})]}),(0,ev.jsxs)("button",{onClick:()=>{a(),h(!1)},className:"w-full flex items-center gap-3 px-4 py-3 text-gray-500 hover:bg-rose-50 hover:text-rose-600 rounded-xl transition text-sm font-medium",children:[(0,ev.jsx)(My,{className:"w-5 h-5"}),(0,ev.jsx)("span",{children:"Sign Out"})]})]})]})]}),n&&"landlord"===(null===t||void 0===t?void 0:t.type)&&(0,ev.jsx)("div",{className:"bg-gradient-to-r from-amber-50 to-orange-50 border-b border-amber-200 text-amber-700 text-xs py-1.5 text-center font-medium",role:"status","aria-live":"polite",children:(0,ev.jsxs)("span",{className:"inline-flex items-center gap-1.5",children:[(0,ev.jsx)("span",{className:"w-2 h-2 bg-amber-400 rounded-full animate-pulse"}),"Preview Mode: Viewing as a renter. Toggle off to manage your listings."]})})]})}const nv=(0,Dy.A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),rv=(0,Dy.A)("maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]),sv=(0,Dy.A)("message-circle",[["path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719",key:"1sd12s"}]]),iv=(0,Dy.A)("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),av=(0,Dy.A)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),ov=(0,Dy.A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);var lv=n(944),cv=n(384);const uv=(0,Dy.A)("maximize-2",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]]),dv=(0,Dy.A)("zoom-out",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),hv=(0,Dy.A)("zoom-in",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),fv=(0,Dy.A)("rotate-ccw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);function mv(e){let{photos:t,initialIndex:n=0,onClose:s}=e;const[i,a]=(0,r.useState)(n),[o,l]=(0,r.useState)(0),[c,u]=(0,r.useState)(1),[d,h]=(0,r.useState)(!1),[f,m]=(0,r.useState)({x:0,y:0}),[p,g]=(0,r.useState)(!1),y=(0,r.useRef)(null),v=(0,r.useRef)(null),b=()=>{h(!1)},x=()=>{u(e=>Math.min(e+.2,3))},w=()=>{u(e=>Math.max(e-.2,.5))},N=()=>{l(0),u(1)};return(0,r.useEffect)(()=>{const e=()=>{g(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",e),()=>document.removeEventListener("fullscreenchange",e)},[]),(0,r.useEffect)(()=>{const e=e=>{switch(e.key){case"ArrowLeft":a(e=>Math.max(0,e-1));break;case"ArrowRight":a(e=>Math.min(t.length-1,e+1));break;case"+":case"=":x();break;case"-":w();break;case"0":N();break;case"Escape":p?document.exitFullscreen():s()}};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[t.length,p,s]),(0,ev.jsxs)("div",{ref:y,className:"fixed inset-0 bg-black z-50 flex flex-col",onMouseMove:e=>{if(!d)return;const t=e.clientX-f.x;l(e=>e+.5*t),m({x:e.clientX,y:e.clientY})},onMouseUp:b,onMouseLeave:b,onTouchMove:e=>{if(!d||1!==e.touches.length)return;const t=e.touches[0].clientX-f.x;l(e=>e+.5*t),m({x:e.touches[0].clientX,y:e.touches[0].clientY})},onTouchEnd:()=>{h(!1)},children:[(0,ev.jsx)("div",{className:"absolute top-0 left-0 right-0 bg-gradient-to-b from-black/80 via-black/40 to-transparent p-4 z-10",children:(0,ev.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ev.jsxs)("div",{className:"text-white",children:[(0,ev.jsxs)("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[(0,ev.jsx)("span",{className:"text-xl",children:"\ud83c\udfe0"}),"Virtual Tour"]}),(0,ev.jsxs)("p",{className:"text-sm text-gray-300 flex items-center gap-1",children:[(0,ev.jsx)("span",{className:"w-2 h-2 bg-teal-400 rounded-full animate-pulse"}),i+1," of ",t.length," views"]})]}),(0,ev.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ev.jsx)("button",{onClick:async()=>{if(document.fullscreenElement)await document.exitFullscreen(),g(!1);else try{var e;await(null===(e=y.current)||void 0===e?void 0:e.requestFullscreen()),g(!0)}catch(t){console.error("Fullscreen error:",t)}},className:"p-2.5 bg-white/20 hover:bg-white/30 rounded-xl text-white transition-all duration-200 hover:scale-110 active:scale-95 backdrop-blur-sm",title:"Fullscreen (F)",children:(0,ev.jsx)(uv,{className:"w-5 h-5"})}),(0,ev.jsx)("button",{onClick:s,className:"p-2.5 bg-white/20 hover:bg-red-500/80 rounded-xl text-white transition-all duration-200 hover:scale-110 active:scale-95 backdrop-blur-sm",title:"Close (Esc)",children:(0,ev.jsx)(My,{className:"w-5 h-5"})})]})]})}),(0,ev.jsx)("div",{className:"flex-1 flex items-center justify-center overflow-hidden",children:(0,ev.jsx)("div",{className:"relative ".concat(d?"cursor-grabbing":"cursor-grab"),style:{transform:"scale(".concat(c,") rotate(").concat(o,"deg)"),transition:d?"none":"transform 0.3s ease-out"},onMouseDown:e=>{h(!0),m({x:e.clientX,y:e.clientY})},onTouchStart:e=>{1===e.touches.length&&(h(!0),m({x:e.touches[0].clientX,y:e.touches[0].clientY}))},children:(0,ev.jsx)("img",{ref:v,src:t[i],alt:"View ".concat(i+1),className:"max-w-[90vw] max-h-[80vh] object-contain select-none",draggable:!1})})}),(0,ev.jsx)("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 via-black/60 to-transparent p-4 z-10 safe-area-bottom",children:(0,ev.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,ev.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide justify-center",children:t.map((e,t)=>(0,ev.jsx)("button",{onClick:()=>a(t),className:"flex-shrink-0 w-16 h-16 rounded-xl overflow-hidden transition-all duration-200 ".concat(t===i?"ring-2 ring-teal-400 ring-offset-2 ring-offset-black scale-105 shadow-lg shadow-teal-500/30":"opacity-60 hover:opacity-100 hover:scale-105 border border-white/20"),children:(0,ev.jsx)("img",{src:e,alt:"Room thumbnail ".concat(t+1),className:"w-full h-full object-cover"})},t))}),(0,ev.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,ev.jsx)("button",{onClick:w,className:"p-2.5 bg-white/20 hover:bg-white/30 rounded-xl text-white transition-all duration-200 hover:scale-110 active:scale-95 backdrop-blur-sm",title:"Zoom Out (-)",children:(0,ev.jsx)(dv,{className:"w-5 h-5"})}),(0,ev.jsxs)("div",{className:"px-4 py-2 bg-gradient-to-r from-teal-500/30 to-cyan-500/30 backdrop-blur-sm rounded-xl text-white text-sm font-bold min-w-[85px] text-center border border-white/10",children:[Math.round(100*c),"%"]}),(0,ev.jsx)("button",{onClick:x,className:"p-2.5 bg-white/20 hover:bg-white/30 rounded-xl text-white transition-all duration-200 hover:scale-110 active:scale-95 backdrop-blur-sm",title:"Zoom In (+)",children:(0,ev.jsx)(hv,{className:"w-5 h-5"})}),(0,ev.jsx)("div",{className:"w-px h-6 bg-white/20 mx-1"}),(0,ev.jsx)("button",{onClick:N,className:"p-2.5 bg-white/20 hover:bg-orange-500/60 rounded-xl text-white transition-all duration-200 hover:scale-110 active:scale-95 backdrop-blur-sm",title:"Reset View (0)",children:(0,ev.jsx)(fv,{className:"w-5 h-5"})})]}),(0,ev.jsxs)("div",{className:"text-center text-xs",children:[(0,ev.jsx)("p",{className:"hidden md:block text-gray-300/80 bg-white/5 rounded-full px-4 py-1.5 inline-block backdrop-blur-sm",children:"\ud83d\uddb1\ufe0f Drag to rotate \u2022 \u2328\ufe0f Arrows navigate \u2022 +/- zoom \u2022 0 reset \u2022 Esc close"}),(0,ev.jsx)("p",{className:"md:hidden text-gray-300/80 bg-white/5 rounded-full px-4 py-1.5 inline-block backdrop-blur-sm",children:"\ud83d\udc46 Swipe to rotate \u2022 Tap to switch"})]})]})})]})}function pv(e){let{photos:t,currentIndex:n,onClose:s,onNavigate:i}=e;const[a,o]=(0,r.useState)(null),l=(0,r.useRef)(null);(0,r.useEffect)(()=>{var e;const t=e=>{"ArrowRight"===e.key||"ArrowDown"===e.key?(e.preventDefault(),i("next")):"ArrowLeft"===e.key||"ArrowUp"===e.key?(e.preventDefault(),i("prev")):"Escape"===e.key&&(e.preventDefault(),s())};return window.addEventListener("keydown",t),null===(e=l.current)||void 0===e||e.focus(),()=>window.removeEventListener("keydown",t)},[i,s]);return(0,ev.jsxs)("div",{ref:l,tabIndex:-1,className:"fixed inset-0 bg-black/95 z-50 flex flex-col outline-none",onTouchStart:e=>{if(e.touches&&1===e.touches.length){const t=e.touches[0];o({x:t.clientX,y:t.clientY,time:Date.now()})}},onTouchEnd:e=>{if(!a||!e.changedTouches||0===e.changedTouches.length)return;const t=e.changedTouches[0],n=t.clientX-a.x,r=t.clientY-a.y,l=Date.now()-a.time<600,c=Math.abs(n)>60&&Math.abs(n)>Math.abs(r),u=r>80&&Math.abs(r)>Math.abs(n);l&&c?i(n<0?"next":"prev"):l&&u&&s(),o(null)},children:[(0,ev.jsx)("div",{className:"flex justify-between items-center p-4 text-white safe-area-top",children:(0,ev.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ev.jsx)("button",{onClick:s,className:"p-2 hover:bg-white/10 rounded-full transition-colors","aria-label":"Close gallery",children:(0,ev.jsx)(My,{className:"w-6 h-6"})}),(0,ev.jsxs)("span",{className:"text-sm font-medium bg-white/10 px-3 py-1 rounded-full",children:[n+1," of ",t.length]})]})}),(0,ev.jsxs)("div",{className:"flex-1 flex items-center justify-center relative px-4",children:[n>0&&(0,ev.jsx)("button",{onClick:()=>i("prev"),className:"absolute left-2 sm:left-6 bg-white/20 backdrop-blur-sm text-white p-3 sm:p-4 rounded-full hover:bg-white/30 z-10 transition-all duration-200 hover:scale-110 active:scale-95 shadow-lg","aria-label":"Previous photo",children:(0,ev.jsx)(nv,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),(0,ev.jsx)("img",{src:t[n],alt:"Room view ".concat(n+1),className:"max-w-full max-h-full object-contain rounded-lg shadow-2xl transition-opacity duration-300"}),n<t.length-1&&(0,ev.jsx)("button",{onClick:()=>i("next"),className:"absolute right-2 sm:right-6 bg-white/20 backdrop-blur-sm text-white p-3 sm:p-4 rounded-full hover:bg-white/30 z-10 transition-all duration-200 hover:scale-110 active:scale-95 shadow-lg","aria-label":"Next photo",children:(0,ev.jsx)(nv,{className:"w-5 h-5 sm:w-6 sm:h-6 transform rotate-180"})}),(0,ev.jsx)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 text-center text-xs text-white/60 bg-black/30 backdrop-blur-sm px-4 py-2 rounded-full hidden sm:block",children:"Use arrow keys or swipe to navigate"})]}),(0,ev.jsx)("div",{className:"p-4 safe-area-bottom",children:(0,ev.jsx)("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:t.map((e,t)=>(0,ev.jsx)("button",{onClick:()=>i("goto",t),className:"flex-shrink-0 w-16 h-16 sm:w-20 sm:h-20 rounded-lg overflow-hidden transition-all duration-200 ".concat(t===n?"ring-2 ring-teal-400 ring-offset-2 ring-offset-black scale-105":"opacity-50 hover:opacity-80"),children:(0,ev.jsx)("img",{src:e,alt:"Thumbnail ".concat(t+1),className:"w-full h-full object-cover"})},t))})})]})}function gv(e){let{listing:t,landlord:n,onClose:s}=e;const[i,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(0),[d,h]=(0,r.useState)(!1),[f,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)(""),[y,v]=(0,r.useState)(""),[b,x]=(0,r.useState)("idle"),[w,N]=(0,r.useState)(!1),S=(null===t||void 0===t?void 0:t.id)||"".concat(t.title,"-").concat(t.createdAt||"na"),k="reviews-".concat(S),[E,_]=(0,r.useState)(()=>{try{const e=localStorage.getItem(k);return e?JSON.parse(e):[]}catch(e){return[]}}),[A,C]=(0,r.useState)(0),[j,T]=(0,r.useState)(0),[I,P]=(0,r.useState)(""),[R,D]=(0,r.useState)("idle"),O=(null===t||void 0===t?void 0:t.fullAddress)||[null===t||void 0===t?void 0:t.streetAddress,null===t||void 0===t?void 0:t.location].filter(Boolean).join(", ")||(null===t||void 0===t?void 0:t.location)||"",L=(()=>{if(null!==t&&void 0!==t&&t.latitude&&null!==t&&void 0!==t&&t.longitude)return"https://www.google.com/maps/search/?api=1&query=".concat(t.latitude,",").concat(t.longitude);const e=O?"".concat(O,", South Africa"):"";return e?"https://www.google.com/maps/search/?api=1&query=".concat(encodeURIComponent(e)):""})(),M=E.length?Math.round(E.reduce((e,t)=>e+(t.rating||0),0)/E.length*10)/10:0;return(0,ev.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-start sm:items-center justify-center p-0 sm:p-4 z-50 overflow-y-auto","aria-modal":"true",role:"dialog",children:(0,ev.jsxs)("div",{className:"bg-white rounded-none sm:rounded-2xl max-w-2xl w-full h-full sm:h-auto sm:max-h-[90vh] overflow-y-auto shadow-2xl",children:[(0,ev.jsxs)("div",{className:"sticky top-0 bg-white/95 backdrop-blur-sm border-b border-gray-100 p-4 flex justify-between items-center z-10",children:[(0,ev.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ev.jsx)("button",{onClick:s,className:"text-gray-500 hover:text-gray-700 sm:hidden p-1 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Back",children:(0,ev.jsx)(nv,{className:"w-6 h-6"})}),(0,ev.jsx)("h2",{className:"text-lg md:text-xl font-bold text-gray-900",children:"Room Details"})]}),(0,ev.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 hidden sm:block p-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Close",children:(0,ev.jsx)(My,{className:"w-6 h-6"})})]}),(0,ev.jsxs)("div",{className:"p-4",children:[t.photos&&t.photos.length>0&&(0,ev.jsxs)("div",{className:"relative mb-4 cursor-pointer group",onClick:()=>l(!0),children:[(0,ev.jsx)("img",{src:t.photos[c],alt:"Room",className:"w-full h-64 object-cover rounded-xl shadow-md transition-transform duration-300 group-hover:scale-[1.01]"}),t.photos.length>1&&(0,ev.jsxs)("div",{className:"absolute bottom-3 right-3 bg-black/60 backdrop-blur-sm text-white px-3 py-1.5 rounded-full text-xs md:text-sm flex items-center gap-1.5 font-medium",children:[(0,ev.jsx)($y,{className:"w-4 h-4"}),"View all ",t.photos.length," photos"]}),t.photos.length>1&&(0,ev.jsx)("div",{className:"absolute bottom-3 left-3 flex gap-1.5",children:t.photos.map((e,t)=>(0,ev.jsx)("div",{className:"w-2 h-2 rounded-full transition-all ".concat(t===c?"bg-white scale-110":"bg-white/50")},t))}),t.photos.length>=3&&(0,ev.jsxs)("button",{onClick:e=>{e.stopPropagation(),N(!0)},className:"absolute top-3 right-3 bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-700 hover:to-cyan-700 text-white px-4 py-2 rounded-xl text-sm font-semibold flex items-center gap-2 shadow-lg transition-all hover:scale-105",children:[(0,ev.jsx)(rv,{className:"w-4 h-4"}),"Virtual Tour"]})]}),o&&t.photos&&(0,ev.jsx)(pv,{photos:t.photos,currentIndex:c,onClose:()=>l(!1),onNavigate:(e,n)=>{"next"===e&&c<t.photos.length-1?u(c+1):"prev"===e&&c>0?u(c-1):"goto"===e&&u(n)}}),w&&t.photos&&(0,ev.jsx)(mv,{photos:t.photos,initialIndex:c,onClose:()=>N(!1)}),(0,ev.jsx)("h3",{className:"text-2xl font-extrabold mb-2 text-gray-900",children:t.title}),(0,ev.jsxs)("div",{className:"text-transparent bg-gradient-to-r from-teal-600 to-cyan-600 bg-clip-text font-bold text-2xl mb-4",children:["R","number"===typeof t.price?t.price.toLocaleString("en-ZA"):t.price,"/month"]}),(0,ev.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[(0,ev.jsxs)("button",{onClick:()=>{const e=window.location.href,n="Check out this room: ".concat(t.title," - R").concat(t.price,"/month in ").concat(t.location||"South Africa"),r="https://wa.me/?text=".concat(encodeURIComponent(n+" "+e));window.open(r,"_blank")},className:"flex items-center gap-2 px-4 py-2 bg-green-500 hover:bg-green-600 text-white rounded-xl text-sm font-semibold transition-all shadow-md hover:shadow-lg",children:[(0,ev.jsx)(sv,{className:"w-4 h-4"}),"Share on WhatsApp"]}),(0,ev.jsxs)("button",{onClick:async()=>{const e=window.location.href,n="".concat(t.title," - R").concat(t.price,"/month");try{await navigator.clipboard.writeText("".concat(n,"\n").concat(e)),m(!0),setTimeout(()=>m(!1),2e3)}catch(r){const t=document.createElement("textarea");t.value="".concat(n,"\n").concat(e),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),m(!0),setTimeout(()=>m(!1),2e3)}},className:"flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-semibold transition-all shadow-sm ".concat(f?"bg-green-100 text-green-700 border border-green-300":"bg-gray-100 hover:bg-gray-200 text-gray-700 border border-gray-200"),children:[(0,ev.jsx)(iv,{className:"w-4 h-4"}),f?"Copied!":"Copy Link"]}),navigator.share&&(0,ev.jsxs)("button",{onClick:()=>{navigator.share({title:t.title,text:"Check out this room: R".concat(t.price,"/month"),url:window.location.href}).catch(()=>{})},className:"flex items-center gap-2 px-4 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 rounded-xl text-sm font-semibold transition-all border border-blue-200",children:[(0,ev.jsx)(av,{className:"w-4 h-4"}),"Share"]})]}),(0,ev.jsxs)("div",{className:"mb-4",children:[(0,ev.jsxs)("div",{className:"flex items-start text-gray-600 gap-2",children:[(0,ev.jsx)(Xy.A,{className:"w-5 h-5 mt-0.5 flex-shrink-0"}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("p",{className:"text-base font-medium text-gray-800",children:O||"Address coming soon"}),O&&(0,ev.jsx)("p",{className:"text-sm text-gray-500",children:"South Africa"})]})]}),L&&(0,ev.jsxs)("a",{href:L,target:"_blank",rel:"noopener noreferrer",className:"mt-2 inline-flex items-center gap-2 text-sm font-semibold text-teal-700 hover:text-teal-900",children:[(0,ev.jsx)(ov,{className:"w-4 h-4"})," Open in Google Maps"]})]}),(0,ev.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,ev.jsx)("div",{className:"flex items-center",children:[0,1,2,3,4].map(e=>(0,ev.jsx)(lv.A,{className:"w-5 h-5 ".concat(M>e?"text-yellow-500 fill-yellow-500":"text-gray-300")},e))}),(0,ev.jsx)("span",{className:"text-sm text-gray-700",children:E.length>0?"".concat(M," \u2022 ").concat(E.length," review").concat(E.length>1?"s":""):"No reviews yet"})]}),t.paymentMethod&&(0,ev.jsx)("div",{className:"bg-gradient-to-r from-emerald-50 to-teal-50 border border-emerald-200 rounded-xl p-4 mb-4",children:(0,ev.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ev.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:"Payment Method:"}),(0,ev.jsx)("span",{className:"text-sm text-emerald-700 font-medium",children:t.paymentMethod})]})}),(0,ev.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mb-4",children:[(0,ev.jsx)("h4",{className:"font-semibold mb-2 text-gray-800",children:"Description"}),(0,ev.jsx)("p",{className:"text-gray-600 leading-relaxed",children:t.description||"No description provided."})]}),(0,ev.jsxs)("div",{className:"bg-gray-50 rounded-xl p-4 mb-4",children:[(0,ev.jsx)("h4",{className:"font-semibold mb-3 text-gray-800",children:"Reviews"}),0===E.length&&(0,ev.jsx)("p",{className:"text-sm text-gray-500",children:"No reviews yet. Be the first to leave one."}),E.length>0&&(0,ev.jsx)("div",{className:"space-y-3",children:E.slice().reverse().map((e,t)=>(0,ev.jsxs)("div",{className:"border border-gray-200 rounded-md p-3",children:[(0,ev.jsxs)("div",{className:"flex items-center gap-1 mb-1",children:[[0,1,2,3,4].map(t=>(0,ev.jsx)(lv.A,{className:"w-4 h-4 ".concat(e.rating>t?"text-yellow-500 fill-yellow-500":"text-gray-300")},t)),(0,ev.jsx)("span",{className:"ml-2 text-xs text-gray-500",children:new Date(e.timestamp).toLocaleDateString()})]}),e.comment&&(0,ev.jsx)("p",{className:"text-sm text-gray-700",children:e.comment})]},t))})]}),(0,ev.jsxs)("div",{className:"bg-white rounded-xl p-4 mb-4 border border-gray-200 shadow-sm",children:[(0,ev.jsx)("h4",{className:"font-semibold mb-2 text-gray-800",children:"Leave a Review"}),(0,ev.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),A&&!(A<1))try{const e={rating:A,comment:I.trim(),timestamp:Date.now()},t=[...E,e];_(t),localStorage.setItem(k,JSON.stringify(t)),D("submitted"),C(0),P(""),setTimeout(()=>D("idle"),1200)}catch(t){D("error")}},className:"space-y-3",children:[(0,ev.jsxs)("div",{className:"flex items-center gap-2",children:[[1,2,3,4,5].map(e=>(0,ev.jsx)("button",{type:"button",onMouseEnter:()=>T(e),onMouseLeave:()=>T(0),onClick:()=>C(e),className:"focus:outline-none transition-transform hover:scale-110","aria-label":"Rate ".concat(e," star").concat(e>1?"s":""),children:(0,ev.jsx)(lv.A,{className:"w-6 h-6 transition-colors ".concat((j||A)>=e?"text-amber-400 fill-amber-400":"text-gray-300")})},e)),(0,ev.jsx)("span",{className:"text-xs text-gray-600",children:A?"".concat(A,"/5"):"Select rating"})]}),(0,ev.jsx)("div",{children:(0,ev.jsx)("textarea",{value:I,onChange:e=>P(e.target.value),placeholder:"Share details about your experience (optional)",className:"w-full border-2 border-gray-200 rounded-xl p-3 text-sm focus:outline-none focus:ring-2 focus:ring-teal-400 focus:border-transparent transition-all",rows:3})}),(0,ev.jsx)("div",{className:"flex items-center justify-end gap-2",children:(0,ev.jsx)("button",{type:"submit",disabled:!A||"submitted"===R,className:"text-sm px-5 py-2.5 rounded-xl bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-700 hover:to-cyan-700 text-white font-semibold disabled:opacity-50 shadow-md transition-all",children:"submitted"===R?"Saved":"Submit Review"})}),"error"===R&&(0,ev.jsx)("p",{className:"text-xs text-red-600",children:"Failed to save review. Try again."}),"submitted"===R&&(0,ev.jsx)("p",{className:"text-xs text-green-600",children:"Review saved locally."})]})]}),n&&(0,ev.jsxs)("div",{className:"bg-gradient-to-r from-teal-50 to-cyan-50 rounded-xl p-5 mb-4 border border-teal-100",children:[(0,ev.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,ev.jsx)("h4",{className:"font-semibold text-gray-800",children:"Landlord Information"}),(0,ev.jsxs)("button",{onClick:()=>a(!i),className:"text-teal-700 hover:text-teal-800 text-sm font-medium px-3 py-1 rounded-lg hover:bg-teal-100 transition-colors",children:[i?"Hide":"Show"," Contact"]})]}),(0,ev.jsxs)("div",{className:"flex items-center mb-3",children:[n.photo?(0,ev.jsx)("img",{src:n.photo,alt:n.name,className:"w-12 h-12 rounded-full object-cover mr-3 ring-2 ring-teal-200"}):(0,ev.jsx)("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-teal-100 to-cyan-100 flex items-center justify-center mr-3",children:(0,ev.jsx)(Uy.A,{className:"w-6 h-6 text-teal-600"})}),(0,ev.jsxs)("div",{children:[(0,ev.jsxs)("p",{className:"font-semibold text-gray-800 flex items-center gap-2",children:[n.name,(n.verified||n.idNumber)&&(0,ev.jsxs)("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 rounded-full bg-gradient-to-r from-blue-600 to-indigo-600 text-white text-[10px] font-semibold shadow-sm",children:[(0,ev.jsx)(cv.A,{className:"w-3 h-3"})," Verified"]})]}),(0,ev.jsx)("p",{className:"text-xs text-gray-500",children:"Property Owner"})]})]}),i&&(0,ev.jsxs)("div",{className:"space-y-3 pt-4 border-t border-teal-100",children:[(0,ev.jsxs)("div",{className:"grid grid-cols-2 gap-2 mb-3",children:[n.phone&&(0,ev.jsxs)("a",{href:"tel:".concat(n.phone),className:"flex items-center justify-center gap-2 bg-teal-600 hover:bg-teal-700 text-white py-3 rounded-xl font-semibold text-sm transition-all shadow-md hover:shadow-lg",children:[(0,ev.jsx)(Vy,{className:"w-4 h-4"}),"Call Now"]}),n.phone&&(0,ev.jsxs)("a",{href:"https://wa.me/".concat(n.phone.replace(/[^0-9]/g,"").replace(/^0/,"27"),"?text=").concat(encodeURIComponent("Hi, I'm interested in your room listing: ".concat(t.title," - R").concat(t.price,"/month"))),target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center gap-2 bg-green-500 hover:bg-green-600 text-white py-3 rounded-xl font-semibold text-sm transition-all shadow-md hover:shadow-lg",children:[(0,ev.jsx)(sv,{className:"w-4 h-4"}),"WhatsApp"]})]}),(0,ev.jsxs)("div",{className:"bg-white rounded-lg p-3 space-y-2",children:[(0,ev.jsxs)("div",{className:"flex items-center text-sm",children:[(0,ev.jsx)(Vy,{className:"w-4 h-4 mr-2 text-teal-700"}),(0,ev.jsx)("a",{href:"tel:".concat(n.phone),className:"text-teal-700 hover:underline font-medium",children:n.phone})]}),(0,ev.jsxs)("div",{className:"flex items-center text-sm",children:[(0,ev.jsx)(By,{className:"w-4 h-4 mr-2 text-teal-700"}),(0,ev.jsx)("a",{href:"mailto:".concat(n.email,"?subject=Inquiry about ").concat(t.title),className:"text-teal-700 hover:underline font-medium",children:n.email})]})]})]}),(0,ev.jsx)("div",{className:"mt-4 text-right",children:(0,ev.jsx)("button",{onClick:()=>h(!0),className:"text-xs font-medium text-red-600 hover:text-red-700 underline",children:"Report Listing"})})]}),d&&(0,ev.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",children:(0,ev.jsxs)("div",{className:"bg-white w-full max-w-md mx-4 rounded-2xl shadow-2xl p-6 relative",children:[(0,ev.jsx)("button",{onClick:()=>h(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 p-1 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Close report form",children:(0,ev.jsx)(My,{className:"w-5 h-5"})}),(0,ev.jsx)("h4",{className:"text-lg font-bold mb-4 text-gray-900",children:"Report Listing"}),(0,ev.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),p)try{const e=t.id||"".concat(t.title,"-").concat(t.createdAt||Date.now()),n=localStorage.getItem("reports"),r=n?JSON.parse(n):{};r[e]||(r[e]=[]),r[e].push({reason:p,comment:y.trim()||null,timestamp:Date.now()}),localStorage.setItem("reports",JSON.stringify(r)),x("submitted"),setTimeout(()=>{h(!1),g(""),v(""),x("idle")},1200)}catch(n){x("error")}},className:"space-y-4",children:[(0,ev.jsx)("div",{className:"space-y-2",children:["Fraud / Scam","Incorrect Information","Safety Concern","Inappropriate Content","Other"].map(e=>(0,ev.jsxs)("label",{className:"flex items-center gap-3 text-sm text-gray-700 p-2 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:[(0,ev.jsx)("input",{type:"radio",name:"reportReason",value:e,checked:p===e,onChange:()=>g(e),className:"text-teal-600 focus:ring-teal-500"}),e]},e))}),(0,ev.jsx)("div",{children:(0,ev.jsx)("textarea",{value:y,onChange:e=>v(e.target.value),placeholder:"Optional details...",className:"w-full border-2 border-gray-200 rounded-xl p-3 text-sm focus:outline-none focus:ring-2 focus:ring-teal-400 focus:border-transparent transition-all",rows:3})}),(0,ev.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,ev.jsx)("button",{type:"button",onClick:()=>h(!1),className:"text-sm px-4 py-2.5 rounded-xl border-2 border-gray-200 text-gray-700 hover:bg-gray-50 font-medium transition-colors",children:"Cancel"}),(0,ev.jsx)("button",{type:"submit",disabled:!p||"submitted"===b,className:"text-sm px-5 py-2.5 rounded-xl bg-red-600 hover:bg-red-700 text-white font-semibold disabled:opacity-50 shadow-md transition-all",children:"submitted"===b?"Submitted":"Submit Report"})]}),"error"===b&&(0,ev.jsx)("p",{className:"text-xs text-red-600",children:"Failed to save report. Try again."}),"submitted"===b&&(0,ev.jsx)("p",{className:"text-xs text-green-600",children:"Report received. Thank you."})]})]})})]})]})})}function yv(e){let{slot:t,format:n="auto",responsive:s=!0,style:a={},className:o=""}=e;const l={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAMw5vMNHvqNECNKX_wzXEA8ghDsl9c2eU",REACT_APP_FIREBASE_APP_ID:"1:725213786064:web:7c7e3709410266b98d13d5",REACT_APP_FIREBASE_AUTH_DOMAIN:"room-24.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-G7XPLZ4K10",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"725213786064",REACT_APP_FIREBASE_PROJECT_ID:"room-24",REACT_APP_FIREBASE_STORAGE_BUCKET:"room-24.firebasestorage.app"}.REACT_APP_ADSENSE_CLIENT;return(0,r.useEffect)(()=>{if(l)try{(window.adsbygoogle=window.adsbygoogle||[]).push({})}catch(e){console.error("AdSense error:",e)}},[l]),l?(0,ev.jsx)("div",{className:o,style:a,children:(0,ev.jsx)("ins",{className:"adsbygoogle",style:{display:"block"},"data-ad-client":l,"data-ad-slot":t,"data-ad-format":n,"data-full-width-responsive":s?"true":"false"})}):(0,ev.jsx)("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 border-2 border-dashed border-gray-200 rounded-xl flex items-center justify-center overflow-hidden ".concat(o),style:(0,i.A)({minHeight:"100px"},a),children:(0,ev.jsxs)("div",{className:"text-center p-4 relative",children:[(0,ev.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer"}),(0,ev.jsx)("div",{className:"w-10 h-10 mx-auto mb-2 bg-gray-200 rounded-lg flex items-center justify-center",children:(0,ev.jsx)("span",{className:"text-lg",children:"\ud83d\udce2"})}),(0,ev.jsx)("p",{className:"text-sm font-semibold text-gray-500 mb-0.5",children:"Ad Space"}),(0,ev.jsx)("p",{className:"text-xs text-gray-400",children:"Live in production"})]})})}function vv(){return(0,ev.jsx)(yv,{slot:"0987654321",format:"vertical",className:"w-full my-4",style:{minHeight:"250px"}})}function bv(){return(0,ev.jsx)(yv,{slot:"1122334455",format:"fluid",className:"w-full my-6",style:{minHeight:"100px"}})}function xv(){return(0,ev.jsx)(yv,{slot:"5544332211",format:"horizontal",responsive:!0,className:"w-full mt-4",style:{minHeight:"90px"}})}const wv=(0,Dy.A)("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Nv=(0,Dy.A)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]),Sv=(0,Dy.A)("cookie",[["path",{d:"M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5",key:"laymnq"}],["path",{d:"M8.5 8.5v.01",key:"ue8clq"}],["path",{d:"M16 15.5v.01",key:"14dtrp"}],["path",{d:"M12 12v.01",key:"u5ubse"}],["path",{d:"M11 17v.01",key:"1hyl5a"}],["path",{d:"M7 14v.01",key:"uct60s"}]]),kv=(0,Dy.A)("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);function Ev(e){let{onOpenPrivacy:t,onInstallApp:n}=e;return(0,ev.jsx)("footer",{className:"bg-gradient-to-b from-gray-900 to-gray-950 text-gray-300 pt-12 pb-8 mt-auto",role:"contentinfo",children:(0,ev.jsxs)("div",{className:"max-w-7xl mx-auto px-4",children:[(0,ev.jsx)("div",{className:"mb-10",children:(0,ev.jsx)(xv,{})}),(0,ev.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-10 mb-10",children:[(0,ev.jsxs)("div",{className:"md:col-span-1",children:[(0,ev.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,ev.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-teal-500 to-cyan-500 rounded-xl flex items-center justify-center shadow-lg",children:(0,ev.jsx)(qy.A,{className:"w-5 h-5 text-white"})}),(0,ev.jsxs)("span",{className:"text-2xl font-extrabold",children:[(0,ev.jsx)("span",{className:"bg-gradient-to-r from-teal-400 to-cyan-400 bg-clip-text text-transparent",children:"Room"}),(0,ev.jsx)("span",{className:"text-rose-400",children:"24"})]})]}),(0,ev.jsx)("p",{className:"text-sm text-gray-400 leading-relaxed mb-4",children:"Find your perfect room in South Africa. Connect directly with verified landlords and discover your next home."}),(0,ev.jsxs)("div",{className:"flex items-center gap-2 text-xs text-gray-500 bg-gray-800/50 px-3 py-2 rounded-lg",children:[(0,ev.jsx)("span",{className:"text-lg",children:"\ud83c\udf1f"}),(0,ev.jsxs)("span",{children:[(0,ev.jsx)("strong",{className:"text-gray-400",children:"Free platform"})," supported by ads"]})]})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("h4",{className:"text-white font-semibold mb-4 text-sm uppercase tracking-wider",children:"Quick Links"}),(0,ev.jsxs)("ul",{className:"space-y-3 text-sm",children:[(0,ev.jsx)("li",{children:(0,ev.jsxs)("button",{onClick:n,className:"text-gray-400 hover:text-teal-400 transition-colors flex items-center gap-2 group",children:[(0,ev.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-teal-500 to-cyan-500 rounded-lg flex items-center justify-center group-hover:scale-110 transition-transform",children:(0,ev.jsx)(Ly,{className:"w-4 h-4 text-white"})}),(0,ev.jsx)("span",{className:"font-medium",children:"Download App"})]})}),(0,ev.jsx)("li",{children:(0,ev.jsx)("a",{href:"#browse",className:"text-gray-400 hover:text-teal-400 transition-colors flex items-center gap-2",children:"Browse Rooms"})}),(0,ev.jsx)("li",{children:(0,ev.jsx)("a",{href:"#list",className:"text-gray-400 hover:text-teal-400 transition-colors flex items-center gap-2",children:"List Your Room"})}),(0,ev.jsx)("li",{children:(0,ev.jsx)("a",{href:"#pricing",className:"text-gray-400 hover:text-teal-400 transition-colors flex items-center gap-2",children:"Pricing"})})]})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("h4",{className:"text-white font-semibold mb-4 text-sm uppercase tracking-wider",children:"Legal"}),(0,ev.jsxs)("ul",{className:"space-y-3 text-sm",children:[(0,ev.jsx)("li",{children:(0,ev.jsxs)("button",{onClick:t,className:"text-gray-400 hover:text-teal-400 transition-colors flex items-center gap-2 text-left",children:[(0,ev.jsx)(wv,{className:"w-4 h-4"}),"Privacy Policy"]})}),(0,ev.jsx)("li",{children:(0,ev.jsxs)("a",{href:"#terms",className:"text-gray-400 hover:text-teal-400 transition-colors flex items-center gap-2",children:[(0,ev.jsx)(Nv,{className:"w-4 h-4"}),"Terms of Service"]})}),(0,ev.jsx)("li",{children:(0,ev.jsxs)("a",{href:"#cookies",className:"text-gray-400 hover:text-teal-400 transition-colors flex items-center gap-2",children:[(0,ev.jsx)(Sv,{className:"w-4 h-4"}),"Cookie Policy"]})})]})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("h4",{className:"text-white font-semibold mb-4 text-sm uppercase tracking-wider",children:"Contact"}),(0,ev.jsxs)("ul",{className:"space-y-3 text-sm",children:[(0,ev.jsx)("li",{children:(0,ev.jsxs)("a",{href:"mailto:support@room24.co.za",className:"text-gray-400 hover:text-teal-400 transition-colors flex items-center gap-2",children:[(0,ev.jsx)(By,{className:"w-4 h-4"}),"support@room24.co.za"]})}),(0,ev.jsx)("li",{children:(0,ev.jsxs)("a",{href:"#help",className:"text-gray-400 hover:text-teal-400 transition-colors flex items-center gap-2",children:[(0,ev.jsx)(kv,{className:"w-4 h-4"}),"Help Center"]})}),(0,ev.jsx)("li",{children:(0,ev.jsxs)("a",{href:"tel:+27123456789",className:"text-gray-400 hover:text-teal-400 transition-colors flex items-center gap-2",children:[(0,ev.jsx)(Vy,{className:"w-4 h-4"}),"+27 12 345 6789"]})})]}),(0,ev.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,ev.jsx)("a",{href:"#facebook",className:"w-10 h-10 bg-gray-800 hover:bg-blue-600 rounded-xl flex items-center justify-center transition-all duration-200 hover:scale-110 hover:shadow-lg hover:shadow-blue-600/25","aria-label":"Facebook",children:(0,ev.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,ev.jsx)("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),(0,ev.jsx)("a",{href:"#twitter",className:"w-10 h-10 bg-gray-800 hover:bg-sky-500 rounded-xl flex items-center justify-center transition-all duration-200 hover:scale-110 hover:shadow-lg hover:shadow-sky-500/25","aria-label":"Twitter",children:(0,ev.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,ev.jsx)("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})}),(0,ev.jsx)("a",{href:"#instagram",className:"w-10 h-10 bg-gray-800 hover:bg-gradient-to-br hover:from-purple-600 hover:to-pink-500 rounded-xl flex items-center justify-center transition-all duration-200 hover:scale-110 hover:shadow-lg hover:shadow-pink-500/25","aria-label":"Instagram",children:(0,ev.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,ev.jsx)("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"})})}),(0,ev.jsx)("a",{href:"#whatsapp",className:"w-10 h-10 bg-gray-800 hover:bg-green-600 rounded-xl flex items-center justify-center transition-all duration-200 hover:scale-110 hover:shadow-lg hover:shadow-green-600/25","aria-label":"WhatsApp",children:(0,ev.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:(0,ev.jsx)("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})})]})]})]}),(0,ev.jsx)("div",{className:"border-t border-gray-800 pt-8",children:(0,ev.jsxs)("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[(0,ev.jsxs)("p",{className:"text-sm text-gray-500",children:["\xa9 ",(new Date).getFullYear()," Room24. All rights reserved."]}),(0,ev.jsx)("p",{className:"text-xs text-gray-600 text-center md:text-right max-w-lg",children:"By using this site, you agree to our use of location services and cookies for improved user experience. We display ads to keep Room24 free for everyone."})]})})]})})}const _v=(0,Dy.A)("sparkles",[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]]),Av=(0,Dy.A)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]),Cv=(0,Dy.A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),jv=(0,Dy.A)("arrow-right",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);var Tv=n(88),Iv=n(457);function Pv(){return(0,ev.jsxs)("div",{className:"w-full bg-white rounded-xl shadow-md p-3 border border-gray-100 overflow-hidden",children:[(0,ev.jsxs)("div",{className:"relative w-full h-36 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 rounded-lg mb-3 overflow-hidden",children:[(0,ev.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent animate-shimmer"}),(0,ev.jsx)("div",{className:"absolute top-2 right-2 w-8 h-8 bg-white/60 rounded-full"})]}),(0,ev.jsx)("div",{className:"relative h-5 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 rounded-md w-4/5 mb-2 overflow-hidden",children:(0,ev.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent animate-shimmer"})}),(0,ev.jsx)("div",{className:"relative h-4 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 rounded-md w-3/5 mb-3 overflow-hidden",children:(0,ev.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent animate-shimmer"})}),(0,ev.jsxs)("div",{className:"flex gap-2 mb-3",children:[(0,ev.jsx)("div",{className:"relative h-6 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 rounded-full w-16 overflow-hidden",children:(0,ev.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent animate-shimmer"})}),(0,ev.jsx)("div",{className:"relative h-6 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 rounded-full w-20 overflow-hidden",children:(0,ev.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent animate-shimmer"})}),(0,ev.jsx)("div",{className:"relative h-6 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 rounded-full w-14 overflow-hidden",children:(0,ev.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent animate-shimmer"})})]}),(0,ev.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ev.jsx)("div",{className:"relative h-6 bg-gradient-to-r from-teal-100 via-teal-50 to-teal-100 rounded-md w-24 overflow-hidden",children:(0,ev.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent animate-shimmer"})}),(0,ev.jsx)("div",{className:"relative h-9 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 rounded-lg w-24 overflow-hidden",children:(0,ev.jsx)("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/40 to-transparent animate-shimmer"})})]})]})}const Rv="saved-searches",Dv="notifications",Ov="listing-snapshots";function Lv(){try{const e=localStorage.getItem(Rv);return e?JSON.parse(e):[]}catch(e){return[]}}function Mv(){try{const e=localStorage.getItem(Dv);return e?JSON.parse(e):[]}catch(e){return[]}}function Fv(e){try{const t=Mv(),n=(0,i.A)((0,i.A)({id:Date.now()},e),{},{timestamp:Date.now(),read:!1});t.unshift(n);const r=t.slice(0,50);return localStorage.setItem(Dv,JSON.stringify(r)),n}catch(t){return console.error("Failed to add notification",t),null}}function Uv(e,t){const n=[],r=zv();return e.forEach(e=>{const s=e.id||"".concat(e.title,"-").concat(e.createdAt);r[s]||t.forEach(t=>{(function(e,t){if(t.location&&!e.location.toLowerCase().includes(t.location.toLowerCase()))return!1;if(void 0!==t.priceMin&&e.price<t.priceMin)return!1;if(void 0!==t.priceMax&&e.price>t.priceMax)return!1;if(t.amenities&&t.amenities.length>0){const n=e.amenities||[];if(!t.amenities.every(e=>n.includes(e)))return!1}return!0})(e,t)&&n.push({type:"new-listing",title:"New Listing Match",body:'"'.concat(e.title,'" matches your saved search in ').concat(t.location||"your area"),listingId:s,searchId:t.id})})}),e.forEach(e=>{const t=e.id||"".concat(e.title,"-").concat(e.createdAt);r[t]={price:e.price,timestamp:Date.now()}}),Vv(r),n}function zv(){try{const e=localStorage.getItem(Ov);return e?JSON.parse(e):{}}catch(e){return{}}}function Vv(e){try{localStorage.setItem(Ov,JSON.stringify(e))}catch(t){console.error("Failed to save listing snapshots",t)}}function Bv(e){let{listings:t,searchLocation:n,setSearchLocation:s,priceRange:a,setPriceRange:o,selectedAmenities:l,setSelectedAmenities:c,sortBy:u,setSortBy:d,onSelectListing:h,setCurrentView:f,currentUser:m,onRequireAuth:p,subscribeToArea:g,previewMode:y}=e;const[v,b]=(0,r.useState)(!1),[x,w]=(0,r.useState)("undefined"!==typeof window&&window.innerWidth>=1024),[N,S]=(0,r.useState)(""),[k,E]=(0,r.useState)([]),[_,A]=(0,r.useState)(!1),[C,j]=(0,r.useState)([]),[T,I]=(0,r.useState)(!0),[P,R]=(0,r.useState)([]),[D,O]=(0,r.useState)(""),[L,M]=(0,r.useState)(""),[F,U]=(0,r.useState)(!1),[z,V]=(0,r.useState)(""),[B,q]=(0,r.useState)([]),[H,W]=(0,r.useState)(!0),K=r.useRef({}),G=9e5;(0,r.useEffect)(()=>{try{const e=localStorage.getItem("recent-searches");if(e){const t=JSON.parse(e);Array.isArray(t)&&q(t.slice(0,5))}"true"===localStorage.getItem("hero-dismissed")&&W(!1)}catch(e){}},[]);const Q=e=>{if(!e||e.trim().length<2)return;const t=e.trim();q(e=>{const n=e.filter(e=>e.toLowerCase()!==t.toLowerCase()),r=[t,...n].slice(0,5);try{localStorage.setItem("recent-searches",JSON.stringify(r))}catch(s){}return r})},Y=e=>{R(t=>{const n=t.includes(e)?t.filter(t=>t!==e):[...t,e];try{localStorage.setItem("favorites",JSON.stringify(n))}catch(r){}return n})};(0,r.useEffect)(()=>{try{const r=localStorage.getItem("filter-payment");r&&S(r);const s=localStorage.getItem("filter-price-min"),i=localStorage.getItem("filter-price-max");s&&!isNaN(parseInt(s))&&i&&!isNaN(parseInt(i))&&o([parseInt(s),parseInt(i)]);const a=localStorage.getItem("filter-amenities");if(a)try{const e=JSON.parse(a);Array.isArray(e)&&c(e)}catch(e){}const l=localStorage.getItem("saved-searches");if(l)try{const e=JSON.parse(l);Array.isArray(e)&&j(e)}catch(t){}const u=localStorage.getItem("favorites");if(u)try{const e=JSON.parse(u);Array.isArray(e)&&R(e)}catch(n){}const d=localStorage.getItem("filter-room-type");d&&O(d);const h=localStorage.getItem("filter-lease-duration");h&&M(h);"true"===localStorage.getItem("filter-pet-friendly")&&U(!0);const f=localStorage.getItem("filter-gender-preference");f&&V(f)}catch(r){}},[]),(0,r.useEffect)(()=>{const e=setTimeout(()=>I(!1),600);return()=>clearTimeout(e)},[]),(0,r.useEffect)(()=>{const e=()=>w(window.innerWidth>=1024);return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{try{localStorage.setItem("filter-payment",N)}catch(e){}},[N]),(0,r.useEffect)(()=>{try{localStorage.setItem("filter-price-min",String(a[0])),localStorage.setItem("filter-price-max",String(a[1]))}catch(e){}},[a]),(0,r.useEffect)(()=>{try{localStorage.setItem("filter-amenities",JSON.stringify(l))}catch(e){}},[l]),(0,r.useEffect)(()=>{try{localStorage.setItem("filter-room-type",D)}catch(e){}},[D]),(0,r.useEffect)(()=>{try{localStorage.setItem("filter-lease-duration",L)}catch(e){}},[L]),(0,r.useEffect)(()=>{try{localStorage.setItem("filter-pet-friendly",String(F))}catch(e){}},[F]),(0,r.useEffect)(()=>{try{localStorage.setItem("filter-gender-preference",z)}catch(e){}},[z]),(0,r.useEffect)(()=>{if(!t||0===t.length)return;const e=Lv();if(e.length>0){Uv(t,e).forEach(e=>Fv(e))}if(P.length>0){const e=function(e,t){const n=[],r=zv();return e.forEach(e=>{const s=e.id||"".concat(e.title,"-").concat(e.createdAt);if(!t.includes(s))return;const i=r[s];if(i&&i.price>e.price){const t=i.price-e.price;n.push({type:"price-drop",title:"Price Drop Alert",body:'"'.concat(e.title,'" dropped by R').concat(t," to R").concat(e.price,"/month"),listingId:s,oldPrice:i.price,newPrice:e.price})}}),e.forEach(e=>{const t=e.id||"".concat(e.title,"-").concat(e.createdAt);r[t]={price:e.price,timestamp:Date.now()}}),Vv(r),n}(t,P);e.forEach(e=>Fv(e))}},[t,P]),(0,r.useEffect)(()=>{const e=(n||"").trim();if(e.length<3)return E([]),void A(!1);const t=({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAMw5vMNHvqNECNKX_wzXEA8ghDsl9c2eU",REACT_APP_FIREBASE_APP_ID:"1:725213786064:web:7c7e3709410266b98d13d5",REACT_APP_FIREBASE_AUTH_DOMAIN:"room-24.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-G7XPLZ4K10",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"725213786064",REACT_APP_FIREBASE_PROJECT_ID:"room-24",REACT_APP_FIREBASE_STORAGE_BUCKET:"room-24.firebasestorage.app"}.REACT_APP_GEOCODER_API_KEY||"").trim(),r=({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAMw5vMNHvqNECNKX_wzXEA8ghDsl9c2eU",REACT_APP_FIREBASE_APP_ID:"1:725213786064:web:7c7e3709410266b98d13d5",REACT_APP_FIREBASE_AUTH_DOMAIN:"room-24.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-G7XPLZ4K10",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"725213786064",REACT_APP_FIREBASE_PROJECT_ID:"room-24",REACT_APP_FIREBASE_STORAGE_BUCKET:"room-24.firebasestorage.app"}.REACT_APP_GEOCODER_PROVIDER||"").toLowerCase(),s=e.toLowerCase(),i=K.current[s];if(i&&Date.now()-i.ts<G)return void E(i.data);const a=new AbortController;A(!0);const o=setTimeout(async()=>{try{let n=[];if("mapbox"===r&&t){const r="https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json?access_token=").concat(t,"&limit=5&country=ZA&language=en&types=place,locality,neighborhood"),s=await fetch(r,{signal:a.signal}),i=await s.json();i&&Array.isArray(i.features)&&(n=i.features.map(e=>e.place_name).filter(Boolean))}else{const t="https://nominatim.openstreetmap.org/search?format=json&q=".concat(encodeURIComponent(e+", South Africa"),"&limit=5"),r=await fetch(t,{signal:a.signal,headers:{"Accept-Language":"en"}}),s=await r.json(),i=[];s.forEach(e=>{const t=(e.display_name||"").split(",").map(e=>e.trim()),n=t.slice(0,2).join(", ");n&&!i.includes(n)&&i.push(n)}),n=i.slice(0,5)}K.current[s]={data:n,ts:Date.now()},E(n)}catch(n){E([])}finally{A(!1)}},450);return()=>{clearTimeout(o),a.abort()}},[n,G]);const X=[{id:"browse",label:"Browse",icon:$y},{id:"add",label:"List Room",icon:Jy,show:m&&"landlord"===m.type&&!y},{id:"my-listings",label:"My Rooms",icon:qy.A,show:m&&"landlord"===m.type&&!y},{id:"profile",label:"Profile",icon:Uy.A}],J=["WiFi","Parking","Kitchen","Laundry","Air Conditioning","Heating","Furnished"],$=e=>{l.includes(e)?c(l.filter(t=>t!==e)):c([...l,e])},Z=()=>{const e=[];return n&&e.push({type:"location",label:n}),a[0]>0&&e.push({type:"priceMin",label:"Min R".concat(a[0])}),a[1]<1e4&&e.push({type:"priceMax",label:"Max R".concat(a[1])}),l.forEach(t=>e.push({type:"amenity",label:t,value:t})),"newest"!==u&&e.push({type:"sort",label:"Sort: ".concat(u)}),N&&e.push({type:"payment",label:"Pay: ".concat(N)}),D&&e.push({type:"roomType",label:"".concat(D.charAt(0).toUpperCase()+D.slice(1)," room")}),L&&e.push({type:"lease",label:"".concat(L," months")}),F&&e.push({type:"pets",label:"\ud83d\udc3e Pet friendly"}),z&&e.push({type:"gender",label:"".concat(z.charAt(0).toUpperCase()+z.slice(1)," only")}),0===e.length?null:(0,ev.jsxs)("div",{className:"filter-chip-bar","aria-label":"Active filters",children:[e.map((e,t)=>(0,ev.jsxs)("button",{onClick:()=>{return t=e.type,n=e.value,"location"===t&&s(""),"priceMin"===t&&o([0,a[1]]),"priceMax"===t&&o([a[0],1e4]),"amenity"===t&&c(l.filter(e=>e!==n)),"sort"===t&&d("newest"),"roomType"===t&&O(""),"lease"===t&&M(""),"pets"===t&&U(!1),void("gender"===t&&V(""));var t,n},className:"filter-chip","aria-label":"Remove ".concat(e.label," filter"),children:[(0,ev.jsx)("span",{children:e.label}),(0,ev.jsx)("span",{"aria-hidden":"true",children:"\u2715"})]},t)),(0,ev.jsx)("button",{onClick:()=>{s(""),o([0,1e4]),c([]),d("newest"),S(""),O(""),M(""),U(!1),V(""),E([]);try{localStorage.removeItem("filter-payment")}catch(e){}try{localStorage.removeItem("filter-price-min"),localStorage.removeItem("filter-price-max")}catch(t){}try{localStorage.removeItem("filter-amenities")}catch(n){}try{localStorage.removeItem("filter-room-type")}catch(r){}try{localStorage.removeItem("filter-lease-duration")}catch(i){}try{localStorage.removeItem("filter-pet-friendly")}catch(a){}try{localStorage.removeItem("filter-gender-preference")}catch(l){}},className:"filter-chip bg-red-50 text-red-700 hover:bg-red-100",children:"Clear All"})]})},ee=()=>{const e=function(e){try{const t=Lv(),n=(0,i.A)((0,i.A)({id:Date.now()},e),{},{createdAt:Date.now()});return t.push(n),localStorage.setItem(Rv,JSON.stringify(t)),n}catch(t){return console.error("Failed to save search",t),null}}({location:n||"",priceMin:a[0],priceMax:a[1],priceRange:[...a],amenities:[...l]});e&&(j(Lv()),alert("Search saved! You'll be notified of new listings matching this criteria."))},te=e=>{s(e.location),o(e.priceRange),c(e.amenities),S(e.payment),d(e.sort||"newest")};return x?(0,ev.jsx)("div",{className:"bg-gradient-to-b from-slate-50 to-gray-100 min-h-screen pb-4","aria-labelledby":"results-heading",children:(0,ev.jsxs)("div",{className:"layout-desktop",children:[(0,ev.jsxs)("aside",{className:"sidebar-nav",role:"navigation","aria-label":"Desktop navigation and filters",children:[(0,ev.jsxs)("div",{children:[(0,ev.jsxs)("h2",{className:"text-xl font-bold flex items-center gap-2 mb-4",children:[(0,ev.jsx)("span",{className:"bg-gradient-to-r from-teal-600 to-cyan-600 bg-clip-text text-transparent",children:"Room"}),(0,ev.jsx)("span",{className:"text-amber-500",children:"24"})]}),(0,ev.jsx)("div",{className:"sidebar-section-title mb-2",children:"Navigation"}),(0,ev.jsx)("div",{className:"sidebar-menu",children:X.filter(e=>void 0===e.show||e.show).map(e=>{const t=e.icon,n="browse"===e.id;return(0,ev.jsxs)("button",{onClick:()=>f(e.id),className:n?"active":"","aria-label":e.label,children:[(0,ev.jsx)(t,{className:"w-4 h-4"})," ",e.label]},e.id)})})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("div",{className:"sidebar-section-title mb-2",children:"Filters"}),(0,ev.jsxs)("div",{className:"filters-box","aria-label":"Filters panel",children:[(0,ev.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,ev.jsx)(Xy.A,{className:"w-4 h-4 text-gray-400"}),(0,ev.jsx)("input",{type:"text",placeholder:"Search location...",value:n,onChange:e=>s(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-teal-600 focus:border-transparent","aria-label":"Location search"}),_&&(0,ev.jsx)("span",{className:"text-xs text-teal-600 animate-pulse","aria-live":"polite",children:"Loading..."})]}),(0,ev.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,ev.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,ev.jsx)("label",{className:"text-xs font-semibold text-gray-600",children:"Price Range"}),(0,ev.jsxs)("div",{className:"flex items-center gap-2 text-xs bg-gray-50 px-2 py-1 rounded border border-gray-200",children:[(0,ev.jsxs)("span",{children:["R",a[0].toLocaleString()," - R",a[1].toLocaleString()]}),(0,ev.jsxs)("select",{value:a[0],onChange:e=>o([parseInt(e.target.value),a[1]]),className:"bg-transparent border-l border-gray-300 pl-2 focus:outline-none","aria-label":"Minimum price",children:[(0,ev.jsx)("option",{value:"0",children:"Min"}),(0,ev.jsx)("option",{value:"500",children:"R500"}),(0,ev.jsx)("option",{value:"1000",children:"R1000"}),(0,ev.jsx)("option",{value:"1500",children:"R1500"})]}),(0,ev.jsxs)("select",{value:a[1],onChange:e=>o([a[0],parseInt(e.target.value)]),className:"bg-transparent border-l border-gray-300 pl-2 focus:outline-none","aria-label":"Maximum price",children:[(0,ev.jsx)("option",{value:"10000",children:"R10,000"}),(0,ev.jsx)("option",{value:"5000",children:"R5,000"}),(0,ev.jsx)("option",{value:"3000",children:"R3,000"}),(0,ev.jsx)("option",{value:"2000",children:"R2,000"})]})]})]}),(0,ev.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,ev.jsx)("label",{className:"text-xs font-semibold text-gray-600",children:"Sort"}),(0,ev.jsxs)("select",{value:u,onChange:e=>d(e.target.value),className:"text-sm bg-white border border-gray-300 px-2 py-1 rounded focus:ring-2 focus:ring-teal-600","aria-label":"Sort order",children:[(0,ev.jsx)("option",{value:"newest",children:"Newest"}),(0,ev.jsx)("option",{value:"cheapest",children:"Cheapest"}),(0,ev.jsx)("option",{value:"expensive",children:"Most Expensive"})]})]}),(0,ev.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,ev.jsx)("label",{className:"text-xs font-semibold text-gray-600",children:"Payment Method"}),(0,ev.jsxs)("select",{value:N,onChange:e=>S(e.target.value),className:"text-sm bg-white border border-gray-300 px-2 py-1 rounded focus:ring-2 focus:ring-teal-600","aria-label":"Payment method",children:[(0,ev.jsx)("option",{value:"",children:"Any"}),(0,ev.jsx)("option",{value:"Bank and Cash",children:"Bank and Cash"}),(0,ev.jsx)("option",{value:"Cash Only",children:"Cash Only"}),(0,ev.jsx)("option",{value:"Bank Only",children:"Bank Only"})]})]}),(0,ev.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,ev.jsx)("label",{className:"text-xs font-semibold text-gray-600",children:"Saved Searches"}),(0,ev.jsxs)("div",{className:"flex flex-wrap gap-1",children:[0===C.length&&(0,ev.jsx)("span",{className:"text-[11px] text-gray-500",children:"None saved"}),C.map(e=>(0,ev.jsxs)("button",{type:"button",onClick:()=>te(e),className:"px-2 py-1 rounded-md text-[11px] font-medium bg-purple-50 text-purple-700 border border-purple-200 hover:bg-purple-100",children:[e.location||"Any"," \u2022 ",e.priceRange[0],"-",e.priceRange[1]]},e.id))]}),(0,ev.jsx)("button",{type:"button",onClick:ee,className:"mt-1 text-xs text-purple-700 hover:text-purple-800 font-medium underline",children:"Save Current Search"})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"text-xs font-semibold text-gray-600 mb-1 block",children:"Amenities"}),(0,ev.jsx)("div",{className:"flex flex-wrap gap-1",children:J.map(e=>(0,ev.jsx)("button",{type:"button",onClick:()=>$(e),className:"px-2 py-1 rounded-md text-[11px] font-medium border transition ".concat(l.includes(e)?"bg-teal-600 text-white border-teal-600 shadow-sm":"bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200"),"aria-pressed":l.includes(e),children:e},e))})]}),(0,ev.jsx)("button",{onClick:()=>b(!v),className:"mt-2 text-xs text-teal-700 hover:text-teal-800 font-semibold px-2 py-1 rounded hover:bg-teal-50 transition","aria-expanded":v,children:v?"Close Advanced":"More Filters"}),v&&(0,ev.jsx)("div",{className:"mt-2 p-2 bg-gray-50 border border-gray-200 rounded","aria-label":"Advanced filters",children:(0,ev.jsx)("p",{className:"text-xs text-gray-600",children:"(Advanced filters placeholder)"})})]})]})]}),(0,ev.jsx)(vv,{}),!m&&(0,ev.jsxs)("div",{className:"mt-auto pt-4 border-t border-gray-200",children:[(0,ev.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Join to list rooms."}),(0,ev.jsxs)("div",{className:"flex gap-2",children:[(0,ev.jsx)("button",{onClick:()=>p&&p("renter"),className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 text-xs py-2 rounded",children:"Sign In"}),(0,ev.jsx)("button",{onClick:()=>p&&p("landlord"),className:"flex-1 bg-red-500 hover:bg-red-600 text-white text-xs py-2 rounded",children:"List Room"})]})]})]}),(0,ev.jsx)("main",{className:"desktop-split",role:"main",children:(0,ev.jsxs)("div",{className:"list-pane",children:[(0,ev.jsx)("div",{className:"flex items-center justify-between mb-3",children:(0,ev.jsx)("h2",{id:"results-heading",className:"text-lg font-semibold text-gray-800",children:0===t.length?"No rooms":"".concat(t.length," rooms")})}),Z(),T?(0,ev.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6","aria-label":"Loading listings",children:Array.from({length:8}).map((e,t)=>(0,ev.jsx)(Pv,{},t))}):0===(N?t.filter(e=>e.paymentMethod===N):t).length?(0,ev.jsxs)("div",{className:"bg-white border border-gray-200 rounded-2xl p-12 text-center shadow-sm",children:[(0,ev.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-gray-100 to-gray-50 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,ev.jsx)($y,{className:"w-10 h-10 text-gray-300"})}),(0,ev.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"No rooms found"}),(0,ev.jsx)("p",{className:"text-gray-500 text-sm mb-6 max-w-md mx-auto",children:"We couldn't find any rooms matching your filters. Try adjusting your search or explore popular areas."}),(0,ev.jsxs)("div",{className:"flex flex-wrap justify-center gap-2 mb-6",children:[(0,ev.jsx)("span",{className:"text-xs text-gray-500",children:"Try:"}),["Sandton","Soweto","Pretoria","Cape Town"].map(e=>(0,ev.jsx)("button",{onClick:()=>s(e),className:"text-xs px-3 py-1.5 rounded-full bg-teal-50 text-teal-700 hover:bg-teal-100 border border-teal-200 transition-all",children:e},e))]}),(0,ev.jsx)("button",{onClick:()=>{s(""),o([0,1e4]),c([]),S("")},className:"text-sm text-teal-600 hover:text-teal-700 font-semibold",children:"Clear all filters"})]}):(0,ev.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6",children:(N?t.filter(e=>e.paymentMethod===N):t).map((e,n)=>(0,ev.jsxs)(r.Fragment,{children:[(0,ev.jsx)(Iv.A,{listing:e,onClick:()=>h(e)}),(n+1)%6===0&&n!==t.length-1&&(0,ev.jsx)("div",{className:"md:col-span-2 xl:col-span-3 2xl:col-span-4",children:(0,ev.jsx)(bv,{})})]},e.id))})]})})]})}):(0,ev.jsxs)("div",{className:"bg-gradient-to-b from-slate-50 to-gray-100 min-h-screen pb-24",role:"main","aria-labelledby":"results-heading",children:[H&&!m&&t.length>0&&(0,ev.jsxs)("div",{className:"bg-gradient-to-r from-teal-600 via-cyan-600 to-teal-700 text-white relative overflow-hidden",children:[(0,ev.jsx)("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iMC4xIj48cGF0aCBkPSJNMzYgMzRoLTJ2LTRoMnYtMmgtMnYtMmgydi0ySDI0djJoMnYyaC0ydjJoMnY0aC0ydjJoMTJ2LTJ6Ii8+PC9nPjwvZz48L3N2Zz4=')] opacity-30"}),(0,ev.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8 relative",children:[(0,ev.jsx)("button",{onClick:()=>{W(!1);try{localStorage.setItem("hero-dismissed","true")}catch(e){}},className:"absolute top-2 right-2 p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-full transition-colors","aria-label":"Dismiss welcome message",children:(0,ev.jsx)("span",{className:"text-xl",children:"\xd7"})}),(0,ev.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[(0,ev.jsx)(_v,{className:"w-5 h-5 text-amber-300"}),(0,ev.jsx)("span",{className:"text-sm font-medium text-teal-100",children:"Find your perfect room in South Africa"})]}),(0,ev.jsxs)("h1",{className:"text-2xl md:text-3xl font-bold mb-3",children:["Welcome to Room",(0,ev.jsx)("span",{className:"text-amber-300",children:"24"})]}),(0,ev.jsx)("p",{className:"text-teal-100 mb-6 max-w-lg",children:"Discover affordable rooms for rent across South Africa. Connect directly with verified landlords - no middleman fees."}),(0,ev.jsxs)("div",{className:"flex flex-wrap gap-4 mb-4",children:[(0,ev.jsxs)("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-3 py-2 rounded-lg",children:[(0,ev.jsx)(Av,{className:"w-4 h-4 text-amber-300"}),(0,ev.jsxs)("span",{className:"text-sm",children:[t.length,"+ Rooms"]})]}),(0,ev.jsxs)("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-3 py-2 rounded-lg",children:[(0,ev.jsx)(wv,{className:"w-4 h-4 text-amber-300"}),(0,ev.jsx)("span",{className:"text-sm",children:"Verified Listings"})]}),(0,ev.jsxs)("div",{className:"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-3 py-2 rounded-lg",children:[(0,ev.jsx)(Cv,{className:"w-4 h-4 text-amber-300"}),(0,ev.jsx)("span",{className:"text-sm",children:"Instant Contact"})]})]}),(0,ev.jsxs)("button",{onClick:()=>p&&p("renter"),className:"inline-flex items-center gap-2 bg-white text-teal-700 font-semibold px-5 py-2.5 rounded-xl hover:bg-teal-50 transition-colors shadow-lg",children:["Get Started",(0,ev.jsx)(jv,{className:"w-4 h-4"})]})]})]}),(0,ev.jsx)("div",{className:"bg-white/80 backdrop-blur-sm border-b border-gray-100 shadow-sm",children:(0,ev.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[(0,ev.jsxs)("div",{className:"mb-4 space-y-3",children:[(0,ev.jsxs)("div",{className:"relative",children:[(0,ev.jsx)(Xy.A,{className:"absolute left-3 top-3.5 w-5 h-5 text-gray-400"}),(0,ev.jsx)("input",{type:"text",placeholder:"Search by location, suburb, or area...",value:n,onChange:e=>s(e.target.value),onBlur:()=>{n&&Q(n)},className:"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-xl text-gray-700 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 shadow-sm transition-all duration-200 hover:border-gray-400","aria-label":"Location search"}),_&&(0,ev.jsx)("div",{className:"absolute right-3 top-3 flex items-center gap-1 text-teal-600","aria-live":"polite",children:(0,ev.jsx)("div",{className:"w-4 h-4 border-2 border-teal-500 border-t-transparent rounded-full animate-spin"})}),!_&&n&&(0,ev.jsx)("button",{onClick:()=>{s(""),E([])},className:"absolute right-3 top-3 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors","aria-label":"Clear search",children:(0,ev.jsx)("span",{className:"text-lg",children:"\xd7"})}),k.length>0&&(0,ev.jsxs)("div",{className:"absolute left-0 right-0 top-full mt-2 bg-white border border-gray-200 rounded-xl shadow-lg z-20 overflow-hidden animate-fadeIn",children:[(0,ev.jsx)("div",{className:"text-xs text-gray-500 px-3 py-2 bg-gray-50 border-b border-gray-100 font-medium",children:"\ud83d\udccd Suggestions"}),k.map((e,t)=>(0,ev.jsxs)("button",{type:"button",onClick:()=>{s(e),E([]),Q(e)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-teal-50 flex items-center gap-2 transition-colors ".concat(t>0?"border-t border-gray-50":""),children:[(0,ev.jsx)(Xy.A,{className:"w-3.5 h-3.5 text-teal-500 flex-shrink-0"}),(0,ev.jsx)("span",{className:"text-gray-700",children:e})]},e))]}),!n&&B.length>0&&0===k.length&&(0,ev.jsxs)("div",{className:"absolute left-0 right-0 top-full mt-2 bg-white border border-gray-200 rounded-xl shadow-lg z-20 overflow-hidden",children:[(0,ev.jsxs)("div",{className:"text-xs text-gray-500 px-3 py-2 bg-gray-50 border-b border-gray-100 font-medium flex items-center gap-1",children:[(0,ev.jsx)(Tv.A,{className:"w-3 h-3"})," Recent Searches"]}),B.map((e,t)=>(0,ev.jsxs)("button",{type:"button",onClick:()=>{s(e)},className:"w-full text-left px-4 py-2.5 text-sm hover:bg-teal-50 flex items-center gap-2 transition-colors ".concat(t>0?"border-t border-gray-50":""),children:[(0,ev.jsx)(Tv.A,{className:"w-3.5 h-3.5 text-gray-400 flex-shrink-0"}),(0,ev.jsx)("span",{className:"text-gray-700",children:e})]},"recent-".concat(t)))]})]}),(0,ev.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,ev.jsxs)("button",{className:"bg-gradient-to-r from-teal-500 to-teal-600 hover:from-teal-600 hover:to-teal-700 text-white px-5 py-2.5 rounded-xl transition-all duration-200 font-semibold shadow-md hover:shadow-lg text-sm flex items-center gap-2 active:scale-95",onClick:()=>{n&&Q(n)},"aria-label":"Search submit",children:[(0,ev.jsx)($y,{className:"w-4 h-4"}),"Search"]}),(0,ev.jsx)("button",{onClick:()=>{n&&""!==n.trim()?m?g&&g(m.id,n.trim()):p&&p("renter"):alert("Enter a location to subscribe.")},className:"bg-white border border-gray-200 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-50 transition text-sm",children:"Subscribe"}),(0,ev.jsx)("button",{type:"button",onClick:ee,className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded-lg text-sm font-semibold shadow-sm",children:"Save Search"})]}),(0,ev.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[(0,ev.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:"Popular:"}),["Sandton","Soweto","Pretoria","Cape Town","Durban","Johannesburg"].map(e=>(0,ev.jsx)("button",{onClick:()=>{s(e),Q(e)},className:"text-xs px-3 py-1.5 rounded-full transition-all duration-200 ".concat(n.toLowerCase()===e.toLowerCase()?"bg-teal-600 text-white shadow-md":"bg-gray-100 text-gray-600 hover:bg-teal-50 hover:text-teal-700 border border-gray-200"),children:e},e))]}),(0,ev.jsxs)("div",{className:"flex flex-wrap gap-2 items-center pt-2 border-t border-gray-100",children:[(0,ev.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:"Quick filters:"}),(0,ev.jsx)("button",{onClick:()=>o([0,3e3]),className:"text-xs px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-1 ".concat(3e3===a[1]&&0===a[0]?"bg-emerald-600 text-white shadow-md":"bg-emerald-50 text-emerald-700 hover:bg-emerald-100 border border-emerald-200"),children:"\ud83d\udcb0 Under R3,000"}),(0,ev.jsx)("button",{onClick:()=>U(!F),className:"text-xs px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-1 ".concat(F?"bg-amber-500 text-white shadow-md":"bg-amber-50 text-amber-700 hover:bg-amber-100 border border-amber-200"),children:"\ud83d\udc3e Pet Friendly"}),(0,ev.jsx)("button",{onClick:()=>{window.scrollTo({top:400,behavior:"smooth"})},className:"text-xs px-3 py-1.5 rounded-full bg-blue-50 text-blue-700 hover:bg-blue-100 border border-blue-200 transition-all duration-200 flex items-center gap-1",children:"\ud83c\udfe0 Available Now"}),(0,ev.jsx)("button",{onClick:()=>$("WiFi"),className:"text-xs px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-1 ".concat(l.includes("WiFi")?"bg-violet-600 text-white shadow-md":"bg-violet-50 text-violet-700 hover:bg-violet-100 border border-violet-200"),children:"\ud83d\udcf6 WiFi"}),(0,ev.jsx)("button",{onClick:()=>$("Parking"),className:"text-xs px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-1 ".concat(l.includes("Parking")?"bg-slate-600 text-white shadow-md":"bg-slate-50 text-slate-700 hover:bg-slate-100 border border-slate-200"),children:"\ud83d\ude97 Parking"})]}),C.length>0&&(0,ev.jsx)("div",{className:"flex flex-wrap gap-1 mb-2","aria-label":"Saved searches",children:C.map(e=>(0,ev.jsxs)("button",{type:"button",onClick:()=>te(e),className:"text-[11px] px-2 py-1 rounded bg-purple-50 text-purple-700 border border-purple-200",children:[e.location||"Any"," \u2022 ",e.priceRange[0],"-",e.priceRange[1]]},e.id))})]}),(0,ev.jsxs)("div",{className:"flex gap-2 mb-3 flex-wrap items-center",children:[(0,ev.jsxs)("div",{className:"flex items-center gap-2 bg-gray-50 px-3 py-2 rounded-lg border border-gray-200",children:[(0,ev.jsxs)("span",{className:"text-sm text-gray-600 font-medium",children:["R",a[0].toLocaleString()," - R",a[1].toLocaleString()]}),(0,ev.jsxs)("select",{value:a[0],onChange:e=>o([parseInt(e.target.value),a[1]]),className:"text-xs bg-transparent border-l border-gray-300 pl-2 text-gray-600 focus:outline-none","aria-label":"Minimum price",children:[(0,ev.jsx)("option",{value:"0",children:"Min"}),(0,ev.jsx)("option",{value:"500",children:"R500"}),(0,ev.jsx)("option",{value:"1000",children:"R1000"}),(0,ev.jsx)("option",{value:"1500",children:"R1500"})]}),(0,ev.jsxs)("select",{value:a[1],onChange:e=>o([a[0],parseInt(e.target.value)]),className:"text-xs bg-transparent border-l border-gray-300 pl-2 text-gray-600 focus:outline-none","aria-label":"Maximum price",children:[(0,ev.jsx)("option",{value:"10000",children:"R10k"}),(0,ev.jsx)("option",{value:"5000",children:"R5k"}),(0,ev.jsx)("option",{value:"3000",children:"R3k"}),(0,ev.jsx)("option",{value:"2000",children:"R2k"})]})]}),(0,ev.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ev.jsx)("span",{className:"text-sm text-gray-600",children:"Sort:"}),(0,ev.jsxs)("select",{value:u,onChange:e=>d(e.target.value),className:"text-sm bg-gray-50 border border-gray-200 px-3 py-2 rounded-lg text-gray-700 focus:ring-2 focus:ring-teal-600","aria-label":"Sort order",children:[(0,ev.jsx)("option",{value:"newest",children:"Newest"}),(0,ev.jsx)("option",{value:"cheapest",children:"Cheapest"}),(0,ev.jsx)("option",{value:"expensive",children:"Most Expensive"})]})]}),(0,ev.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ev.jsx)("span",{className:"text-sm text-gray-600",children:"Payment:"}),(0,ev.jsxs)("select",{value:N,onChange:e=>S(e.target.value),className:"text-sm bg-gray-50 border border-gray-200 px-3 py-2 rounded-lg text-gray-700 focus:ring-2 focus:ring-teal-600","aria-label":"Payment method filter",children:[(0,ev.jsx)("option",{value:"",children:"Any"}),(0,ev.jsx)("option",{value:"Bank and Cash",children:"Bank & Cash"}),(0,ev.jsx)("option",{value:"Cash Only",children:"Cash Only"}),(0,ev.jsx)("option",{value:"Bank Only",children:"Bank Only"})]})]}),(0,ev.jsx)("button",{onClick:()=>b(!v),className:"text-sm text-teal-700 hover:text-teal-800 font-medium px-3 py-2 rounded-lg hover:bg-teal-50 transition","aria-expanded":v,children:v?"\u2715 Filters":"\u2699\ufe0f Filters"})]}),v&&(0,ev.jsxs)("div",{className:"mt-3 p-4 bg-gray-50 rounded-lg border border-gray-200 space-y-4",children:[(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"text-xs font-semibold text-gray-700 mb-2 block",children:"Room Type"}),(0,ev.jsx)("div",{className:"flex gap-2",children:["Private","Shared"].map(e=>(0,ev.jsx)("button",{onClick:()=>O(D===e.toLowerCase()?"":e.toLowerCase()),className:"px-3 py-1.5 rounded-md text-sm font-medium border transition ".concat(D===e.toLowerCase()?"bg-teal-600 text-white border-teal-600 shadow-sm":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),children:e},e))})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"text-xs font-semibold text-gray-700 mb-2 block",children:"Lease Duration (months)"}),(0,ev.jsx)("div",{className:"flex gap-2 flex-wrap",children:[{label:"1-3",value:"1-3"},{label:"4-6",value:"4-6"},{label:"7-12",value:"7-12"},{label:"12+",value:"12+"}].map(e=>(0,ev.jsx)("button",{onClick:()=>M(L===e.value?"":e.value),className:"px-3 py-1.5 rounded-md text-sm font-medium border transition ".concat(L===e.value?"bg-teal-600 text-white border-teal-600 shadow-sm":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),children:e.label},e.value))})]}),(0,ev.jsx)("div",{children:(0,ev.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,ev.jsx)("input",{type:"checkbox",checked:F,onChange:e=>U(e.target.checked),className:"w-4 h-4 text-teal-600 border-gray-300 rounded focus:ring-teal-500"}),(0,ev.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"\ud83d\udc3e Pet Friendly"})]})}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"text-xs font-semibold text-gray-700 mb-2 block",children:"Gender Preference"}),(0,ev.jsx)("div",{className:"flex gap-2",children:[{label:"Male",value:"male"},{label:"Female",value:"female"},{label:"Any",value:"any"}].map(e=>(0,ev.jsx)("button",{onClick:()=>V(z===e.value?"":e.value),className:"px-3 py-1.5 rounded-md text-sm font-medium border transition ".concat(z===e.value?"bg-teal-600 text-white border-teal-600 shadow-sm":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),children:e.label},e.value))})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"text-xs font-semibold text-gray-700 mb-2 block",children:"Amenities"}),(0,ev.jsx)("div",{className:"flex flex-wrap gap-1","aria-label":"Amenities",children:J.map(e=>(0,ev.jsx)("button",{type:"button",onClick:()=>$(e),className:"px-2 py-1 rounded-md text-[11px] font-medium border transition ".concat(l.includes(e)?"bg-teal-600 text-white border-teal-600 shadow-sm":"bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200"),"aria-pressed":l.includes(e),children:e},e))})]})]}),Z()]})}),(0,ev.jsx)("div",{className:"max-w-7xl mx-auto px-4 pt-3",children:(0,ev.jsx)(bv,{})}),(0,ev.jsxs)("div",{className:"max-w-7xl mx-auto px-4",children:[(0,ev.jsx)("div",{className:"flex justify-between items-center mt-4 mb-4",children:(0,ev.jsx)("h2",{id:"results-heading",className:"text-2xl font-bold text-gray-800",children:0===t.length?"No rooms available":(0,ev.jsxs)("span",{className:"flex items-center gap-2",children:[(0,ev.jsx)("span",{className:"bg-gradient-to-r from-teal-500 to-cyan-500 text-white text-lg font-bold px-3 py-1 rounded-lg shadow-sm",children:t.length}),(0,ev.jsx)("span",{children:"Rooms Available"})]})})}),T?(0,ev.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-12 justify-items-center","aria-label":"Loading listings",children:Array.from({length:8}).map((e,t)=>(0,ev.jsx)(Pv,{},t))}):0===(N?t.filter(e=>e.paymentMethod===N):t).length?(0,ev.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-blue-50 rounded-xl border-2 border-dashed border-gray-300 p-16 text-center",children:[(0,ev.jsx)("div",{className:"bg-white w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg",children:(0,ev.jsx)($y,{className:"w-12 h-12 text-gray-400"})}),(0,ev.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-3",children:"No Rooms Found"}),(0,ev.jsx)("p",{className:"text-gray-600 mb-2",children:"We couldn't find any rooms matching your criteria"}),(0,ev.jsx)("p",{className:"text-gray-500 text-sm mb-8 max-w-md mx-auto",children:"Try adjusting your filters, expanding your search area, or checking back later for new listings"}),(0,ev.jsx)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center items-center",children:(0,ev.jsx)("button",{onClick:()=>{s(""),o([0,1e4]),c([]),d("newest"),O(""),M(""),U(!1),V(""),S("")},className:"inline-flex items-center gap-2 bg-teal-600 hover:bg-teal-700 text-white font-medium px-6 py-2.5 rounded-lg transition shadow-sm",children:"Clear All Filters"})})]}):(0,ev.jsxs)(ev.Fragment,{children:[(0,ev.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-12 justify-items-center",children:(N?t.filter(e=>e.paymentMethod===N):t).map((e,n)=>(0,ev.jsxs)(r.Fragment,{children:[(0,ev.jsx)(Iv.A,{listing:e,onClick:()=>h(e),isFavorite:P.includes(e.id),onToggleFavorite:Y}),(n+1)%8===0&&n!==t.length-1&&(0,ev.jsx)("div",{className:"sm:col-span-2 lg:col-span-3 xl:col-span-4",children:(0,ev.jsx)(bv,{})})]},e.id))}),!m&&(0,ev.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 md:p-8 mb-8",children:[(0,ev.jsxs)("div",{className:"text-center mb-8",children:[(0,ev.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"How Room24 Works"}),(0,ev.jsx)("p",{className:"text-gray-600",children:"Find your perfect room in 3 simple steps"})]}),(0,ev.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,ev.jsxs)("div",{className:"text-center p-4",children:[(0,ev.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-teal-100 to-cyan-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,ev.jsx)($y,{className:"w-8 h-8 text-teal-600"})}),(0,ev.jsx)("div",{className:"bg-teal-500 text-white text-xs font-bold w-6 h-6 rounded-full flex items-center justify-center mx-auto -mt-8 mb-2 relative z-10 shadow-md",children:"1"}),(0,ev.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Search & Filter"}),(0,ev.jsx)("p",{className:"text-sm text-gray-600",children:"Browse rooms by location, price, and amenities. Use filters to find exactly what you need."})]}),(0,ev.jsxs)("div",{className:"text-center p-4",children:[(0,ev.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-cyan-100 to-blue-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,ev.jsx)(qy.A,{className:"w-8 h-8 text-cyan-600"})}),(0,ev.jsx)("div",{className:"bg-cyan-500 text-white text-xs font-bold w-6 h-6 rounded-full flex items-center justify-center mx-auto -mt-8 mb-2 relative z-10 shadow-md",children:"2"}),(0,ev.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"View Details"}),(0,ev.jsx)("p",{className:"text-sm text-gray-600",children:"Check photos, virtual tours, reviews, and landlord verification status."})]}),(0,ev.jsxs)("div",{className:"text-center p-4",children:[(0,ev.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-2xl flex items-center justify-center mx-auto mb-4",children:(0,ev.jsx)(Uy.A,{className:"w-8 h-8 text-blue-600"})}),(0,ev.jsx)("div",{className:"bg-blue-500 text-white text-xs font-bold w-6 h-6 rounded-full flex items-center justify-center mx-auto -mt-8 mb-2 relative z-10 shadow-md",children:"3"}),(0,ev.jsx)("h4",{className:"font-semibold text-gray-900 mb-2",children:"Contact Landlord"}),(0,ev.jsx)("p",{className:"text-sm text-gray-600",children:"Connect directly via phone, email, or WhatsApp. No middleman fees."})]})]}),(0,ev.jsx)("div",{className:"text-center mt-6 pt-6 border-t border-gray-100",children:(0,ev.jsxs)("button",{onClick:()=>p&&p("renter"),className:"inline-flex items-center gap-2 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white font-semibold px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all",children:["Create Free Account",(0,ev.jsx)(jv,{className:"w-4 h-4"})]})})]})]})]})]})}function qv(e){let{onClose:t}=e;return(0,ev.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50 overflow-y-auto animate-fadeIn",children:(0,ev.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-4xl max-h-[90vh] overflow-y-auto shadow-2xl",children:[(0,ev.jsxs)("div",{className:"sticky top-0 bg-gradient-to-r from-teal-600 to-cyan-600 px-6 py-4 flex items-center justify-between rounded-t-2xl",children:[(0,ev.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ev.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:(0,ev.jsx)(wv,{className:"w-5 h-5 text-white"})}),(0,ev.jsx)("h2",{className:"text-xl font-bold text-white",children:"Privacy Policy"})]}),(0,ev.jsx)("button",{onClick:t,className:"text-white/80 hover:text-white hover:bg-white/20 p-2 rounded-lg transition-all duration-200",children:(0,ev.jsx)(My,{className:"w-5 h-5"})})]}),(0,ev.jsxs)("div",{className:"px-6 py-6 space-y-6",children:[(0,ev.jsxs)("p",{className:"text-sm text-gray-500",children:["Last updated: ",(new Date).toLocaleDateString()]}),(0,ev.jsxs)("section",{children:[(0,ev.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"1. Information We Collect"}),(0,ev.jsx)("p",{className:"text-gray-600 mb-3",children:"Room24 collects the following information to provide and improve our services:"}),(0,ev.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 ml-4",children:[(0,ev.jsxs)("li",{children:[(0,ev.jsx)("strong",{children:"Personal Information:"})," Name, email address, phone number, and WhatsApp number (optional) when you create an account"]}),(0,ev.jsxs)("li",{children:[(0,ev.jsx)("strong",{children:"Location Data:"})," With your permission, we access your device location to show nearby rental listings"]}),(0,ev.jsxs)("li",{children:[(0,ev.jsx)("strong",{children:"Listing Information:"})," Property details, photos, prices, and addresses you provide when posting listings"]}),(0,ev.jsxs)("li",{children:[(0,ev.jsx)("strong",{children:"Usage Data:"})," Pages visited, search queries, filters used, and listing interactions"]}),(0,ev.jsxs)("li",{children:[(0,ev.jsx)("strong",{children:"Device Information:"})," Browser type, IP address, device type, and operating system"]})]})]}),(0,ev.jsxs)("section",{children:[(0,ev.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"2. How We Use Your Information"}),(0,ev.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 ml-4",children:[(0,ev.jsx)("li",{children:"To display and manage rental listings"}),(0,ev.jsx)("li",{children:"To facilitate communication between landlords and renters"}),(0,ev.jsx)("li",{children:"To show nearby listings based on your location (with consent)"}),(0,ev.jsx)("li",{children:"To send notifications about new listings in subscribed areas"}),(0,ev.jsx)("li",{children:"To improve our platform and user experience"}),(0,ev.jsx)("li",{children:"To prevent fraud and ensure platform safety"}),(0,ev.jsx)("li",{children:"To comply with legal obligations"})]})]}),(0,ev.jsxs)("section",{children:[(0,ev.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"3. Cookies and Tracking Technologies"}),(0,ev.jsx)("p",{className:"text-gray-600 mb-3",children:"We use cookies and similar technologies to:"}),(0,ev.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 ml-4",children:[(0,ev.jsxs)("li",{children:[(0,ev.jsx)("strong",{children:"Essential Cookies:"})," Required for authentication and core functionality"]}),(0,ev.jsxs)("li",{children:[(0,ev.jsx)("strong",{children:"Analytics Cookies:"})," Help us understand how users interact with our platform"]}),(0,ev.jsxs)("li",{children:[(0,ev.jsx)("strong",{children:"Advertising Cookies:"})," Used by Google AdSense and other ad networks to display relevant ads"]}),(0,ev.jsxs)("li",{children:[(0,ev.jsx)("strong",{children:"Preference Cookies:"})," Remember your settings and preferences"]})]}),(0,ev.jsx)("p",{className:"text-gray-600 mt-3",children:"You can control cookies through your browser settings, but disabling them may affect platform functionality."})]}),(0,ev.jsxs)("section",{children:[(0,ev.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"4. Third-Party Services"}),(0,ev.jsx)("p",{className:"text-gray-600 mb-3",children:"We use the following third-party services that may collect your information:"}),(0,ev.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 ml-4",children:[(0,ev.jsxs)("li",{children:[(0,ev.jsx)("strong",{children:"Google AdSense:"})," Displays advertisements on our platform. ",(0,ev.jsx)("a",{href:"https://policies.google.com/privacy",target:"_blank",rel:"noopener noreferrer",className:"text-teal-600 hover:underline",children:"Google Privacy Policy"})]}),(0,ev.jsxs)("li",{children:[(0,ev.jsx)("strong",{children:"OpenStreetMap/Mapbox:"})," Provides map tiles and geocoding services. ",(0,ev.jsx)("a",{href:"https://wiki.osmfoundation.org/wiki/Privacy_Policy",target:"_blank",rel:"noopener noreferrer",className:"text-teal-600 hover:underline",children:"OSM Privacy Policy"})]}),(0,ev.jsxs)("li",{children:[(0,ev.jsx)("strong",{children:"WhatsApp:"})," Enables direct communication via WhatsApp (when you click a WhatsApp link)"]})]})]}),(0,ev.jsxs)("section",{children:[(0,ev.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"5. Data Sharing and Disclosure"}),(0,ev.jsx)("p",{className:"text-gray-600 mb-3",children:"We do not sell your personal information. We may share your information:"}),(0,ev.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 ml-4",children:[(0,ev.jsxs)("li",{children:[(0,ev.jsx)("strong",{children:"With other users:"})," Your landlord/renter profile information is visible to facilitate communication"]}),(0,ev.jsxs)("li",{children:[(0,ev.jsx)("strong",{children:"With service providers:"})," Third-party services that help us operate the platform (hosting, analytics, ads)"]}),(0,ev.jsxs)("li",{children:[(0,ev.jsx)("strong",{children:"For legal reasons:"})," When required by law, regulation, or legal process"]}),(0,ev.jsxs)("li",{children:[(0,ev.jsx)("strong",{children:"Business transfers:"})," In the event of a merger, acquisition, or sale of assets"]})]})]}),(0,ev.jsxs)("section",{children:[(0,ev.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"6. Location Services"}),(0,ev.jsx)("p",{className:"text-gray-600 mb-3",children:'When you use the "Find Nearby" feature, we request access to your device location. This data:'}),(0,ev.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 ml-4",children:[(0,ev.jsx)("li",{children:"Is used only to calculate distances to rental listings"}),(0,ev.jsx)("li",{children:"Is not stored on our servers"}),(0,ev.jsx)("li",{children:"Is not shared with third parties"}),(0,ev.jsx)("li",{children:"Requires your explicit consent"}),(0,ev.jsx)("li",{children:"Can be revoked at any time through your browser settings"})]})]}),(0,ev.jsxs)("section",{children:[(0,ev.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"7. Data Security"}),(0,ev.jsx)("p",{className:"text-gray-600",children:"We implement reasonable security measures to protect your information, including:"}),(0,ev.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 ml-4 mt-3",children:[(0,ev.jsx)("li",{children:"Encrypted data transmission (HTTPS)"}),(0,ev.jsx)("li",{children:"Secure data storage using browser localStorage"}),(0,ev.jsx)("li",{children:"Regular security audits and updates"}),(0,ev.jsx)("li",{children:"Access controls and authentication"})]}),(0,ev.jsx)("p",{className:"text-gray-600 mt-3",children:"However, no method of transmission over the internet is 100% secure. We cannot guarantee absolute security."})]}),(0,ev.jsxs)("section",{children:[(0,ev.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"8. Your Rights (POPIA Compliance)"}),(0,ev.jsx)("p",{className:"text-gray-600 mb-3",children:"Under South Africa's Protection of Personal Information Act (POPIA), you have the right to:"}),(0,ev.jsxs)("ul",{className:"list-disc list-inside space-y-2 text-gray-600 ml-4",children:[(0,ev.jsxs)("li",{children:[(0,ev.jsx)("strong",{children:"Access:"})," Request a copy of your personal information"]}),(0,ev.jsxs)("li",{children:[(0,ev.jsx)("strong",{children:"Correction:"})," Update or correct inaccurate information"]}),(0,ev.jsxs)("li",{children:[(0,ev.jsx)("strong",{children:"Deletion:"})," Request deletion of your account and associated data"]}),(0,ev.jsxs)("li",{children:[(0,ev.jsx)("strong",{children:"Objection:"})," Object to certain processing of your data"]}),(0,ev.jsxs)("li",{children:[(0,ev.jsx)("strong",{children:"Data Portability:"})," Receive your data in a structured format"]}),(0,ev.jsxs)("li",{children:[(0,ev.jsx)("strong",{children:"Withdraw Consent:"})," Revoke location permissions or other consents at any time"]})]}),(0,ev.jsxs)("p",{className:"text-gray-600 mt-3",children:["To exercise these rights, contact us at: ",(0,ev.jsx)("a",{href:"mailto:privacy@room24.co.za",className:"text-teal-600 hover:underline",children:"privacy@room24.co.za"})]})]}),(0,ev.jsxs)("section",{children:[(0,ev.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"9. Children's Privacy"}),(0,ev.jsx)("p",{className:"text-gray-600",children:"Room24 is not intended for users under 18 years of age. We do not knowingly collect information from children. If you believe we have collected information from a minor, please contact us immediately."})]}),(0,ev.jsxs)("section",{children:[(0,ev.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"10. Data Retention"}),(0,ev.jsx)("p",{className:"text-gray-600",children:"We retain your information for as long as your account is active or as needed to provide services. You can request deletion of your account at any time. After deletion, we may retain certain information for legal compliance, fraud prevention, and dispute resolution purposes."})]}),(0,ev.jsxs)("section",{children:[(0,ev.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"11. International Data Transfers"}),(0,ev.jsx)("p",{className:"text-gray-600",children:"Your information may be transferred to and processed in countries outside South Africa, including servers operated by our third-party service providers (e.g., Google AdSense). We ensure appropriate safeguards are in place for such transfers."})]}),(0,ev.jsxs)("section",{children:[(0,ev.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"12. Changes to This Policy"}),(0,ev.jsx)("p",{className:"text-gray-600",children:"We may update this Privacy Policy periodically to reflect changes in our practices or legal requirements. We will notify users of significant changes via email or prominent notice on the platform. Continued use of Room24 after changes constitutes acceptance of the updated policy."})]}),(0,ev.jsxs)("section",{children:[(0,ev.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-3",children:"13. Contact Information"}),(0,ev.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,ev.jsx)("p",{className:"text-gray-700 font-semibold mb-2",children:"Room24 Data Protection Officer"}),(0,ev.jsxs)("p",{className:"text-gray-600",children:["Email: ",(0,ev.jsx)("a",{href:"mailto:privacy@room24.co.za",className:"text-teal-600 hover:underline",children:"privacy@room24.co.za"})]}),(0,ev.jsxs)("p",{className:"text-gray-600",children:["Support: ",(0,ev.jsx)("a",{href:"mailto:support@room24.co.za",className:"text-teal-600 hover:underline",children:"support@room24.co.za"})]}),(0,ev.jsx)("p",{className:"text-gray-600 mt-2",children:"For complaints or concerns, you may also contact:"}),(0,ev.jsxs)("p",{className:"text-gray-600",children:[(0,ev.jsx)("strong",{children:"Information Regulator (South Africa)"}),(0,ev.jsx)("br",{}),"Email: ",(0,ev.jsx)("a",{href:"mailto:inforeg@justice.gov.za",className:"text-teal-600 hover:underline",children:"inforeg@justice.gov.za"}),(0,ev.jsx)("br",{}),"Website: ",(0,ev.jsx)("a",{href:"https://www.justice.gov.za/inforeg/",target:"_blank",rel:"noopener noreferrer",className:"text-teal-600 hover:underline",children:"www.justice.gov.za/inforeg"})]})]})]}),(0,ev.jsx)("div",{className:"border-t border-gray-200 pt-6 mt-8",children:(0,ev.jsx)("button",{onClick:t,className:"w-full bg-gradient-to-r from-teal-500 to-cyan-600 hover:from-teal-600 hover:to-cyan-700 text-white font-semibold py-3.5 rounded-xl transition-all duration-200 shadow-md hover:shadow-lg active:scale-[0.98]",children:"I Understand"})})]})]})})}function Hv(e){let{title:t,body:n,onClose:r}=e;return t||n?(0,ev.jsx)("div",{className:"fixed top-4 left-1/2 -translate-x-1/2 z-[1000] bg-white border border-gray-200 rounded-xl shadow-lg w-[90%] max-w-md",children:(0,ev.jsxs)("div",{className:"flex items-start p-4 gap-3",children:[(0,ev.jsxs)("div",{className:"flex-1",children:[t&&(0,ev.jsx)("p",{className:"font-semibold text-gray-900",children:t}),n&&(0,ev.jsx)("p",{className:"text-sm text-gray-700 mt-0.5",children:n})]}),(0,ev.jsx)("button",{className:"text-gray-400 hover:text-gray-600",onClick:r,"aria-label":"Dismiss notification",children:"\u2715"})]})}):null}const Wv=(0,Dy.A)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Kv=(0,Dy.A)("bug",[["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M14 7a4 4 0 0 1 4 4v3a6 6 0 0 1-12 0v-3a4 4 0 0 1 4-4z",key:"uouzyp"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M21 21a4 4 0 0 0-3.81-4",key:"1b0z45"}],["path",{d:"M21 5a4 4 0 0 1-3.55 3.97",key:"5cxbf6"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M3 21a4 4 0 0 1 3.81-4",key:"1fjd4g"}],["path",{d:"M3 5a4 4 0 0 0 3.55 3.97",key:"1d7oge"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M9 7.13V6a3 3 0 1 1 6 0v1.13",key:"1vgav8"}]]);function Gv(e){let{onAccept:t,onDecline:n}=e;return(0,ev.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-[60] animate-fadeIn",children:(0,ev.jsxs)("div",{className:"bg-white rounded-2xl max-w-md w-full shadow-2xl overflow-hidden",children:[(0,ev.jsx)("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 p-6 text-white",children:(0,ev.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ev.jsx)("div",{className:"w-12 h-12 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-sm",children:(0,ev.jsx)(Wv,{className:"w-6 h-6"})}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("h3",{className:"text-xl font-bold",children:"Help Us Improve"}),(0,ev.jsx)("p",{className:"text-blue-100 text-sm",children:"Your privacy matters to us"})]})]})}),(0,ev.jsxs)("div",{className:"p-6",children:[(0,ev.jsx)("p",{className:"text-gray-600 mb-4",children:"Room24 would like to collect anonymous analytics to improve your experience:"}),(0,ev.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,ev.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-blue-50 rounded-xl",children:[(0,ev.jsx)("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,ev.jsx)(Wv,{className:"w-4 h-4 text-blue-600"})}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("p",{className:"text-sm font-medium text-gray-800",children:"Usage Insights"}),(0,ev.jsx)("p",{className:"text-xs text-gray-500",children:"Which features are most useful"})]})]}),(0,ev.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-xl",children:[(0,ev.jsx)("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,ev.jsx)(Cv,{className:"w-4 h-4 text-green-600"})}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("p",{className:"text-sm font-medium text-gray-800",children:"Performance"}),(0,ev.jsx)("p",{className:"text-xs text-gray-500",children:"How to make the app faster"})]})]}),(0,ev.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-orange-50 rounded-xl",children:[(0,ev.jsx)("div",{className:"w-8 h-8 bg-orange-100 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,ev.jsx)(Kv,{className:"w-4 h-4 text-orange-600"})}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("p",{className:"text-sm font-medium text-gray-800",children:"Bug Detection"}),(0,ev.jsx)("p",{className:"text-xs text-gray-500",children:"Common issues users encounter"})]})]})]}),(0,ev.jsx)("div",{className:"bg-gradient-to-r from-gray-50 to-blue-50 border border-blue-100 rounded-xl p-4 mb-6",children:(0,ev.jsxs)("div",{className:"flex items-start gap-2",children:[(0,ev.jsx)("span",{className:"text-lg",children:"\ud83d\udd12"}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("p",{className:"text-xs font-semibold text-gray-700 mb-1",children:"Privacy Promise"}),(0,ev.jsx)("p",{className:"text-xs text-gray-600",children:"We never collect personally identifiable information. All data is aggregated and anonymous. You can change this preference anytime."})]})]})}),(0,ev.jsxs)("div",{className:"flex gap-3",children:[(0,ev.jsx)("button",{onClick:n,className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold py-3 rounded-xl transition-all duration-200 active:scale-95",children:"No Thanks"}),(0,ev.jsx)("button",{onClick:t,className:"flex-1 bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-600 hover:to-indigo-700 text-white font-semibold py-3 rounded-xl transition-all duration-200 shadow-md hover:shadow-lg active:scale-95",children:"Accept"})]})]})]})})}const Qv=(0,Dy.A)("bell-off",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M17 17H4a1 1 0 0 1-.74-1.673C4.59 13.956 6 12.499 6 8a6 6 0 0 1 .258-1.742",key:"178tsu"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M8.668 3.01A6 6 0 0 1 18 8c0 2.687.77 4.653 1.707 6.05",key:"1hqiys"}]]),Yv=(0,Dy.A)("trending-down",[["path",{d:"M16 17h6v-6",key:"t6n2it"}],["path",{d:"m22 17-8.5-8.5-5 5L2 7",key:"x473p"}]]),Xv=(0,Dy.A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);function Jv(e){let{onClose:t,onSelectListing:n}=e;const[s,i]=(0,r.useState)([]),[a,o]=(0,r.useState)([]),[l,c]=(0,r.useState)("notifications");(0,r.useEffect)(()=>{u()},[]);const u=()=>{i(Mv()),o(Lv())},d=e=>{!function(e){try{const t=Mv(),n=t.find(t=>t.id===e);n&&(n.read=!0,localStorage.setItem(Dv,JSON.stringify(t)))}catch(t){console.error("Failed to mark notification read",t)}}(e.id),u(),e.listingId&&n&&n(e.listingId)},h=e=>{!function(e){try{const t=Lv().filter(t=>t.id!==e);localStorage.setItem(Rv,JSON.stringify(t))}catch(t){console.error("Failed to delete saved search",t)}}(e),u()},f=s.filter(e=>!e.read).length;return(0,ev.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-start sm:items-center justify-center p-0 sm:p-4 z-50 overflow-y-auto",children:(0,ev.jsxs)("div",{className:"bg-white rounded-none sm:rounded-2xl max-w-2xl w-full h-full sm:h-auto sm:max-h-[80vh] overflow-y-auto shadow-2xl fade-in",children:[(0,ev.jsxs)("div",{className:"sticky top-0 bg-white/95 backdrop-blur-md border-b border-gray-100 p-4 flex justify-between items-center z-10",children:[(0,ev.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ev.jsx)("div",{className:"w-10 h-10 bg-teal-100 rounded-full flex items-center justify-center",children:(0,ev.jsx)(Wy,{className:"w-5 h-5 text-teal-600"})}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("h2",{className:"text-lg font-bold text-gray-800",children:"Notifications"}),f>0&&(0,ev.jsxs)("p",{className:"text-xs text-gray-500",children:[f," unread"]})]})]}),(0,ev.jsx)("button",{onClick:t,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-all","aria-label":"Close notifications",children:(0,ev.jsx)(My,{className:"w-5 h-5"})})]}),(0,ev.jsx)("div",{className:"border-b",children:(0,ev.jsxs)("div",{className:"flex",children:[(0,ev.jsxs)("button",{onClick:()=>c("notifications"),className:"flex-1 py-3 text-sm font-semibold ".concat("notifications"===l?"text-teal-600 border-b-2 border-teal-600":"text-gray-600 hover:text-gray-800"),children:["Notifications (",s.length,")"]}),(0,ev.jsxs)("button",{onClick:()=>c("searches"),className:"flex-1 py-3 text-sm font-semibold ".concat("searches"===l?"text-teal-600 border-b-2 border-teal-600":"text-gray-600 hover:text-gray-800"),children:["Saved Searches (",a.length,")"]})]})}),(0,ev.jsxs)("div",{className:"p-4",children:["notifications"===l&&(0,ev.jsx)("div",{className:"space-y-3",children:0===s.length?(0,ev.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,ev.jsx)(Qv,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),(0,ev.jsx)("p",{className:"text-sm",children:"No notifications yet"})]}):(0,ev.jsxs)(ev.Fragment,{children:[(0,ev.jsx)("div",{className:"flex justify-end mb-2",children:(0,ev.jsx)("button",{onClick:()=>{window.confirm("Clear all notifications?")&&(!function(){try{localStorage.setItem(Dv,JSON.stringify([]))}catch(e){console.error("Failed to clear notifications",e)}}(),u())},className:"text-xs text-red-600 hover:text-red-700 font-medium",children:"Clear All"})}),s.map(e=>(0,ev.jsx)("div",{onClick:()=>d(e),className:"border rounded-xl p-4 cursor-pointer transition-all duration-200 hover:shadow-md ".concat(e.read?"bg-white border-gray-100 hover:bg-gray-50":"bg-gradient-to-r from-teal-50 to-cyan-50 border-teal-200 hover:border-teal-300"),children:(0,ev.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ev.jsxs)("div",{className:"w-10 h-10 rounded-xl flex items-center justify-center flex-shrink-0 ".concat("new-listing"===e.type?"bg-blue-100":"price-drop"===e.type?"bg-emerald-100":"bg-amber-100"),children:["new-listing"===e.type&&(0,ev.jsx)(Xy.A,{className:"w-5 h-5 text-blue-600"}),"price-drop"===e.type&&(0,ev.jsx)(Yv,{className:"w-5 h-5 text-emerald-600"}),"saved-area"===e.type&&(0,ev.jsx)(lv.A,{className:"w-5 h-5 text-amber-600"})]}),(0,ev.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ev.jsx)("p",{className:"text-sm font-semibold text-gray-800 truncate",children:e.title}),(0,ev.jsx)("p",{className:"text-xs text-gray-600 mt-1 line-clamp-2",children:e.body}),(0,ev.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:new Date(e.timestamp).toLocaleString()})]}),!e.read&&(0,ev.jsx)("div",{className:"w-2.5 h-2.5 bg-gradient-to-r from-teal-500 to-cyan-500 rounded-full mt-1 animate-pulse"})]})},e.id))]})}),"searches"===l&&(0,ev.jsx)("div",{className:"space-y-3",children:0===a.length?(0,ev.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,ev.jsx)(Xy.A,{className:"w-12 h-12 mx-auto mb-2 text-gray-400"}),(0,ev.jsx)("p",{className:"text-sm",children:"No saved searches yet"}),(0,ev.jsx)("p",{className:"text-xs mt-1",children:"Save a search to get notified of new listings"})]}):a.map(e=>(0,ev.jsx)("div",{className:"border rounded-lg p-3 bg-white hover:bg-gray-50 transition",children:(0,ev.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,ev.jsxs)("div",{className:"flex-1",children:[(0,ev.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,ev.jsx)(Xy.A,{className:"w-4 h-4 text-gray-600"}),(0,ev.jsx)("p",{className:"text-sm font-semibold text-gray-800",children:e.location||"Any location"})]}),(0,ev.jsxs)("div",{className:"text-xs text-gray-600 space-y-1",children:[void 0!==e.priceMin&&void 0!==e.priceMax&&(0,ev.jsxs)("p",{children:["Price: R",e.priceMin," - R",e.priceMax,"/month"]}),e.amenities&&e.amenities.length>0&&(0,ev.jsxs)("p",{children:["Amenities: ",e.amenities.join(", ")]}),(0,ev.jsxs)("p",{className:"text-gray-400",children:["Saved ",new Date(e.createdAt).toLocaleDateString()]})]})]}),(0,ev.jsx)("button",{onClick:()=>h(e.id),className:"text-red-600 hover:text-red-700 p-1","aria-label":"Delete search",children:(0,ev.jsx)(Xv,{className:"w-4 h-4"})})]})},e.id))})]})]})})}const $v=(0,Dy.A)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),Zv=(0,Dy.A)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),eb=(0,Dy.A)("crop",[["path",{d:"M6 2v14a2 2 0 0 0 2 2h14",key:"ron5a4"}],["path",{d:"M18 22V8a2 2 0 0 0-2-2H2",key:"7s9ehn"}]]),tb=(0,Dy.A)("move",[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]]),nb=(0,Dy.A)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);function rb(e){let{photos:t,onPhotosChange:n,onClose:s,maxPhotos:i=5}=e;const[a,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(null),u=(0,r.useRef)(null),d=(0,r.useRef)(null),h=(0,r.useRef)(null),f=async e=>{const r=Array.from(e.target.files||[]);if(r.length+t.length>i)alert("Maximum ".concat(i," photos allowed"));else try{const e=await Promise.all(r.map(e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{maxWidth:n=1200,maxHeight:r=1200,quality:s=.8,maxSizeKB:i=500}=t;return new Promise((t,a)=>{const o=new FileReader;o.readAsDataURL(e),o.onload=e=>{const o=new Image;o.src=e.target.result,o.onload=()=>{const e=document.createElement("canvas");let a=o.width,l=o.height;a>l?a>n&&(l=l*n/a,a=n):l>r&&(a=a*r/l,l=r),e.width=a,e.height=l,e.getContext("2d").drawImage(o,0,0,a,l);let c=e.toDataURL("image/jpeg",s),u=s;for(;c.length/1024>i&&u>.1;)u-=.1,c=e.toDataURL("image/jpeg",u);t(c)},o.onerror=e=>{a(new Error("Failed to load image"))}},o.onerror=e=>{a(new Error("Failed to read file"))}})}(e,{maxWidth:1200,maxHeight:1200,quality:.8,maxSizeKB:500})));n([...t,...e])}catch(s){console.error("Compression failed, falling back to direct load:",s);const e=r.map(e=>new Promise(t=>{const n=new FileReader;n.onload=e=>t(e.target.result),n.readAsDataURL(e)})),i=await Promise.all(e);n([...t,...i])}},m=(e,r)=>{const s=[...t],[i]=s.splice(e,1);s.splice(r,0,i),n(s)};return(0,ev.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-fadeIn",children:(0,ev.jsxs)("div",{className:"bg-white rounded-2xl max-w-3xl w-full max-h-[90vh] overflow-y-auto shadow-2xl border border-gray-100",children:[(0,ev.jsxs)("div",{className:"sticky top-0 bg-gradient-to-r from-teal-600 to-cyan-600 p-4 flex justify-between items-center z-10 rounded-t-2xl",children:[(0,ev.jsxs)("h2",{className:"text-lg font-bold text-white flex items-center gap-2",children:[(0,ev.jsx)($v,{className:"w-5 h-5"}),"Manage Photos"]}),(0,ev.jsx)("button",{onClick:s,className:"text-white/80 hover:text-white hover:bg-white/20 p-1.5 rounded-lg transition-all duration-200 hover:scale-110 active:scale-95",children:(0,ev.jsx)(My,{className:"w-5 h-5"})})]}),(0,ev.jsxs)("div",{className:"p-4",children:[(0,ev.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[(0,ev.jsxs)("button",{onClick:()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.click()},disabled:t.length>=i,className:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-teal-500 to-teal-600 text-white rounded-xl hover:from-teal-600 hover:to-teal-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-105 hover:shadow-lg hover:shadow-teal-500/25 active:scale-95 font-medium",children:[(0,ev.jsx)(Zv,{className:"w-4 h-4"}),"Upload Photos"]}),(0,ev.jsxs)("button",{onClick:()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.click()},disabled:t.length>=i,className:"flex items-center gap-2 px-4 py-2.5 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-xl hover:from-blue-600 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 hover:scale-105 hover:shadow-lg hover:shadow-blue-500/25 active:scale-95 font-medium",children:[(0,ev.jsx)($v,{className:"w-4 h-4"}),"Take Photo"]}),(0,ev.jsxs)("div",{className:"flex items-center gap-1 px-3 py-2 bg-gray-100 rounded-xl",children:[(0,ev.jsx)("span",{className:"text-sm font-semibold text-gray-700",children:t.length}),(0,ev.jsx)("span",{className:"text-sm text-gray-400",children:"/"}),(0,ev.jsx)("span",{className:"text-sm text-gray-500",children:i})]})]}),(0,ev.jsx)("input",{ref:u,type:"file",accept:"image/*",multiple:!0,onChange:f,className:"hidden"}),(0,ev.jsx)("input",{ref:d,type:"file",accept:"image/*",capture:"environment",onChange:f,className:"hidden"}),0===t.length?(0,ev.jsxs)("div",{className:"text-center py-12 bg-gradient-to-br from-gray-50 to-teal-50 rounded-2xl border-2 border-dashed border-gray-200",children:[(0,ev.jsx)("div",{className:"w-20 h-20 mx-auto mb-4 bg-gradient-to-br from-teal-100 to-cyan-100 rounded-full flex items-center justify-center",children:(0,ev.jsx)($v,{className:"w-10 h-10 text-teal-500"})}),(0,ev.jsx)("p",{className:"text-gray-600 font-medium mb-1",children:"No photos yet"}),(0,ev.jsx)("p",{className:"text-sm text-gray-400",children:"Upload or take photos to showcase your property"})]}):(0,ev.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:t.map((e,r)=>(0,ev.jsxs)("div",{className:"relative group rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-all duration-300",children:[0===r&&(0,ev.jsxs)("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-blue-500 to-indigo-500 text-white text-xs px-2.5 py-1 rounded-full font-bold z-10 shadow-lg flex items-center gap-1",children:[(0,ev.jsx)("span",{children:"\u2b50"})," Cover"]}),(0,ev.jsx)("img",{src:e,alt:"Property ".concat(r+1),className:"w-full h-40 object-cover group-hover:scale-105 transition-transform duration-300"}),(0,ev.jsxs)("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition rounded-lg flex items-center justify-center gap-2",children:[(0,ev.jsx)("button",{onClick:()=>(e=>{o(e),c({x:0,y:0,width:100,height:100})})(r),className:"opacity-0 group-hover:opacity-100 transition p-2 bg-white rounded-full hover:bg-gray-100",title:"Crop",children:(0,ev.jsx)(eb,{className:"w-4 h-4 text-gray-700"})}),r>0&&(0,ev.jsx)("button",{onClick:()=>m(r,r-1),className:"opacity-0 group-hover:opacity-100 transition p-2 bg-white rounded-full hover:bg-gray-100",title:"Move left",children:(0,ev.jsx)(tb,{className:"w-4 h-4 text-gray-700 rotate-180"})}),r<t.length-1&&(0,ev.jsx)("button",{onClick:()=>m(r,r+1),className:"opacity-0 group-hover:opacity-100 transition p-2 bg-white rounded-full hover:bg-gray-100",title:"Move right",children:(0,ev.jsx)(tb,{className:"w-4 h-4 text-gray-700"})}),(0,ev.jsx)("button",{onClick:()=>(e=>{window.confirm("Delete this photo?")&&(n(t.filter((t,n)=>n!==e)),a===e&&o(null))})(r),className:"opacity-0 group-hover:opacity-100 transition p-2 bg-red-600 rounded-full hover:bg-red-700",title:"Delete",children:(0,ev.jsx)(Xv,{className:"w-4 h-4 text-white"})})]})]},r))}),null!==a&&(0,ev.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center p-4 z-50",children:(0,ev.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full p-4",children:[(0,ev.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,ev.jsx)("h3",{className:"text-lg font-bold",children:"Crop Photo"}),(0,ev.jsx)("button",{onClick:()=>{o(null),c(null)},className:"text-gray-500 hover:text-gray-700",children:(0,ev.jsx)(My,{className:"w-5 h-5"})})]}),(0,ev.jsxs)("div",{className:"relative",children:[(0,ev.jsx)("img",{src:t[a],alt:"Crop preview",className:"w-full max-h-96 object-contain"}),(0,ev.jsx)("div",{className:"mt-4 text-sm text-gray-600 text-center",children:(0,ev.jsx)("p",{children:"Drag to adjust crop area (simplified preview)"})})]}),(0,ev.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,ev.jsxs)("button",{onClick:()=>{if(null===a||!l)return;const e=new Image;e.onload=()=>{const r=h.current;if(!r)return;const s=l.x/100*e.width,i=l.y/100*e.height,u=l.width/100*e.width,d=l.height/100*e.height;r.width=u,r.height=d;r.getContext("2d").drawImage(e,s,i,u,d,0,0,u,d);const f=r.toDataURL("image/jpeg",.9),m=[...t];m[a]=f,n(m),o(null),c(null)},e.src=t[a]},className:"flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:[(0,ev.jsx)(nb,{className:"w-4 h-4"}),"Apply Crop"]}),(0,ev.jsx)("button",{onClick:()=>{o(null),c(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"Cancel"})]})]})}),(0,ev.jsx)("canvas",{ref:h,className:"hidden"})]})]})})}const sb=(0,Dy.A)("wifi",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]]),ib=(0,Dy.A)("wifi-off",[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);function ab(){const[e,t]=(0,r.useState)(navigator.onLine),[n,s]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{const e=()=>{t(!0),s(!0),setTimeout(()=>s(!1),3e3)},n=()=>{t(!1),s(!1)};return window.addEventListener("online",e),window.addEventListener("offline",n),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",n)}},[]),e&&!n?null:(0,ev.jsx)("div",{className:"fixed top-0 left-0 right-0 z-[100] transition-all duration-300 ".concat(e?"bg-green-500":"bg-gray-800"),children:(0,ev.jsx)("div",{className:"max-w-7xl mx-auto px-4 py-2 flex items-center justify-center gap-2 text-white text-sm font-medium",children:e?(0,ev.jsxs)(ev.Fragment,{children:[(0,ev.jsx)(sb,{className:"w-4 h-4"}),(0,ev.jsx)("span",{children:"Back online!"})]}):(0,ev.jsxs)(ev.Fragment,{children:[(0,ev.jsx)(ib,{className:"w-4 h-4"}),(0,ev.jsx)("span",{children:"You're offline. Some features may be unavailable."})]})})})}const ob=(0,Dy.A)("arrow-up",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);function lb(){const[e,t]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=()=>{window.scrollY>400?t(!0):t(!1)};return window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)},[]);return e?(0,ev.jsx)("button",{onClick:()=>{window.scrollTo({top:0,behavior:"smooth"})},className:"fixed bottom-24 right-4 md:bottom-8 md:right-8 z-40 w-12 h-12 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center group hover:scale-110 active:scale-95","aria-label":"Back to top",children:(0,ev.jsx)(ob,{className:"w-5 h-5 group-hover:-translate-y-0.5 transition-transform"})}):null}const cb=["photos"],ub="landlord-listing-template-";function db(e){if(!e)return null;try{const t=localStorage.getItem("".concat(ub).concat(e));if(!t)return null;const n=JSON.parse(t);return n&&"object"===typeof n?n:null}catch(t){return console.warn("Failed to load listing template",t),null}}function hb(){const[e,t]=(0,r.useState)("browse"),[n,s]=(0,r.useState)(null),[a,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)([]),[u,d]=(0,r.useState)(null),[h,f]=(0,r.useState)([]),[m,p]=(0,r.useState)(""),[g,y]=(0,r.useState)([0,1e4]),[v,b]=(0,r.useState)([]),[x,w]=(0,r.useState)("newest"),[N,S]=(0,r.useState)(null),[k,E]=(0,r.useState)(null),[_,A]=(0,r.useState)(!0),[C,j]=(0,r.useState)(!1),[T,I]=(0,r.useState)("renter"),[P,R]=(0,r.useState)(null),[D,O]=(0,r.useState)(!1),[L,M]=(0,r.useState)(null),[F,U]=(0,r.useState)(!1),[z,V]=(0,r.useState)(!1),[B,q]=(0,r.useState)(0),[H,W]=(0,r.useState)(!1),[K,G]=(0,r.useState)(null),Q=function(){I(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"renter"),j(!0)},Y={signUp:async function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"renter",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";const i=await py(e,t,n),a={email:i.email,displayName:n||i.displayName,userType:r,phone:s,photoURL:i.photoURL||"",createdAt:(new Date).toISOString(),landlordComplete:"renter"===r};try{await Ay(i.uid,a)}catch(o){console.warn("Could not save user profile to Firestore:",o)}return i},signIn:async(e,t)=>await gy(e,t),signInGoogle:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"renter";const t=await yy();if(!await _y(t.uid)){const r={email:t.email,displayName:t.displayName||"",userType:e,phone:t.phoneNumber||"",photoURL:t.photoURL||"",createdAt:(new Date).toISOString(),landlordComplete:"renter"===e};try{await Ay(t.uid,r)}catch(n){console.warn("Could not save Google user profile to Firestore:",n)}}return t},sendPasswordReset:async e=>{await xy(e)},sendPhoneOTP:async e=>(function(e){const t=fy();if(!t)throw new Error("Auth not initialized");if(wy)try{wy.clear()}catch(n){console.warn("Could not clear recaptcha:",n)}wy=new cg(t,e,{size:"invisible",callback:()=>{console.log("reCAPTCHA verified")},"expired-callback":()=>{console.log("reCAPTCHA expired")}})}("phone-sign-in-button"),await Sy(e)),verifyPhoneOTP:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"renter",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const r=await async function(e){if(!Ny)throw new Error("No OTP request pending. Send OTP first.");try{const t=await Ny.confirm(e);return Ny=null,t.user}catch(t){throw console.error("Error verifying OTP:",t),t}}(e);if(!await _y(r.uid)){const e={email:"",displayName:n||r.phoneNumber,userType:t,phone:r.phoneNumber||"",photoURL:"",createdAt:(new Date).toISOString(),landlordComplete:"renter"===t};try{await Ay(r.uid,e)}catch(s){console.warn("Could not save phone user profile to Firestore:",s)}}return r},clearPhoneAuth:()=>{!function(){if(wy){try{wy.clear()}catch(e){}wy=null}Ny=null}()}};(0,r.useEffect)(()=>{const e=()=>{const e=Mv();q(e.filter(e=>!e.read).length)};e();const t=setInterval(e,5e3);return()=>clearInterval(t)},[]),(0,r.useEffect)(()=>{const e=window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone,t=localStorage.getItem("installBannerDismissed"),n=t?parseInt(t,10):0,r=(Date.now()-n)/864e5;if(e)return void W(!1);const s=e=>{e.preventDefault(),G(e),(!t||r>7)&&setTimeout(()=>W(!0),3e3)};window.addEventListener("beforeinstallprompt",s);return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!e&&(!t||r>7)&&setTimeout(()=>W(!0),5e3),()=>{window.removeEventListener("beforeinstallprompt",s)}},[]);const X=async()=>{if(K){K.prompt();const{outcome:e}=await K.userChoice;"accepted"===e&&(W(!1),ee("Room24 installed! Check your home screen","success","\ud83c\udf89 Installed!")),G(null)}else{if(window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone)ee("Room24 is already installed on your device!","success","\u2705 Already Installed");else{/iPad|iPhone|iPod/.test(navigator.userAgent)?ee('Tap the Share button (\u25a1\u2191) at the bottom, then "Add to Home Screen"',"info","\ud83d\udcf1 Install on iPhone"):ee('Click the menu (\u22ee) then "Install app" or "Add to Home Screen"',"info","\ud83d\udcf1 Install Room24")}}},J=()=>{W(!1),localStorage.setItem("installBannerDismissed",Date.now().toString())};(0,r.useEffect)(()=>{$();const e=hy(),t=by(async e=>{if(e){S(e);try{const t=await _y(e.uid);t&&(E(t),s(t.userType||"renter"))}catch(t){console.error("Error fetching user profile:",t)}}else S(null),E(null),s(null);A(!1)});let n=null;my()&&(n=function(e){const t=my();if(!t)return console.warn("Firestore not initialized for real-time updates"),null;try{return ff(Xh(dh(t,"listings"),ef("createdAt","desc")),t=>{const n=t.docs.map(e=>{var t,n,r,s,a,o;return(0,i.A)((0,i.A)({id:e.id},e.data()),{},{createdAt:(null===(t=e.data().createdAt)||void 0===t||null===(n=t.toDate)||void 0===n||null===(r=n.call(t))||void 0===r?void 0:r.toISOString())||e.data().createdAt,availableDate:(null===(s=e.data().availableDate)||void 0===s||null===(a=s.toDate)||void 0===a||null===(o=a.call(s))||void 0===o?void 0:o.toISOString())||e.data().availableDate})});console.log("Real-time update: ".concat(n.length," listings")),e(n)},e=>{console.error("Real-time listener error:",e)})}catch(n){return console.error("Error setting up real-time listener:",n),null}}(e=>{e&&e.length>=0&&(c(e),localStorage.setItem("listings",JSON.stringify(e)))}));const r=localStorage.getItem("analytics-consent");return r||"true"!=={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAMw5vMNHvqNECNKX_wzXEA8ghDsl9c2eU",REACT_APP_FIREBASE_APP_ID:"1:725213786064:web:7c7e3709410266b98d13d5",REACT_APP_FIREBASE_AUTH_DOMAIN:"room-24.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-G7XPLZ4K10",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"725213786064",REACT_APP_FIREBASE_PROJECT_ID:"room-24",REACT_APP_FIREBASE_STORAGE_BUCKET:"room-24.firebasestorage.app"}.REACT_APP_ENABLE_ANALYTICS?"yes"===r&&Iy(e):setTimeout(()=>U(!0),2e3),(async()=>{try{const e=await Ry();e&&(console.log("Obtained FCM token:",e),Py("fcm_token_obtained"))}catch(e){console.warn("FCM token request failed",e)}})(),function(e){oy&&Un(oy,t=>{console.log("Foreground message received",t),e&&e(t)})}(e=>{const t=(null===e||void 0===e?void 0:e.notification)||{};(t.title||t.body)&&(M({title:t.title,body:t.body}),setTimeout(()=>M(null),8e3))}),()=>{t&&t(),n&&n()}},[]),(0,r.useEffect)(()=>{_||"add"===e&&(N?"landlord"!==n?(Q("landlord"),t("browse")):null!==k&&void 0!==k&&k.landlordComplete||t("landlord-onboarding"):(Q("landlord"),t("browse")))},[e,N,n,k,_]);const $=async()=>{try{const t=await Cy();if(t&&t.length>0)console.log("Loaded listings from Firestore"),c(t),localStorage.setItem("listings",JSON.stringify(t));else{const e=localStorage.getItem("listings");e&&(console.log("Loaded listings from localStorage (Firestore empty or unavailable)"),c(JSON.parse(e)))}const n=localStorage.getItem("current-user"),r=localStorage.getItem("users");if(n){const e=JSON.parse(n);S(e),s(e.type)}if(r)try{const e=JSON.parse(r);f(Array.isArray(e)?e:[])}catch(e){console.warn("Corrupt users array in storage, resetting"),f([])}}catch(t){console.log("No existing data found, starting fresh");const e=[{id:"listing-1",title:"Cozy Room in Soweto",price:2500,location:"Soweto, Johannesburg",description:"Comfortable room with bathroom and kitchen access",photos:[],status:"available",availableDate:(new Date).toISOString(),amenities:["WiFi","Kitchen"],landlordId:"landlord-1",landlordName:"John Smith",landlordPhone:"+27 123 456 7890",landlordEmail:"john@example.com",landlordPhoto:"",createdAt:(new Date).toISOString()},{id:"listing-2",title:"Modern Apartment in Sandton",price:4500,location:"Sandton, Johannesburg",description:"Luxurious apartment with parking and security",photos:[],status:"available",availableDate:(new Date).toISOString(),amenities:["WiFi","Parking","Air Conditioning"],landlordId:"landlord-2",landlordName:"Jane Doe",landlordPhone:"+27 987 654 3210",landlordEmail:"jane@example.com",landlordPhoto:"",createdAt:(new Date).toISOString()},{id:"listing-3",title:"Studio in Midrand",price:3200,location:"Midrand, Johannesburg",description:"Spacious studio flat with laundry facilities",photos:[],status:"available",availableDate:(new Date).toISOString(),amenities:["Laundry","WiFi"],landlordId:"landlord-3",landlordName:"Mike Johnson",landlordPhone:"+27 555 555 5555",landlordEmail:"mike@example.com",landlordPhoto:"",createdAt:(new Date).toISOString()}];c(e)}},Z=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=(e||"").trim(),s=(t||"").trim().toLowerCase();return!(!h||0===h.length)&&h.some(e=>{if(n&&e.id===n)return!1;const t=(e.phone||"").trim(),i=(e.email||"").trim().toLowerCase();return r&&t&&t===r||s&&i&&i===s})},ee=function(e){R({message:e,type:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",title:arguments.length>2&&void 0!==arguments[2]?arguments[2]:""}),setTimeout(()=>R(null),5e3)},te=async e=>{try{if(localStorage.setItem("listings",JSON.stringify(e)),c(e),navigator.serviceWorker&&navigator.serviceWorker.controller)try{navigator.serviceWorker.controller.postMessage({type:"SYNC_LISTINGS",payload:e})}catch(t){}}catch(n){console.error("Error saving listings:",n)}},ne=async()=>{try{await vy(),S(null),E(null),s(null),t("browse"),ee("Signed out successfully.","info")}catch(e){console.error("Sign out error:",e),ee("Error signing out. Please try again.","error")}},re=l.filter(e=>{const t=!m||(e.location||"").toLowerCase().includes(m.toLowerCase()),n=parseFloat(e.price),r=n>=g[0]&&n<=g[1],s=0===v.length||v.every(t=>{var n;return null===(n=e.amenities)||void 0===n?void 0:n.includes(t)});return t&&r&&s}).sort((e,t)=>e.premium&&!t.premium?-1:!e.premium&&t.premium?1:"newest"===x?new Date(t.createdAt)-new Date(e.createdAt):"cheapest"===x?parseFloat(e.price)-parseFloat(t.price):"expensive"===x?parseFloat(t.price)-parseFloat(e.price):0);return(0,ev.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-gray-100",children:[(0,ev.jsx)(ab,{}),H&&(0,ev.jsx)("div",{className:"fixed bottom-20 left-4 right-4 md:left-auto md:right-4 md:max-w-sm z-50 bg-gradient-to-r from-teal-600 to-cyan-600 rounded-2xl shadow-2xl p-4 fade-in border border-teal-400/30",children:(0,ev.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ev.jsx)("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center flex-shrink-0",children:(0,ev.jsx)(Oy,{className:"w-6 h-6 text-white"})}),(0,ev.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,ev.jsx)("h4",{className:"font-bold text-white text-sm",children:"Install Room24"}),(0,ev.jsx)("p",{className:"text-teal-100 text-xs mt-0.5",children:"Add to your home screen for the best experience!"}),(0,ev.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,ev.jsxs)("button",{onClick:X,className:"flex items-center gap-1.5 px-4 py-2 bg-white text-teal-700 font-semibold text-xs rounded-lg hover:bg-teal-50 transition-colors shadow-sm",children:[(0,ev.jsx)(Ly,{className:"w-4 h-4"}),"Install"]}),(0,ev.jsx)("button",{onClick:J,className:"px-3 py-2 text-white/80 hover:text-white text-xs font-medium transition-colors",children:"Maybe Later"})]})]}),(0,ev.jsx)("button",{onClick:J,className:"text-white/60 hover:text-white transition-colors p-1",children:(0,ev.jsx)(My,{className:"w-4 h-4"})})]})}),(0,ev.jsx)(lb,{}),(0,ev.jsx)(tv,{currentUser:N,previewAsRenter:a,setPreviewAsRenter:o,openAuthModal:Q,handleSignOut:ne,setCurrentView:t,unreadCount:B,onOpenNotifications:()=>V(!0)}),L&&(0,ev.jsx)(Hv,{title:L.title,body:L.body,onClose:()=>M(null)}),P&&(0,ev.jsx)("div",{className:"fixed top-20 right-4 z-50 max-w-sm w-full transition-all duration-300 ".concat("error"===P.type?"bg-gradient-to-r from-rose-50 to-red-50 border-rose-400":"success"===P.type?"bg-gradient-to-r from-emerald-50 to-green-50 border-emerald-400":"warning"===P.type?"bg-gradient-to-r from-amber-50 to-yellow-50 border-amber-400":"bg-gradient-to-r from-sky-50 to-blue-50 border-sky-400"," border-l-4 rounded-xl shadow-2xl p-4 fade-in backdrop-blur-sm"),children:(0,ev.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ev.jsxs)("div",{className:"flex-shrink-0 w-8 h-8 rounded-xl flex items-center justify-center shadow-sm ".concat("error"===P.type?"bg-rose-500":"success"===P.type?"bg-emerald-500":"warning"===P.type?"bg-amber-500":"bg-sky-500"),children:["success"===P.type&&(0,ev.jsx)(Fy,{className:"w-5 h-5 text-white"}),"error"===P.type&&(0,ev.jsx)("span",{className:"text-white font-bold text-sm",children:"\u2715"}),"warning"===P.type&&(0,ev.jsx)("span",{className:"text-white font-bold text-sm",children:"!"}),"info"===P.type&&(0,ev.jsx)("span",{className:"text-white font-bold text-sm",children:"i"})]}),(0,ev.jsxs)("div",{className:"flex-1 min-w-0",children:[P.title&&(0,ev.jsx)("p",{className:"font-bold mb-0.5 ".concat("error"===P.type?"text-rose-800":"success"===P.type?"text-emerald-800":"warning"===P.type?"text-amber-800":"text-sky-800"),children:P.title}),(0,ev.jsx)("p",{className:"text-sm ".concat("error"===P.type?"text-rose-700":"success"===P.type?"text-emerald-700":"warning"===P.type?"text-amber-700":"text-sky-700"),children:P.message})]}),(0,ev.jsx)("button",{onClick:()=>R(null),className:"flex-shrink-0 p-1.5 rounded-lg hover:bg-white/50 transition ".concat("error"===P.type?"text-rose-500 hover:text-rose-700":"success"===P.type?"text-emerald-500 hover:text-emerald-700":"warning"===P.type?"text-amber-500 hover:text-amber-700":"text-sky-500 hover:text-sky-700"),"aria-label":"Close notification",children:(0,ev.jsx)(My,{className:"w-4 h-4"})})]})}),(0,ev.jsxs)("div",{id:"main-content",className:"max-w-7xl mx-auto pb-24 px-4 sm:px-6 lg:px-8",role:"main",children:["setup-profile"===e&&(0,ev.jsx)(fb,{onSubmit:async e=>{try{if(Z(e.phone,e.email))return void ee("Phone or email already registered","error","Duplicate");const s="user-".concat(Date.now()),a=(0,i.A)((0,i.A)({id:s,type:n},e),{},{whatsapp:e.whatsapp||"",notificationPrefs:{updates:!0,marketing:!1},createdAt:(new Date).toISOString()});localStorage.setItem("current-user",JSON.stringify(a)),S(a);const o=localStorage.getItem("users");let l=[];if(o)try{l=JSON.parse(o)}catch(r){l=[]}l.push(a),localStorage.setItem("users",JSON.stringify(l)),f(l),ee("Profile created successfully!","success","Welcome!"),t("browse")}catch(s){console.error("Error saving profile:",s);const r="user-".concat(Date.now()),l=(0,i.A)((0,i.A)({id:r,type:n},e),{},{whatsapp:e.whatsapp||"",createdAt:(new Date).toISOString()});S(l);const c=localStorage.getItem("users");let u=[];if(c)try{u=JSON.parse(c)}catch(a){u=[]}u.push(l);try{localStorage.setItem("users",JSON.stringify(u))}catch(o){}f(u),ee("Profile created (data may not be persisted)","error"),t("browse")}},userType:n}),"profile"===e&&N&&(0,ev.jsx)(mb,{user:{name:(null===k||void 0===k?void 0:k.displayName)||(null===N||void 0===N?void 0:N.displayName)||"",email:(null===N||void 0===N?void 0:N.email)||"",phone:(null===k||void 0===k?void 0:k.phone)||"",photo:(null===k||void 0===k?void 0:k.photoURL)||(null===N||void 0===N?void 0:N.photoURL)||"",type:(null===k||void 0===k?void 0:k.userType)||n||"renter",notificationPrefs:(null===k||void 0===k?void 0:k.notificationPrefs)||{updates:!0,marketing:!1}},onEdit:()=>t("edit-profile"),onSignOut:ne,linkedProviders:ky(),onLinkGoogle:async()=>{await Ey(),window.location.reload()},onLinkPhone:()=>{ee("Phone linking coming soon!","info")},onUpdatePrefs:async e=>{if(null!==N&&void 0!==N&&N.uid)try{await Ay(N.uid,{notificationPrefs:e}),E(t=>(0,i.A)((0,i.A)({},t),{},{notificationPrefs:e})),ee("Preferences updated","success")}catch(t){console.error("Failed to update prefs:",t),ee("Failed to update preferences","error")}}}),"edit-profile"===e&&N&&(0,ev.jsx)(gb,{user:N,onSubmit:async e=>{try{if(Z(e.phone,e.email,null===N||void 0===N?void 0:N.id))return void ee("Phone or email already used by another account","error","Duplicate");const r=(0,i.A)((0,i.A)({},N),e);localStorage.setItem("current-user",JSON.stringify(r)),S(r);const s=localStorage.getItem("users");let a=[];if(s)try{a=JSON.parse(s)}catch(n){a=[]}const o=a.findIndex(e=>e.id===r.id);-1!==o?a[o]=r:a.push(r),localStorage.setItem("users",JSON.stringify(a)),f(a),ee("Profile updated successfully!","success"),t("browse")}catch(r){console.error("Error updating profile:",r);const n=(0,i.A)((0,i.A)({},N),e);S(n);const o=localStorage.getItem("users");let l=[];if(o)try{l=JSON.parse(o)}catch(s){l=[]}const c=l.findIndex(e=>e.id===n.id);-1!==c?l[c]=n:l.push(n);try{localStorage.setItem("users",JSON.stringify(l))}catch(a){}f(l),ee("Profile updated (data may not be persisted)","error"),t("browse")}},onCancel:()=>t("profile")}),"landlord-onboarding"===e&&N&&"landlord"===n&&(0,ev.jsx)(pb,{onComplete:async e=>{try{null!==N&&void 0!==N&&N.uid&&(await Ay(N.uid,{landlordComplete:!0,landlordInfo:e}),E(t=>(0,i.A)((0,i.A)({},t),{},{landlordComplete:!0,landlordInfo:e}))),t("browse"),ee("Profile complete! You can now create listings.","success")}catch(n){console.error("Onboarding save failed",n),t("browse")}},onCancel:()=>t("browse"),currentUser:N}),"browse"===e&&(0,ev.jsx)(Bv,{listings:re,searchLocation:m,setSearchLocation:p,priceRange:g,setPriceRange:y,selectedAmenities:v,setSelectedAmenities:b,sortBy:x,setSortBy:w,onSelectListing:d,setCurrentView:t,currentUser:N,onRequireAuth:Q,subscribeToArea:async(e,t)=>{if(e)if(t&&""!==t.trim())try{const n=await(async()=>{try{const e=localStorage.getItem("subscriptions");return e?JSON.parse(e):{}}catch(e){console.error("Error loading subscriptions",e)}return{}})();n[e]=n[e]||[],n[e].includes(t)?alert("You are already subscribed to ".concat(t)):(n[e].push(t),await(async e=>{try{localStorage.setItem("subscriptions",JSON.stringify(e))}catch(t){console.error("Error saving subscriptions:",t)}})(n),alert("Subscribed to updates for ".concat(t)))}catch(n){console.error("Subscribe failed",n),alert("Could not subscribe. Please try again.")}else alert("Please enter a location to subscribe to.");else Q("renter")},previewMode:a}),"add"===e&&(0,ev.jsx)(bb,{onSubmit:async e=>{var n,r;const s=[e.streetAddress,e.location].filter(Boolean).join(", "),a={title:e.title,price:e.price,location:e.location,streetAddress:e.streetAddress||"",fullAddress:s||e.location||"",description:e.description,photos:e.photos||[],status:e.status||"available",availableDate:e.availableDate||(new Date).toISOString(),amenities:e.amenities||[],latitude:null!==(n=e.latitude)&&void 0!==n?n:null,longitude:null!==(r=e.longitude)&&void 0!==r?r:null,paymentMethod:e.paymentMethod||"Bank and Cash",premium:!!e.premium,landlordId:(null===N||void 0===N?void 0:N.uid)||(null===N||void 0===N?void 0:N.id),landlordName:(null===k||void 0===k?void 0:k.displayName)||(null===N||void 0===N?void 0:N.displayName)||"",landlordPhone:(null===k||void 0===k?void 0:k.phone)||"",landlordEmail:(null===N||void 0===N?void 0:N.email)||"",landlordPhoto:(null===k||void 0===k?void 0:k.photoURL)||(null===N||void 0===N?void 0:N.photoURL)||""};try{const e=await jy(a);if(e){const t=(0,i.A)((0,i.A)({},a),{},{id:e,createdAt:(new Date).toISOString()}),n=[...l,t];c(n),localStorage.setItem("listings",JSON.stringify(n)),ee("Listing created and shared online!","success","Success!")}else{const e=(0,i.A)((0,i.A)({},a),{},{id:"listing-".concat(Date.now()),createdAt:(new Date).toISOString()}),t=[...l,e];await te(t),ee("Listing saved locally (offline mode)","info","Saved")}}catch(o){console.error("Error adding listing:",o);const e=(0,i.A)((0,i.A)({},a),{},{id:"listing-".concat(Date.now()),createdAt:(new Date).toISOString()}),t=[...l,e];await te(t),ee("Listing saved locally","info","Saved")}t("browse"),window.scrollTo({top:0,behavior:"smooth"})},onCancel:()=>t("browse"),currentUser:N,userType:n,onRequireAuth:Q,onRequireOnboarding:()=>t("landlord-onboarding")}),"my-listings"===e&&N&&"landlord"===n&&(0,ev.jsx)(xb,{listings:l.filter(e=>e.landlordId===N.uid||e.landlordId===N.id),onDelete:async e=>{try{await Ty(e)&&ee("Listing deleted","success")}catch(n){console.error("Firestore delete failed:",n)}const t=l.filter(t=>t.id!==e);c(t),localStorage.setItem("listings",JSON.stringify(t))}}),"favorites"===e&&(0,ev.jsx)(yb,{listings:l,onSelectListing:d})]}),u&&(0,ev.jsx)(gv,{listing:u,landlord:{name:u.landlordName,phone:u.landlordPhone,email:u.landlordEmail,photo:u.landlordPhoto},onClose:()=>d(null),userType:n,currentUser:N,onRequireAuth:Q,previewMode:a,showToast:ee}),C&&(0,ev.jsx)(wb,{defaultType:T,onClose:()=>j(!1),onSuccess:()=>{ee("Signed in successfully!","success","Welcome!")},authFunctions:Y}),(0,ev.jsx)(Nb,{currentView:e,setCurrentView:t,userType:n}),D&&(0,ev.jsx)(qv,{onClose:()=>O(!1)}),F&&(0,ev.jsx)(Gv,{onAccept:()=>{localStorage.setItem("analytics-consent","yes"),U(!1);Iy(hy()),Py("analytics_consent_granted"),ee("Analytics enabled","success","Thank you!")},onDecline:()=>{localStorage.setItem("analytics-consent","no"),U(!1),ee("Analytics disabled","info")}}),z&&(0,ev.jsx)(Jv,{onClose:()=>{V(!1),q(Mv().filter(e=>!e.read).length)},onSelectListing:e=>{const t=l.find(t=>(t.id||"".concat(t.title,"-").concat(t.createdAt))===e);t&&d(t),V(!1)}}),(0,ev.jsx)(Ev,{onOpenPrivacy:()=>O(!0),onInstallApp:X})]})}function fb(e){let{onSubmit:t,userType:n}=e;const[s,a]=(0,r.useState)({name:"",phone:"",email:"",whatsapp:"",photo:""}),[o,l]=(0,r.useState)({}),[c,u]=(0,r.useState)({}),d=function(e,t){const n=(0,i.A)({},o);switch(e){case"name":!t||t.trim().length<2?n.name="Name must be at least 2 characters":delete n.name;break;case"phone":t&&/^[+]?[-0-9()\s]{7,}$/.test(t.trim())?delete n.phone:n.phone="Enter a valid phone number (min 7 digits)";break;case"email":t&&/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(t.trim())?delete n.email:n.email="Enter a valid email address";break;case"photo":"FILE_TOO_LARGE"===t?n.photo="Photo is too large (max 2MB)":delete n.photo}l(n)};return(0,ev.jsx)("div",{className:"p-4 min-h-screen bg-gradient-to-b from-slate-50 to-gray-100 pb-24",children:(0,ev.jsx)("div",{className:"max-w-2xl mx-auto mt-8",children:(0,ev.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-8",children:[(0,ev.jsxs)("div",{className:"text-center mb-8",children:[(0,ev.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900 mb-2",children:"Complete Your Profile"}),(0,ev.jsx)("p",{className:"text-gray-600",children:"Help others know who you are"})]}),(0,ev.jsxs)("div",{className:"space-y-6",children:[(0,ev.jsx)("div",{className:"flex justify-center mb-8",children:(0,ev.jsxs)("div",{className:"relative",children:[s.photo?(0,ev.jsx)("img",{src:s.photo,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-blue-200 shadow-lg"}):(0,ev.jsx)("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center border-4 border-blue-200 shadow-lg",children:(0,ev.jsx)(Uy.A,{className:"w-16 h-16 text-blue-600"})}),(0,ev.jsxs)("label",{className:"absolute bottom-0 right-0 bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full cursor-pointer shadow-lg transition group","aria-label":"Upload profile photo",children:[(0,ev.jsx)(zy,{className:"w-5 h-5"}),(0,ev.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>2097152)return a((0,i.A)((0,i.A)({},s),{},{photo:""})),void d("photo","FILE_TOO_LARGE");const e=new FileReader;e.onloadend=()=>{a((0,i.A)((0,i.A)({},s),{},{photo:e.result})),d("photo",e.result)},e.readAsDataURL(t)}},className:"hidden"})]})]})}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Full Name *"}),(0,ev.jsx)("input",{type:"text",required:!0,value:s.name,onChange:e=>{a((0,i.A)((0,i.A)({},s),{},{name:e.target.value})),c.name&&d("name",e.target.value)},onBlur:e=>{u((0,i.A)((0,i.A)({},c),{},{name:!0})),d("name",e.target.value)},placeholder:"Enter your full name","aria-invalid":o.name?"true":"false","aria-describedby":o.name?"profile-name-error":void 0,className:"w-full px-4 py-3 border-2 ".concat(o.name?"border-red-400":"border-gray-200"," bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400")}),o.name&&c.name&&(0,ev.jsx)("p",{id:"profile-name-error",className:"mt-1 text-xs text-red-600",children:o.name})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Phone Number *"}),(0,ev.jsxs)("div",{className:"relative",children:[(0,ev.jsx)(Vy,{className:"absolute left-4 top-3.5 w-5 h-5 text-gray-400"}),(0,ev.jsx)("input",{type:"tel",required:!0,value:s.phone,onChange:e=>{a((0,i.A)((0,i.A)({},s),{},{phone:e.target.value})),c.phone&&d("phone",e.target.value)},onBlur:e=>{u((0,i.A)((0,i.A)({},c),{},{phone:!0})),d("phone",e.target.value)},placeholder:"e.g., +27 12 345 6789","aria-invalid":o.phone?"true":"false","aria-describedby":o.phone?"profile-phone-error":void 0,className:"w-full pl-11 pr-4 py-3 border-2 ".concat(o.phone?"border-red-400":"border-gray-200"," bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400")})]}),o.phone&&c.phone&&(0,ev.jsx)("p",{id:"profile-phone-error",className:"mt-1 text-xs text-red-600",children:o.phone})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Email Address *"}),(0,ev.jsxs)("div",{className:"relative",children:[(0,ev.jsx)(By,{className:"absolute left-4 top-3.5 w-5 h-5 text-gray-400"}),(0,ev.jsx)("input",{type:"email",required:!0,value:s.email,onChange:e=>{a((0,i.A)((0,i.A)({},s),{},{email:e.target.value})),c.email&&d("email",e.target.value)},onBlur:e=>{u((0,i.A)((0,i.A)({},c),{},{email:!0})),d("email",e.target.value)},placeholder:"your.email@example.com","aria-invalid":o.email?"true":"false","aria-describedby":o.email?"profile-email-error":void 0,className:"w-full pl-11 pr-4 py-3 border-2 ".concat(o.email?"border-red-400":"border-gray-200"," bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400")})]}),o.email&&c.email&&(0,ev.jsx)("p",{id:"profile-email-error",className:"mt-1 text-xs text-red-600",children:o.email})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"WhatsApp (optional)"}),(0,ev.jsxs)("div",{className:"relative",children:[(0,ev.jsx)(Vy,{className:"absolute left-4 top-3.5 w-5 h-5 text-gray-400"}),(0,ev.jsx)("input",{type:"tel",value:s.whatsapp,onChange:e=>a((0,i.A)((0,i.A)({},s),{},{whatsapp:e.target.value})),placeholder:"e.g., +27 71 234 5678",className:"w-full pl-11 pr-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400"})]}),(0,ev.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Used to create a WhatsApp chat link on your listings."})]}),(0,ev.jsx)("button",{onClick:()=>{u({name:!0,phone:!0,email:!0,photo:!0}),d("name",s.name),d("phone",s.phone),d("email",s.email),0===Object.keys(o).length&&s.name&&s.phone&&s.email&&t(s)},className:"w-full bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white font-semibold py-3 rounded-xl transition mt-8 shadow-lg hover:shadow-xl",children:"Complete Setup"})]})]})})})}function mb(e){var t,n;let{user:s,onEdit:a,onUpdatePrefs:o,onSignOut:l,linkedProviders:c,onLinkGoogle:u,onLinkPhone:d}=e;const h=s.notificationPrefs||{updates:!0,marketing:!1},[f,m]=r.useState(h),[p,g]=r.useState(null),[y,v]=r.useState(""),[b,x]=r.useState(""),w=e=>{const t=(0,i.A)((0,i.A)({},f),{},{[e]:!f[e]});m(t),o&&o(t)},N=null===c||void 0===c?void 0:c.includes("google.com"),S=null===c||void 0===c?void 0:c.includes("phone"),k=null===c||void 0===c?void 0:c.includes("password");return(0,ev.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-gray-100 pb-24",children:[(0,ev.jsx)("div",{className:"bg-gradient-to-br from-teal-600 via-teal-500 to-cyan-500 pt-8 pb-20 px-4",children:(0,ev.jsxs)("div",{className:"max-w-xl mx-auto flex justify-between items-start",children:[(0,ev.jsx)("h2",{className:"text-2xl font-bold text-white",children:"My Profile"}),(0,ev.jsxs)("button",{onClick:a,className:"bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white px-4 py-2 rounded-xl transition-all duration-200 flex items-center gap-2 border border-white/30",children:[(0,ev.jsx)(zy,{className:"w-4 h-4"}),"Edit"]})]})}),(0,ev.jsx)("div",{className:"px-4 -mt-16",children:(0,ev.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-6 max-w-xl mx-auto",children:[(0,ev.jsxs)("div",{className:"flex flex-col items-center -mt-16 mb-6",children:[s.photo?(0,ev.jsx)("img",{src:s.photo,alt:"Profile",className:"w-28 h-28 rounded-2xl object-cover border-4 border-white shadow-lg mb-4"}):(0,ev.jsx)("div",{className:"w-28 h-28 rounded-2xl bg-gradient-to-br from-teal-400 to-cyan-500 flex items-center justify-center border-4 border-white shadow-lg mb-4",children:(0,ev.jsx)("span",{className:"text-4xl font-bold text-white",children:(null===(t=s.name)||void 0===t||null===(n=t.charAt(0))||void 0===n?void 0:n.toUpperCase())||"U"})}),(0,ev.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:s.name}),(0,ev.jsx)("span",{className:"inline-flex items-center mt-2 px-4 py-1.5 bg-gradient-to-r from-teal-50 to-cyan-50 text-teal-700 rounded-full text-sm font-semibold border border-teal-100",children:"landlord"===s.type?(0,ev.jsxs)(ev.Fragment,{children:[(0,ev.jsx)(qy.A,{className:"w-4 h-4 mr-1.5"}),"Landlord"]}):(0,ev.jsxs)(ev.Fragment,{children:[(0,ev.jsx)(Uy.A,{className:"w-4 h-4 mr-1.5"}),"Renter"]})})]}),(0,ev.jsxs)("div",{className:"space-y-3 mb-6",children:[(0,ev.jsx)("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-xl p-4 border border-gray-100 hover:border-gray-200 transition-colors",children:(0,ev.jsxs)("div",{className:"flex items-center",children:[(0,ev.jsx)("div",{className:"w-11 h-11 bg-gradient-to-br from-teal-100 to-cyan-100 rounded-xl flex items-center justify-center mr-4 shadow-sm",children:(0,ev.jsx)(Vy,{className:"w-5 h-5 text-teal-600"})}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("p",{className:"text-xs font-medium text-gray-500 mb-0.5",children:"Phone Number"}),(0,ev.jsx)("p",{className:"font-semibold text-gray-800",children:s.phone})]})]})}),(0,ev.jsx)("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-xl p-4 border border-gray-100 hover:border-gray-200 transition-colors",children:(0,ev.jsxs)("div",{className:"flex items-center",children:[(0,ev.jsx)("div",{className:"w-11 h-11 bg-gradient-to-br from-cyan-100 to-blue-100 rounded-xl flex items-center justify-center mr-4 shadow-sm",children:(0,ev.jsx)(By,{className:"w-5 h-5 text-cyan-600"})}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("p",{className:"text-xs font-medium text-gray-500 mb-0.5",children:"Email Address"}),(0,ev.jsx)("p",{className:"font-semibold text-gray-800",children:s.email})]})]})}),(0,ev.jsx)("div",{className:"bg-gradient-to-r from-gray-50 to-slate-50 rounded-xl p-4 border border-gray-100 hover:border-gray-200 transition-colors",children:(0,ev.jsxs)("div",{className:"flex items-center",children:[(0,ev.jsx)("div",{className:"w-11 h-11 bg-gradient-to-br from-violet-100 to-purple-100 rounded-xl flex items-center justify-center mr-4 shadow-sm",children:(0,ev.jsx)(Hy,{className:"w-5 h-5 text-violet-600"})}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("p",{className:"text-xs font-medium text-gray-500 mb-0.5",children:"Member Since"}),(0,ev.jsx)("p",{className:"font-semibold text-gray-800",children:new Date(s.createdAt).toLocaleDateString("en-ZA",{year:"numeric",month:"long",day:"numeric"})})]})]})})]}),(0,ev.jsxs)("div",{className:"bg-gradient-to-br from-teal-50 via-cyan-50 to-sky-50 rounded-xl p-5 border border-teal-100",children:[(0,ev.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,ev.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-teal-500 to-cyan-500 rounded-xl flex items-center justify-center shadow-sm",children:(0,ev.jsx)(Wy,{className:"w-5 h-5 text-white"})}),(0,ev.jsx)("h4",{className:"font-bold text-gray-800",children:"Notification Preferences"})]}),(0,ev.jsxs)("div",{className:"space-y-3",children:[(0,ev.jsxs)("label",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border border-gray-100 cursor-pointer hover:border-teal-200 transition-colors",children:[(0,ev.jsx)("input",{type:"checkbox",checked:f.updates,onChange:()=>w("updates"),className:"w-5 h-5 rounded border-gray-300 text-teal-600 focus:ring-teal-500"}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("p",{className:"text-sm font-medium text-gray-800",children:"Room Alerts"}),(0,ev.jsx)("p",{className:"text-xs text-gray-500",children:"Get notified about new rooms in your saved areas"})]})]}),(0,ev.jsxs)("label",{className:"flex items-center gap-3 p-3 bg-white rounded-lg border border-gray-100 cursor-pointer hover:border-teal-200 transition-colors",children:[(0,ev.jsx)("input",{type:"checkbox",checked:f.marketing,onChange:()=>w("marketing"),className:"w-5 h-5 rounded border-gray-300 text-teal-600 focus:ring-teal-500"}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("p",{className:"text-sm font-medium text-gray-800",children:"Tips & Updates"}),(0,ev.jsx)("p",{className:"text-xs text-gray-500",children:"Occasional features and helpful content"})]})]})]}),(0,ev.jsx)("p",{className:"text-[11px] text-gray-500 mt-3 text-center",children:"Changes save automatically \u2022 You can opt out anytime"})]}),(0,ev.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 via-indigo-50 to-violet-50 rounded-xl p-5 border border-blue-100 mt-4",children:[(0,ev.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,ev.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-xl flex items-center justify-center shadow-sm",children:(0,ev.jsx)(Ky,{className:"w-5 h-5 text-white"})}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("h4",{className:"font-bold text-gray-800",children:"Linked Accounts"}),(0,ev.jsx)("p",{className:"text-xs text-gray-500",children:"Connect multiple sign-in methods"})]})]}),b&&(0,ev.jsxs)("div",{className:"mb-3 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700 text-sm flex items-center gap-2",children:[(0,ev.jsx)(Fy,{className:"w-4 h-4"}),b]}),y&&(0,ev.jsxs)("div",{className:"mb-3 p-3 bg-rose-50 border border-rose-200 rounded-lg text-rose-700 text-sm flex items-center gap-2",children:[(0,ev.jsx)(Gy,{className:"w-4 h-4"}),y]}),(0,ev.jsxs)("div",{className:"space-y-2",children:[(0,ev.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border ".concat(N?"border-green-200":"border-gray-100"),children:[(0,ev.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ev.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[(0,ev.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,ev.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,ev.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,ev.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),(0,ev.jsx)("span",{className:"font-medium text-gray-700",children:"Google"})]}),N?(0,ev.jsxs)("span",{className:"text-xs font-medium text-green-600 flex items-center gap-1",children:[(0,ev.jsx)(Fy,{className:"w-4 h-4"})," Linked"]}):(0,ev.jsx)("button",{onClick:async()=>{if(u){g("google"),v(""),x("");try{await u(),x("Google account linked successfully!")}catch(e){v(e.message||"Failed to link Google account")}finally{g(null)}}},disabled:"google"===p,className:"text-xs font-medium text-blue-600 hover:text-blue-700 px-3 py-1.5 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors disabled:opacity-50",children:"google"===p?"Linking...":"Link"})]}),(0,ev.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border ".concat(S?"border-green-200":"border-gray-100"),children:[(0,ev.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ev.jsx)(Vy,{className:"w-5 h-5 text-green-600"}),(0,ev.jsx)("span",{className:"font-medium text-gray-700",children:"Phone"})]}),S?(0,ev.jsxs)("span",{className:"text-xs font-medium text-green-600 flex items-center gap-1",children:[(0,ev.jsx)(Fy,{className:"w-4 h-4"})," Linked"]}):(0,ev.jsx)("button",{onClick:()=>{d&&d()},className:"text-xs font-medium text-blue-600 hover:text-blue-700 px-3 py-1.5 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors",children:"Link"})]}),(0,ev.jsxs)("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border ".concat(k?"border-green-200":"border-gray-100"),children:[(0,ev.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ev.jsx)(By,{className:"w-5 h-5 text-blue-600"}),(0,ev.jsx)("span",{className:"font-medium text-gray-700",children:"Email & Password"})]}),k?(0,ev.jsxs)("span",{className:"text-xs font-medium text-green-600 flex items-center gap-1",children:[(0,ev.jsx)(Fy,{className:"w-4 h-4"})," Linked"]}):(0,ev.jsx)("span",{className:"text-xs text-gray-400",children:"Coming soon"})]})]}),(0,ev.jsx)("p",{className:"text-[11px] text-gray-500 mt-3 text-center",children:"Link accounts to sign in with any method"})]}),l&&(0,ev.jsxs)("button",{onClick:l,className:"w-full mt-4 flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold rounded-xl transition-colors",children:[(0,ev.jsx)(Qy,{className:"w-5 h-5"}),"Sign Out"]})]})})]})}function pb(e){var t,n;let{onComplete:s,onCancel:a,currentUser:o}=e;const[l,c]=(0,r.useState)({businessName:(null===o||void 0===o?void 0:o.name)||"",bankDetails:"",idNumber:"",agree:!1});return(0,ev.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-gray-100 pb-24",children:[(0,ev.jsx)("div",{className:"bg-gradient-to-br from-teal-600 via-teal-500 to-cyan-500 pt-8 pb-16 px-4",children:(0,ev.jsxs)("div",{className:"max-w-2xl mx-auto text-center",children:[(0,ev.jsx)("div",{className:"w-20 h-20 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center mx-auto mb-4 border border-white/30",children:(0,ev.jsx)("span",{className:"text-4xl font-bold text-white",children:(null===o||void 0===o||null===(t=o.name)||void 0===t||null===(n=t.charAt(0))||void 0===n?void 0:n.toUpperCase())||"L"})}),(0,ev.jsxs)("h2",{className:"text-2xl font-bold text-white mb-2",children:["Welcome, ",(null===o||void 0===o?void 0:o.name)||"Landlord","!"]}),(0,ev.jsx)("p",{className:"text-teal-100",children:"Complete your profile to start listing properties"})]})}),(0,ev.jsx)("div",{className:"px-4 -mt-8",children:(0,ev.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,ev.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-8",children:[(0,ev.jsxs)("div",{className:"flex items-center justify-center gap-2 mb-8",children:[(0,ev.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ev.jsx)("div",{className:"w-8 h-8 bg-teal-600 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),(0,ev.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Profile Details"})]}),(0,ev.jsx)("div",{className:"w-8 h-0.5 bg-gray-200"}),(0,ev.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ev.jsx)("div",{className:"w-8 h-8 bg-gray-200 text-gray-500 rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),(0,ev.jsx)("span",{className:"text-sm text-gray-400",children:"Start Listing"})]})]}),(0,ev.jsxs)("div",{className:"space-y-5",children:[(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Display Name *"}),(0,ev.jsx)("input",{value:l.businessName,onChange:e=>c((0,i.A)((0,i.A)({},l),{},{businessName:e.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all",placeholder:"Your name or business name"}),(0,ev.jsx)("p",{className:"text-xs text-gray-500 mt-1.5",children:"This name is shown to renters on your listings and messages."})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Payment Details (Optional)"}),(0,ev.jsx)("input",{value:l.bankDetails,onChange:e=>c((0,i.A)((0,i.A)({},l),{},{bankDetails:e.target.value})),placeholder:"Bank account or preferred payment method",className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all"}),(0,ev.jsx)("p",{className:"text-xs text-gray-500 mt-1.5",children:"Private - only shown to confirmed renters."})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"ID Number (Optional)"}),(0,ev.jsx)("input",{value:l.idNumber,onChange:e=>c((0,i.A)((0,i.A)({},l),{},{idNumber:e.target.value})),className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all",placeholder:"For verification purposes"}),(0,ev.jsx)("p",{className:"text-xs text-gray-500 mt-1.5",children:"Verified landlords get a trust badge on their listings."})]}),(0,ev.jsx)("div",{className:"bg-gradient-to-r from-teal-50 to-cyan-50 rounded-xl p-4 border border-teal-100",children:(0,ev.jsxs)("label",{className:"flex items-start gap-3 cursor-pointer",children:[(0,ev.jsx)("input",{type:"checkbox",checked:l.agree,onChange:e=>c((0,i.A)((0,i.A)({},l),{},{agree:e.target.checked})),className:"mt-1 w-5 h-5 rounded border-gray-300 text-teal-600 focus:ring-teal-500"}),(0,ev.jsxs)("span",{className:"text-sm text-gray-700",children:["I confirm I am authorised to list these properties and agree to the"," ",(0,ev.jsx)("button",{type:"button",onClick:e=>e.preventDefault(),className:"text-teal-600 hover:text-teal-700 font-medium underline",children:"terms of service"}),"."]})]})}),(0,ev.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,ev.jsx)("button",{onClick:a,className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-3.5 rounded-xl transition-colors",children:"Cancel"}),(0,ev.jsx)("button",{onClick:()=>{l.businessName&&l.agree?s(l):alert("Please provide a display name and agree to the terms.")},className:"flex-1 bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-700 hover:to-cyan-700 text-white font-semibold py-3.5 rounded-xl transition-all shadow-md hover:shadow-lg",children:"Complete & Start Listing"})]})]})]})})})]})}function gb(e){let{user:t,onSubmit:n,onCancel:s}=e;const[a,o]=(0,r.useState)({name:t.name||"",phone:t.phone||"",email:t.email||"",whatsapp:t.whatsapp||"",photo:t.photo||""}),[l,c]=(0,r.useState)({}),[u,d]=(0,r.useState)({}),h=function(e,t){const n=(0,i.A)({},l);switch(e){case"name":!t||t.trim().length<2?n.name="Name must be at least 2 characters":delete n.name;break;case"phone":t&&/^[+]?[-0-9()\s]{7,}$/.test(t.trim())?delete n.phone:n.phone="Enter a valid phone number";break;case"email":t&&/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(t.trim())?delete n.email:n.email="Enter a valid email"}c(n)};return(0,ev.jsx)("div",{className:"p-4 min-h-screen bg-gradient-to-b from-slate-50 to-gray-100 pb-24",children:(0,ev.jsx)("div",{className:"max-w-2xl mx-auto mt-8",children:(0,ev.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-8",children:[(0,ev.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,ev.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Edit Profile"}),(0,ev.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition",children:(0,ev.jsx)(My,{className:"w-6 h-6"})})]}),(0,ev.jsxs)("div",{className:"space-y-6",children:[(0,ev.jsx)("div",{className:"flex justify-center mb-8",children:(0,ev.jsxs)("div",{className:"relative",children:[a.photo?(0,ev.jsx)("img",{src:a.photo,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-blue-200 shadow-lg"}):(0,ev.jsx)("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center border-4 border-blue-200 shadow-lg",children:(0,ev.jsx)(Uy.A,{className:"w-16 h-16 text-blue-600"})}),(0,ev.jsxs)("label",{className:"absolute bottom-0 right-0 bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full cursor-pointer shadow-lg transition","aria-label":"Upload new profile photo",children:[(0,ev.jsx)(zy,{className:"w-5 h-5"}),(0,ev.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onloadend=()=>{o((0,i.A)((0,i.A)({},a),{},{photo:e.result}))},e.readAsDataURL(t)}},className:"hidden"})]})]})}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Full Name"}),(0,ev.jsx)("input",{type:"text",required:!0,value:a.name,onChange:e=>{o((0,i.A)((0,i.A)({},a),{},{name:e.target.value})),u.name&&h("name",e.target.value)},onBlur:e=>{d((0,i.A)((0,i.A)({},u),{},{name:!0})),h("name",e.target.value)},"aria-invalid":l.name?"true":"false","aria-describedby":l.name?"edit-name-error":void 0,className:"w-full px-4 py-3 border-2 ".concat(l.name?"border-red-400":"border-gray-200"," bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400")}),l.name&&u.name&&(0,ev.jsx)("p",{id:"edit-name-error",className:"mt-1 text-xs text-red-600",children:l.name})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Phone Number"}),(0,ev.jsxs)("div",{className:"relative",children:[(0,ev.jsx)(Vy,{className:"absolute left-4 top-3.5 w-5 h-5 text-gray-400"}),(0,ev.jsx)("input",{type:"tel",required:!0,value:a.phone,onChange:e=>{o((0,i.A)((0,i.A)({},a),{},{phone:e.target.value})),u.phone&&h("phone",e.target.value)},onBlur:e=>{d((0,i.A)((0,i.A)({},u),{},{phone:!0})),h("phone",e.target.value)},"aria-invalid":l.phone?"true":"false","aria-describedby":l.phone?"edit-phone-error":void 0,className:"w-full pl-11 pr-4 py-3 border-2 ".concat(l.phone?"border-red-400":"border-gray-200"," bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400")})]}),l.phone&&u.phone&&(0,ev.jsx)("p",{id:"edit-phone-error",className:"mt-1 text-xs text-red-600",children:l.phone})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Email Address"}),(0,ev.jsxs)("div",{className:"relative",children:[(0,ev.jsx)(By,{className:"absolute left-4 top-3.5 w-5 h-5 text-gray-400"}),(0,ev.jsx)("input",{type:"email",required:!0,value:a.email,onChange:e=>{o((0,i.A)((0,i.A)({},a),{},{email:e.target.value})),u.email&&h("email",e.target.value)},onBlur:e=>{d((0,i.A)((0,i.A)({},u),{},{email:!0})),h("email",e.target.value)},"aria-invalid":l.email?"true":"false","aria-describedby":l.email?"edit-email-error":void 0,className:"w-full pl-11 pr-4 py-3 border-2 ".concat(l.email?"border-red-400":"border-gray-200"," bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400")})]}),l.email&&u.email&&(0,ev.jsx)("p",{id:"edit-email-error",className:"mt-1 text-xs text-red-600",children:l.email})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"WhatsApp (optional)"}),(0,ev.jsxs)("div",{className:"relative",children:[(0,ev.jsx)(Vy,{className:"absolute left-4 top-3.5 w-5 h-5 text-gray-400"}),(0,ev.jsx)("input",{type:"tel",value:a.whatsapp,onChange:e=>o((0,i.A)((0,i.A)({},a),{},{whatsapp:e.target.value})),placeholder:"e.g., +27 71 234 5678",className:"w-full pl-11 pr-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400"})]}),(0,ev.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Used to create a WhatsApp chat link on your listings."})]}),(0,ev.jsxs)("div",{className:"flex gap-3 pt-6 border-t border-gray-200",children:[(0,ev.jsx)("button",{onClick:s,className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-3 rounded-xl transition",children:"Cancel"}),(0,ev.jsx)("button",{onClick:()=>{d({name:!0,phone:!0,email:!0}),h("name",a.name),h("phone",a.phone),h("email",a.email),0===Object.keys(l).length&&a.name&&a.phone&&a.email&&n(a)},className:"flex-1 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white font-semibold py-3 rounded-xl transition shadow-lg",children:"Save Changes"})]})]})]})})})}function yb(e){let{listings:t,onSelectListing:s}=e;const[i,a]=(0,r.useState)([]);(0,r.useEffect)(()=>{try{const e=localStorage.getItem("favorites");if(e){const t=JSON.parse(e);Array.isArray(t)&&a(t)}}catch(e){}},[]);const o=e=>{a(t=>{const n=t.filter(t=>t!==e);try{localStorage.setItem("favorites",JSON.stringify(n))}catch(r){}return n})},l=t.filter(e=>i.includes(e.id));return(0,ev.jsx)("div",{className:"p-4 min-h-screen bg-gradient-to-b from-slate-50 to-gray-100 pb-24",children:(0,ev.jsxs)("div",{className:"max-w-7xl mx-auto mt-8",children:[(0,ev.jsx)("div",{className:"mb-8",children:(0,ev.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[(0,ev.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-rose-100 to-pink-100 rounded-2xl flex items-center justify-center shadow-sm",children:(0,ev.jsx)(Yy.A,{className:"w-7 h-7 text-rose-500 fill-rose-500"})}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Saved Listings"}),(0,ev.jsx)("p",{className:"text-gray-600",children:0===l.length?"Your favorites will appear here":"".concat(l.length," saved ").concat(1===l.length?"listing":"listings")})]})]})}),0===l.length?(0,ev.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-12 text-center",children:[(0,ev.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-rose-50 to-pink-50 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,ev.jsx)(Yy.A,{className:"w-12 h-12 text-rose-300"})}),(0,ev.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"No saved listings yet"}),(0,ev.jsx)("p",{className:"text-gray-500 text-sm mb-6 max-w-md mx-auto",children:"Browse rooms and tap the heart icon to save your favorites. They'll appear here for easy access."})]}):(0,ev.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:l.map(e=>{const t=n(457).A;return(0,ev.jsx)(t,{listing:e,onClick:()=>s(e),isFavorite:!0,onToggleFavorite:o},e.id)})})]})})}const vb=()=>({title:"",price:"",location:"",streetAddress:"",description:"",photos:[],status:"available",availableDate:(new Date).toISOString().split("T")[0],amenities:[],latitude:null,longitude:null,paymentMethod:"Bank and Cash",roomType:"private",leaseDuration:"7-12",petFriendly:!1,genderPreference:"any",premium:!1});function bb(e){let{onSubmit:t,onCancel:n,currentUser:s,userType:a,onRequireAuth:o,onRequireOnboarding:l}=e;const c={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAMw5vMNHvqNECNKX_wzXEA8ghDsl9c2eU",REACT_APP_FIREBASE_APP_ID:"1:725213786064:web:7c7e3709410266b98d13d5",REACT_APP_FIREBASE_AUTH_DOMAIN:"room-24.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-G7XPLZ4K10",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"725213786064",REACT_APP_FIREBASE_PROJECT_ID:"room-24",REACT_APP_FIREBASE_STORAGE_BUCKET:"room-24.firebasestorage.app"}.REACT_APP_GEOCODER_API_KEY,u=({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAMw5vMNHvqNECNKX_wzXEA8ghDsl9c2eU",REACT_APP_FIREBASE_APP_ID:"1:725213786064:web:7c7e3709410266b98d13d5",REACT_APP_FIREBASE_AUTH_DOMAIN:"room-24.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-G7XPLZ4K10",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"725213786064",REACT_APP_FIREBASE_PROJECT_ID:"room-24",REACT_APP_FIREBASE_STORAGE_BUCKET:"room-24.firebasestorage.app"}.REACT_APP_GEOCODER_PROVIDER||"").toLowerCase(),d=null===s||void 0===s?void 0:s.id,[h,f]=(0,r.useState)(()=>{const e=vb();if(d){const r=db(d);var t,n;if(r)return(0,i.A)((0,i.A)((0,i.A)({},e),r),{},{amenities:Array.isArray(r.amenities)?r.amenities:e.amenities,petFriendly:null!==(t=r.petFriendly)&&void 0!==t?t:e.petFriendly,premium:null!==(n=r.premium)&&void 0!==n?n:e.premium,photos:[]})}return e}),[m,p]=(0,r.useState)(""),[g,y]=(0,r.useState)({}),[v,b]=(0,r.useState)(!1),x=r.useRef({}),[w,N]=(0,r.useState)(null),[S,k]=(0,r.useState)(""),[E,_]=(0,r.useState)(!1);(0,r.useEffect)(()=>{if(!d)return;const e=db(d);f(e?t=>{var n,r;return(0,i.A)((0,i.A)((0,i.A)({},t),e),{},{amenities:Array.isArray(e.amenities)?e.amenities:[],petFriendly:null!==(n=e.petFriendly)&&void 0!==n&&n,premium:null!==(r=e.premium)&&void 0!==r&&r,photos:[]})}:vb())},[d]),(0,r.useEffect)(()=>{d&&"landlord"===a&&function(e,t){if(e&&t)try{const{photos:n}=t,r=(0,yf.A)(t,cb);localStorage.setItem("".concat(ub).concat(e),JSON.stringify(r))}catch(n){console.warn("Failed to save listing template",n)}}(d,h)},[h,d,a]),(0,r.useEffect)(()=>{var e;const t=h.title||h.description||(null===(e=h.photos)||void 0===e?void 0:e.length)>0,n=e=>{if(t)return e.preventDefault(),e.returnValue="",""};return t&&window.addEventListener("beforeunload",n),()=>{window.removeEventListener("beforeunload",n)}},[h.title,h.description,h.photos]);const A=(0,r.useMemo)(()=>[e=>e.startsWith("https://cors.isomorphic-git.org/")?e:"https://cors.isomorphic-git.org/".concat(e),e=>e.startsWith("https://corsproxy.io/?")?e:"https://corsproxy.io/?".concat(encodeURIComponent(e))],[]),C=(0,r.useCallback)(async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=async e=>{const n=await fetch(e,(()=>{const e=(0,i.A)({},t);return t.headers&&(e.headers=(0,i.A)({},t.headers)),e})());if(!n.ok)throw new Error("Request failed with status ".concat(n.status));return n};try{return await n(e)}catch(a){var r;if(null!==(r=t.signal)&&void 0!==r&&r.aborted)throw a;let i=a;for(const r of A)try{const t=r(e);return await n(t)}catch(o){var s;if(i=o,null!==(s=t.signal)&&void 0!==s&&s.aborted)break}throw i}},[A]),j=async e=>{if(!e||e.trim().length<3)return[];if("mapbox"===u&&c)try{var t;const n=await fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(encodeURIComponent(e),".json?access_token=").concat(c,"&limit=3&country=za&types=address,place,locality")),r=await n.json();if(null!==r&&void 0!==r&&null!==(t=r.features)&&void 0!==t&&t.length)return r.features.map(e=>{var t,n,r,s;return{lat:e.center?e.center[1]:null===(t=e.geometry)||void 0===t||null===(n=t.coordinates)||void 0===n?void 0:n[1],lon:e.center?e.center[0]:null===(r=e.geometry)||void 0===r||null===(s=r.coordinates)||void 0===s?void 0:s[0],label:e.place_name||e.text,source:"mapbox"}}).filter(e=>"number"===typeof e.lat&&"number"===typeof e.lon)}catch(r){console.warn("Mapbox forward geocode failed",r)}try{const t=await fetch("https://geocode.maps.co/search?q=".concat(encodeURIComponent(e),"&limit=3"));if(t.ok){const e=await t.json();if(Array.isArray(e)&&e.length)return e.slice(0,3).map(e=>({lat:parseFloat(e.lat),lon:parseFloat(e.lon),label:e.display_name||e.name,source:"maps.co"}))}}catch(s){console.warn("maps.co forward geocode failed",s)}const n={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAMw5vMNHvqNECNKX_wzXEA8ghDsl9c2eU",REACT_APP_FIREBASE_APP_ID:"1:725213786064:web:7c7e3709410266b98d13d5",REACT_APP_FIREBASE_AUTH_DOMAIN:"room-24.firebaseapp.com",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-G7XPLZ4K10",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"725213786064",REACT_APP_FIREBASE_PROJECT_ID:"room-24",REACT_APP_FIREBASE_STORAGE_BUCKET:"room-24.firebasestorage.app"}.REACT_APP_PROXY_BASE||(window.location&&"8443"===window.location.port?"https://localhost:4443":"");if(n)try{const t=await fetch("".concat(n,"/api/search?q=").concat(encodeURIComponent(e)));if(t.ok){const e=await t.json();if(Array.isArray(e)&&e.length)return e.slice(0,3).map(e=>({lat:parseFloat(e.lat),lon:parseFloat(e.lon),label:e.display_name,source:n.includes("localhost")?"local-proxy":"proxy"}))}}catch(i){console.warn("Local proxy forward geocode failed",i)}try{const t=await C("https://nominatim.openstreetmap.org/search?format=json&addressdetails=1&q=".concat(encodeURIComponent(e)),{headers:{"User-Agent":"room-rental-platform/1.0 (direct fallback)",Accept:"application/json"}});if(t.ok){const e=await t.json();if(Array.isArray(e)&&e.length)return e.slice(0,3).map(e=>({lat:parseFloat(e.lat),lon:parseFloat(e.lon),label:e.display_name,source:"direct"}))}}catch(a){console.warn("Direct nominatim forward geocode failed",a)}return[]},T=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=(0,i.A)({},g);switch(e){case"title":!t||t.trim().length<5?r.title="Title must be at least 5 characters":delete r.title;break;case"price":!t||parseFloat(t)<=0?r.price="Price must be greater than 0":parseFloat(t)<500?r.price="Price seems too low (minimum R500)":parseFloat(t)>5e4?r.price="Price seems too high (maximum R50,000)":delete r.price;break;case"location":{var s,a,o,l;const e=(null!==(s=null!==(a=n.streetAddress)&&void 0!==a?a:h.streetAddress)&&void 0!==s?s:"").trim(),i=(null!==(o=null!==(l=n.location)&&void 0!==l?l:t)&&void 0!==o?o:"").trim();!e||e.length<3?r.location="Add the street or stand number (e.g., 5170 Molefe St)":!i||i.length<3?r.location="Add the suburb, city, and postal code (e.g., Ivory Park, Midrand, 1693)":delete r.location;break}case"description":t&&t.length>500?r.description="Description is too long (max 500 characters)":delete r.description}y(r)};(0,r.useEffect)(()=>{try{const e=localStorage.getItem("reverse-geocode-cache");if(e){const t=JSON.parse(e);t&&"object"===typeof t&&(x.current=t)}}catch(e){}},[]);const[I,P]=(0,r.useState)(!1),R=[h.streetAddress,h.location,"South Africa"].filter(Boolean).join(", "),D=R?"https://www.google.com/maps/search/?api=1&query=".concat(encodeURIComponent(R)):"",O=[h.streetAddress,h.location].map(e=>(e||"").trim()).filter(Boolean).join(", ");(0,r.useEffect)(()=>{E||k(e=>e===O?e:O)},[O,E]);const L=e=>{if(k(e),!e||e.length<3)return f(e=>(0,i.A)((0,i.A)({},e),{},{streetAddress:"",location:""})),void T("location","");const t=e.split(",").map(e=>e.trim()).filter(Boolean);if(0===t.length)return f(e=>(0,i.A)((0,i.A)({},e),{},{streetAddress:"",location:""})),void T("location","");let n=t[0]||"",r=t.slice(1).join(", ");if(!r){const e=n.split(/\s+/).filter(Boolean);if(e.length>=4){const t=Math.min(4,Math.ceil(e.length/2));r=e.slice(-t).join(" "),n=e.slice(0,e.length-t).join(" ")}else r=n}f(e=>(0,i.A)((0,i.A)({},e),{},{streetAddress:n,location:r})),T("location",r||n,{location:r,streetAddress:n})};return(0,ev.jsx)("div",{className:"p-4 bg-gradient-to-b from-slate-50 to-gray-100 min-h-screen pb-24",children:(0,ev.jsx)("div",{className:"max-w-3xl mx-auto mt-8",children:(0,ev.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-100 p-8",children:[(0,ev.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ev.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900",children:"Post a Room"}),(0,ev.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors p-2 rounded-full hover:bg-gray-100",children:(0,ev.jsx)(My,{className:"w-6 h-6"})})]}),(0,ev.jsxs)("div",{className:"mb-8",children:[(0,ev.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,ev.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"Form Progress"}),(0,ev.jsx)("span",{className:"text-sm font-semibold text-teal-600",children:(()=>{let e=0;return h.title&&h.title.trim().length>=5&&e++,h.price&&parseFloat(h.price)>=500&&e++,h.streetAddress&&h.location&&e++,h.description&&h.description.length>=10&&e++,h.photos&&h.photos.length>0&&e++,"".concat(e,"/").concat(5," completed")})()})]}),(0,ev.jsx)("div",{className:"h-2 bg-gray-100 rounded-full overflow-hidden",children:(0,ev.jsx)("div",{className:"h-full bg-gradient-to-r from-teal-500 to-cyan-500 rounded-full transition-all duration-500",style:{width:"".concat((()=>{let e=0;return h.title&&h.title.trim().length>=5&&e++,h.price&&parseFloat(h.price)>=500&&e++,h.streetAddress&&h.location&&e++,h.description&&h.description.length>=10&&e++,h.photos&&h.photos.length>0&&e++,e/5*100})(),"%")}})})]}),(0,ev.jsxs)("div",{className:"space-y-6",children:["landlord"===(null===s||void 0===s?void 0:s.type)&&(0,ev.jsxs)("div",{className:"bg-gradient-to-r from-teal-50 to-cyan-50 border border-teal-200 text-teal-800 text-sm rounded-xl p-4 flex items-start gap-3",children:[(0,ev.jsx)(Fy,{className:"w-5 h-5 text-teal-600 mt-0.5"}),(0,ev.jsxs)("div",{className:"space-y-2",children:[(0,ev.jsx)("p",{children:"We remember your latest listing details (address, price, and more) so you only need to upload fresh photos next time. Update any field below and we'll save it automatically."}),(0,ev.jsx)("button",{type:"button",onClick:()=>{if(!d)return;!function(e){if(e)try{localStorage.removeItem("".concat(ub).concat(e))}catch(t){console.warn("Failed to clear listing template",t)}}(d);const e=vb();f(e),k("")},className:"text-xs font-semibold text-teal-700 underline hover:text-teal-900 transition-colors",children:"Reset saved info"})]})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsxs)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["Room Title *",h.title&&h.title.trim().length>=5&&!g.title&&(0,ev.jsx)("span",{className:"ml-2 text-green-600 text-xs",children:"\u2713 Looks good"})]}),(0,ev.jsxs)("div",{className:"relative",children:[(0,ev.jsx)("input",{type:"text",required:!0,value:h.title,onChange:e=>{f((0,i.A)((0,i.A)({},h),{},{title:e.target.value})),T("title",e.target.value)},onBlur:e=>T("title",e.target.value),placeholder:"e.g., Cozy backroom with private bathroom",className:"w-full px-4 py-3 pr-10 border-2 ".concat(g.title?"border-red-400 bg-red-50":h.title&&h.title.trim().length>=5?"border-teal-400 bg-teal-50/30":"border-gray-200"," text-gray-800 rounded-xl focus:ring-2 ").concat(g.title?"focus:ring-red-400":"focus:ring-teal-400"," focus:border-transparent transition-all placeholder-gray-400")}),h.title&&h.title.trim().length>=5&&!g.title&&(0,ev.jsx)(Fy,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-teal-600"})]}),g.title&&(0,ev.jsxs)("p",{className:"text-red-500 text-xs mt-1 flex items-center gap-1",children:[(0,ev.jsx)("span",{children:"\u26a0"})," ",g.title]})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsxs)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["Monthly Price (R) *",h.price&&parseFloat(h.price)>=500&&parseFloat(h.price)<=5e4&&!g.price&&(0,ev.jsx)("span",{className:"ml-2 text-green-600 text-xs",children:"\u2713 Valid price"})]}),(0,ev.jsxs)("div",{className:"relative",children:[(0,ev.jsx)("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:"R"}),(0,ev.jsx)("input",{type:"number",required:!0,value:h.price,onChange:e=>{f((0,i.A)((0,i.A)({},h),{},{price:e.target.value})),T("price",e.target.value)},onBlur:e=>T("price",e.target.value),placeholder:"2500",min:"500",max:"50000",className:"w-full pl-10 pr-4 py-3 border-2 ".concat(g.price?"border-red-400 bg-red-50":h.price&&parseFloat(h.price)>=500&&parseFloat(h.price)<=5e4?"border-teal-400 bg-teal-50/30":"border-gray-200"," text-gray-800 rounded-xl focus:ring-2 ").concat(g.price?"focus:ring-red-400":"focus:ring-teal-400"," focus:border-transparent transition-all placeholder-gray-400")}),h.price&&parseFloat(h.price)>=500&&parseFloat(h.price)<=5e4&&!g.price&&(0,ev.jsx)(Fy,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-teal-600"})]}),g.price&&(0,ev.jsxs)("p",{className:"text-red-500 text-xs mt-1 flex items-center gap-1",children:[(0,ev.jsx)("span",{children:"\u26a0"})," ",g.price]}),!g.price&&h.price&&(0,ev.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Suggested range: R500 - R50,000 per month"})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-1",children:"Full South African Address *"}),(0,ev.jsx)("p",{className:"text-xs text-gray-500 mb-2",children:"Example: 5170 Molefe St, Ivory Park, Midrand, 1693"}),(0,ev.jsx)("textarea",{required:!0,rows:"2",value:S,onChange:e=>L(e.target.value),onFocus:()=>_(!0),onBlur:e=>{_(!1),L(e.target.value)},placeholder:"Type the full street + suburb + city + postal code",className:"w-full px-4 py-3 border-2 ".concat(g.location?"border-red-400":"border-gray-200"," bg-white text-gray-800 rounded-xl focus:ring-2 ").concat(g.location?"focus:ring-red-400":"focus:ring-teal-400"," focus:border-transparent transition placeholder-gray-400")}),g.location&&(0,ev.jsx)("p",{className:"text-red-500 text-xs mt-1","aria-live":"assertive",children:g.location}),!g.location&&(0,ev.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Include the street/stand number plus suburb, city, and postal code. Commas are optional; we will split it for you."})]}),(0,ev.jsxs)("div",{className:"bg-gradient-to-br from-teal-50 to-cyan-50 border-2 border-teal-200 rounded-xl p-6",children:[(0,ev.jsxs)("div",{className:"flex items-start gap-3 mb-4",children:[(0,ev.jsx)(Xy.A,{className:"w-6 h-6 text-teal-600 flex-shrink-0 mt-1"}),(0,ev.jsxs)("div",{className:"flex-1",children:[(0,ev.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-1",children:"Confirm Your Address"}),(0,ev.jsxs)("p",{className:"text-sm text-gray-600",children:["Type the exact street + suburb above, then tap ",(0,ev.jsx)("strong",{children:"Look Up Address"})," if you\x110d like us to fetch coordinates for your Google Maps preview."]})]})]}),(0,ev.jsxs)("div",{className:"flex flex-wrap gap-3 items-start",children:[(0,ev.jsxs)("button",{type:"button",onClick:async()=>{if(h.streetAddress){p("Finding coordinates...");try{const e="".concat(h.streetAddress,", ").concat(h.location,", South Africa"),t=await j(e);if(t.length>0){const e=t[0];return f((0,i.A)((0,i.A)({},h),{},{latitude:parseFloat(e.lat),longitude:parseFloat(e.lon)})),p("\u2713 Address found!"),setTimeout(()=>p(""),2e3),void N(e.source||"manual-geocode")}p("Address not found. Trying with area only...");const n=await j("".concat(h.location,", South Africa"));if(n.length>0){const e=n[0];f((0,i.A)((0,i.A)({},h),{},{latitude:parseFloat(e.lat),longitude:parseFloat(e.lon)})),p("\u2713 Area found!"),setTimeout(()=>p(""),2e3),N(e.source||"manual-geocode")}else p("Could not find location")}catch(e){console.error("Geocoding error:",e),p("Error finding address. Check your connection."),N(null)}}else p("Please enter a street address")},className:"w-full md:w-auto bg-white hover:bg-gray-50 text-gray-700 border-2 border-gray-300 px-6 py-3 rounded-lg text-sm font-semibold transition flex items-center justify-center gap-2",children:[(0,ev.jsx)(Xy.A,{className:"w-4 h-4"}),"Look Up Address"]}),(0,ev.jsxs)("div",{className:"text-sm flex-1 min-w-[220px]",children:[m&&(0,ev.jsxs)("span",{className:"".concat(m.startsWith("\u2713")?"text-green-600 font-semibold":m.startsWith("\u26a0\ufe0f")?"text-amber-600":"text-gray-700"," flex items-center gap-1"),children:[m.startsWith("\u2713")&&(0,ev.jsx)(Fy,{className:"w-4 h-4"}),m,"cached"===w&&(0,ev.jsx)("span",{className:"ml-2 inline-block px-2 py-1 text-[10px] rounded bg-purple-100 text-purple-600 font-semibold",children:"CACHED"}),"mapbox"===w&&(0,ev.jsx)("span",{className:"ml-2 inline-block px-2 py-1 text-[10px] rounded bg-blue-100 text-blue-600 font-semibold",children:"MAPBOX"}),"maps.co"===w&&(0,ev.jsx)("span",{className:"ml-2 inline-block px-2 py-1 text-[10px] rounded bg-indigo-100 text-indigo-600 font-semibold",children:"MAPS.CO"}),"proxy"===w&&(0,ev.jsx)("span",{className:"ml-2 inline-block px-2 py-1 text-[10px] rounded bg-green-100 text-green-600 font-semibold",children:"PROXY"}),"direct"===w&&(0,ev.jsx)("span",{className:"ml-2 inline-block px-2 py-1 text-[10px] rounded bg-yellow-100 text-yellow-700 font-semibold",children:"FALLBACK"})]}),h.latitude&&h.longitude&&!m&&(0,ev.jsxs)("span",{className:"text-green-600 font-semibold flex items-center gap-1",children:[(0,ev.jsx)(Fy,{className:"w-4 h-4"}),"Coordinates saved: ",h.latitude.toFixed(4),", ",h.longitude.toFixed(4),"cached"===w&&(0,ev.jsx)("span",{className:"ml-2 inline-block px-2 py-1 text-[10px] rounded bg-purple-100 text-purple-600 font-semibold",children:"CACHED"}),"maps.co"===w&&(0,ev.jsx)("span",{className:"ml-2 inline-block px-2 py-1 text-[10px] rounded bg-indigo-100 text-indigo-600 font-semibold",children:"MAPS.CO"})]}),D&&(0,ev.jsxs)("div",{className:"mt-3 bg-white border border-gray-200 rounded-lg p-3 text-xs text-gray-600",children:[(0,ev.jsx)("span",{className:"block text-gray-800 font-semibold mb-1",children:"Preview this address"}),(0,ev.jsxs)("a",{href:D,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 text-teal-700 font-semibold hover:text-teal-900 underline",children:[(0,ev.jsx)(Xy.A,{className:"w-3 h-3"})," Open in Google Maps"]}),(0,ev.jsx)("span",{className:"block mt-2 text-[11px] text-gray-500",children:"Renters will see the same button under your listing."})]})]})]}),(0,ev.jsxs)("div",{className:"mt-4 text-sm text-gray-600 bg-white border border-dashed border-gray-300 rounded-lg p-4",children:[(0,ev.jsx)("p",{className:"font-semibold text-gray-800 mb-1",children:"Manual address confirmed"}),(0,ev.jsx)("p",{children:"We now rely on the address you type here. Use Google Maps above if you want to double-check directions."})]})]}),(0,ev.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Status"}),(0,ev.jsxs)("select",{value:h.status,onChange:e=>f((0,i.A)((0,i.A)({},h),{},{status:e.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition",children:[(0,ev.jsx)("option",{value:"available",children:"Available"}),(0,ev.jsx)("option",{value:"rented",children:"Rented"})]})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Available Date"}),(0,ev.jsx)("input",{type:"date",value:h.availableDate,onChange:e=>f((0,i.A)((0,i.A)({},h),{},{availableDate:e.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition"})]})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Payment Method"}),(0,ev.jsxs)("select",{value:h.paymentMethod,onChange:e=>f((0,i.A)((0,i.A)({},h),{},{paymentMethod:e.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition",children:[(0,ev.jsx)("option",{value:"Bank and Cash",children:"Bank and Cash"}),(0,ev.jsx)("option",{value:"Cash Only",children:"Cash Only"}),(0,ev.jsx)("option",{value:"Bank Only",children:"Bank Only"})]})]}),(0,ev.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Room Type"}),(0,ev.jsxs)("select",{value:h.roomType,onChange:e=>f((0,i.A)((0,i.A)({},h),{},{roomType:e.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition",children:[(0,ev.jsx)("option",{value:"private",children:"Private Room"}),(0,ev.jsx)("option",{value:"shared",children:"Shared Room"})]})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Lease Duration (months)"}),(0,ev.jsxs)("select",{value:h.leaseDuration,onChange:e=>f((0,i.A)((0,i.A)({},h),{},{leaseDuration:e.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition",children:[(0,ev.jsx)("option",{value:"1-3",children:"1-3 months"}),(0,ev.jsx)("option",{value:"4-6",children:"4-6 months"}),(0,ev.jsx)("option",{value:"7-12",children:"7-12 months"}),(0,ev.jsx)("option",{value:"12+",children:"12+ months"})]})]})]}),(0,ev.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ev.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ev.jsx)("input",{type:"checkbox",checked:h.petFriendly,onChange:e=>f((0,i.A)((0,i.A)({},h),{},{petFriendly:e.target.checked})),id:"petFriendly",className:"w-5 h-5 text-teal-600 border-gray-300 rounded focus:ring-teal-500"}),(0,ev.jsx)("label",{htmlFor:"petFriendly",className:"text-sm font-medium text-gray-700",children:"\ud83d\udc3e Pet Friendly"})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Gender Preference"}),(0,ev.jsxs)("select",{value:h.genderPreference,onChange:e=>f((0,i.A)((0,i.A)({},h),{},{genderPreference:e.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition",children:[(0,ev.jsx)("option",{value:"any",children:"Any"}),(0,ev.jsx)("option",{value:"male",children:"Male Only"}),(0,ev.jsx)("option",{value:"female",children:"Female Only"})]})]})]}),(0,ev.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ev.jsx)("input",{type:"checkbox",checked:!!h.premium,onChange:e=>f((0,i.A)((0,i.A)({},h),{},{premium:e.target.checked})),id:"premiumFlag"}),(0,ev.jsx)("label",{htmlFor:"premiumFlag",className:"text-sm font-medium text-gray-700",children:"Premium listing (highlight & priority sorting)"})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsxs)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:["Description",h.description&&(0,ev.jsxs)("span",{className:"ml-2 text-xs ".concat(h.description.length>500?"text-red-500":"text-gray-500"),children:["(",h.description.length,"/500 characters)"]})]}),(0,ev.jsx)("textarea",{value:h.description,onChange:e=>{f((0,i.A)((0,i.A)({},h),{},{description:e.target.value})),T("description",e.target.value)},onBlur:e=>T("description",e.target.value),placeholder:"Describe the room, amenities, rules, and any other details...",rows:"4",className:"w-full px-4 py-3 border-2 ".concat(g.description?"border-red-400":"border-gray-200"," bg-white text-gray-800 rounded-xl focus:ring-2 ").concat(g.description?"focus:ring-red-400":"focus:ring-teal-400"," focus:border-transparent transition placeholder-gray-400")}),g.description&&(0,ev.jsx)("p",{className:"text-red-500 text-xs mt-1",children:g.description})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-3",children:"Amenities"}),(0,ev.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["WiFi","Parking","Kitchen","Laundry","Air Conditioning","Heating","TV","Furnished","Pet Friendly","Garden"].map(e=>(0,ev.jsx)("button",{type:"button",onClick:()=>(e=>{h.amenities.includes(e)?f((0,i.A)((0,i.A)({},h),{},{amenities:h.amenities.filter(t=>t!==e)})):f((0,i.A)((0,i.A)({},h),{},{amenities:[...h.amenities,e]}))})(e),className:"px-4 py-2.5 rounded-xl text-sm font-medium transition-all ".concat(h.amenities.includes(e)?"bg-gradient-to-r from-teal-500 to-cyan-500 text-white shadow-md":"bg-gray-100 text-gray-700 border-2 border-gray-200 hover:border-teal-300 hover:bg-teal-50"),children:e},e))})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-800 mb-2",children:"Photos (Max 5)"}),(0,ev.jsx)("div",{className:"relative border-2 border-dashed border-gray-300 bg-gradient-to-br from-gray-50 to-slate-50 rounded-xl p-6 hover:border-teal-400 hover:bg-teal-50/30 transition-all duration-300 cursor-pointer group",onClick:()=>b(!0),children:(0,ev.jsxs)("div",{className:"text-center",children:[(0,ev.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-teal-100 to-cyan-100 rounded-2xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform duration-300",children:(0,ev.jsx)("span",{className:"text-3xl",children:"\ud83d\udcf7"})}),(0,ev.jsx)("p",{className:"text-gray-700 font-semibold mb-1",children:0===h.photos.length?"Add Photos":"".concat(h.photos.length,"/5 Photos Added")}),(0,ev.jsx)("p",{className:"text-xs text-gray-500",children:"Click to upload \u2022 JPG, PNG up to 5MB each"}),0===h.photos.length&&(0,ev.jsx)("p",{className:"text-xs text-teal-600 mt-2 font-medium",children:"Tip: Listings with photos get 3x more views!"})]})}),h.photos.length>0&&(0,ev.jsx)("div",{className:"mt-4 grid grid-cols-2 md:grid-cols-3 gap-3",children:h.photos.map((e,t)=>(0,ev.jsxs)("div",{className:"relative group",children:[0===t&&(0,ev.jsx)("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-teal-500 to-cyan-500 text-white text-xs px-2 py-1 rounded-full font-semibold z-10",children:"Cover"}),(0,ev.jsx)("img",{src:e,alt:"Preview ".concat(t+1),className:"w-full h-32 object-cover rounded-xl border-2 border-gray-200 shadow-sm"})]},t))}),(0,ev.jsx)("button",{type:"button",onClick:()=>b(!0),className:"mt-3 text-sm text-teal-600 hover:text-teal-700 font-medium",children:h.photos.length>0?"\u270f\ufe0f Edit Photos":""})]}),v&&(0,ev.jsx)(rb,{photos:h.photos,onPhotosChange:e=>f((0,i.A)((0,i.A)({},h),{},{photos:e})),onClose:()=>b(!1),maxPhotos:5}),(0,ev.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[(0,ev.jsx)("button",{onClick:async()=>{if(s)if("landlord"===a)if(s.landlordComplete){if(T("title",h.title),T("price",h.price),T("location",h.location,{location:h.location,streetAddress:h.streetAddress}),T("description",h.description),!h.title||h.title.trim().length<5)y(e=>(0,i.A)((0,i.A)({},e),{},{title:"Title must be at least 5 characters"}));else if(!h.price||parseFloat(h.price)<=0)y(e=>(0,i.A)((0,i.A)({},e),{},{price:"Price must be greater than 0"}));else if(!h.location||h.location.trim().length<3)y(e=>(0,i.A)((0,i.A)({},e),{},{location:"Location is required"}));else if(!(Object.keys(g).length>0)){P(!0);try{await t(h)}finally{P(!1)}}}else l&&l();else o&&o("landlord");else o&&o("landlord")},disabled:I||Object.keys(g).length>0,className:"w-full font-semibold py-3.5 rounded-xl transition-all shadow-lg relative ".concat(I||Object.keys(g).length>0?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white hover:shadow-xl hover:shadow-teal-500/25"),children:I?(0,ev.jsxs)(ev.Fragment,{children:[(0,ev.jsx)("span",{className:"opacity-0",children:"Post Room"}),(0,ev.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,ev.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"})})]}):"Post Room"}),Object.keys(g).length>0&&(0,ev.jsx)("p",{className:"text-red-500 text-xs mt-2 text-center",children:"Please fix the errors above before submitting"})]})]})]})})})}function xb(e){let{listings:t,onDelete:n}=e;return(0,ev.jsx)("div",{className:"p-4 min-h-screen bg-gradient-to-b from-slate-50 to-gray-100 pb-24",children:(0,ev.jsxs)("div",{className:"max-w-7xl mx-auto mt-8",children:[t.length>0&&(0,ev.jsx)("div",{className:"mb-6 bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-2xl p-4 shadow-sm",children:(0,ev.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ev.jsx)("div",{className:"w-10 h-10 bg-amber-100 rounded-xl flex items-center justify-center flex-shrink-0",children:(0,ev.jsx)(Gy,{className:"w-5 h-5 text-amber-600"})}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("h3",{className:"font-semibold text-amber-800 mb-1",children:"Found a tenant?"}),(0,ev.jsxs)("p",{className:"text-amber-700 text-sm leading-relaxed",children:["Remember to ",(0,ev.jsx)("span",{className:"font-medium",children:"delete your listing"})," once you've found a tenant. This will stop new calls and messages from other renters looking at your ad."]})]})]})}),(0,ev.jsx)("div",{className:"mb-8",children:(0,ev.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[(0,ev.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-teal-100 to-cyan-100 rounded-2xl flex items-center justify-center shadow-sm",children:(0,ev.jsx)(qy.A,{className:"w-7 h-7 text-teal-600"})}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("h2",{className:"text-3xl font-extrabold text-gray-900",children:"My Listings"}),(0,ev.jsx)("p",{className:"text-gray-600",children:0===t.length?"Your properties will appear here":"".concat(t.length," active ").concat(1===t.length?"listing":"listings")})]})]})}),0===t.length?(0,ev.jsxs)("div",{className:"bg-white rounded-2xl border border-gray-100 shadow-sm p-12 text-center",children:[(0,ev.jsx)("div",{className:"w-24 h-24 bg-gradient-to-br from-teal-50 to-cyan-50 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,ev.jsx)(qy.A,{className:"w-12 h-12 text-teal-400"})}),(0,ev.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"No Listings Yet"}),(0,ev.jsx)("p",{className:"text-gray-500 text-sm mb-6 max-w-md mx-auto",children:"Start earning by posting your first room. It only takes a few minutes!"}),(0,ev.jsxs)("button",{onClick:()=>window.location.hash="#add",className:"inline-flex items-center gap-2 bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-700 hover:to-cyan-700 text-white font-semibold px-6 py-3 rounded-xl transition-all shadow-md hover:shadow-lg",children:[(0,ev.jsx)(Jy,{className:"w-5 h-5"}),"Post Your First Room"]})]}):(0,ev.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>{var t;return(0,ev.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow",children:[e.photos&&e.photos.length>0&&(0,ev.jsxs)("div",{className:"relative",children:[(0,ev.jsx)("img",{src:e.photos[0],alt:"Room",className:"w-full h-48 object-cover"}),e.photos.length>1&&(0,ev.jsxs)("div",{className:"absolute top-3 right-3 bg-black/60 backdrop-blur-sm text-white px-2.5 py-1 rounded-full text-xs font-medium",children:[e.photos.length," photos"]}),(0,ev.jsx)("div",{className:"absolute top-3 left-3 px-2.5 py-1 rounded-full text-xs font-semibold ".concat("available"===e.status?"bg-emerald-500 text-white":"bg-gray-500 text-white"),children:"available"===e.status?"Active":"Rented"})]}),(0,ev.jsxs)("div",{className:"p-5",children:[(0,ev.jsx)("h3",{className:"font-bold text-lg text-gray-900 mb-1 line-clamp-1",children:e.title}),(0,ev.jsxs)("div",{className:"text-teal-600 font-bold text-xl mb-2",children:["R",null===(t=e.price)||void 0===t?void 0:t.toLocaleString(),"/month"]}),(0,ev.jsxs)("div",{className:"flex items-center text-gray-500 text-sm mb-4",children:[(0,ev.jsx)(Xy.A,{className:"w-4 h-4 mr-1.5 text-gray-400"}),(0,ev.jsx)("span",{className:"line-clamp-1",children:e.location})]}),(0,ev.jsx)("div",{className:"flex gap-2",children:(0,ev.jsx)("button",{onClick:()=>n(e.id),className:"flex-1 bg-red-50 hover:bg-red-100 text-red-600 font-medium py-2.5 rounded-xl transition-colors text-sm",children:"Delete"})})]})]},e.id)})})]})})}function wb(e){let{defaultType:t="renter",onClose:n,onSuccess:s,authFunctions:a}=e;const[o,l]=(0,r.useState)("signin"),[c,u]=(0,r.useState)({name:"",phone:"",email:"",password:"",confirmPassword:"",otp:"",type:t}),[d,h]=(0,r.useState)({}),[f,m]=(0,r.useState)(!1),[p,g]=(0,r.useState)(""),[y,v]=(0,r.useState)(!1),[b,x]=(0,r.useState)(!1),[w,N]=(0,r.useState)("");return(0,ev.jsx)("div",{className:"fixed inset-0 bg-gray-900/60 backdrop-blur-sm flex items-start sm:items-center justify-center p-4 pt-16 sm:pt-4 z-50 overflow-y-auto",children:(0,ev.jsxs)("div",{className:"bg-white rounded-2xl w-full max-w-md p-8 my-auto shadow-2xl fade-in border border-gray-100",children:[(0,ev.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,ev.jsxs)("div",{children:[(0,ev.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,ev.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-teal-500 to-cyan-500 rounded-xl flex items-center justify-center shadow-lg",children:(0,ev.jsx)(qy.A,{className:"w-5 h-5 text-white"})}),(0,ev.jsxs)("span",{className:"text-xl font-extrabold",children:[(0,ev.jsx)("span",{className:"bg-gradient-to-r from-teal-600 to-cyan-600 bg-clip-text text-transparent",children:"Room"}),(0,ev.jsx)("span",{className:"text-rose-500",children:"24"})]})]}),(0,ev.jsxs)("h3",{className:"text-xl font-bold text-gray-900 mt-4",children:["signin"===o&&"Welcome back!","signup"===o&&"Create your account","reset"===o&&"Reset password","phone"===o&&"Sign in with phone","phone-verify"===o&&"Enter verification code"]}),(0,ev.jsxs)("p",{className:"text-sm text-gray-500 mt-1",children:["signin"===o&&"Sign in to continue","signup"===o&&"Join Room24 today","reset"===o&&"We'll send you a reset link","phone"===o&&"We'll send you a verification code","phone-verify"===o&&"Code sent to ".concat(w)]})]}),(0,ev.jsx)("button",{onClick:n,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-colors",children:(0,ev.jsx)(My,{className:"w-5 h-5"})})]}),p&&(0,ev.jsxs)("div",{className:"mb-4 p-3 bg-rose-50 border border-rose-200 rounded-xl text-rose-700 text-sm flex items-center gap-2",children:[(0,ev.jsx)(Gy,{className:"w-4 h-4 flex-shrink-0"}),p]}),y&&(0,ev.jsxs)("div",{className:"mb-4 p-3 bg-green-50 border border-green-200 rounded-xl text-green-700 text-sm flex items-center gap-2",children:[(0,ev.jsx)(Fy,{className:"w-4 h-4 flex-shrink-0"}),"Password reset email sent! Check your inbox."]}),(0,ev.jsxs)("div",{className:"space-y-4",children:["phone-verify"===o&&(0,ev.jsxs)(ev.Fragment,{children:[(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Verification Code *"}),(0,ev.jsx)("input",{type:"text",inputMode:"numeric",maxLength:6,value:c.otp,onChange:e=>{const t=e.target.value.replace(/\D/g,"").slice(0,6);u((0,i.A)((0,i.A)({},c),{},{otp:t})),h((0,i.A)((0,i.A)({},d),{},{otp:""})),g("")},className:"w-full px-4 py-4 border-2 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500 text-center text-2xl font-bold tracking-[0.5em] ".concat(d.otp?"border-rose-400 bg-rose-50":"border-gray-200 hover:border-gray-300"),placeholder:"000000",autoFocus:!0}),d.otp&&(0,ev.jsxs)("p",{className:"text-rose-500 text-xs mt-1.5 flex items-center gap-1",children:[(0,ev.jsx)("span",{children:"\u26a0"}),d.otp]})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Your Name *"}),(0,ev.jsx)("input",{type:"text",value:c.name,onChange:e=>{u((0,i.A)((0,i.A)({},c),{},{name:e.target.value})),h((0,i.A)((0,i.A)({},d),{},{name:""}))},className:"w-full px-4 py-3 border-2 border-gray-200 hover:border-gray-300 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500",placeholder:"John Doe"})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"I am a"}),(0,ev.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,ev.jsxs)("button",{type:"button",onClick:()=>u((0,i.A)((0,i.A)({},c),{},{type:"renter"})),className:"p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-1 ".concat("renter"===c.type?"border-teal-500 bg-gradient-to-br from-teal-50 to-cyan-50 text-teal-700 shadow-md":"border-gray-200 hover:border-gray-300 text-gray-600 hover:bg-gray-50"),children:[(0,ev.jsx)($y,{className:"w-5 h-5 ".concat("renter"===c.type?"text-teal-500":"")}),(0,ev.jsx)("span",{className:"text-xs font-semibold",children:"Looking for a room"})]}),(0,ev.jsxs)("button",{type:"button",onClick:()=>u((0,i.A)((0,i.A)({},c),{},{type:"landlord"})),className:"p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-1 ".concat("landlord"===c.type?"border-rose-500 bg-gradient-to-br from-rose-50 to-pink-50 text-rose-700 shadow-md":"border-gray-200 hover:border-gray-300 text-gray-600 hover:bg-gray-50"),children:[(0,ev.jsx)(qy.A,{className:"w-5 h-5 ".concat("landlord"===c.type?"text-rose-500":"")}),(0,ev.jsx)("span",{className:"text-xs font-semibold",children:"Listing rooms"})]})]})]}),(0,ev.jsx)("button",{type:"button",onClick:()=>{l("phone"),x(!1),u((0,i.A)((0,i.A)({},c),{},{otp:""}))},className:"text-sm text-teal-600 hover:text-teal-700 font-medium",children:"\u2190 Change phone number"})]}),"phone"===o&&(0,ev.jsxs)(ev.Fragment,{children:[(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Phone Number *"}),(0,ev.jsxs)("div",{className:"flex gap-2",children:[(0,ev.jsx)("div",{className:"flex items-center px-3 bg-gray-100 border-2 border-gray-200 rounded-xl text-gray-600 font-medium",children:"\ud83c\uddff\ud83c\udde6 +27"}),(0,ev.jsx)("input",{type:"tel",value:c.phone,onChange:e=>{u((0,i.A)((0,i.A)({},c),{},{phone:e.target.value})),h((0,i.A)((0,i.A)({},d),{},{phone:""})),g("")},className:"flex-1 px-4 py-3 border-2 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500 ".concat(d.phone?"border-rose-400 bg-rose-50":"border-gray-200 hover:border-gray-300"),placeholder:"72 123 4567",autoFocus:!0})]}),d.phone&&(0,ev.jsxs)("p",{className:"text-rose-500 text-xs mt-1.5 flex items-center gap-1",children:[(0,ev.jsx)("span",{children:"\u26a0"}),d.phone]}),(0,ev.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"We'll send you an SMS with a verification code"})]}),(0,ev.jsx)("button",{type:"button",onClick:()=>{l("signin"),g("")},className:"text-sm text-teal-600 hover:text-teal-700 font-medium",children:"\u2190 Use email instead"})]}),("signin"===o||"signup"===o)&&(0,ev.jsxs)(ev.Fragment,{children:[(0,ev.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,ev.jsxs)("button",{type:"button",onClick:async()=>{m(!0),g("");try{await a.signInGoogle(c.type),null===s||void 0===s||s(),n()}catch(e){g(e.message||"Google sign-in failed. Please try again.")}finally{m(!1)}},disabled:f,className:"flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 hover:border-gray-300 rounded-xl transition-all hover:bg-gray-50 font-medium text-gray-700",children:[(0,ev.jsxs)("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[(0,ev.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,ev.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,ev.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,ev.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]}),(0,ev.jsxs)("button",{type:"button",onClick:()=>{l("phone"),g(""),x(!1)},disabled:f,className:"flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 hover:border-gray-300 rounded-xl transition-all hover:bg-gray-50 font-medium text-gray-700",children:[(0,ev.jsx)(Vy,{className:"w-5 h-5 text-green-600"}),"Phone"]})]}),(0,ev.jsxs)("div",{className:"relative",children:[(0,ev.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,ev.jsx)("div",{className:"w-full border-t border-gray-200"})}),(0,ev.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,ev.jsx)("span",{className:"px-4 bg-white text-gray-500",children:"or use email"})})]})]}),"reset"===o&&(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email *"}),(0,ev.jsx)("input",{type:"email",value:c.email,onChange:e=>{u((0,i.A)((0,i.A)({},c),{},{email:e.target.value})),h((0,i.A)((0,i.A)({},d),{},{email:""})),g("")},className:"w-full px-4 py-3 border-2 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500 ".concat(d.email?"border-rose-400 bg-rose-50":"border-gray-200 hover:border-gray-300"),placeholder:"john@example.com"}),d.email&&(0,ev.jsxs)("p",{className:"text-rose-500 text-xs mt-1.5 flex items-center gap-1",children:[(0,ev.jsx)("span",{children:"\u26a0"}),d.email]})]}),("signin"===o||"signup"===o)&&(0,ev.jsxs)(ev.Fragment,{children:["signup"===o&&(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Full name *"}),(0,ev.jsx)("input",{type:"text",value:c.name,onChange:e=>{u((0,i.A)((0,i.A)({},c),{},{name:e.target.value})),h((0,i.A)((0,i.A)({},d),{},{name:""}))},className:"w-full px-4 py-3 border-2 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500 ".concat(d.name?"border-rose-400 bg-rose-50":"border-gray-200 hover:border-gray-300"),placeholder:"John Doe"}),d.name&&(0,ev.jsxs)("p",{className:"text-rose-500 text-xs mt-1.5 flex items-center gap-1",children:[(0,ev.jsx)("span",{children:"\u26a0"}),d.name]})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email *"}),(0,ev.jsx)("input",{type:"email",value:c.email,onChange:e=>{u((0,i.A)((0,i.A)({},c),{},{email:e.target.value})),h((0,i.A)((0,i.A)({},d),{},{email:""})),g("")},className:"w-full px-4 py-3 border-2 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500 ".concat(d.email?"border-rose-400 bg-rose-50":"border-gray-200 hover:border-gray-300"),placeholder:"john@example.com"}),d.email&&(0,ev.jsxs)("p",{className:"text-rose-500 text-xs mt-1.5 flex items-center gap-1",children:[(0,ev.jsx)("span",{children:"\u26a0"}),d.email]})]}),(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password *"}),(0,ev.jsx)("input",{type:"password",value:c.password,onChange:e=>{u((0,i.A)((0,i.A)({},c),{},{password:e.target.value})),h((0,i.A)((0,i.A)({},d),{},{password:""})),g("")},className:"w-full px-4 py-3 border-2 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500 ".concat(d.password?"border-rose-400 bg-rose-50":"border-gray-200 hover:border-gray-300"),placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),d.password&&(0,ev.jsxs)("p",{className:"text-rose-500 text-xs mt-1.5 flex items-center gap-1",children:[(0,ev.jsx)("span",{children:"\u26a0"}),d.password]})]}),"signup"===o&&(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirm Password *"}),(0,ev.jsx)("input",{type:"password",value:c.confirmPassword,onChange:e=>{u((0,i.A)((0,i.A)({},c),{},{confirmPassword:e.target.value})),h((0,i.A)((0,i.A)({},d),{},{confirmPassword:""}))},className:"w-full px-4 py-3 border-2 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500 ".concat(d.confirmPassword?"border-rose-400 bg-rose-50":"border-gray-200 hover:border-gray-300"),placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),d.confirmPassword&&(0,ev.jsxs)("p",{className:"text-rose-500 text-xs mt-1.5 flex items-center gap-1",children:[(0,ev.jsx)("span",{children:"\u26a0"}),d.confirmPassword]})]}),"signup"===o&&(0,ev.jsxs)("div",{children:[(0,ev.jsxs)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:["Phone ",(0,ev.jsx)("span",{className:"text-gray-400 font-normal",children:"(optional)"})]}),(0,ev.jsx)("input",{type:"tel",value:c.phone,onChange:e=>u((0,i.A)((0,i.A)({},c),{},{phone:e.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 hover:border-gray-300 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500",placeholder:"+27 12 345 6789"})]}),"signup"===o&&(0,ev.jsxs)("div",{children:[(0,ev.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"I am a"}),(0,ev.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,ev.jsxs)("button",{type:"button",onClick:()=>u((0,i.A)((0,i.A)({},c),{},{type:"renter"})),className:"p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-1 ".concat("renter"===c.type?"border-teal-500 bg-gradient-to-br from-teal-50 to-cyan-50 text-teal-700 shadow-md":"border-gray-200 hover:border-gray-300 text-gray-600 hover:bg-gray-50"),children:[(0,ev.jsx)($y,{className:"w-5 h-5 ".concat("renter"===c.type?"text-teal-500":"")}),(0,ev.jsx)("span",{className:"text-xs font-semibold",children:"Looking for a room"})]}),(0,ev.jsxs)("button",{type:"button",onClick:()=>u((0,i.A)((0,i.A)({},c),{},{type:"landlord"})),className:"p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-1 ".concat("landlord"===c.type?"border-rose-500 bg-gradient-to-br from-rose-50 to-pink-50 text-rose-700 shadow-md":"border-gray-200 hover:border-gray-300 text-gray-600 hover:bg-gray-50"),children:[(0,ev.jsx)(qy.A,{className:"w-5 h-5 ".concat("landlord"===c.type?"text-rose-500":"")}),(0,ev.jsx)("span",{className:"text-xs font-semibold",children:"Listing rooms"})]})]})]}),"signin"===o&&(0,ev.jsx)("button",{type:"button",onClick:()=>{l("reset"),g(""),v(!1)},className:"text-sm text-teal-600 hover:text-teal-700 font-medium",children:"Forgot your password?"})]}),(0,ev.jsx)("button",{id:"phone-sign-in-button",onClick:async()=>{if((()=>{const e={};return"phone"===o?(!c.phone||c.phone.trim().length<9)&&(e.phone="Please enter a valid phone number"):"phone-verify"===o?c.otp&&6===c.otp.length||(e.otp="Please enter the 6-digit code"):("signup"===o&&(!c.name||c.name.trim().length<2)&&(e.name="Name must be at least 2 characters"),c.email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(c.email)||(e.email="Please enter a valid email address"),"reset"!==o&&(!c.password||c.password.length<6)&&(e.password="Password must be at least 6 characters"),"signup"===o&&c.password!==c.confirmPassword&&(e.confirmPassword="Passwords do not match")),h(e),0===Object.keys(e).length})()){m(!0),g("");try{if("signup"===o)await a.signUp(c.email,c.password,c.name,c.type,c.phone),null===s||void 0===s||s(),n();else if("signin"===o)await a.signIn(c.email,c.password),null===s||void 0===s||s(),n();else if("reset"===o)await a.sendPasswordReset(c.email),v(!0);else if("phone"===o){const e=await a.sendPhoneOTP(c.phone);N(e.formattedNumber),x(!0),l("phone-verify")}else"phone-verify"===o&&(await a.verifyPhoneOTP(c.otp,c.type,c.name),null===s||void 0===s||s(),n())}catch(e){console.error("Auth error:",e);let t="An error occurred. Please try again.";"auth/email-already-in-use"===e.code?t="This email is already registered. Please sign in instead.":"auth/invalid-email"===e.code?t="Invalid email address format.":"auth/weak-password"===e.code?t="Password is too weak. Please use at least 6 characters.":"auth/user-not-found"===e.code||"auth/wrong-password"===e.code||"auth/invalid-credential"===e.code?t="Invalid email or password. Please check and try again.":"auth/invalid-phone-number"===e.code?t="Invalid phone number format. Please use format: 0XX XXX XXXX":"auth/too-many-requests"===e.code?t="Too many attempts. Please try again later.":"auth/invalid-verification-code"===e.code?t="Invalid code. Please check and try again.":"auth/code-expired"===e.code?t="Code expired. Please request a new one.":"auth/network-request-failed"===e.code?t="Network error. Please check your connection.":e.message&&(t=e.message),g(t)}finally{m(!1)}}},disabled:f,className:"w-full font-bold py-3 rounded-xl transition-all relative ".concat(f?"bg-teal-400 cursor-not-allowed":"bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white shadow-lg hover:shadow-xl hover:shadow-teal-500/25"),children:f?(0,ev.jsxs)(ev.Fragment,{children:[(0,ev.jsx)("span",{className:"opacity-0",children:"Submit"}),(0,ev.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,ev.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"})})]}):(0,ev.jsxs)(ev.Fragment,{children:["signin"===o&&"Sign In","signup"===o&&"Create Account","reset"===o&&"Send Reset Link","phone"===o&&"Send Verification Code","phone-verify"===o&&"Verify & Sign In"]})}),(0,ev.jsx)("div",{id:"recaptcha-container",className:"flex justify-center"}),(0,ev.jsxs)("div",{className:"text-center text-sm text-gray-600",children:["signin"===o&&(0,ev.jsxs)(ev.Fragment,{children:["Don't have an account?"," ",(0,ev.jsx)("button",{onClick:()=>{l("signup"),g("")},className:"text-teal-600 hover:text-teal-700 font-semibold",children:"Sign up"})]}),"signup"===o&&(0,ev.jsxs)(ev.Fragment,{children:["Already have an account?"," ",(0,ev.jsx)("button",{onClick:()=>{l("signin"),g("")},className:"text-teal-600 hover:text-teal-700 font-semibold",children:"Sign in"})]}),"reset"===o&&(0,ev.jsx)("button",{onClick:()=>{l("signin"),g(""),v(!1)},className:"text-teal-600 hover:text-teal-700 font-semibold",children:"\u2190 Back to sign in"}),("phone"===o||"phone-verify"===o)&&(0,ev.jsx)("button",{onClick:()=>{l("signin"),g(""),x(!1)},className:"text-teal-600 hover:text-teal-700 font-semibold",children:"\u2190 Back to sign in"})]})]}),(0,ev.jsxs)("p",{className:"text-xs text-gray-400 text-center mt-6",children:["By continuing, you agree to our ",(0,ev.jsx)("button",{className:"text-teal-600 hover:underline",children:"Terms of Service"})," and ",(0,ev.jsx)("button",{className:"text-teal-600 hover:underline",children:"Privacy Policy"})]})]})})}function Nb(e){let{currentView:t,setCurrentView:n,userType:r}=e;const s=[{id:"browse",label:"Browse",icon:(0,ev.jsx)($y,{className:"w-5 h-5"}),activeColor:"teal"},{id:"add",label:"List",icon:(0,ev.jsx)(Jy,{className:"w-5 h-5"}),requiresLandlord:!0,activeColor:"rose"},{id:"favorites",label:"Saved",icon:(0,ev.jsx)(Yy.A,{className:"w-5 h-5"}),activeColor:"rose"},{id:"profile",label:"Profile",icon:(0,ev.jsx)(Uy.A,{className:"w-5 h-5"}),activeColor:"blue"}];return(0,ev.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-gray-100 px-4 py-2 z-20 md:hidden safe-area-bottom",children:(0,ev.jsx)("div",{className:"grid grid-cols-4 gap-1 max-w-md mx-auto",children:s.map(e=>{const s=e.requiresLandlord&&"landlord"!==r,i=t===e.id;return(0,ev.jsxs)("button",{type:"button",disabled:s,onClick:()=>!s&&n(e.id),className:"flex flex-col items-center gap-0.5 py-2 px-1 rounded-xl transition-all duration-200 ".concat(s?"opacity-40 cursor-not-allowed":"active:scale-95"," ").concat(i?"".concat({teal:"text-teal-600 bg-teal-50",rose:"text-rose-600 bg-rose-50",blue:"text-blue-600 bg-blue-50"}[e.activeColor]," font-semibold"):"text-gray-400 hover:text-gray-600 hover:bg-gray-50"),children:[(0,ev.jsx)("span",{className:"transition-transform duration-200 ".concat(i?"scale-110":""),children:e.icon}),(0,ev.jsx)("span",{className:"text-[10px] font-medium",children:e.label})]},e.id)})})})}const Sb=(0,Dy.A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);class kb extends r.Component{constructor(e){super(e),this.handleReload=()=>{window.location.reload()},this.handleGoHome=()=>{window.location.href="/"},this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("ErrorBoundary caught an error:",e,t)}render(){return this.state.hasError?(0,ev.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 to-gray-100 flex items-center justify-center p-4",children:(0,ev.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 p-8 max-w-md w-full text-center",children:[(0,ev.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-red-100 to-orange-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,ev.jsx)(Gy,{className:"w-10 h-10 text-red-500"})}),(0,ev.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Oops! Something went wrong"}),(0,ev.jsx)("p",{className:"text-gray-500 mb-6",children:"We're sorry, but something unexpected happened. Please try refreshing the page."}),(0,ev.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,ev.jsxs)("button",{onClick:this.handleGoHome,className:"flex items-center gap-2 px-5 py-2.5 bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-xl font-medium transition-colors",children:[(0,ev.jsx)(qy.A,{className:"w-4 h-4"}),"Go Home"]}),(0,ev.jsxs)("button",{onClick:this.handleReload,className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white rounded-xl font-semibold shadow-md transition-all",children:[(0,ev.jsx)(Sb,{className:"w-4 h-4"}),"Refresh Page"]})]}),!1]})}):this.props.children}}const Eb=kb,_b=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:s,getLCP:i,getTTFB:a}=t;n(e),r(e),s(e),i(e),a(e)})};s.createRoot(document.getElementById("root")).render((0,ev.jsx)(r.StrictMode,{children:(0,ev.jsx)(Eb,{children:(0,ev.jsx)(hb,{})})})),_b(),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").catch(e=>{console.warn("Service worker registration failed",e)})}),"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw-runtime.js").catch(e=>console.warn("Runtime SW failed",e))})})();
//# sourceMappingURL=main.a5aca4aa.js.map