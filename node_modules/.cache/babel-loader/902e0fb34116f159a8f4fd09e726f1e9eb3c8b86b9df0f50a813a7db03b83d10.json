{"ast":null,"code":"import _objectSpread from \"C:/Users/kutum/Documents/room-rental-platform/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport { createPortal } from 'react-dom';\nimport { useImperativeHandle, useEffect, useMemo, useRef, useContext, forwardRef, memo } from 'react';\nimport { applyReactStyle } from \"../utils/apply-react-style.js\";\nimport { MapContext } from \"./map.js\";\nimport { deepEqual } from \"../utils/deep-equal.js\";\nimport { compareClassNames } from \"../utils/compare-class-names.js\";\n/* eslint-disable complexity,max-statements */\nexport const Popup = memo(forwardRef((props, ref) => {\n  const {\n    map,\n    mapLib\n  } = useContext(MapContext);\n  const container = useMemo(() => {\n    return document.createElement('div');\n  }, []);\n  const thisRef = useRef({\n    props\n  });\n  const popup = useMemo(() => {\n    const options = _objectSpread({}, props);\n    const pp = new mapLib.Popup(options);\n    pp.setLngLat([props.longitude, props.latitude]);\n    pp.once('open', e => {\n      var _thisRef$current$prop, _thisRef$current$prop2;\n      (_thisRef$current$prop = (_thisRef$current$prop2 = thisRef.current.props).onOpen) === null || _thisRef$current$prop === void 0 || _thisRef$current$prop.call(_thisRef$current$prop2, e);\n    });\n    return pp;\n  }, []);\n  useEffect(() => {\n    const onClose = e => {\n      var _thisRef$current$prop3, _thisRef$current$prop4;\n      (_thisRef$current$prop3 = (_thisRef$current$prop4 = thisRef.current.props).onClose) === null || _thisRef$current$prop3 === void 0 || _thisRef$current$prop3.call(_thisRef$current$prop4, e);\n    };\n    popup.on('close', onClose);\n    popup.setDOMContent(container).addTo(map.getMap());\n    return () => {\n      // https://github.com/visgl/react-map-gl/issues/1825\n      // onClose should not be fired if the popup is removed by unmounting\n      // When using React strict mode, the component is mounted twice.\n      // Firing the onClose callback here would be a false signal to remove the component.\n      popup.off('close', onClose);\n      if (popup.isOpen()) {\n        popup.remove();\n      }\n    };\n  }, []);\n  useEffect(() => {\n    applyReactStyle(popup.getElement(), props.style);\n  }, [props.style]);\n  useImperativeHandle(ref, () => popup, []);\n  if (popup.isOpen()) {\n    const oldProps = thisRef.current.props;\n    if (popup.getLngLat().lng !== props.longitude || popup.getLngLat().lat !== props.latitude) {\n      popup.setLngLat([props.longitude, props.latitude]);\n    }\n    if (props.offset && !deepEqual(oldProps.offset, props.offset)) {\n      popup.setOffset(props.offset);\n    }\n    if (oldProps.anchor !== props.anchor || oldProps.maxWidth !== props.maxWidth) {\n      popup.options.anchor = props.anchor;\n      popup.setMaxWidth(props.maxWidth);\n    }\n    const classNameDiff = compareClassNames(oldProps.className, props.className);\n    if (classNameDiff) {\n      for (const c of classNameDiff) {\n        popup.toggleClassName(c);\n      }\n    }\n    thisRef.current.props = props;\n  }\n  return createPortal(props.children, container);\n}));","map":{"version":3,"names":["createPortal","useImperativeHandle","useEffect","useMemo","useRef","useContext","forwardRef","memo","applyReactStyle","MapContext","deepEqual","compareClassNames","Popup","props","ref","map","mapLib","container","document","createElement","thisRef","popup","options","_objectSpread","pp","setLngLat","longitude","latitude","once","e","_thisRef$current$prop","_thisRef$current$prop2","current","onOpen","call","onClose","_thisRef$current$prop3","_thisRef$current$prop4","on","setDOMContent","addTo","getMap","off","isOpen","remove","getElement","style","oldProps","getLngLat","lng","lat","offset","setOffset","anchor","maxWidth","setMaxWidth","classNameDiff","className","c","toggleClassName","children"],"sources":["C:\\Users\\kutum\\Documents\\room-rental-platform\\node_modules\\@vis.gl\\react-maplibre\\src\\components\\popup.ts"],"sourcesContent":["/* global document */\nimport * as React from 'react';\nimport {createPortal} from 'react-dom';\nimport {useImperativeHandle, useEffect, useMemo, useRef, useContext, forwardRef, memo} from 'react';\nimport {applyReactStyle} from '../utils/apply-react-style';\n\nimport type {PopupInstance, PopupOptions} from '../types/lib';\nimport type {PopupEvent} from '../types/events';\n\nimport {MapContext} from './map';\nimport {deepEqual} from '../utils/deep-equal';\nimport {compareClassNames} from '../utils/compare-class-names';\n\nexport type PopupProps = PopupOptions & {\n  /** Longitude of the anchor location */\n  longitude: number;\n  /** Latitude of the anchor location */\n  latitude: number;\n\n  /** CSS style override, applied to the control's container */\n  style?: React.CSSProperties;\n\n  onOpen?: (e: PopupEvent) => void;\n  onClose?: (e: PopupEvent) => void;\n  children?: React.ReactNode;\n};\n\n/* eslint-disable complexity,max-statements */\nexport const Popup = memo(\n  forwardRef((props: PopupProps, ref: React.Ref<PopupInstance>) => {\n    const {map, mapLib} = useContext(MapContext);\n    const container = useMemo(() => {\n      return document.createElement('div');\n    }, []);\n    const thisRef = useRef({props});\n\n    const popup: PopupInstance = useMemo(() => {\n      const options = {...props};\n      const pp = new mapLib.Popup(options);\n      pp.setLngLat([props.longitude, props.latitude]);\n      pp.once('open', e => {\n        thisRef.current.props.onOpen?.(e as PopupEvent);\n      });\n      return pp;\n    }, []);\n\n    useEffect(() => {\n      const onClose = e => {\n        thisRef.current.props.onClose?.(e as PopupEvent);\n      };\n      popup.on('close', onClose);\n      popup.setDOMContent(container).addTo(map.getMap());\n\n      return () => {\n        // https://github.com/visgl/react-map-gl/issues/1825\n        // onClose should not be fired if the popup is removed by unmounting\n        // When using React strict mode, the component is mounted twice.\n        // Firing the onClose callback here would be a false signal to remove the component.\n        popup.off('close', onClose);\n        if (popup.isOpen()) {\n          popup.remove();\n        }\n      };\n    }, []);\n\n    useEffect(() => {\n      applyReactStyle(popup.getElement(), props.style);\n    }, [props.style]);\n\n    useImperativeHandle(ref, () => popup, []);\n\n    if (popup.isOpen()) {\n      const oldProps = thisRef.current.props;\n      if (popup.getLngLat().lng !== props.longitude || popup.getLngLat().lat !== props.latitude) {\n        popup.setLngLat([props.longitude, props.latitude]);\n      }\n      if (props.offset && !deepEqual(oldProps.offset, props.offset)) {\n        popup.setOffset(props.offset);\n      }\n      if (oldProps.anchor !== props.anchor || oldProps.maxWidth !== props.maxWidth) {\n        popup.options.anchor = props.anchor;\n        popup.setMaxWidth(props.maxWidth);\n      }\n      const classNameDiff = compareClassNames(oldProps.className, props.className);\n      if (classNameDiff) {\n        for (const c of classNameDiff) {\n          popup.toggleClassName(c);\n        }\n      }\n      thisRef.current.props = props;\n    }\n\n    return createPortal(props.children, container);\n  })\n);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}