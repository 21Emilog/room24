{"ast":null,"code":"import { useImperativeHandle, useRef, useEffect, forwardRef, memo } from 'react';\nimport { applyReactStyle } from \"../utils/apply-react-style.js\";\nimport { useControl } from \"./use-control.js\";\nfunction _GeolocateControl(props, ref) {\n  const thisRef = useRef({\n    props\n  });\n  const ctrl = useControl(_ref => {\n    let {\n      mapLib\n    } = _ref;\n    const gc = new mapLib.GeolocateControl(props);\n    // Hack: fix GeolocateControl reuse\n    // When using React strict mode, the component is mounted twice.\n    // GeolocateControl's UI creation is asynchronous. Removing and adding it back causes the UI to be initialized twice.\n    const setupUI = gc._setupUI;\n    gc._setupUI = () => {\n      if (!gc._container.hasChildNodes()) {\n        setupUI();\n      }\n    };\n    gc.on('geolocate', e => {\n      var _thisRef$current$prop, _thisRef$current$prop2;\n      (_thisRef$current$prop = (_thisRef$current$prop2 = thisRef.current.props).onGeolocate) === null || _thisRef$current$prop === void 0 || _thisRef$current$prop.call(_thisRef$current$prop2, e);\n    });\n    gc.on('error', e => {\n      var _thisRef$current$prop3, _thisRef$current$prop4;\n      (_thisRef$current$prop3 = (_thisRef$current$prop4 = thisRef.current.props).onError) === null || _thisRef$current$prop3 === void 0 || _thisRef$current$prop3.call(_thisRef$current$prop4, e);\n    });\n    gc.on('outofmaxbounds', e => {\n      var _thisRef$current$prop5, _thisRef$current$prop6;\n      (_thisRef$current$prop5 = (_thisRef$current$prop6 = thisRef.current.props).onOutOfMaxBounds) === null || _thisRef$current$prop5 === void 0 || _thisRef$current$prop5.call(_thisRef$current$prop6, e);\n    });\n    gc.on('trackuserlocationstart', e => {\n      var _thisRef$current$prop7, _thisRef$current$prop8;\n      (_thisRef$current$prop7 = (_thisRef$current$prop8 = thisRef.current.props).onTrackUserLocationStart) === null || _thisRef$current$prop7 === void 0 || _thisRef$current$prop7.call(_thisRef$current$prop8, e);\n    });\n    gc.on('trackuserlocationend', e => {\n      var _thisRef$current$prop9, _thisRef$current$prop0;\n      (_thisRef$current$prop9 = (_thisRef$current$prop0 = thisRef.current.props).onTrackUserLocationEnd) === null || _thisRef$current$prop9 === void 0 || _thisRef$current$prop9.call(_thisRef$current$prop0, e);\n    });\n    return gc;\n  }, {\n    position: props.position\n  });\n  thisRef.current.props = props;\n  useImperativeHandle(ref, () => ctrl, []);\n  useEffect(() => {\n    applyReactStyle(ctrl._container, props.style);\n  }, [props.style]);\n  return null;\n}\nexport const GeolocateControl = memo(forwardRef(_GeolocateControl));","map":{"version":3,"names":["useImperativeHandle","useRef","useEffect","forwardRef","memo","applyReactStyle","useControl","_GeolocateControl","props","ref","thisRef","ctrl","_ref","mapLib","gc","GeolocateControl","setupUI","_setupUI","_container","hasChildNodes","on","e","_thisRef$current$prop","_thisRef$current$prop2","current","onGeolocate","call","_thisRef$current$prop3","_thisRef$current$prop4","onError","_thisRef$current$prop5","_thisRef$current$prop6","onOutOfMaxBounds","_thisRef$current$prop7","_thisRef$current$prop8","onTrackUserLocationStart","_thisRef$current$prop9","_thisRef$current$prop0","onTrackUserLocationEnd","position","style"],"sources":["C:\\Users\\kutum\\Documents\\room-rental-platform\\node_modules\\@vis.gl\\react-maplibre\\src\\components\\geolocate-control.ts"],"sourcesContent":["import * as React from 'react';\nimport {useImperativeHandle, useRef, useEffect, forwardRef, memo} from 'react';\nimport {applyReactStyle} from '../utils/apply-react-style';\nimport {useControl} from './use-control';\n\nimport type {\n  ControlPosition,\n  GeolocateControlInstance,\n  GeolocateControlOptions\n} from '../types/lib';\nimport type {GeolocateEvent, GeolocateResultEvent, GeolocateErrorEvent} from '../types/events';\n\nexport type GeolocateControlProps = GeolocateControlOptions & {\n  /** Placement of the control relative to the map. */\n  position?: ControlPosition;\n  /** CSS style override, applied to the control's container */\n  style?: React.CSSProperties;\n\n  /** Called on each Geolocation API position update that returned as success. */\n  onGeolocate?: (e: GeolocateResultEvent) => void;\n  /** Called on each Geolocation API position update that returned as an error. */\n  onError?: (e: GeolocateErrorEvent) => void;\n  /** Called on each Geolocation API position update that returned as success but user position\n   * is out of map `maxBounds`. */\n  onOutOfMaxBounds?: (e: GeolocateResultEvent) => void;\n  /** Called when the GeolocateControl changes to the active lock state. */\n  onTrackUserLocationStart?: (e: GeolocateEvent) => void;\n  /** Called when the GeolocateControl changes to the background state. */\n  onTrackUserLocationEnd?: (e: GeolocateEvent) => void;\n};\n\nfunction _GeolocateControl(props: GeolocateControlProps, ref: React.Ref<GeolocateControlInstance>) {\n  const thisRef = useRef({props});\n\n  const ctrl = useControl(\n    ({mapLib}) => {\n      const gc = new mapLib.GeolocateControl(props);\n\n      // Hack: fix GeolocateControl reuse\n      // When using React strict mode, the component is mounted twice.\n      // GeolocateControl's UI creation is asynchronous. Removing and adding it back causes the UI to be initialized twice.\n      const setupUI = gc._setupUI;\n      gc._setupUI = () => {\n        if (!gc._container.hasChildNodes()) {\n          setupUI();\n        }\n      };\n\n      gc.on('geolocate', e => {\n        thisRef.current.props.onGeolocate?.(e as GeolocateResultEvent);\n      });\n      gc.on('error', e => {\n        thisRef.current.props.onError?.(e as GeolocateErrorEvent);\n      });\n      gc.on('outofmaxbounds', e => {\n        thisRef.current.props.onOutOfMaxBounds?.(e as GeolocateResultEvent);\n      });\n      gc.on('trackuserlocationstart', e => {\n        thisRef.current.props.onTrackUserLocationStart?.(e as GeolocateEvent);\n      });\n      gc.on('trackuserlocationend', e => {\n        thisRef.current.props.onTrackUserLocationEnd?.(e as GeolocateEvent);\n      });\n\n      return gc;\n    },\n    {position: props.position}\n  );\n\n  thisRef.current.props = props;\n\n  useImperativeHandle(ref, () => ctrl, []);\n\n  useEffect(() => {\n    applyReactStyle(ctrl._container, props.style);\n  }, [props.style]);\n\n  return null;\n}\n\nexport const GeolocateControl = memo(forwardRef(_GeolocateControl));\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}