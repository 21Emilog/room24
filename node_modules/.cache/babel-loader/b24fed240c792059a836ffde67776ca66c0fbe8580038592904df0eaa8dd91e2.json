{"ast":null,"code":"import _objectSpread from\"C:/Users/kutum/Documents/room-rental-platform/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{MapContainer,TileLayer,Marker}from'react-leaflet';import{Home,MessageSquare,PlusCircle,Search,MapPin,X,Send,ArrowLeft,User,Phone,Mail,Edit,Menu,CheckCircle}from'lucide-react';import MapView from'./MapView';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function RentalPlatform(){const[currentView,setCurrentView]=useState('browse');const[mapView,setMapView]=useState(false);const[userType,setUserType]=useState(null);const[listings,setListings]=useState([]);const[conversations,setConversations]=useState([]);const[selectedListing,setSelectedListing]=useState(null);const[selectedConversation,setSelectedConversation]=useState(null);const[searchLocation,setSearchLocation]=useState('');const[priceRange,setPriceRange]=useState([0,10000]);const[selectedAmenities,setSelectedAmenities]=useState([]);const[sortBy,setSortBy]=useState('newest');const[currentUser,setCurrentUser]=useState(null);const[showAuthModal,setShowAuthModal]=useState(false);const[authDefaultType,setAuthDefaultType]=useState('renter');const[nearbyMode,setNearbyMode]=useState(false);const[nearbyRadius,setNearbyRadius]=useState(5);// km\nconst[userLocation,setUserLocation]=useState(null);const[nearbyStatus,setNearbyStatus]=useState('');const[showLocationConsent,setShowLocationConsent]=useState(false);const[showMobileMenu,setShowMobileMenu]=useState(false);const[toast,setToast]=useState(null);const openAuthModal=function(){let type=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'renter';setAuthDefaultType(type);setShowAuthModal(true);};useEffect(()=>{loadData();},[]);// Guard: if someone navigates to 'add' without landlord auth, prompt to sign in\nuseEffect(()=>{if(currentView==='add'){if(!currentUser){openAuthModal('landlord');setCurrentView('browse');}else if(userType!=='landlord'){// Not a landlord - prompt to become one\nopenAuthModal('landlord');setCurrentView('browse');}else if(!currentUser.landlordComplete){// Landlord but hasn't completed onboarding\nsetCurrentView('landlord-onboarding');}}},[currentView,currentUser,userType]);const loadData=async()=>{try{const listingsResult=localStorage.getItem('listings');const conversationsResult=localStorage.getItem('conversations');const userResult=localStorage.getItem('current-user');if(listingsResult)setListings(JSON.parse(listingsResult));if(conversationsResult)setConversations(JSON.parse(conversationsResult));if(userResult){const user=JSON.parse(userResult);setCurrentUser(user);setUserType(user.type);}}catch(error){console.log('No existing data found, starting fresh');// Add sample listings for testing the map\nconst sampleListings=[{id:'listing-1',title:'Cozy Room in Soweto',price:2500,location:'Soweto, Johannesburg',description:'Comfortable room with bathroom and kitchen access',photos:[],status:'available',availableDate:new Date().toISOString(),amenities:['WiFi','Kitchen'],landlordId:'landlord-1',landlordName:'John Smith',landlordPhone:'+27 123 456 7890',landlordEmail:'john@example.com',landlordPhoto:'',createdAt:new Date().toISOString()},{id:'listing-2',title:'Modern Apartment in Sandton',price:4500,location:'Sandton, Johannesburg',description:'Luxurious apartment with parking and security',photos:[],status:'available',availableDate:new Date().toISOString(),amenities:['WiFi','Parking','Air Conditioning'],landlordId:'landlord-2',landlordName:'Jane Doe',landlordPhone:'+27 987 654 3210',landlordEmail:'jane@example.com',landlordPhoto:'',createdAt:new Date().toISOString()},{id:'listing-3',title:'Studio in Midrand',price:3200,location:'Midrand, Johannesburg',description:'Spacious studio flat with laundry facilities',photos:[],status:'available',availableDate:new Date().toISOString(),amenities:['Laundry','WiFi'],landlordId:'landlord-3',landlordName:'Mike Johnson',landlordPhone:'+27 555 555 5555',landlordEmail:'mike@example.com',landlordPhoto:'',createdAt:new Date().toISOString()}];setListings(sampleListings);}};// Haversine formula to compute distance in kilometers between two coords\nconst haversineDistance=(lat1,lon1,lat2,lon2)=>{const toRad=v=>v*Math.PI/180;const R=6371;// km\nconst dLat=toRad(lat2-lat1);const dLon=toRad(lon2-lon1);const a=Math.sin(dLat/2)*Math.sin(dLat/2)+Math.cos(toRad(lat1))*Math.cos(toRad(lat2))*Math.sin(dLon/2)*Math.sin(dLon/2);const c=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return R*c;};const handleFindNearby=()=>{if(!navigator.geolocation){setNearbyStatus('Geolocation not supported');return;}// Show consent modal before accessing location\nsetShowLocationConsent(true);};const handleLocationConsentAccept=()=>{setShowLocationConsent(false);setNearbyStatus('Locating...');navigator.geolocation.getCurrentPosition(pos=>{const lat=pos.coords.latitude;const lon=pos.coords.longitude;setUserLocation({lat,lon});setNearbyMode(true);setNearbyStatus('Nearby mode enabled');setTimeout(()=>setNearbyStatus(''),2000);},err=>{console.error('Geolocation error',err);setNearbyStatus('Could not get location');},{enableHighAccuracy:true,timeout:10000});};const clearNearby=()=>{setNearbyMode(false);setUserLocation(null);setNearbyStatus('');};// Toast notification helper\nconst showToast=function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'info';let title=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';setToast({message,type,title});setTimeout(()=>setToast(null),5000);};const saveListings=async newListings=>{try{localStorage.setItem('listings',JSON.stringify(newListings));setListings(newListings);}catch(error){console.error('Error saving listings:',error);}};const saveConversations=async newConversations=>{try{localStorage.setItem('conversations',JSON.stringify(newConversations));setConversations(newConversations);}catch(error){console.error('Error saving conversations:',error);}};const saveSubscriptions=async subscriptions=>{try{localStorage.setItem('subscriptions',JSON.stringify(subscriptions));}catch(error){console.error('Error saving subscriptions:',error);}};const getSubscriptions=async()=>{try{const res=localStorage.getItem('subscriptions');return res?JSON.parse(res):{};}catch(err){console.error('Error loading subscriptions',err);}return{};};const subscribeToArea=async(userId,area)=>{if(!userId){openAuthModal('renter');return;}if(!area||area.trim()===''){alert('Please enter a location to subscribe to.');return;}try{const subs=await getSubscriptions();subs[userId]=subs[userId]||[];if(!subs[userId].includes(area)){subs[userId].push(area);await saveSubscriptions(subs);alert(\"Subscribed to updates for \".concat(area));}else{alert(\"You are already subscribed to \".concat(area));}}catch(err){console.error('Subscribe failed',err);alert('Could not subscribe. Please try again.');}};const handleProfileSetup=async profileData=>{try{const userId=\"user-\".concat(Date.now());const user=_objectSpread(_objectSpread({id:userId,type:userType},profileData),{},{createdAt:new Date().toISOString()});localStorage.setItem('current-user',JSON.stringify(user));setCurrentUser(user);showToast('Profile created successfully!','success','Welcome!');setCurrentView('browse');}catch(error){console.error('Error saving profile:',error);// Still set the user locally even if storage fails\nconst userId=\"user-\".concat(Date.now());const user=_objectSpread(_objectSpread({id:userId,type:userType},profileData),{},{createdAt:new Date().toISOString()});setCurrentUser(user);showToast('Profile created (data may not be persisted)','error');setCurrentView('browse');}};const handleUpdateProfile=async profileData=>{try{const updatedUser=_objectSpread(_objectSpread({},currentUser),profileData);localStorage.setItem('current-user',JSON.stringify(updatedUser));setCurrentUser(updatedUser);showToast('Profile updated successfully!','success');setCurrentView('browse');}catch(error){console.error('Error updating profile:',error);const updatedUser=_objectSpread(_objectSpread({},currentUser),profileData);setCurrentUser(updatedUser);showToast('Profile updated (data may not be persisted)','error');setCurrentView('browse');}};const handleQuickAuth=async profileData=>{// Lightweight auth (used by AuthModal) - create and persist a user\ntry{const userId=\"user-\".concat(Date.now());const user={id:userId,type:profileData.type||'renter',name:profileData.name,phone:profileData.phone||'',email:profileData.email||'',photo:profileData.photo||'',createdAt:new Date().toISOString()};localStorage.setItem('current-user',JSON.stringify(user));setCurrentUser(user);setUserType(user.type);setShowAuthModal(false);// If landlord, route to onboarding to complete setup before posting\nif(user.type==='landlord'){setCurrentView('landlord-onboarding');}else{setCurrentView('browse');}}catch(err){console.error('Auth failed',err);}};const handleCompleteOnboarding=async onboardData=>{try{const updated=_objectSpread(_objectSpread({},currentUser),{},{landlordComplete:true,landlordInfo:onboardData});localStorage.setItem('current-user',JSON.stringify(updated));setCurrentUser(updated);setCurrentView('browse');}catch(err){console.error('Onboarding save failed',err);setCurrentUser(_objectSpread(_objectSpread({},currentUser),{},{landlordComplete:true,landlordInfo:onboardData}));setCurrentView('browse');}};const handleAddListing=async listingData=>{var _listingData$latitude,_listingData$longitud;const newListing={id:\"listing-\".concat(Date.now()),title:listingData.title,price:listingData.price,location:listingData.location,description:listingData.description,photos:listingData.photos||[],status:listingData.status||'available',availableDate:listingData.availableDate||new Date().toISOString(),amenities:listingData.amenities||[],latitude:(_listingData$latitude=listingData.latitude)!==null&&_listingData$latitude!==void 0?_listingData$latitude:null,longitude:(_listingData$longitud=listingData.longitude)!==null&&_listingData$longitud!==void 0?_listingData$longitud:null,landlordId:currentUser.id,landlordName:currentUser.name,landlordPhone:currentUser.phone,landlordEmail:currentUser.email,landlordPhoto:currentUser.photo,createdAt:new Date().toISOString()};const updatedListings=[...listings,newListing];await saveListings(updatedListings);showToast('Listing created successfully!','success','Success!');setCurrentView('browse');// Scroll to top to see new listing\nwindow.scrollTo({top:0,behavior:'smooth'});};const handleSendMessage=async(listingId,message)=>{const conversationId=\"\".concat(currentUser.id,\"-\").concat(listingId);const existingConv=conversations.find(c=>c.id===conversationId);const newMessage={id:\"msg-\".concat(Date.now()),sender:currentUser.type,text:message,timestamp:new Date().toISOString()};let updatedConversations;if(existingConv){updatedConversations=conversations.map(c=>c.id===conversationId?_objectSpread(_objectSpread({},c),{},{messages:[...c.messages,newMessage]}):c);}else{const newConv={id:conversationId,listingId,renterId:currentUser.id,messages:[newMessage]};updatedConversations=[...conversations,newConv];}await saveConversations(updatedConversations);};const filteredListings=listings.map(listing=>{// attach distance if we have userLocation\nif(userLocation&&listing.latitude!=null&&listing.longitude!=null){const d=haversineDistance(userLocation.lat,userLocation.lon,listing.latitude,listing.longitude);return _objectSpread(_objectSpread({},listing),{},{__distanceKm:d});}if(userLocation&&(listing.latitude==null||listing.longitude==null)){// try to geocode-less accurate: leave distance undefined\nreturn _objectSpread({},listing);}return _objectSpread({},listing);}).filter(listing=>{const matchesLocation=!searchLocation||(listing.location||'').toLowerCase().includes(searchLocation.toLowerCase());const price=parseFloat(listing.price);const matchesPrice=price>=priceRange[0]&&price<=priceRange[1];const matchesAmenities=selectedAmenities.length===0||selectedAmenities.every(amenity=>{var _listing$amenities;return(_listing$amenities=listing.amenities)===null||_listing$amenities===void 0?void 0:_listing$amenities.includes(amenity);});let passesNearby=true;if(nearbyMode&&userLocation){// require listing to have coordinates to be included\nif(listing.latitude!=null&&listing.longitude!=null){var _listing$__distanceKm;const d=(_listing$__distanceKm=listing.__distanceKm)!==null&&_listing$__distanceKm!==void 0?_listing$__distanceKm:haversineDistance(userLocation.lat,userLocation.lon,listing.latitude,listing.longitude);passesNearby=d<=nearbyRadius;}else{passesNearby=false;}}return matchesLocation&&matchesPrice&&matchesAmenities&&passesNearby;}).sort((a,b)=>{if(nearbyMode&&userLocation){var _a$__distanceKm,_b$__distanceKm;const da=(_a$__distanceKm=a.__distanceKm)!==null&&_a$__distanceKm!==void 0?_a$__distanceKm:Infinity;const db=(_b$__distanceKm=b.__distanceKm)!==null&&_b$__distanceKm!==void 0?_b$__distanceKm:Infinity;return da-db;}if(sortBy==='newest'){return new Date(b.createdAt)-new Date(a.createdAt);}else if(sortBy==='cheapest'){return parseFloat(a.price)-parseFloat(b.price);}else if(sortBy==='expensive'){return parseFloat(b.price)-parseFloat(a.price);}return 0;});const userConversations=currentUser?conversations.filter(conv=>{if(userType==='landlord'){const listing=listings.find(l=>l.id===conv.listingId);return listing&&listing.landlordId===currentUser.id;}return conv.renterId===currentUser.id;}):[];// Allow guests to land on Browse by default. If userType isn't set,\n// show a gentle callout in the header (below) so users can pick a role\n// when they want to post or set up their profile.\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gray-50\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 py-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600\",children:\"Room\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"24\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"hidden md:flex items-center gap-4\",children:[!currentUser&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>openAuthModal('renter'),className:\"text-gray-600 hover:text-gray-800 px-3 py-2 rounded-lg\",children:\"Sign in\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>openAuthModal('landlord'),className:\"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg\",children:\"List Your Room\"})]}),currentUser&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-sm mr-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-semibold\",children:currentUser.name.charAt(0)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-800\",children:currentUser.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:currentUser.type==='landlord'?'Property Owner':'Looking for a Room'})]})]}),userConversations.length>0&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentView('messages'),className:\"relative p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition\",\"aria-label\":\"Messages\",children:[/*#__PURE__*/_jsx(MessageSquare,{className:\"w-6 h-6\"}),userConversations.length>0&&/*#__PURE__*/_jsx(\"span\",{className:\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold\",children:userConversations.length})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('profile'),className:\"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition\",\"aria-label\":\"Profile\",children:/*#__PURE__*/_jsx(User,{className:\"w-6 h-6\"})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex md:hidden items-center gap-2\",children:!currentUser?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>openAuthModal('renter'),className:\"text-sm text-gray-600 hover:text-gray-800 px-2 py-1\",children:\"Sign in\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>openAuthModal('landlord'),className:\"text-sm bg-red-500 hover:bg-red-600 text-white px-3 py-1.5 rounded\",children:\"List Room\"})]}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowMobileMenu(!showMobileMenu),className:\"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition\",\"aria-label\":\"Menu\",children:showMobileMenu?/*#__PURE__*/_jsx(X,{className:\"w-6 h-6\"}):/*#__PURE__*/_jsx(Menu,{className:\"w-6 h-6\"})})})]}),currentUser&&showMobileMenu&&/*#__PURE__*/_jsxs(\"div\",{className:\"md:hidden mt-3 pb-3 border-t border-gray-200 pt-3 animate-slideDown\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-4 pb-3 border-b border-gray-100\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-semibold\",children:currentUser.name.charAt(0)}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-medium text-gray-800\",children:currentUser.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:currentUser.type==='landlord'?'Property Owner':'Looking for a Room'})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[userConversations.length>0&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setCurrentView('messages');setShowMobileMenu(false);},className:\"w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition\",children:[/*#__PURE__*/_jsx(MessageSquare,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Messages\"}),userConversations.length>0&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-auto bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold\",children:userConversations.length})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>{setCurrentView('profile');setShowMobileMenu(false);},className:\"w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition\",children:[/*#__PURE__*/_jsx(User,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Profile\"})]})]})]})]})}),toast&&/*#__PURE__*/_jsxs(\"div\",{className:\"fixed top-20 right-4 z-50 bg-white border-l-4 \".concat(toast.type==='success'?'border-green-500':toast.type==='error'?'border-red-500':'border-blue-500',\" rounded shadow-lg p-4 animate-slideInRight flex items-start gap-3 max-w-sm\"),children:[toast.type==='success'&&/*#__PURE__*/_jsx(CheckCircle,{className:\"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[toast.title&&/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-800 mb-1\",children:toast.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:toast.message})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setToast(null),className:\"text-gray-400 hover:text-gray-600\",\"aria-label\":\"Close notification\",children:/*#__PURE__*/_jsx(X,{className:\"w-4 h-4\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto pb-20\",children:[currentView==='setup-profile'&&/*#__PURE__*/_jsx(ProfileSetupView,{onSubmit:handleProfileSetup,userType:userType}),currentView==='profile'&&currentUser&&/*#__PURE__*/_jsx(ProfileView,{user:currentUser,onEdit:()=>setCurrentView('edit-profile')}),currentView==='edit-profile'&&currentUser&&/*#__PURE__*/_jsx(EditProfileView,{user:currentUser,onSubmit:handleUpdateProfile,onCancel:()=>setCurrentView('profile')}),currentView==='landlord-onboarding'&&currentUser&&userType==='landlord'&&/*#__PURE__*/_jsx(LandlordOnboardingView,{onComplete:handleCompleteOnboarding,onCancel:()=>setCurrentView('browse'),currentUser:currentUser}),currentView==='browse'&&/*#__PURE__*/_jsx(BrowseView,{listings:filteredListings,searchLocation:searchLocation,setSearchLocation:setSearchLocation,priceRange:priceRange,setPriceRange:setPriceRange,selectedAmenities:selectedAmenities,setSelectedAmenities:setSelectedAmenities,sortBy:sortBy,setSortBy:setSortBy,mapView:mapView,setMapView:setMapView,onSelectListing:setSelectedListing,setCurrentView:setCurrentView,currentUser:currentUser,onRequireAuth:openAuthModal,subscribeToArea:subscribeToArea,onFindNearby:handleFindNearby,nearbyRadius:nearbyRadius,setNearbyRadius:setNearbyRadius,nearbyMode:nearbyMode,clearNearby:clearNearby,userLocation:userLocation,nearbyStatus:nearbyStatus}),currentView==='messages'&&/*#__PURE__*/_jsx(MessagesView,{conversations:userConversations,listings:listings,userType:userType,onSelectConversation:setSelectedConversation}),currentView==='add'&&/*#__PURE__*/_jsx(AddListingView,{onSubmit:handleAddListing,onCancel:()=>setCurrentView('browse'),currentUser:currentUser,userType:userType,onRequireAuth:openAuthModal,onRequireOnboarding:()=>setCurrentView('landlord-onboarding')}),currentView==='my-listings'&&currentUser&&userType==='landlord'&&/*#__PURE__*/_jsx(MyListingsView,{listings:listings.filter(l=>l.landlordId===currentUser.id),onDelete:async id=>{const updated=listings.filter(l=>l.id!==id);await saveListings(updated);}})]}),selectedListing&&/*#__PURE__*/_jsx(ListingDetailModal,{listing:selectedListing,landlord:{name:selectedListing.landlordName,phone:selectedListing.landlordPhone,email:selectedListing.landlordEmail,photo:selectedListing.landlordPhoto},onClose:()=>setSelectedListing(null),onSendMessage:handleSendMessage,userType:userType,currentUser:currentUser,onRequireAuth:openAuthModal}),selectedConversation&&/*#__PURE__*/_jsx(ConversationModal,{conversation:selectedConversation,listing:listings.find(l=>l.id===selectedConversation.listingId),onClose:()=>setSelectedConversation(null),onSendMessage:handleSendMessage}),showAuthModal&&/*#__PURE__*/_jsx(AuthModal,{defaultType:authDefaultType,onClose:()=>setShowAuthModal(false),onSubmit:handleQuickAuth}),/*#__PURE__*/_jsx(BottomNav,{currentView:currentView,setCurrentView:setCurrentView,userType:userType,messageCount:userConversations.length}),showLocationConsent&&/*#__PURE__*/_jsx(LocationConsentModal,{onAccept:handleLocationConsentAccept,onDecline:()=>setShowLocationConsent(false)}),/*#__PURE__*/_jsx(\"footer\",{className:\"bg-gray-800 text-gray-300 py-8 mt-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-3 gap-8 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-white font-bold text-lg mb-3\",children:\"Room24\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-400\",children:\"Find your perfect room in South Africa. Connect with verified landlords and renters.\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-white font-semibold mb-3\",children:\"Legal\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"space-y-2 text-sm\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#privacy\",className:\"hover:text-white transition\",children:\"Privacy Policy\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#terms\",className:\"hover:text-white transition\",children:\"Terms of Service\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#cookies\",className:\"hover:text-white transition\",children:\"Cookie Policy\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"text-white font-semibold mb-3\",children:\"Contact\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"space-y-2 text-sm\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"mailto:support@room24.co.za\",className:\"hover:text-white transition\",children:\"support@room24.co.za\"})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"a\",{href:\"#help\",className:\"hover:text-white transition\",children:\"Help Center\"})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-gray-700 pt-6 text-sm text-gray-400\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\xA9 \",new Date().getFullYear(),\" Room24. All rights reserved.\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-2\",children:\"By using this site, you agree to our use of location services and cookies for improved user experience.\"})]})]})})]});}function ProfileSetupView(_ref){let{onSubmit,userType}=_ref;const[formData,setFormData]=useState({name:'',phone:'',email:'',photo:''});const handlePhotoUpload=e=>{const file=e.target.files[0];if(file){const reader=new FileReader();reader.onloadend=()=>{setFormData(_objectSpread(_objectSpread({},formData),{},{photo:reader.result}));};reader.readAsDataURL(file);}};const handleSubmit=()=>{if(formData.name&&formData.phone&&formData.email){onSubmit(formData);}};return/*#__PURE__*/_jsx(\"div\",{className:\"p-4 min-h-screen bg-gray-50 pb-20\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-2xl mx-auto mt-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-gray-800 mb-2\",children:\"Complete Your Profile\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Help others know who you are\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[formData.photo?/*#__PURE__*/_jsx(\"img\",{src:formData.photo,alt:\"Profile\",className:\"w-32 h-32 rounded-full object-cover border-4 border-blue-200 shadow-lg\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-32 h-32 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center border-4 border-blue-200 shadow-lg\",children:/*#__PURE__*/_jsx(User,{className:\"w-16 h-16 text-blue-600\"})}),/*#__PURE__*/_jsxs(\"label\",{className:\"absolute bottom-0 right-0 bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full cursor-pointer shadow-lg transition group\",children:[/*#__PURE__*/_jsx(Edit,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handlePhotoUpload,className:\"hidden\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Full Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:formData.name,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{name:e.target.value})),placeholder:\"Enter your full name\",className:\"w-full px-4 py-3 border border-gray-300 bg-white text-gray-800 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition placeholder-gray-400\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Phone Number *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Phone,{className:\"absolute left-4 top-3.5 w-5 h-5 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",required:true,value:formData.phone,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{phone:e.target.value})),placeholder:\"e.g., +27 12 345 6789\",className:\"w-full pl-11 pr-4 py-3 border border-gray-300 bg-white text-gray-800 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition placeholder-gray-400\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Email Address *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Mail,{className:\"absolute left-4 top-3.5 w-5 h-5 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",required:true,value:formData.email,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{email:e.target.value})),placeholder:\"your.email@example.com\",className:\"w-full pl-11 pr-4 py-3 border border-gray-300 bg-white text-gray-800 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition placeholder-gray-400\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition mt-8 shadow-sm\",children:\"Complete Setup\"})]})]})})});}function ProfileView(_ref2){let{user,onEdit}=_ref2;return/*#__PURE__*/_jsx(\"div\",{className:\"p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6 max-w-xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800\",children:\"My Profile\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:onEdit,className:\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition flex items-center gap-2\",children:[/*#__PURE__*/_jsx(Edit,{className:\"w-4 h-4\"}),\"Edit\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center mb-6\",children:[user.photo?/*#__PURE__*/_jsx(\"img\",{src:user.photo,alt:\"Profile\",className:\"w-32 h-32 rounded-full object-cover border-4 border-blue-500 mb-4\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center border-4 border-gray-300 mb-4\",children:/*#__PURE__*/_jsx(User,{className:\"w-16 h-16 text-gray-400\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-800\",children:user.name}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-block mt-2 px-4 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-semibold\",children:user.type==='landlord'?'Landlord':'Renter'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-600\",children:[/*#__PURE__*/_jsx(Phone,{className:\"w-5 h-5 mr-3 text-blue-600\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mb-1\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-800\",children:user.phone})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-600\",children:[/*#__PURE__*/_jsx(Mail,{className:\"w-5 h-5 mr-3 text-blue-600\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mb-1\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-800\",children:user.email})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 rounded-lg p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-600\",children:[/*#__PURE__*/_jsx(User,{className:\"w-5 h-5 mr-3 text-blue-600\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mb-1\",children:\"Member Since\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-800\",children:new Date(user.createdAt).toLocaleDateString()})]})]})})]})]})});}function LandlordOnboardingView(_ref3){let{onComplete,onCancel,currentUser}=_ref3;const[form,setForm]=useState({businessName:(currentUser===null||currentUser===void 0?void 0:currentUser.name)||'',bankDetails:'',idNumber:'',agree:false});const handleSubmit=()=>{if(!form.businessName||!form.agree){alert('Please provide a display name and agree to the terms.');return;}onComplete(form);};return/*#__PURE__*/_jsx(\"div\",{className:\"p-4 min-h-screen bg-gray-50 pb-20\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-2xl mx-auto mt-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-6 mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 rounded-full bg-blue-50 flex items-center justify-center text-blue-600 text-2xl font-bold\",children:currentUser&&currentUser.name?currentUser.name.charAt(0):'L'}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-gray-800\",children:[\"Welcome, \",(currentUser===null||currentUser===void 0?void 0:currentUser.name)||'Landlord']}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"A few details to get your listings live and increase trust with renters.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-1\",children:\"Display Name *\"}),/*#__PURE__*/_jsx(\"input\",{value:form.businessName,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{businessName:e.target.value})),className:\"w-full px-4 py-3 border border-gray-300 rounded-lg\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"This name is shown to renters on your listings and messages.\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-1\",children:\"How do you want to receive payments?\"}),/*#__PURE__*/_jsx(\"input\",{value:form.bankDetails,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{bankDetails:e.target.value})),placeholder:\"Bank account or payment details (optional)\",className:\"w-full px-4 py-3 border border-gray-300 rounded-lg\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-1\",children:\"ID Number (optional)\"}),/*#__PURE__*/_jsx(\"input\",{value:form.idNumber,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{idNumber:e.target.value})),className:\"w-full px-4 py-3 border border-gray-300 rounded-lg\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:form.agree,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{agree:e.target.checked}))}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600\",children:[\"I confirm I am authorised to list these properties and agree to the \",/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:e=>e.preventDefault(),className:\"text-blue-600 underline p-0\",children:\"terms of service\"}),\".\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"flex-1 bg-gray-100 hover:bg-gray-200 py-3 rounded\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 rounded\",children:\"Complete and Start Listing\"})]})]})]})})});}function EditProfileView(_ref4){let{user,onSubmit,onCancel}=_ref4;const[formData,setFormData]=useState({name:user.name||'',phone:user.phone||'',email:user.email||'',photo:user.photo||''});const handlePhotoUpload=e=>{const file=e.target.files[0];if(file){const reader=new FileReader();reader.onloadend=()=>{setFormData(_objectSpread(_objectSpread({},formData),{},{photo:reader.result}));};reader.readAsDataURL(file);}};const handleSubmit=()=>{if(formData.name&&formData.phone&&formData.email){onSubmit(formData);}};return/*#__PURE__*/_jsx(\"div\",{className:\"p-4 min-h-screen bg-gray-50 pb-20\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-2xl mx-auto mt-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-gray-800\",children:\"Edit Profile\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"text-gray-400 hover:text-gray-600 transition\",children:/*#__PURE__*/_jsx(X,{className:\"w-6 h-6\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[formData.photo?/*#__PURE__*/_jsx(\"img\",{src:formData.photo,alt:\"Profile\",className:\"w-32 h-32 rounded-full object-cover border-4 border-blue-200 shadow-lg\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-32 h-32 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center border-4 border-blue-200 shadow-lg\",children:/*#__PURE__*/_jsx(User,{className:\"w-16 h-16 text-blue-600\"})}),/*#__PURE__*/_jsxs(\"label\",{className:\"absolute bottom-0 right-0 bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full cursor-pointer shadow-lg transition\",children:[/*#__PURE__*/_jsx(Edit,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handlePhotoUpload,className:\"hidden\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:formData.name,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{name:e.target.value})),className:\"w-full px-4 py-3 border border-gray-300 bg-white text-gray-800 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition placeholder-gray-400\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Phone Number\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Phone,{className:\"absolute left-4 top-3.5 w-5 h-5 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",required:true,value:formData.phone,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{phone:e.target.value})),className:\"w-full pl-11 pr-4 py-3 border border-gray-300 bg-white text-gray-800 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition placeholder-gray-400\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Email Address\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Mail,{className:\"absolute left-4 top-3.5 w-5 h-5 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",required:true,value:formData.email,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{email:e.target.value})),className:\"w-full pl-11 pr-4 py-3 border border-gray-300 bg-white text-gray-800 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition placeholder-gray-400\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 pt-6 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-3 rounded-lg transition\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition shadow-sm\",children:\"Save Changes\"})]})]})]})})});}function BrowseView(_ref5){let{listings,searchLocation,setSearchLocation,priceRange,setPriceRange,selectedAmenities,setSelectedAmenities,sortBy,setSortBy,mapView,setMapView,onSelectListing,setCurrentView,currentUser,onRequireAuth,subscribeToArea,onFindNearby,nearbyRadius,setNearbyRadius,nearbyMode,clearNearby,userLocation,nearbyStatus}=_ref5;const[showAdvancedFilters,setShowAdvancedFilters]=useState(false);const[isDesktop,setIsDesktop]=useState(typeof window!=='undefined'?window.innerWidth>=1024:false);useEffect(()=>{const handleResize=()=>setIsDesktop(window.innerWidth>=1024);window.addEventListener('resize',handleResize);return()=>window.removeEventListener('resize',handleResize);},[]);// Sidebar navigation items (desktop only)\nconst desktopNavItems=[{id:'browse',label:'Browse',icon:Search},{id:'messages',label:'Messages',icon:MessageSquare},{id:'add',label:'List Room',icon:PlusCircle,show:currentUser&&currentUser.type==='landlord'},{id:'my-listings',label:'My Rooms',icon:Home,show:currentUser&&currentUser.type==='landlord'},{id:'profile',label:'Profile',icon:User}];const renderFiltersBox=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"filters-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search location...\",value:searchLocation,onChange:e=>setSearchLocation(e.target.value),className:\"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-gray-600\",children:\"Price Range\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-xs bg-gray-50 px-2 py-1 rounded border border-gray-200\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"R\",priceRange[0].toLocaleString(),\" - R\",priceRange[1].toLocaleString()]}),/*#__PURE__*/_jsxs(\"select\",{value:priceRange[0],onChange:e=>setPriceRange([parseInt(e.target.value),priceRange[1]]),className:\"bg-transparent border-l border-gray-300 pl-2 focus:outline-none\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"Min\"}),/*#__PURE__*/_jsx(\"option\",{value:\"500\",children:\"R500\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1000\",children:\"R1000\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1500\",children:\"R1500\"})]})]}),/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-gray-600 mt-2\",children:\"Sort\"}),/*#__PURE__*/_jsxs(\"select\",{value:sortBy,onChange:e=>setSortBy(e.target.value),className:\"text-sm bg-white border border-gray-300 px-2 py-1 rounded focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"newest\",children:\"Newest\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cheapest\",children:\"Cheapest\"}),/*#__PURE__*/_jsx(\"option\",{value:\"expensive\",children:\"Most Expensive\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAdvancedFilters(!showAdvancedFilters),className:\"mt-2 text-xs text-blue-600 hover:text-blue-700 font-semibold px-2 py-1 rounded hover:bg-blue-50 transition\",children:showAdvancedFilters?'Close Filters':'More Filters'}),showAdvancedFilters&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 p-2 bg-gray-50 border border-gray-200 rounded\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600\",children:\"(Advanced filters placeholder)\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 flex flex-col gap-2\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-gray-600\",children:\"Nearby Search\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>onFindNearby&&onFindNearby(),className:\"flex-1 bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded text-xs font-medium\",children:\"Find Nearby\"}),/*#__PURE__*/_jsxs(\"select\",{value:nearbyRadius,onChange:e=>setNearbyRadius(parseInt(e.target.value)),className:\"text-xs bg-gray-50 border border-gray-300 px-2 py-1 rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:1,children:\"1km\"}),/*#__PURE__*/_jsx(\"option\",{value:3,children:\"3km\"}),/*#__PURE__*/_jsx(\"option\",{value:5,children:\"5km\"}),/*#__PURE__*/_jsx(\"option\",{value:10,children:\"10km\"})]})]}),nearbyMode&&/*#__PURE__*/_jsx(\"button\",{onClick:clearNearby,className:\"text-xs bg-white border border-gray-300 text-gray-700 px-2 py-1 rounded\",children:\"Clear Nearby\"}),nearbyStatus&&/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500\",children:nearbyStatus})]})]})]});// Desktop layout (sidebar + split view)\nif(isDesktop){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gray-50 min-h-screen pb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"layout-desktop\",children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"sidebar-nav\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold flex items-center gap-2 mb-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-blue-600\",children:\"Room\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-red-500\",children:\"24\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-section-title mb-2\",children:\"Navigation\"}),/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-menu\",children:desktopNavItems.filter(i=>i.show===undefined||i.show).map(item=>{const Icon=item.icon;const isActive=item.id==='browse';return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentView(item.id),className:isActive?'active':'',\"aria-label\":item.label,children:[/*#__PURE__*/_jsx(Icon,{className:\"w-4 h-4\"}),\" \",item.label]},item.id);})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-section-title mb-2\",children:\"Filters\"}),renderFiltersBox()]}),!currentUser&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-auto pt-4 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mb-2\",children:\"Join to list rooms or message landlords.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>onRequireAuth&&onRequireAuth('renter'),className:\"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 text-xs py-2 rounded\",children:\"Sign In\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onRequireAuth&&onRequireAuth('landlord'),className:\"flex-1 bg-red-500 hover:bg-red-600 text-white text-xs py-2 rounded\",children:\"List Room\"})]})]})]}),/*#__PURE__*/_jsxs(\"main\",{className:\"desktop-split\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"list-pane\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-800\",children:listings.length===0?'No rooms':\"\".concat(listings.length,\" rooms\")}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setMapView(!mapView),className:\"text-xs px-3 py-1.5 rounded border border-gray-300 bg-white hover:bg-gray-50 transition\",children:mapView?'Hide Map':'Show Map'})]}),listings.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border border-gray-200 rounded-lg p-8 text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:\"No rooms match your filters.\"})}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6\",children:listings.map(listing=>/*#__PURE__*/_jsx(ListingCard,{listing:listing,onClick:()=>onSelectListing(listing)},listing.id))})]}),mapView&&/*#__PURE__*/_jsx(\"div\",{className:\"map-pane\",children:/*#__PURE__*/_jsx(MapView,{listings:listings,onMarkerClick:l=>onSelectListing(l),userLocation:userLocation,nearbyRadius:nearbyRadius,fullHeight:true})})]})]})});}// Mobile / tablet existing layout\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 min-h-screen pb-20\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white border-b border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 relative\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"absolute left-3 top-3.5 w-5 h-5 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by location, suburb, or area...\",value:searchLocation,onChange:e=>setSearchLocation(e.target.value),className:\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition font-semibold shadow-sm\",children:\"Search\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(!searchLocation||searchLocation.trim()===''){alert('Enter a location to subscribe to updates for that area.');return;}if(!currentUser){onRequireAuth&&onRequireAuth('renter');return;}subscribeToArea&&subscribeToArea(currentUser.id,searchLocation.trim());},className:\"bg-white border border-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition text-sm\",children:\"Subscribe to area\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>onFindNearby&&onFindNearby(),className:\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition\",children:\"Find Nearby\"}),/*#__PURE__*/_jsxs(\"select\",{value:nearbyRadius,onChange:e=>setNearbyRadius(parseInt(e.target.value)),className:\"text-sm bg-gray-50 border border-gray-200 px-3 py-2 rounded-lg text-gray-700\",children:[/*#__PURE__*/_jsx(\"option\",{value:1,children:\"1 km\"}),/*#__PURE__*/_jsx(\"option\",{value:3,children:\"3 km\"}),/*#__PURE__*/_jsx(\"option\",{value:5,children:\"5 km\"}),/*#__PURE__*/_jsx(\"option\",{value:10,children:\"10 km\"})]}),nearbyMode&&/*#__PURE__*/_jsx(\"button\",{onClick:clearNearby,className:\"bg-white border border-gray-200 text-gray-700 px-3 py-2 rounded-lg text-sm\",children:\"Clear\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-gray-600\",children:nearbyStatus})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mb-4 flex-wrap items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 bg-gray-50 px-3 py-2 rounded-lg border border-gray-200\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-600 font-medium\",children:[\"R\",priceRange[0].toLocaleString(),\" - R\",priceRange[1].toLocaleString()]}),/*#__PURE__*/_jsxs(\"select\",{value:priceRange[0],onChange:e=>setPriceRange([parseInt(e.target.value),priceRange[1]]),className:\"text-xs bg-transparent border-l border-gray-300 pl-2 text-gray-600 focus:outline-none\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"Min\"}),/*#__PURE__*/_jsx(\"option\",{value:\"500\",children:\"R500\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1000\",children:\"R1000\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1500\",children:\"R1500\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Sort:\"}),/*#__PURE__*/_jsxs(\"select\",{value:sortBy,onChange:e=>setSortBy(e.target.value),className:\"text-sm bg-gray-50 border border-gray-200 px-3 py-2 rounded-lg text-gray-700 focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"newest\",children:\"Newest\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cheapest\",children:\"Cheapest\"}),/*#__PURE__*/_jsx(\"option\",{value:\"expensive\",children:\"Most Expensive\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAdvancedFilters(!showAdvancedFilters),className:\"text-sm text-blue-600 hover:text-blue-700 font-medium px-3 py-2 rounded-lg hover:bg-blue-50 transition\",children:showAdvancedFilters?' Close Filters':' More Filters'})]}),showAdvancedFilters&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-semibold text-gray-700 block mb-2\",children:\"Property Type\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"w-full text-sm border border-gray-300 px-3 py-2 rounded-lg focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{children:\"Any\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Room\"}),/*#__PURE__*/_jsx(\"option\",{children:\"Apartment\"}),/*#__PURE__*/_jsx(\"option\",{children:\"House\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-sm font-semibold text-gray-700 block mb-2\",children:\"Max Price\"}),/*#__PURE__*/_jsxs(\"select\",{value:priceRange[1],onChange:e=>setPriceRange([priceRange[0],parseInt(e.target.value)]),className:\"w-full text-sm border border-gray-300 px-3 py-2 rounded-lg focus:ring-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"10000\",children:\"Up to R10,000\"}),/*#__PURE__*/_jsx(\"option\",{value:\"5000\",children:\"Up to R5,000\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3000\",children:\"Up to R3,000\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2000\",children:\"Up to R2,000\"})]})]})]})})]})}),listings.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 py-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200 p-6 mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold text-gray-800 mb-1\",children:\"Have a room to rent?\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm\",children:\"Join thousands of landlords earning with Room24\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setCurrentView('add'),className:\"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-semibold transition shadow-md\",children:\"List Your Room\"})]})})}),listings.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:mapView?'Click markers to view details':\"Showing \".concat(listings.length,\" results\")}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setMapView(!mapView),className:\"text-sm px-4 py-2 rounded-lg border border-gray-200 bg-white hover:bg-gray-50 transition flex items-center gap-2\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4\"}),mapView?'Show List':'Show Map']})]}),mapView&&/*#__PURE__*/_jsx(MapView,{listings:listings,onMarkerClick:l=>onSelectListing(l),userLocation:userLocation,nearbyRadius:nearbyRadius,fullHeight:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-gray-800\",children:listings.length===0?'No rooms available':\"\".concat(listings.length,\" Rooms Available\")}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-1\",children:\"Find your perfect room today\"})]}),listings.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg border border-gray-200 p-12 text-center\",children:[/*#__PURE__*/_jsx(Home,{className:\"w-16 h-16 mx-auto mb-4 text-gray-300\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 font-medium mb-2\",children:\"No rooms match your search\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm mb-4\",children:\"Try adjusting your filters or search in a different location\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSearchLocation('');setPriceRange([0,10000]);},className:\"text-blue-600 hover:text-blue-700 font-medium text-sm\",children:\"Clear all filters\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12\",children:listings.map(listing=>/*#__PURE__*/_jsx(ListingCard,{listing:listing,onClick:()=>onSelectListing(listing)},listing.id))})]})]});}function ListingCard(_ref6){let{listing,onClick}=_ref6;return/*#__PURE__*/_jsxs(\"div\",{onClick:onClick,className:\"bg-white rounded-lg shadow hover:shadow-xl transition-all duration-200 cursor-pointer overflow-hidden border border-gray-100 hover:border-blue-300 group\",children:[listing.photos&&listing.photos.length>0?/*#__PURE__*/_jsxs(\"div\",{className:\"relative bg-gray-200 aspect-video overflow-hidden\",children:[/*#__PURE__*/_jsx(\"img\",{src:listing.photos[0],alt:\"Room\",className:\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 skeleton\",onLoad:e=>e.target.classList.remove('skeleton')}),/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-3 right-3 flex gap-2\",children:[listing.photos.length>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-black bg-opacity-60 text-white px-2 py-1 rounded-md text-xs font-semibold\",children:[listing.photos.length,\" \\uD83D\\uDCF8\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"px-2 py-1 rounded-md text-xs font-semibold \".concat(listing.status==='available'?'bg-green-500 text-white':'bg-gray-700 text-white'),children:listing.status==='available'?'Available':'Rented'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-black opacity-0 group-hover:opacity-5 transition-opacity\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-gray-200 to-gray-300 aspect-video flex items-center justify-center relative\",children:[/*#__PURE__*/_jsx(Home,{className:\"w-12 h-12 text-gray-400\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-3 right-3 px-2 py-1 rounded-md text-xs font-semibold \".concat(listing.status==='available'?'bg-green-500 text-white':'bg-gray-700 text-white'),children:listing.status==='available'?'Available':'Rented'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-lg text-gray-800 group-hover:text-blue-600 transition mb-1 line-clamp-2\",children:listing.title}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-600 font-bold text-xl\",children:[\"R\",listing.price.toLocaleString(),\"/month\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-600 text-sm mb-3 pb-3 border-b border-gray-100\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4 mr-2 text-blue-500 flex-shrink-0\"}),/*#__PURE__*/_jsx(\"span\",{className:\"truncate\",children:listing.location}),typeof listing.__distanceKm==='number'&&/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-xs text-gray-500\",children:[\"\\u2022 \",listing.__distanceKm.toFixed(1),\" km\"]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 text-sm line-clamp-2 mb-3\",children:listing.description}),listing.amenities&&listing.amenities.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-1 mb-4\",children:[listing.amenities.slice(0,3).map((amenity,index)=>/*#__PURE__*/_jsx(\"span\",{className:\"inline-block bg-blue-50 text-blue-700 text-xs px-2 py-1 rounded-full font-medium\",children:amenity},index)),listing.amenities.length>3&&/*#__PURE__*/_jsxs(\"span\",{className:\"inline-block bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded-full font-medium\",children:[\"+\",listing.amenities.length-3]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg font-semibold text-sm transition\",children:\"View Details\"})]})]});}function AddListingView(_ref7){let{onSubmit,onCancel,currentUser,userType,onRequireAuth,onRequireOnboarding}=_ref7;const GEOCODER_KEY=process.env.REACT_APP_GEOCODER_API_KEY;const GEOCODER_PROVIDER=(process.env.REACT_APP_GEOCODER_PROVIDER||'').toLowerCase();const[formData,setFormData]=useState({title:'',price:'',location:'',streetAddress:'',description:'',photos:[],status:'available',availableDate:new Date().toISOString().split('T')[0],amenities:[],latitude:null,longitude:null});const[geocodingStatus,setGecodingStatus]=useState('');const[errors,setErrors]=useState({});const availableAmenities=['WiFi','Parking','Kitchen','Laundry','Air Conditioning','Heating','TV','Furnished','Pet Friendly','Garden'];const validateField=(name,value)=>{const newErrors=_objectSpread({},errors);switch(name){case'title':if(!value||value.trim().length<5){newErrors.title='Title must be at least 5 characters';}else{delete newErrors.title;}break;case'price':if(!value||parseFloat(value)<=0){newErrors.price='Price must be greater than 0';}else if(parseFloat(value)<500){newErrors.price='Price seems too low (minimum R500)';}else if(parseFloat(value)>50000){newErrors.price='Price seems too high (maximum R50,000)';}else{delete newErrors.price;}break;case'location':if(!value||value.trim().length<3){newErrors.location='Location is required (min 3 characters)';}else{delete newErrors.location;}break;case'description':if(value&&value.length>500){newErrors.description='Description is too long (max 500 characters)';}else{delete newErrors.description;}break;default:break;}setErrors(newErrors);};// Geocode address using Nominatim (OpenStreetMap)\n// Use browser geolocation and reverse-geocode to fill address/coords\nconst geolocateCurrentPosition=()=>{if(!navigator.geolocation){setGecodingStatus('Geolocation not supported by your browser');return;}setGecodingStatus('Locating...');navigator.geolocation.getCurrentPosition(async pos=>{const lat=pos.coords.latitude;const lon=pos.coords.longitude;setFormData(_objectSpread(_objectSpread({},formData),{},{latitude:lat,longitude:lon}));// Reverse geocode to get a readable address\ntry{if(GEOCODER_PROVIDER==='mapbox'&&GEOCODER_KEY){const rev=await fetch(\"https://api.mapbox.com/geocoding/v5/mapbox.places/\".concat(lon,\",\").concat(lat,\".json?access_token=\").concat(GEOCODER_KEY,\"&limit=1&country=za\"));const revData=await rev.json();if(revData&&revData.features&&revData.features.length>0){const place=revData.features[0].place_name||'';const parts=place.split(',').map(p=>p.trim());const street=parts.slice(0,2).join(', ');const area=parts.slice(2,4).join(', ');setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{streetAddress:street||prev.streetAddress,location:area||prev.location}));setGecodingStatus(' Current location set');setTimeout(()=>setGecodingStatus(''),2500);return;}}else{const rev=await fetch(\"https://nominatim.openstreetmap.org/reverse?format=json&lat=\".concat(lat,\"&lon=\").concat(lon));const revData=await rev.json();if(revData){const display=revData.display_name||'';// Try to split display name into street and area\nconst parts=display.split(',').map(p=>p.trim());const street=parts.slice(0,2).join(', ');const area=parts.slice(2,4).join(', ');setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{streetAddress:street||prev.streetAddress,location:area||prev.location}));setGecodingStatus(' Current location set');setTimeout(()=>setGecodingStatus(''),2500);return;}}}catch(e){console.error('Reverse geocode failed',e);}setGecodingStatus(' Coordinates obtained');setTimeout(()=>setGecodingStatus(''),2000);},err=>{console.error('Geolocation error',err);setGecodingStatus('Could not get your location');},{enableHighAccuracy:true,timeout:10000});};const geocodeAddress=async()=>{if(!formData.streetAddress){setGecodingStatus('Please enter a street address');return;}setGecodingStatus('Finding coordinates...');try{const fullAddress=\"\".concat(formData.streetAddress,\", \").concat(formData.location,\", South Africa\");// Try Mapbox if configured\nif(GEOCODER_PROVIDER==='mapbox'&&GEOCODER_KEY){try{const resp=await fetch(\"https://api.mapbox.com/geocoding/v5/mapbox.places/\".concat(encodeURIComponent(fullAddress),\".json?access_token=\").concat(GEOCODER_KEY,\"&limit=1&country=za\"));const data=await resp.json();if(data&&data.features&&data.features.length>0){const[lon,lat]=data.features[0].center||[];setFormData(_objectSpread(_objectSpread({},formData),{},{latitude:parseFloat(lat),longitude:parseFloat(lon)}));setGecodingStatus(' Address found (Mapbox)!');setTimeout(()=>setGecodingStatus(''),2000);return;}}catch(err){console.warn('Mapbox geocoding failed, falling back to Nominatim',err);}}// Default / fallback: Nominatim\nconst response=await fetch(\"https://nominatim.openstreetmap.org/search?format=json&q=\".concat(encodeURIComponent(fullAddress)));const results=await response.json();if(results.length>0){const{lat,lon}=results[0];setFormData(_objectSpread(_objectSpread({},formData),{},{latitude:parseFloat(lat),longitude:parseFloat(lon)}));setGecodingStatus(' Address found!');setTimeout(()=>setGecodingStatus(''),2000);}else{setGecodingStatus('Address not found. Trying with area only...');// Fallback: just use the area/city\nconst areaResponse=await fetch(\"https://nominatim.openstreetmap.org/search?format=json&q=\".concat(encodeURIComponent(formData.location+', South Africa')));const areaResults=await areaResponse.json();if(areaResults.length>0){const{lat,lon}=areaResults[0];setFormData(_objectSpread(_objectSpread({},formData),{},{latitude:parseFloat(lat),longitude:parseFloat(lon)}));setGecodingStatus(' Area found!');setTimeout(()=>setGecodingStatus(''),2000);}else{setGecodingStatus('Could not find location');}}}catch(error){console.error('Geocoding error:',error);setGecodingStatus('Error finding address. Check your connection.');}};// Draggable preview marker component for Add Listing\nfunction DraggablePreview(_ref8){let{lat,lng}=_ref8;const[pos,setPos]=useState(lat&&lng?[lat,lng]:null);useEffect(()=>{if(lat&&lng)setPos([lat,lng]);},[lat,lng]);if(!pos)return null;return/*#__PURE__*/_jsxs(MapContainer,{center:pos,zoom:15,className:\"w-full h-48 rounded-lg\",whenCreated:()=>{},children:[/*#__PURE__*/_jsx(TileLayer,{url:\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"}),/*#__PURE__*/_jsx(Marker,{position:pos,draggable:true,eventHandlers:{dragend:e=>{const ll=e.target.getLatLng();setPos([ll.lat,ll.lng]);setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{latitude:ll.lat,longitude:ll.lng}));}}})]});}const toggleAmenity=amenity=>{if(formData.amenities.includes(amenity)){setFormData(_objectSpread(_objectSpread({},formData),{},{amenities:formData.amenities.filter(a=>a!==amenity)}));}else{setFormData(_objectSpread(_objectSpread({},formData),{},{amenities:[...formData.amenities,amenity]}));}};const handlePhotoUpload=e=>{const files=Array.from(e.target.files||[]);if(files.length===0)return;const readers=files.map(file=>new Promise(resolve=>{const reader=new FileReader();reader.onloadend=()=>resolve(reader.result);reader.readAsDataURL(file);}));Promise.all(readers).then(images=>{const combined=[...formData.photos,...images].slice(0,5);// cap at 5\nsetFormData(_objectSpread(_objectSpread({},formData),{},{photos:combined}));});};const removePhoto=index=>{const newPhotos=formData.photos.filter((_,i)=>i!==index);setFormData(_objectSpread(_objectSpread({},formData),{},{photos:newPhotos}));};const handleSubmit=()=>{// Enforce auth and onboarding checks before allowing submission\nif(!currentUser){onRequireAuth&&onRequireAuth('landlord');return;}if(userType!=='landlord'){// prompt to become landlord\nonRequireAuth&&onRequireAuth('landlord');return;}if(!currentUser.landlordComplete){// send to onboarding\nonRequireOnboarding&&onRequireOnboarding();return;}// Validate all fields\nvalidateField('title',formData.title);validateField('price',formData.price);validateField('location',formData.location);validateField('description',formData.description);if(!formData.title||formData.title.trim().length<5){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{title:'Title must be at least 5 characters'}));return;}if(!formData.price||parseFloat(formData.price)<=0){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{price:'Price must be greater than 0'}));return;}if(!formData.location||formData.location.trim().length<3){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{location:'Location is required'}));return;}if(Object.keys(errors).length>0){return;}onSubmit(formData);};return/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-gray-50 min-h-screen pb-20\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-3xl mx-auto mt-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow-sm border border-gray-200 p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-gray-800\",children:\"Post a Room\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"text-gray-400 hover:text-gray-600 transition\",children:/*#__PURE__*/_jsx(X,{className:\"w-6 h-6\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Room Title *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:formData.title,onChange:e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{title:e.target.value}));validateField('title',e.target.value);},onBlur:e=>validateField('title',e.target.value),placeholder:\"e.g., Cozy backroom with bathroom\",className:\"w-full px-4 py-3 border \".concat(errors.title?'border-red-500':'border-gray-300',\" bg-white text-gray-800 rounded-lg focus:ring-2 \").concat(errors.title?'focus:ring-red-500':'focus:ring-blue-500',\" focus:border-transparent transition placeholder-gray-400\")}),errors.title&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-xs mt-1\",children:errors.title})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Monthly Price (R) *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",required:true,value:formData.price,onChange:e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{price:e.target.value}));validateField('price',e.target.value);},onBlur:e=>validateField('price',e.target.value),placeholder:\"e.g., 2500\",className:\"w-full px-4 py-3 border \".concat(errors.price?'border-red-500':'border-gray-300',\" bg-white text-gray-800 rounded-lg focus:ring-2 \").concat(errors.price?'focus:ring-red-500':'focus:ring-blue-500',\" focus:border-transparent transition placeholder-gray-400\")}),errors.price&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-xs mt-1\",children:errors.price})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Area / City *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:formData.location,onChange:e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{location:e.target.value}));validateField('location',e.target.value);},onBlur:e=>validateField('location',e.target.value),placeholder:\"e.g., Soweto, Johannesburg\",className:\"w-full px-4 py-3 border \".concat(errors.location?'border-red-500':'border-gray-300',\" bg-white text-gray-800 rounded-lg focus:ring-2 \").concat(errors.location?'focus:ring-red-500':'focus:ring-blue-500',\" focus:border-transparent transition placeholder-gray-400\")}),errors.location&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-xs mt-1\",children:errors.location})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Street Address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:formData.streetAddress,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{streetAddress:e.target.value})),placeholder:\"e.g., 123 Main Street\",className:\"w-full px-4 py-3 border border-gray-300 bg-white text-gray-800 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition placeholder-gray-400\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border-2 border-blue-200 rounded-lg p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3 mb-4\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-6 h-6 text-blue-600 flex-shrink-0 mt-1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-1\",children:\"Set Location on Map\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Help renters find your listing by pinpointing its exact location.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-3 items-center mb-4\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:geocodeAddress,className:\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg text-sm font-semibold transition shadow-sm flex items-center gap-2\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4\"}),\"Find on Map\"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:geolocateCurrentPosition,className:\"bg-white hover:bg-gray-50 border-2 border-gray-300 text-gray-800 px-6 py-3 rounded-lg text-sm font-semibold transition shadow-sm flex items-center gap-2\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4\"}),\"Use Current Location\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm flex-1\",children:[geocodingStatus&&/*#__PURE__*/_jsxs(\"span\",{className:\"\".concat(geocodingStatus.startsWith('')?'text-green-600 font-semibold':'text-gray-700',\" flex items-center gap-1\"),children:[geocodingStatus.startsWith('')&&/*#__PURE__*/_jsx(CheckCircle,{className:\"w-4 h-4\"}),geocodingStatus]}),formData.latitude&&formData.longitude&&!geocodingStatus&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-green-600 font-semibold flex items-center gap-1\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-4 h-4\"}),\"Location set: \",formData.latitude.toFixed(4),\", \",formData.longitude.toFixed(4)]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4\",children:formData.latitude&&formData.longitude?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Fine-tune Location (drag pin)\"}),/*#__PURE__*/_jsx(DraggablePreview,{lat:formData.latitude,lng:formData.longitude})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600 bg-white border border-gray-200 rounded-lg p-4 text-center\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-8 h-8 mx-auto mb-2 text-gray-400\"}),\"No location set yet. Click \\\"Find on Map\\\" or \\\"Use Current Location\\\" to place a pin.\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.status,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{status:e.target.value})),className:\"w-full px-4 py-3 border border-gray-300 bg-white text-gray-800 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"available\",children:\"Available\"}),/*#__PURE__*/_jsx(\"option\",{value:\"rented\",children:\"Rented\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Available Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:formData.availableDate,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{availableDate:e.target.value})),className:\"w-full px-4 py-3 border border-gray-300 bg-white text-gray-800 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:[\"Description\",formData.description&&/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-xs \".concat(formData.description.length>500?'text-red-500':'text-gray-500'),children:[\"(\",formData.description.length,\"/500 characters)\"]})]}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.description,onChange:e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{description:e.target.value}));validateField('description',e.target.value);},onBlur:e=>validateField('description',e.target.value),placeholder:\"Describe the room, amenities, rules, and any other details...\",rows:\"4\",className:\"w-full px-4 py-3 border \".concat(errors.description?'border-red-500':'border-gray-300',\" bg-white text-gray-800 rounded-lg focus:ring-2 \").concat(errors.description?'focus:ring-red-500':'focus:ring-blue-500',\" focus:border-transparent transition placeholder-gray-400\")}),errors.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-xs mt-1\",children:errors.description})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-3\",children:\"Amenities\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 gap-2\",children:availableAmenities.map(amenity=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>toggleAmenity(amenity),className:\"px-4 py-2 rounded-lg text-sm font-medium transition \".concat(formData.amenities.includes(amenity)?'bg-blue-600 text-white shadow-sm':'bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200'),children:amenity},amenity))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Photos (Max 5)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",multiple:true,onChange:handlePhotoUpload,disabled:formData.photos.length>=5,className:\"w-full px-4 py-3 border border-gray-300 bg-white text-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition cursor-pointer\"}),formData.photos.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 grid grid-cols-2 md:grid-cols-3 gap-3\",children:formData.photos.map((photo,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[/*#__PURE__*/_jsx(\"img\",{src:photo,alt:\"Preview \".concat(index+1),className:\"w-full h-32 object-cover rounded-lg border border-gray-200 shadow-sm\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>removePhoto(index),className:\"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-lg opacity-0 group-hover:opacity-100 transition\",children:/*#__PURE__*/_jsx(X,{className:\"w-4 h-4\"})})]},index))}),formData.photos.length>=5&&/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-500 mt-2\",children:\"Maximum 5 photos reached\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-gray-200 pt-6\",children:/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition shadow-sm\",children:\"Post Room\"})})]})]})})});}function MessagesView(_ref9){let{conversations,listings,userType,onSelectConversation}=_ref9;return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4 text-gray-800\",children:\"Messages\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:conversations.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-8 text-center text-gray-500\",children:[/*#__PURE__*/_jsx(MessageSquare,{className:\"w-16 h-16 mx-auto mb-4 text-gray-300\"}),/*#__PURE__*/_jsx(\"p\",{children:\"No messages yet.\"})]}):conversations.map(conv=>{const listing=listings.find(l=>l.id===conv.listingId);const lastMessage=conv.messages[conv.messages.length-1];return/*#__PURE__*/_jsxs(\"div\",{onClick:()=>onSelectConversation(conv),className:\"bg-white rounded-lg shadow p-4 cursor-pointer hover:shadow-lg transition\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-2\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-800\",children:(listing===null||listing===void 0?void 0:listing.title)||'Room'}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:new Date(lastMessage.timestamp).toLocaleDateString()})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600 line-clamp-2\",children:lastMessage.text})]},conv.id);})})]});}function MyListingsView(_ref0){let{listings,onDelete}=_ref0;return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold mb-4 text-gray-800\",children:\"My Listings\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:listings.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-8 text-center text-gray-500\",children:[/*#__PURE__*/_jsx(Home,{className:\"w-16 h-16 mx-auto mb-4 text-gray-300\"}),/*#__PURE__*/_jsx(\"p\",{children:\"You haven't posted any rooms yet.\"})]}):listings.map(listing=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-4\",children:[listing.photos&&listing.photos.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"relative mb-3\",children:[/*#__PURE__*/_jsx(\"img\",{src:listing.photos[0],alt:\"Room\",className:\"w-full h-32 object-cover rounded-lg\"}),listing.photos.length>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-2 right-2 bg-black bg-opacity-60 text-white px-2 py-1 rounded text-xs\",children:[listing.photos.length,\" photos\"]})]}),/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-lg mb-1\",children:listing.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-blue-600 font-bold mb-2\",children:[\"R\",listing.price,\"/month\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-600 text-sm mb-3\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4 mr-1\"}),listing.location]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onDelete(listing.id),className:\"w-full bg-red-500 hover:bg-red-600 text-white py-2 rounded-lg transition\",children:\"Delete Listing\"})]},listing.id))})]});}function ListingDetailModal(_ref1){let{listing,landlord,onClose,onSendMessage,userType,currentUser,onRequireAuth}=_ref1;const[message,setMessage]=useState('');const[showContact,setShowContact]=useState(false);const[showGallery,setShowGallery]=useState(false);const[currentPhotoIndex,setCurrentPhotoIndex]=useState(0);const handleNavigate=(direction,index)=>{if(direction==='next'&&currentPhotoIndex<listing.photos.length-1){setCurrentPhotoIndex(currentPhotoIndex+1);}else if(direction==='prev'&&currentPhotoIndex>0){setCurrentPhotoIndex(currentPhotoIndex-1);}else if(direction==='goto'){setCurrentPhotoIndex(index);}};const handleSend=()=>{if(message.trim()&&userType==='renter'){onSendMessage(listing.id,message);setMessage('');alert('Message sent to landlord!');onClose();}};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"sticky top-0 bg-white border-b p-4 flex justify-between items-center\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-bold text-gray-800\",children:\"Room Details\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-500 hover:text-gray-700\",children:/*#__PURE__*/_jsx(X,{className:\"w-6 h-6\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-4\",children:[listing.photos&&listing.photos.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"relative mb-4 cursor-pointer\",onClick:()=>setShowGallery(true),children:[/*#__PURE__*/_jsx(\"img\",{src:listing.photos[currentPhotoIndex],alt:\"Room\",className:\"w-full h-64 object-cover rounded-lg\"}),listing.photos.length>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute bottom-3 right-3 bg-black bg-opacity-60 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1\",children:[/*#__PURE__*/_jsx(Search,{className:\"w-4 h-4\"}),\"View all \",listing.photos.length,\" photos\"]}),listing.photos.length>1&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-3 left-3 flex gap-1\",children:listing.photos.map((_,index)=>/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 rounded-full \".concat(index===currentPhotoIndex?'bg-white':'bg-white bg-opacity-50')},index))})]}),showGallery&&listing.photos&&/*#__PURE__*/_jsx(PhotoGallery,{photos:listing.photos,currentIndex:currentPhotoIndex,onClose:()=>setShowGallery(false),onNavigate:handleNavigate}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold mb-2 text-gray-800\",children:listing.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-blue-600 font-bold text-2xl mb-4\",children:[\"R\",listing.price,\"/month\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-600 mb-4\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-5 h-5 mr-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:listing.location})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 rounded-lg p-4 mb-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold mb-2 text-gray-700\",children:\"Description\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:listing.description||'No description provided.'})]}),userType==='renter'&&landlord&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 rounded-lg p-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-3\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-700\",children:\"Landlord Information\"}),currentUser?/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setShowContact(!showContact),className:\"text-blue-600 hover:text-blue-700 text-sm font-medium\",children:[showContact?'Hide':'Show',\" Contact\"]}):/*#__PURE__*/_jsx(\"button\",{onClick:()=>onRequireAuth&&onRequireAuth('renter'),className:\"text-blue-600 hover:text-blue-700 text-sm font-medium\",children:\"Sign in to view contact\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center mb-3\",children:[landlord.photo?/*#__PURE__*/_jsx(\"img\",{src:landlord.photo,alt:landlord.name,className:\"w-12 h-12 rounded-full object-cover mr-3\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 rounded-full bg-gray-300 flex items-center justify-center mr-3\",children:/*#__PURE__*/_jsx(User,{className:\"w-6 h-6 text-gray-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-800\",children:landlord.name}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Property Owner\"})]})]}),currentUser&&showContact&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2 pt-3 border-t border-blue-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm\",children:[/*#__PURE__*/_jsx(Phone,{className:\"w-4 h-4 mr-2 text-blue-600\"}),/*#__PURE__*/_jsx(\"a\",{href:\"tel:\".concat(landlord.phone),className:\"text-blue-600 hover:underline\",children:landlord.phone})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-sm\",children:[/*#__PURE__*/_jsx(Mail,{className:\"w-4 h-4 mr-2 text-blue-600\"}),/*#__PURE__*/_jsx(\"a\",{href:\"mailto:\".concat(landlord.email),className:\"text-blue-600 hover:underline\",children:landlord.email})]})]})]}),userType==='renter'&&/*#__PURE__*/_jsxs(\"div\",{className:\"border-t pt-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold mb-3 text-gray-700\",children:\"Send a Message\"}),currentUser?/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:message,onChange:e=>setMessage(e.target.value),placeholder:\"Type your message...\",className:\"flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSend,className:\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition flex items-center\",children:/*#__PURE__*/_jsx(Send,{className:\"w-5 h-5\"})})]}):/*#__PURE__*/_jsx(\"div\",{className:\"flex\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>onRequireAuth&&onRequireAuth('renter'),className:\"w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition\",children:\"Sign in to message\"})})]})]})]})});}function ConversationModal(_ref10){let{conversation,listing,onClose,onSendMessage}=_ref10;const[message,setMessage]=useState('');const handleSend=()=>{if(message.trim()){onSendMessage(listing.id,message);setMessage('');}};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border-b p-4 flex items-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"mr-3 text-gray-500 hover:text-gray-700\",children:/*#__PURE__*/_jsx(ArrowLeft,{className:\"w-6 h-6\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-bold text-gray-800\",children:listing===null||listing===void 0?void 0:listing.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:listing===null||listing===void 0?void 0:listing.location})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto p-4 space-y-3\",children:conversation.messages.map(msg=>/*#__PURE__*/_jsx(\"div\",{className:\"flex \".concat(msg.sender==='landlord'?'justify-start':'justify-end'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-xs px-4 py-2 rounded-lg \".concat(msg.sender==='landlord'?'bg-gray-200 text-gray-800':'bg-blue-600 text-white'),children:[/*#__PURE__*/_jsx(\"p\",{children:msg.text}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs opacity-75\",children:new Date(msg.timestamp).toLocaleTimeString()})]})},msg.id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t p-4 flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:message,onChange:e=>setMessage(e.target.value),onKeyPress:e=>e.key==='Enter'&&handleSend(),placeholder:\"Type a message...\",className:\"flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSend,className:\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition\",children:/*#__PURE__*/_jsx(Send,{className:\"w-5 h-5\"})})]})]})});}function AuthModal(_ref11){let{defaultType='renter',onClose,onSubmit}=_ref11;const[form,setForm]=useState({name:'',phone:'',email:'',type:defaultType,photo:''});const handleSubmit=()=>{if(!form.name||!form.email){alert('Please add a name and email');return;}onSubmit(form);};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg w-full max-w-md p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-bold\",children:\"Sign in / Create account\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"text-gray-400 hover:text-gray-600\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-1\",children:\"Full name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:form.name,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{name:e.target.value})),className:\"w-full px-3 py-2 border rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-1\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:form.email,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{email:e.target.value})),className:\"w-full px-3 py-2 border rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-1\",children:\"Phone (optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:form.phone,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{phone:e.target.value})),className:\"w-full px-3 py-2 border rounded\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-1\",children:\"I am a\"}),/*#__PURE__*/_jsxs(\"select\",{value:form.type,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{type:e.target.value})),className:\"w-full px-3 py-2 border rounded\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"renter\",children:\"Looking for a room\"}),/*#__PURE__*/_jsx(\"option\",{value:\"landlord\",children:\"Listing rooms\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"flex-1 bg-gray-100 hover:bg-gray-200 py-2 rounded\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded\",children:\"Continue\"})]})]})]})});}function LocationConsentModal(_ref12){let{onAccept,onDecline}=_ref12;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg max-w-md w-full p-6 shadow-xl\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-8 h-8 text-blue-600\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800\",children:\"Location Access\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:\"Room24 would like to access your location to show nearby rental listings. Your location data:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"text-sm text-gray-600 mb-6 space-y-2\",children:[/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-start gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600 mt-0.5\",children:\"\\u2713\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Is only used to calculate distances to listings\"})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-start gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600 mt-0.5\",children:\"\\u2713\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Is not stored on our servers\"})]}),/*#__PURE__*/_jsxs(\"li\",{className:\"flex items-start gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-green-600 mt-0.5\",children:\"\\u2713\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Is not shared with third parties\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onDecline,className:\"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-3 rounded-lg transition\",children:\"Not Now\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onAccept,className:\"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition\",children:\"Allow\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-4 text-center\",children:\"You can change this permission anytime in your browser settings.\"})]})});}function PhotoGallery(_ref13){let{photos,currentIndex,onClose,onNavigate}=_ref13;return/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 bg-black z-50 flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center p-4 text-white\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm\",children:[currentIndex+1,\" / \",photos.length]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"hover:bg-gray-800 p-2 rounded-full\",children:/*#__PURE__*/_jsx(X,{className:\"w-6 h-6\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 flex items-center justify-center relative\",children:[currentIndex>0&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>onNavigate('prev'),className:\"absolute left-4 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-70 z-10\",children:/*#__PURE__*/_jsx(ArrowLeft,{className:\"w-6 h-6\"})}),/*#__PURE__*/_jsx(\"img\",{src:photos[currentIndex],alt:\"\",className:\"max-w-full max-h-full object-contain\"}),currentIndex<photos.length-1&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>onNavigate('next'),className:\"absolute right-4 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-70 z-10\",children:/*#__PURE__*/_jsx(ArrowLeft,{className:\"w-6 h-6 transform rotate-180\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 flex gap-2 overflow-x-auto\",children:photos.map((photo,index)=>/*#__PURE__*/_jsx(\"img\",{src:photo,alt:\"Thumbnail \".concat(index+1),onClick:()=>onNavigate('goto',index),className:\"w-16 h-16 object-cover rounded cursor-pointer \".concat(index===currentIndex?'ring-2 ring-blue-500':'opacity-60')},index))})]});}function BottomNav(_ref14){let{currentView,setCurrentView,userType,messageCount}=_ref14;const navItems=[{id:'browse',label:'Browse',icon:Search,show:true},{id:'messages',label:'Messages',icon:MessageSquare,badge:messageCount,show:true},{id:'add',label:'List Room',icon:PlusCircle,show:userType==='landlord'},{id:'my-listings',label:'My Rooms',icon:Home,show:userType==='landlord'},{id:'profile',label:'Profile',icon:User,show:true}];return/*#__PURE__*/_jsx(\"div\",{className:\"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-2xl\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto flex justify-around\",children:navItems.filter(item=>item.show).map(item=>{const Icon=item.icon;const isActive=currentView===item.id||item.id==='profile'&&currentView==='edit-profile';return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentView(item.id),className:\"flex-1 flex flex-col items-center justify-center py-3 px-2 transition relative border-t-2 \".concat(isActive?'border-blue-600 text-blue-600 bg-blue-50':'border-transparent text-gray-600 hover:text-gray-800 hover:bg-gray-50'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Icon,{className:\"w-6 h-6\"}),item.badge&&item.badge>0&&/*#__PURE__*/_jsx(\"span\",{className:\"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold\",children:item.badge>99?'99+':item.badge})]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs mt-1 font-medium\",children:item.label})]},item.id);})})});}","map":{"version":3,"names":["React","useState","useEffect","MapContainer","TileLayer","Marker","Home","MessageSquare","PlusCircle","Search","MapPin","X","Send","ArrowLeft","User","Phone","Mail","Edit","Menu","CheckCircle","MapView","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RentalPlatform","currentView","setCurrentView","mapView","setMapView","userType","setUserType","listings","setListings","conversations","setConversations","selectedListing","setSelectedListing","selectedConversation","setSelectedConversation","searchLocation","setSearchLocation","priceRange","setPriceRange","selectedAmenities","setSelectedAmenities","sortBy","setSortBy","currentUser","setCurrentUser","showAuthModal","setShowAuthModal","authDefaultType","setAuthDefaultType","nearbyMode","setNearbyMode","nearbyRadius","setNearbyRadius","userLocation","setUserLocation","nearbyStatus","setNearbyStatus","showLocationConsent","setShowLocationConsent","showMobileMenu","setShowMobileMenu","toast","setToast","openAuthModal","type","arguments","length","undefined","loadData","landlordComplete","listingsResult","localStorage","getItem","conversationsResult","userResult","JSON","parse","user","error","console","log","sampleListings","id","title","price","location","description","photos","status","availableDate","Date","toISOString","amenities","landlordId","landlordName","landlordPhone","landlordEmail","landlordPhoto","createdAt","haversineDistance","lat1","lon1","lat2","lon2","toRad","v","Math","PI","R","dLat","dLon","a","sin","cos","c","atan2","sqrt","handleFindNearby","navigator","geolocation","handleLocationConsentAccept","getCurrentPosition","pos","lat","coords","latitude","lon","longitude","setTimeout","err","enableHighAccuracy","timeout","clearNearby","showToast","message","saveListings","newListings","setItem","stringify","saveConversations","newConversations","saveSubscriptions","subscriptions","getSubscriptions","res","subscribeToArea","userId","area","trim","alert","subs","includes","push","concat","handleProfileSetup","profileData","now","_objectSpread","handleUpdateProfile","updatedUser","handleQuickAuth","name","phone","email","photo","handleCompleteOnboarding","onboardData","updated","landlordInfo","handleAddListing","listingData","_listingData$latitude","_listingData$longitud","newListing","updatedListings","window","scrollTo","top","behavior","handleSendMessage","listingId","conversationId","existingConv","find","newMessage","sender","text","timestamp","updatedConversations","map","messages","newConv","renterId","filteredListings","listing","d","__distanceKm","filter","matchesLocation","toLowerCase","parseFloat","matchesPrice","matchesAmenities","every","amenity","_listing$amenities","passesNearby","_listing$__distanceKm","sort","b","_a$__distanceKm","_b$__distanceKm","da","Infinity","db","userConversations","conv","l","className","children","onClick","charAt","ProfileSetupView","onSubmit","ProfileView","onEdit","EditProfileView","onCancel","LandlordOnboardingView","onComplete","BrowseView","onSelectListing","onRequireAuth","onFindNearby","MessagesView","onSelectConversation","AddListingView","onRequireOnboarding","MyListingsView","onDelete","ListingDetailModal","landlord","onClose","onSendMessage","ConversationModal","conversation","AuthModal","defaultType","BottomNav","messageCount","LocationConsentModal","onAccept","onDecline","href","getFullYear","_ref","formData","setFormData","handlePhotoUpload","e","file","target","files","reader","FileReader","onloadend","result","readAsDataURL","handleSubmit","src","alt","accept","onChange","required","value","placeholder","_ref2","toLocaleDateString","_ref3","form","setForm","businessName","bankDetails","idNumber","agree","checked","preventDefault","_ref4","_ref5","showAdvancedFilters","setShowAdvancedFilters","isDesktop","setIsDesktop","innerWidth","handleResize","addEventListener","removeEventListener","desktopNavItems","label","icon","show","renderFiltersBox","toLocaleString","parseInt","i","item","Icon","isActive","ListingCard","onMarkerClick","fullHeight","_ref6","onLoad","classList","remove","toFixed","slice","index","_ref7","GEOCODER_KEY","process","env","REACT_APP_GEOCODER_API_KEY","GEOCODER_PROVIDER","REACT_APP_GEOCODER_PROVIDER","streetAddress","split","geocodingStatus","setGecodingStatus","errors","setErrors","availableAmenities","validateField","newErrors","geolocateCurrentPosition","rev","fetch","revData","json","features","place","place_name","parts","p","street","join","prev","display","display_name","geocodeAddress","fullAddress","resp","encodeURIComponent","data","center","warn","response","results","areaResponse","areaResults","DraggablePreview","_ref8","lng","setPos","zoom","whenCreated","url","position","draggable","eventHandlers","dragend","ll","getLatLng","toggleAmenity","Array","from","readers","Promise","resolve","all","then","images","combined","removePhoto","newPhotos","_","Object","keys","onBlur","startsWith","rows","multiple","disabled","_ref9","lastMessage","_ref0","_ref1","setMessage","showContact","setShowContact","showGallery","setShowGallery","currentPhotoIndex","setCurrentPhotoIndex","handleNavigate","direction","handleSend","PhotoGallery","currentIndex","onNavigate","_ref10","msg","toLocaleTimeString","onKeyPress","key","_ref11","_ref12","_ref13","_ref14","navItems","badge"],"sources":["C:/Users/kutum/Documents/room-rental-platform/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { MapContainer, TileLayer, Marker } from 'react-leaflet';\nimport { Home, MessageSquare, PlusCircle, Search, MapPin, X, Send, ArrowLeft, User, Phone, Mail, Edit, Menu, CheckCircle } from 'lucide-react';\nimport MapView from './MapView';\nexport default function RentalPlatform() {\n  const [currentView, setCurrentView] = useState('browse');\n  const [mapView, setMapView] = useState(false);\n  const [userType, setUserType] = useState(null);\n  const [listings, setListings] = useState([]);\n  const [conversations, setConversations] = useState([]);\n  const [selectedListing, setSelectedListing] = useState(null);\n  const [selectedConversation, setSelectedConversation] = useState(null);\n  const [searchLocation, setSearchLocation] = useState('');\n  const [priceRange, setPriceRange] = useState([0, 10000]);\n  const [selectedAmenities, setSelectedAmenities] = useState([]);\n  const [sortBy, setSortBy] = useState('newest');\n  const [currentUser, setCurrentUser] = useState(null);\n  const [showAuthModal, setShowAuthModal] = useState(false);\n  const [authDefaultType, setAuthDefaultType] = useState('renter');\n  const [nearbyMode, setNearbyMode] = useState(false);\n  const [nearbyRadius, setNearbyRadius] = useState(5); // km\n  const [userLocation, setUserLocation] = useState(null);\n  const [nearbyStatus, setNearbyStatus] = useState('');\n  const [showLocationConsent, setShowLocationConsent] = useState(false);\n  const [showMobileMenu, setShowMobileMenu] = useState(false);\n  const [toast, setToast] = useState(null);\n\n  const openAuthModal = (type = 'renter') => {\n    setAuthDefaultType(type);\n    setShowAuthModal(true);\n  };\n  \n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  // Guard: if someone navigates to 'add' without landlord auth, prompt to sign in\n  useEffect(() => {\n    if (currentView === 'add') {\n      if (!currentUser) {\n        openAuthModal('landlord');\n        setCurrentView('browse');\n      } else if (userType !== 'landlord') {\n        // Not a landlord - prompt to become one\n        openAuthModal('landlord');\n        setCurrentView('browse');\n      } else if (!currentUser.landlordComplete) {\n        // Landlord but hasn't completed onboarding\n        setCurrentView('landlord-onboarding');\n      }\n    }\n  }, [currentView, currentUser, userType]);\n\n  const loadData = async () => {\n    try {\n      const listingsResult = localStorage.getItem('listings');\n      const conversationsResult = localStorage.getItem('conversations');\n      const userResult = localStorage.getItem('current-user');\n      \n      if (listingsResult) setListings(JSON.parse(listingsResult));\n      if (conversationsResult) setConversations(JSON.parse(conversationsResult));\n      if (userResult) {\n        const user = JSON.parse(userResult);\n        setCurrentUser(user);\n        setUserType(user.type);\n      }\n    } catch (error) {\n      console.log('No existing data found, starting fresh');\n      // Add sample listings for testing the map\n      const sampleListings = [\n        {\n          id: 'listing-1',\n          title: 'Cozy Room in Soweto',\n          price: 2500,\n          location: 'Soweto, Johannesburg',\n          description: 'Comfortable room with bathroom and kitchen access',\n          photos: [],\n          status: 'available',\n          availableDate: new Date().toISOString(),\n          amenities: ['WiFi', 'Kitchen'],\n          landlordId: 'landlord-1',\n          landlordName: 'John Smith',\n          landlordPhone: '+27 123 456 7890',\n          landlordEmail: 'john@example.com',\n          landlordPhoto: '',\n          createdAt: new Date().toISOString()\n        },\n        {\n          id: 'listing-2',\n          title: 'Modern Apartment in Sandton',\n          price: 4500,\n          location: 'Sandton, Johannesburg',\n          description: 'Luxurious apartment with parking and security',\n          photos: [],\n          status: 'available',\n          availableDate: new Date().toISOString(),\n          amenities: ['WiFi', 'Parking', 'Air Conditioning'],\n          landlordId: 'landlord-2',\n          landlordName: 'Jane Doe',\n          landlordPhone: '+27 987 654 3210',\n          landlordEmail: 'jane@example.com',\n          landlordPhoto: '',\n          createdAt: new Date().toISOString()\n        },\n        {\n          id: 'listing-3',\n          title: 'Studio in Midrand',\n          price: 3200,\n          location: 'Midrand, Johannesburg',\n          description: 'Spacious studio flat with laundry facilities',\n          photos: [],\n          status: 'available',\n          availableDate: new Date().toISOString(),\n          amenities: ['Laundry', 'WiFi'],\n          landlordId: 'landlord-3',\n          landlordName: 'Mike Johnson',\n          landlordPhone: '+27 555 555 5555',\n          landlordEmail: 'mike@example.com',\n          landlordPhoto: '',\n          createdAt: new Date().toISOString()\n        }\n      ];\n      setListings(sampleListings);\n    }\n  };\n\n  // Haversine formula to compute distance in kilometers between two coords\n  const haversineDistance = (lat1, lon1, lat2, lon2) => {\n    const toRad = (v) => (v * Math.PI) / 180;\n    const R = 6371; // km\n    const dLat = toRad(lat2 - lat1);\n    const dLon = toRad(lon2 - lon1);\n    const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n    const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n    return R * c;\n  };\n\n  const handleFindNearby = () => {\n    if (!navigator.geolocation) {\n      setNearbyStatus('Geolocation not supported');\n      return;\n    }\n    // Show consent modal before accessing location\n    setShowLocationConsent(true);\n  };\n\n  const handleLocationConsentAccept = () => {\n    setShowLocationConsent(false);\n    setNearbyStatus('Locating...');\n    navigator.geolocation.getCurrentPosition((pos) => {\n      const lat = pos.coords.latitude;\n      const lon = pos.coords.longitude;\n      setUserLocation({ lat, lon });\n      setNearbyMode(true);\n      setNearbyStatus('Nearby mode enabled');\n      setTimeout(() => setNearbyStatus(''), 2000);\n    }, (err) => {\n      console.error('Geolocation error', err);\n      setNearbyStatus('Could not get location');\n    }, { enableHighAccuracy: true, timeout: 10000 });\n  };\n\n  const clearNearby = () => {\n    setNearbyMode(false);\n    setUserLocation(null);\n    setNearbyStatus('');\n  };\n\n  // Toast notification helper\n  const showToast = (message, type = 'info', title = '') => {\n    setToast({ message, type, title });\n    setTimeout(() => setToast(null), 5000);\n  };\n\n  const saveListings = async (newListings) => {\n    try {\n      localStorage.setItem('listings', JSON.stringify(newListings));\n      setListings(newListings);\n    } catch (error) {\n      console.error('Error saving listings:', error);\n    }\n  };\n\n  const saveConversations = async (newConversations) => {\n    try {\n      localStorage.setItem('conversations', JSON.stringify(newConversations));\n      setConversations(newConversations);\n    } catch (error) {\n      console.error('Error saving conversations:', error);\n    }\n  };\n\n  const saveSubscriptions = async (subscriptions) => {\n    try {\n      localStorage.setItem('subscriptions', JSON.stringify(subscriptions));\n    } catch (error) {\n      console.error('Error saving subscriptions:', error);\n    }\n  };\n\n  const getSubscriptions = async () => {\n    try {\n      const res = localStorage.getItem('subscriptions');\n      return res ? JSON.parse(res) : {};\n    } catch (err) {\n      console.error('Error loading subscriptions', err);\n    }\n    return {};\n  };\n\n  const subscribeToArea = async (userId, area) => {\n    if (!userId) {\n      openAuthModal('renter');\n      return;\n    }\n    if (!area || area.trim() === '') {\n      alert('Please enter a location to subscribe to.');\n      return;\n    }\n    try {\n      const subs = await getSubscriptions();\n      subs[userId] = subs[userId] || [];\n      if (!subs[userId].includes(area)) {\n        subs[userId].push(area);\n        await saveSubscriptions(subs);\n        alert(`Subscribed to updates for ${area}`);\n      } else {\n        alert(`You are already subscribed to ${area}`);\n      }\n    } catch (err) {\n      console.error('Subscribe failed', err);\n      alert('Could not subscribe. Please try again.');\n    }\n  };\n\n  \n\nconst handleProfileSetup = async (profileData) => {\n  try {\n    const userId = `user-${Date.now()}`;\n    const user = { \n      id: userId, \n      type: userType, \n      ...profileData,\n      createdAt: new Date().toISOString()\n    };\n    \n    localStorage.setItem('current-user', JSON.stringify(user));\n    setCurrentUser(user);\n    showToast('Profile created successfully!', 'success', 'Welcome!');\n    setCurrentView('browse');\n  } catch (error) {\n    console.error('Error saving profile:', error);\n    // Still set the user locally even if storage fails\n    const userId = `user-${Date.now()}`;\n    const user = { \n      id: userId, \n      type: userType, \n      ...profileData,\n      createdAt: new Date().toISOString()\n    };\n    setCurrentUser(user);\n    showToast('Profile created (data may not be persisted)', 'error');\n    setCurrentView('browse');\n  }\n};\n\nconst handleUpdateProfile = async (profileData) => {\n  try {\n    const updatedUser = { ...currentUser, ...profileData };\n    \n    localStorage.setItem('current-user', JSON.stringify(updatedUser));\n    setCurrentUser(updatedUser);\n    showToast('Profile updated successfully!', 'success');\n    setCurrentView('browse');\n  } catch (error) {\n    console.error('Error updating profile:', error);\n    const updatedUser = { ...currentUser, ...profileData };\n    setCurrentUser(updatedUser);\n    showToast('Profile updated (data may not be persisted)', 'error');\n    setCurrentView('browse');\n  }\n};\n\nconst handleQuickAuth = async (profileData) => {\n  // Lightweight auth (used by AuthModal) - create and persist a user\n  try {\n    const userId = `user-${Date.now()}`;\n    const user = {\n      id: userId,\n      type: profileData.type || 'renter',\n      name: profileData.name,\n      phone: profileData.phone || '',\n      email: profileData.email || '',\n      photo: profileData.photo || '',\n      createdAt: new Date().toISOString()\n    };\n    localStorage.setItem('current-user', JSON.stringify(user));\n    setCurrentUser(user);\n    setUserType(user.type);\n    setShowAuthModal(false);\n    // If landlord, route to onboarding to complete setup before posting\n    if (user.type === 'landlord') {\n      setCurrentView('landlord-onboarding');\n    } else {\n      setCurrentView('browse');\n    }\n  } catch (err) {\n    console.error('Auth failed', err);\n  }\n};\n\nconst handleCompleteOnboarding = async (onboardData) => {\n  try {\n    const updated = { ...currentUser, landlordComplete: true, landlordInfo: onboardData };\n    localStorage.setItem('current-user', JSON.stringify(updated));\n    setCurrentUser(updated);\n    setCurrentView('browse');\n  } catch (err) {\n    console.error('Onboarding save failed', err);\n    setCurrentUser({ ...currentUser, landlordComplete: true, landlordInfo: onboardData });\n    setCurrentView('browse');\n  }\n};\n\nconst handleAddListing = async (listingData) => {\n  const newListing = {\n    id: `listing-${Date.now()}`,\n    title: listingData.title,\n    price: listingData.price,\n    location: listingData.location,\n    description: listingData.description,\n    photos: listingData.photos || [],\n    status: listingData.status || 'available',\n    availableDate: listingData.availableDate || new Date().toISOString(),\n    amenities: listingData.amenities || [],\n    latitude: listingData.latitude ?? null,\n    longitude: listingData.longitude ?? null,\n    landlordId: currentUser.id,\n    landlordName: currentUser.name,\n    landlordPhone: currentUser.phone,\n    landlordEmail: currentUser.email,\n    landlordPhoto: currentUser.photo,\n    createdAt: new Date().toISOString()\n  };\n\n    const updatedListings = [...listings, newListing];\n    await saveListings(updatedListings);\n    showToast('Listing created successfully!', 'success', 'Success!');\n    setCurrentView('browse');\n    // Scroll to top to see new listing\n    window.scrollTo({ top: 0, behavior: 'smooth' });\n  };\n\n  const handleSendMessage = async (listingId, message) => {\n    const conversationId = `${currentUser.id}-${listingId}`;\n    const existingConv = conversations.find(c => c.id === conversationId);\n    \n    const newMessage = {\n      id: `msg-${Date.now()}`,\n      sender: currentUser.type,\n      text: message,\n      timestamp: new Date().toISOString()\n    };\n\n    let updatedConversations;\n    if (existingConv) {\n      updatedConversations = conversations.map(c => \n        c.id === conversationId \n          ? { ...c, messages: [...c.messages, newMessage] }\n          : c\n      );\n    } else {\n      const newConv = {\n        id: conversationId,\n        listingId,\n        renterId: currentUser.id,\n        messages: [newMessage]\n      };\n      updatedConversations = [...conversations, newConv];\n    }\n    \n    await saveConversations(updatedConversations);\n  };\n\nconst filteredListings = listings\n  .map(listing => {\n    // attach distance if we have userLocation\n    if (userLocation && listing.latitude != null && listing.longitude != null) {\n      const d = haversineDistance(userLocation.lat, userLocation.lon, listing.latitude, listing.longitude);\n      return { ...listing, __distanceKm: d };\n    }\n    if (userLocation && (listing.latitude == null || listing.longitude == null)) {\n      // try to geocode-less accurate: leave distance undefined\n      return { ...listing };\n    }\n    return { ...listing };\n  })\n  .filter(listing => {\n    const matchesLocation = !searchLocation || \n      (listing.location || '').toLowerCase().includes(searchLocation.toLowerCase());\n    const price = parseFloat(listing.price);\n    const matchesPrice = price >= priceRange[0] && price <= priceRange[1];\n    const matchesAmenities = selectedAmenities.length === 0 || \n      selectedAmenities.every(amenity => listing.amenities?.includes(amenity));\n\n    let passesNearby = true;\n    if (nearbyMode && userLocation) {\n      // require listing to have coordinates to be included\n      if (listing.latitude != null && listing.longitude != null) {\n        const d = listing.__distanceKm ?? haversineDistance(userLocation.lat, userLocation.lon, listing.latitude, listing.longitude);\n        passesNearby = d <= nearbyRadius;\n      } else {\n        passesNearby = false;\n      }\n    }\n\n    return matchesLocation && matchesPrice && matchesAmenities && passesNearby;\n  })\n  .sort((a, b) => {\n    if (nearbyMode && userLocation) {\n      const da = a.__distanceKm ?? Infinity;\n      const db = b.__distanceKm ?? Infinity;\n      return da - db;\n    }\n    if (sortBy === 'newest') {\n      return new Date(b.createdAt) - new Date(a.createdAt);\n    } else if (sortBy === 'cheapest') {\n      return parseFloat(a.price) - parseFloat(b.price);\n    } else if (sortBy === 'expensive') {\n      return parseFloat(b.price) - parseFloat(a.price);\n    }\n    return 0;\n  });\n\n  const userConversations = currentUser\n    ? conversations.filter(conv => {\n        if (userType === 'landlord') {\n          const listing = listings.find(l => l.id === conv.listingId);\n          return listing && listing.landlordId === currentUser.id;\n        }\n        return conv.renterId === currentUser.id;\n      })\n    : [];\n\n  // Allow guests to land on Browse by default. If userType isn't set,\n  // show a gentle callout in the header (below) so users can pick a role\n  // when they want to post or set up their profile.\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Modern Professional Header */}\n      <div className=\"bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm\">\n        <div className=\"max-w-7xl mx-auto px-4 py-3\">\n          <div className=\"flex items-center justify-between\">\n            {/* Logo */}\n            <h1 className=\"text-2xl font-bold\">\n              <span className=\"text-blue-600\">Room</span><span className=\"text-red-500\">24</span>\n            </h1>\n\n            {/* Desktop Navigation */}\n            <div className=\"hidden md:flex items-center gap-4\">\n              {!currentUser && (\n                <div className=\"flex items-center gap-3\">\n                  <button onClick={() => openAuthModal('renter')} className=\"text-gray-600 hover:text-gray-800 px-3 py-2 rounded-lg\">Sign in</button>\n                  <button onClick={() => openAuthModal('landlord')} className=\"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg\">List Your Room</button>\n                </div>\n              )}\n              \n              {currentUser && (\n                <>\n                  <div className=\"flex items-center gap-2 text-sm mr-4\">\n                    <div className=\"w-8 h-8 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-semibold\">\n                      {currentUser.name.charAt(0)}\n                    </div>\n                    <div>\n                      <p className=\"font-medium text-gray-800\">{currentUser.name}</p>\n                      <p className=\"text-xs text-gray-500\">{currentUser.type === 'landlord' ? 'Property Owner' : 'Looking for a Room'}</p>\n                    </div>\n                  </div>\n                  \n                  {userConversations.length > 0 && (\n                    <button \n                      onClick={() => setCurrentView('messages')}\n                      className=\"relative p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition\"\n                      aria-label=\"Messages\"\n                    >\n                      <MessageSquare className=\"w-6 h-6\" />\n                      {userConversations.length > 0 && (\n                        <span className=\"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold\">\n                          {userConversations.length}\n                        </span>\n                      )}\n                    </button>\n                  )}\n                  \n                  <button \n                    onClick={() => setCurrentView('profile')}\n                    className=\"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition\"\n                    aria-label=\"Profile\"\n                  >\n                    <User className=\"w-6 h-6\" />\n                  </button>\n                </>\n              )}\n            </div>\n\n            {/* Mobile: CTAs and Hamburger */}\n            <div className=\"flex md:hidden items-center gap-2\">\n              {!currentUser ? (\n                <>\n                  <button onClick={() => openAuthModal('renter')} className=\"text-sm text-gray-600 hover:text-gray-800 px-2 py-1\">Sign in</button>\n                  <button onClick={() => openAuthModal('landlord')} className=\"text-sm bg-red-500 hover:bg-red-600 text-white px-3 py-1.5 rounded\">List Room</button>\n                </>\n              ) : (\n                <button \n                  onClick={() => setShowMobileMenu(!showMobileMenu)}\n                  className=\"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition\"\n                  aria-label=\"Menu\"\n                >\n                  {showMobileMenu ? <X className=\"w-6 h-6\" /> : <Menu className=\"w-6 h-6\" />}\n                </button>\n              )}\n            </div>\n          </div>\n\n          {/* Mobile Menu Dropdown */}\n          {currentUser && showMobileMenu && (\n            <div className=\"md:hidden mt-3 pb-3 border-t border-gray-200 pt-3 animate-slideDown\">\n              <div className=\"flex items-center gap-3 mb-4 pb-3 border-b border-gray-100\">\n                <div className=\"w-10 h-10 rounded-full bg-gradient-to-br from-blue-400 to-blue-600 flex items-center justify-center text-white font-semibold\">\n                  {currentUser.name.charAt(0)}\n                </div>\n                <div>\n                  <p className=\"font-medium text-gray-800\">{currentUser.name}</p>\n                  <p className=\"text-xs text-gray-500\">{currentUser.type === 'landlord' ? 'Property Owner' : 'Looking for a Room'}</p>\n                </div>\n              </div>\n              \n              <div className=\"space-y-1\">\n                {userConversations.length > 0 && (\n                  <button \n                    onClick={() => { setCurrentView('messages'); setShowMobileMenu(false); }}\n                    className=\"w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition\"\n                  >\n                    <MessageSquare className=\"w-5 h-5\" />\n                    <span>Messages</span>\n                    {userConversations.length > 0 && (\n                      <span className=\"ml-auto bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold\">\n                        {userConversations.length}\n                      </span>\n                    )}\n                  </button>\n                )}\n                \n                <button \n                  onClick={() => { setCurrentView('profile'); setShowMobileMenu(false); }}\n                  className=\"w-full flex items-center gap-3 px-3 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition\"\n                >\n                  <User className=\"w-5 h-5\" />\n                  <span>Profile</span>\n                </button>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Toast Notification */}\n      {toast && (\n        <div className={`fixed top-20 right-4 z-50 bg-white border-l-4 ${\n          toast.type === 'success' ? 'border-green-500' : \n          toast.type === 'error' ? 'border-red-500' : \n          'border-blue-500'\n        } rounded shadow-lg p-4 animate-slideInRight flex items-start gap-3 max-w-sm`}>\n          {toast.type === 'success' && <CheckCircle className=\"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5\" />}\n          <div className=\"flex-1\">\n            {toast.title && <p className=\"font-semibold text-gray-800 mb-1\">{toast.title}</p>}\n            <p className=\"text-sm text-gray-600\">{toast.message}</p>\n          </div>\n          <button \n            onClick={() => setToast(null)}\n            className=\"text-gray-400 hover:text-gray-600\"\n            aria-label=\"Close notification\"\n          >\n            <X className=\"w-4 h-4\" />\n          </button>\n        </div>\n      )}\n\n      <div className=\"max-w-6xl mx-auto pb-20\">\n        {currentView === 'setup-profile' && (\n          <ProfileSetupView onSubmit={handleProfileSetup} userType={userType} />\n        )}\n\n        {currentView === 'profile' && currentUser && (\n          <ProfileView user={currentUser} onEdit={() => setCurrentView('edit-profile')} />\n        )}\n\n        {currentView === 'edit-profile' && currentUser && (\n          <EditProfileView user={currentUser} onSubmit={handleUpdateProfile} onCancel={() => setCurrentView('profile')} />\n        )}\n\n        {currentView === 'landlord-onboarding' && currentUser && userType === 'landlord' && (\n          <LandlordOnboardingView onComplete={handleCompleteOnboarding} onCancel={() => setCurrentView('browse')} currentUser={currentUser} />\n        )}\n\n        {currentView === 'browse' && (\n          <BrowseView \n            listings={filteredListings}\n            searchLocation={searchLocation}\n            setSearchLocation={setSearchLocation}\n            priceRange={priceRange}\n            setPriceRange={setPriceRange}\n            selectedAmenities={selectedAmenities}\n            setSelectedAmenities={setSelectedAmenities}\n            sortBy={sortBy}\n            setSortBy={setSortBy}\n            mapView={mapView}\n            setMapView={setMapView}\n            onSelectListing={setSelectedListing}\n            setCurrentView={setCurrentView}\n            currentUser={currentUser}\n            onRequireAuth={openAuthModal}\n            subscribeToArea={subscribeToArea}\n            onFindNearby={handleFindNearby}\n            nearbyRadius={nearbyRadius}\n            setNearbyRadius={setNearbyRadius}\n            nearbyMode={nearbyMode}\n            clearNearby={clearNearby}\n            userLocation={userLocation}\n            nearbyStatus={nearbyStatus}\n          />\n        )}\n\n        {currentView === 'messages' && (\n          <MessagesView \n            conversations={userConversations}\n            listings={listings}\n            userType={userType}\n            onSelectConversation={setSelectedConversation}\n          />\n        )}\n\n        {currentView === 'add' && (\n          <AddListingView\n            onSubmit={handleAddListing}\n            onCancel={() => setCurrentView('browse')}\n            currentUser={currentUser}\n            userType={userType}\n            onRequireAuth={openAuthModal}\n            onRequireOnboarding={() => setCurrentView('landlord-onboarding')}\n          />\n        )}\n\n        {currentView === 'my-listings' && currentUser && userType === 'landlord' && (\n          <MyListingsView \n            listings={listings.filter(l => l.landlordId === currentUser.id)}\n            onDelete={async (id) => {\n              const updated = listings.filter(l => l.id !== id);\n              await saveListings(updated);\n            }}\n          />\n        )}\n      </div>\n\n      {selectedListing && (\n        <ListingDetailModal \n          listing={selectedListing}\n          landlord={{\n            name: selectedListing.landlordName,\n            phone: selectedListing.landlordPhone,\n            email: selectedListing.landlordEmail,\n            photo: selectedListing.landlordPhoto\n          }}\n          onClose={() => setSelectedListing(null)}\n          onSendMessage={handleSendMessage}\n          userType={userType}\n          currentUser={currentUser}\n          onRequireAuth={openAuthModal}\n        />\n      )}\n\n      {selectedConversation && (\n        <ConversationModal\n          conversation={selectedConversation}\n          listing={listings.find(l => l.id === selectedConversation.listingId)}\n          onClose={() => setSelectedConversation(null)}\n          onSendMessage={handleSendMessage}\n        />\n      )}\n\n      {showAuthModal && (\n        <AuthModal\n          defaultType={authDefaultType}\n          onClose={() => setShowAuthModal(false)}\n          onSubmit={handleQuickAuth}\n        />\n      )}\n\n      <BottomNav \n        currentView={currentView}\n        setCurrentView={setCurrentView}\n        userType={userType}\n        messageCount={userConversations.length}\n      />\n\n      {showLocationConsent && (\n        <LocationConsentModal\n          onAccept={handleLocationConsentAccept}\n          onDecline={() => setShowLocationConsent(false)}\n        />\n      )}\n\n      {/* Footer */}\n      <footer className=\"bg-gray-800 text-gray-300 py-8 mt-auto\">\n        <div className=\"max-w-7xl mx-auto px-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 mb-6\">\n            <div>\n              <h3 className=\"text-white font-bold text-lg mb-3\">Room24</h3>\n              <p className=\"text-sm text-gray-400\">Find your perfect room in South Africa. Connect with verified landlords and renters.</p>\n            </div>\n            <div>\n              <h4 className=\"text-white font-semibold mb-3\">Legal</h4>\n              <ul className=\"space-y-2 text-sm\">\n                <li><a href=\"#privacy\" className=\"hover:text-white transition\">Privacy Policy</a></li>\n                <li><a href=\"#terms\" className=\"hover:text-white transition\">Terms of Service</a></li>\n                <li><a href=\"#cookies\" className=\"hover:text-white transition\">Cookie Policy</a></li>\n              </ul>\n            </div>\n            <div>\n              <h4 className=\"text-white font-semibold mb-3\">Contact</h4>\n              <ul className=\"space-y-2 text-sm\">\n                <li><a href=\"mailto:support@room24.co.za\" className=\"hover:text-white transition\">support@room24.co.za</a></li>\n                <li><a href=\"#help\" className=\"hover:text-white transition\">Help Center</a></li>\n              </ul>\n            </div>\n          </div>\n          <div className=\"border-t border-gray-700 pt-6 text-sm text-gray-400\">\n            <p> {new Date().getFullYear()} Room24. All rights reserved.</p>\n            <p className=\"mt-2\">By using this site, you agree to our use of location services and cookies for improved user experience.</p>\n          </div>\n        </div>\n      </footer>\n    </div>\n  );\n}\n\n\n\nfunction ProfileSetupView({ onSubmit, userType }) {\n  const [formData, setFormData] = useState({\n    name: '',\n    phone: '',\n    email: '',\n    photo: ''\n  });\n\n  const handlePhotoUpload = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setFormData({ ...formData, photo: reader.result });\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleSubmit = () => {\n    if (formData.name && formData.phone && formData.email) {\n      onSubmit(formData);\n    }\n  };\n\n  return (\n    <div className=\"p-4 min-h-screen bg-gray-50 pb-20\">\n      <div className=\"max-w-2xl mx-auto mt-8\">\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-8\">\n          <div className=\"text-center mb-8\">\n            <h2 className=\"text-3xl font-bold text-gray-800 mb-2\">Complete Your Profile</h2>\n            <p className=\"text-gray-600\">Help others know who you are</p>\n          </div>\n\n          <div className=\"space-y-6\">\n            {/* Photo Upload */}\n            <div className=\"flex justify-center mb-8\">\n              <div className=\"relative\">\n                {formData.photo ? (\n                  <img \n                    src={formData.photo} \n                    alt=\"Profile\" \n                    className=\"w-32 h-32 rounded-full object-cover border-4 border-blue-200 shadow-lg\" \n                  />\n                ) : (\n                  <div className=\"w-32 h-32 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center border-4 border-blue-200 shadow-lg\">\n                    <User className=\"w-16 h-16 text-blue-600\" />\n                  </div>\n                )}\n                <label className=\"absolute bottom-0 right-0 bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full cursor-pointer shadow-lg transition group\">\n                  <Edit className=\"w-5 h-5\" />\n                  <input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handlePhotoUpload}\n                    className=\"hidden\"\n                  />\n                </label>\n              </div>\n            </div>\n\n            {/* Form Fields */}\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Full Name *</label>\n              <input\n                type=\"text\"\n                required\n                value={formData.name}\n                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                placeholder=\"Enter your full name\"\n                className=\"w-full px-4 py-3 border border-gray-300 bg-white text-gray-800 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition placeholder-gray-400\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Phone Number *</label>\n              <div className=\"relative\">\n                <Phone className=\"absolute left-4 top-3.5 w-5 h-5 text-gray-400\" />\n                <input\n                  type=\"tel\"\n                  required\n                  value={formData.phone}\n                  onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\n                  placeholder=\"e.g., +27 12 345 6789\"\n                  className=\"w-full pl-11 pr-4 py-3 border border-gray-300 bg-white text-gray-800 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition placeholder-gray-400\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Email Address *</label>\n              <div className=\"relative\">\n                <Mail className=\"absolute left-4 top-3.5 w-5 h-5 text-gray-400\" />\n                <input\n                  type=\"email\"\n                  required\n                  value={formData.email}\n                  onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                  placeholder=\"your.email@example.com\"\n                  className=\"w-full pl-11 pr-4 py-3 border border-gray-300 bg-white text-gray-800 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition placeholder-gray-400\"\n                />\n              </div>\n            </div>\n\n            {/* Submit Button */}\n            <button\n              onClick={handleSubmit}\n              className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition mt-8 shadow-sm\"\n            >\n              Complete Setup\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction ProfileView({ user, onEdit }) {\n  return (\n    <div className=\"p-4\">\n      <div className=\"bg-white rounded-lg shadow p-6 max-w-xl mx-auto\">\n        <div className=\"flex justify-between items-start mb-6\">\n          <h2 className=\"text-2xl font-bold text-gray-800\">My Profile</h2>\n          <button\n            onClick={onEdit}\n            className=\"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition flex items-center gap-2\"\n          >\n            <Edit className=\"w-4 h-4\" />\n            Edit\n          </button>\n        </div>\n\n        <div className=\"flex flex-col items-center mb-6\">\n          {user.photo ? (\n            <img src={user.photo} alt=\"Profile\" className=\"w-32 h-32 rounded-full object-cover border-4 border-blue-500 mb-4\" />\n          ) : (\n            <div className=\"w-32 h-32 rounded-full bg-gray-200 flex items-center justify-center border-4 border-gray-300 mb-4\">\n              <User className=\"w-16 h-16 text-gray-400\" />\n            </div>\n          )}\n          <h3 className=\"text-2xl font-bold text-gray-800\">{user.name}</h3>\n          <span className=\"inline-block mt-2 px-4 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-semibold\">\n            {user.type === 'landlord' ? 'Landlord' : 'Renter'}\n          </span>\n        </div>\n\n        <div className=\"space-y-4\">\n          <div className=\"bg-gray-50 rounded-lg p-4\">\n            <div className=\"flex items-center text-gray-600\">\n              <Phone className=\"w-5 h-5 mr-3 text-blue-600\" />\n              <div>\n                <p className=\"text-xs text-gray-500 mb-1\">Phone Number</p>\n                <p className=\"font-semibold text-gray-800\">{user.phone}</p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-gray-50 rounded-lg p-4\">\n            <div className=\"flex items-center text-gray-600\">\n              <Mail className=\"w-5 h-5 mr-3 text-blue-600\" />\n              <div>\n                <p className=\"text-xs text-gray-500 mb-1\">Email Address</p>\n                <p className=\"font-semibold text-gray-800\">{user.email}</p>\n              </div>\n            </div>\n          </div>\n\n          <div className=\"bg-gray-50 rounded-lg p-4\">\n            <div className=\"flex items-center text-gray-600\">\n              <User className=\"w-5 h-5 mr-3 text-blue-600\" />\n              <div>\n                <p className=\"text-xs text-gray-500 mb-1\">Member Since</p>\n                <p className=\"font-semibold text-gray-800\">\n                  {new Date(user.createdAt).toLocaleDateString()}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction LandlordOnboardingView({ onComplete, onCancel, currentUser }) {\n  const [form, setForm] = useState({ businessName: currentUser?.name || '', bankDetails: '', idNumber: '', agree: false });\n\n  const handleSubmit = () => {\n    if (!form.businessName || !form.agree) {\n      alert('Please provide a display name and agree to the terms.');\n      return;\n    }\n    onComplete(form);\n  };\n\n  return (\n    <div className=\"p-4 min-h-screen bg-gray-50 pb-20\">\n      <div className=\"max-w-2xl mx-auto mt-8\">\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-8\">\n          <div className=\"flex items-center gap-6 mb-6\">\n            <div className=\"w-16 h-16 rounded-full bg-blue-50 flex items-center justify-center text-blue-600 text-2xl font-bold\">\n              {currentUser && currentUser.name ? currentUser.name.charAt(0) : 'L'}\n            </div>\n            <div>\n              <h2 className=\"text-2xl font-bold text-gray-800\">Welcome, {currentUser?.name || 'Landlord'}</h2>\n              <p className=\"text-gray-600\">A few details to get your listings live and increase trust with renters.</p>\n            </div>\n          </div>\n\n          <div className=\"space-y-4\">\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-1\">Display Name *</label>\n              <input value={form.businessName} onChange={(e) => setForm({ ...form, businessName: e.target.value })} className=\"w-full px-4 py-3 border border-gray-300 rounded-lg\" />\n              <p className=\"text-xs text-gray-500 mt-1\">This name is shown to renters on your listings and messages.</p>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-1\">How do you want to receive payments?</label>\n              <input value={form.bankDetails} onChange={(e) => setForm({ ...form, bankDetails: e.target.value })} placeholder=\"Bank account or payment details (optional)\" className=\"w-full px-4 py-3 border border-gray-300 rounded-lg\" />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-1\">ID Number (optional)</label>\n              <input value={form.idNumber} onChange={(e) => setForm({ ...form, idNumber: e.target.value })} className=\"w-full px-4 py-3 border border-gray-300 rounded-lg\" />\n            </div>\n\n            <div className=\"flex items-start gap-2\">\n              <input type=\"checkbox\" checked={form.agree} onChange={(e) => setForm({ ...form, agree: e.target.checked })} />\n              <div className=\"text-sm text-gray-600\">I confirm I am authorised to list these properties and agree to the <button type=\"button\" onClick={(e) => e.preventDefault()} className=\"text-blue-600 underline p-0\">terms of service</button>.</div>\n            </div>\n\n            <div className=\"flex gap-3 pt-4\">\n              <button onClick={onCancel} className=\"flex-1 bg-gray-100 hover:bg-gray-200 py-3 rounded\">Cancel</button>\n              <button onClick={handleSubmit} className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-3 rounded\">Complete and Start Listing</button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction EditProfileView({ user, onSubmit, onCancel }) {\n  const [formData, setFormData] = useState({\n    name: user.name || '',\n    phone: user.phone || '',\n    email: user.email || '',\n    photo: user.photo || ''\n  });\n\n  const handlePhotoUpload = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setFormData({ ...formData, photo: reader.result });\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleSubmit = () => {\n    if (formData.name && formData.phone && formData.email) {\n      onSubmit(formData);\n    }\n  };\n\n  return (\n    <div className=\"p-4 min-h-screen bg-gray-50 pb-20\">\n      <div className=\"max-w-2xl mx-auto mt-8\">\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-8\">\n          <div className=\"flex items-center justify-between mb-8\">\n            <h2 className=\"text-3xl font-bold text-gray-800\">Edit Profile</h2>\n            <button onClick={onCancel} className=\"text-gray-400 hover:text-gray-600 transition\">\n              <X className=\"w-6 h-6\" />\n            </button>\n          </div>\n\n          <div className=\"space-y-6\">\n            {/* Photo Upload */}\n            <div className=\"flex justify-center mb-8\">\n              <div className=\"relative\">\n                {formData.photo ? (\n                  <img src={formData.photo} alt=\"Profile\" className=\"w-32 h-32 rounded-full object-cover border-4 border-blue-200 shadow-lg\" />\n                ) : (\n                  <div className=\"w-32 h-32 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center border-4 border-blue-200 shadow-lg\">\n                    <User className=\"w-16 h-16 text-blue-600\" />\n                  </div>\n                )}\n                <label className=\"absolute bottom-0 right-0 bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full cursor-pointer shadow-lg transition\">\n                  <Edit className=\"w-5 h-5\" />\n                  <input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handlePhotoUpload}\n                    className=\"hidden\"\n                  />\n                </label>\n              </div>\n            </div>\n\n            {/* Form Fields */}\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Full Name</label>\n              <input\n                type=\"text\"\n                required\n                value={formData.name}\n                onChange={(e) => setFormData({ ...formData, name: e.target.value })}\n                className=\"w-full px-4 py-3 border border-gray-300 bg-white text-gray-800 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition placeholder-gray-400\"\n              />\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Phone Number</label>\n              <div className=\"relative\">\n                <Phone className=\"absolute left-4 top-3.5 w-5 h-5 text-gray-400\" />\n                <input\n                  type=\"tel\"\n                  required\n                  value={formData.phone}\n                  onChange={(e) => setFormData({ ...formData, phone: e.target.value })}\n                  className=\"w-full pl-11 pr-4 py-3 border border-gray-300 bg-white text-gray-800 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition placeholder-gray-400\"\n                />\n              </div>\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Email Address</label>\n              <div className=\"relative\">\n                <Mail className=\"absolute left-4 top-3.5 w-5 h-5 text-gray-400\" />\n                <input\n                  type=\"email\"\n                  required\n                  value={formData.email}\n                  onChange={(e) => setFormData({ ...formData, email: e.target.value })}\n                  className=\"w-full pl-11 pr-4 py-3 border border-gray-300 bg-white text-gray-800 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition placeholder-gray-400\"\n                />\n              </div>\n            </div>\n\n            {/* Action Buttons */}\n            <div className=\"flex gap-3 pt-6 border-t border-gray-200\">\n              <button\n                onClick={onCancel}\n                className=\"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-3 rounded-lg transition\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSubmit}\n                className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition shadow-sm\"\n              >\n                Save Changes\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction BrowseView({ \n  listings, \n  searchLocation, \n  setSearchLocation, \n  priceRange, \n  setPriceRange,\n  selectedAmenities,\n  setSelectedAmenities,\n  sortBy,\n  setSortBy,\n  mapView,\n  setMapView,\n  onSelectListing,\n  setCurrentView,\n  currentUser, onRequireAuth, subscribeToArea,\n  onFindNearby, nearbyRadius, setNearbyRadius, nearbyMode, clearNearby, userLocation, nearbyStatus\n}) {\n  const [showAdvancedFilters, setShowAdvancedFilters] = useState(false);\n  const [isDesktop, setIsDesktop] = useState(typeof window !== 'undefined' ? window.innerWidth >= 1024 : false);\n\n  useEffect(() => {\n    const handleResize = () => setIsDesktop(window.innerWidth >= 1024);\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  // Sidebar navigation items (desktop only)\n  const desktopNavItems = [\n    { id: 'browse', label: 'Browse', icon: Search },\n    { id: 'messages', label: 'Messages', icon: MessageSquare },\n    { id: 'add', label: 'List Room', icon: PlusCircle, show: currentUser && currentUser.type === 'landlord' },\n    { id: 'my-listings', label: 'My Rooms', icon: Home, show: currentUser && currentUser.type === 'landlord' },\n    { id: 'profile', label: 'Profile', icon: User }\n  ];\n\n  const renderFiltersBox = () => (\n    <div className=\"filters-box\">\n      <div className=\"flex items-center gap-2 mb-2\">\n        <MapPin className=\"w-4 h-4 text-gray-400\" />\n        <input\n          type=\"text\"\n          placeholder=\"Search location...\"\n          value={searchLocation}\n          onChange={(e) => setSearchLocation(e.target.value)}\n          className=\"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n        />\n      </div>\n      <div className=\"flex flex-col gap-2\">\n        <label className=\"text-xs font-semibold text-gray-600\">Price Range</label>\n        <div className=\"flex items-center gap-2 text-xs bg-gray-50 px-2 py-1 rounded border border-gray-200\">\n          <span>R{priceRange[0].toLocaleString()} - R{priceRange[1].toLocaleString()}</span>\n          <select\n            value={priceRange[0]}\n            onChange={(e) => setPriceRange([parseInt(e.target.value), priceRange[1]])}\n            className=\"bg-transparent border-l border-gray-300 pl-2 focus:outline-none\"\n          >\n            <option value=\"0\">Min</option>\n            <option value=\"500\">R500</option>\n            <option value=\"1000\">R1000</option>\n            <option value=\"1500\">R1500</option>\n          </select>\n        </div>\n        <label className=\"text-xs font-semibold text-gray-600 mt-2\">Sort</label>\n        <select\n          value={sortBy}\n          onChange={(e) => setSortBy(e.target.value)}\n          className=\"text-sm bg-white border border-gray-300 px-2 py-1 rounded focus:ring-2 focus:ring-blue-500\"\n        >\n          <option value=\"newest\">Newest</option>\n          <option value=\"cheapest\">Cheapest</option>\n          <option value=\"expensive\">Most Expensive</option>\n        </select>\n        <button\n          onClick={() => setShowAdvancedFilters(!showAdvancedFilters)}\n          className=\"mt-2 text-xs text-blue-600 hover:text-blue-700 font-semibold px-2 py-1 rounded hover:bg-blue-50 transition\"\n        >\n          {showAdvancedFilters ? 'Close Filters' : 'More Filters'}\n        </button>\n        {showAdvancedFilters && (\n          <div className=\"mt-2 p-2 bg-gray-50 border border-gray-200 rounded\">\n            <p className=\"text-xs text-gray-600\">(Advanced filters placeholder)</p>\n          </div>\n        )}\n        <div className=\"mt-4 flex flex-col gap-2\">\n          <label className=\"text-xs font-semibold text-gray-600\">Nearby Search</label>\n          <div className=\"flex gap-2\">\n            <button\n              type=\"button\"\n              onClick={() => onFindNearby && onFindNearby()}\n              className=\"flex-1 bg-green-600 hover:bg-green-700 text-white px-2 py-1 rounded text-xs font-medium\"\n            >\n              Find Nearby\n            </button>\n            <select\n              value={nearbyRadius}\n              onChange={(e) => setNearbyRadius(parseInt(e.target.value))}\n              className=\"text-xs bg-gray-50 border border-gray-300 px-2 py-1 rounded\"\n            >\n              <option value={1}>1km</option>\n              <option value={3}>3km</option>\n              <option value={5}>5km</option>\n              <option value={10}>10km</option>\n            </select>\n          </div>\n          {nearbyMode && (\n            <button\n              onClick={clearNearby}\n              className=\"text-xs bg-white border border-gray-300 text-gray-700 px-2 py-1 rounded\"\n            >\n              Clear Nearby\n            </button>\n          )}\n          {nearbyStatus && <div className=\"text-xs text-gray-500\">{nearbyStatus}</div>}\n        </div>\n      </div>\n    </div>\n  );\n\n  // Desktop layout (sidebar + split view)\n  if (isDesktop) {\n    return (\n      <div className=\"bg-gray-50 min-h-screen pb-4\">\n        <div className=\"layout-desktop\">\n          <aside className=\"sidebar-nav\">\n            <div>\n              <h2 className=\"text-xl font-bold flex items-center gap-2 mb-4\"><span className=\"text-blue-600\">Room</span><span className=\"text-red-500\">24</span></h2>\n              <div className=\"sidebar-section-title mb-2\">Navigation</div>\n              <div className=\"sidebar-menu\">\n                {desktopNavItems.filter(i => i.show === undefined || i.show).map(item => {\n                  const Icon = item.icon;\n                  const isActive = item.id === 'browse';\n                  return (\n                    <button\n                      key={item.id}\n                      onClick={() => setCurrentView(item.id)}\n                      className={isActive ? 'active' : ''}\n                      aria-label={item.label}\n                    >\n                      <Icon className=\"w-4 h-4\" /> {item.label}\n                    </button>\n                  );\n                })}\n              </div>\n            </div>\n            <div>\n              <div className=\"sidebar-section-title mb-2\">Filters</div>\n              {renderFiltersBox()}\n            </div>\n            {!currentUser && (\n              <div className=\"mt-auto pt-4 border-t border-gray-200\">\n                <p className=\"text-xs text-gray-500 mb-2\">Join to list rooms or message landlords.</p>\n                <div className=\"flex gap-2\">\n                  <button onClick={() => onRequireAuth && onRequireAuth('renter')} className=\"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 text-xs py-2 rounded\">Sign In</button>\n                  <button onClick={() => onRequireAuth && onRequireAuth('landlord')} className=\"flex-1 bg-red-500 hover:bg-red-600 text-white text-xs py-2 rounded\">List Room</button>\n                </div>\n              </div>\n            )}\n          </aside>\n          <main className=\"desktop-split\">\n            <div className=\"list-pane\">\n              <div className=\"flex items-center justify-between mb-4\">\n                <h2 className=\"text-lg font-semibold text-gray-800\">{listings.length === 0 ? 'No rooms' : `${listings.length} rooms`}</h2>\n                <button\n                  onClick={() => setMapView(!mapView)}\n                  className=\"text-xs px-3 py-1.5 rounded border border-gray-300 bg-white hover:bg-gray-50 transition\"\n                >\n                  {mapView ? 'Hide Map' : 'Show Map'}\n                </button>\n              </div>\n              {/* Listings Grid */}\n              {listings.length === 0 ? (\n                <div className=\"bg-white border border-gray-200 rounded-lg p-8 text-center\">\n                  <p className=\"text-gray-600 text-sm\">No rooms match your filters.</p>\n                </div>\n              ) : (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6\">\n                  {listings.map(listing => (\n                    <ListingCard key={listing.id} listing={listing} onClick={() => onSelectListing(listing)} />\n                  ))}\n                </div>\n              )}\n            </div>\n            {mapView && (\n              <div className=\"map-pane\">\n                <MapView\n                  listings={listings}\n                  onMarkerClick={(l) => onSelectListing(l)}\n                  userLocation={userLocation}\n                  nearbyRadius={nearbyRadius}\n                  fullHeight={true}\n                />\n              </div>\n            )}\n          </main>\n        </div>\n      </div>\n    );\n  }\n\n  // Mobile / tablet existing layout\n  return (\n    <div className=\"bg-gray-50 min-h-screen pb-20\">\n      {/* Hero Search Section */}\n      <div className=\"bg-white border-b border-gray-200\">\n        <div className=\"max-w-7xl mx-auto px-4 py-8\">\n          {/* Main Search Bar */}\n          <div className=\"mb-6\">\n            <div className=\"flex gap-3\">\n              <div className=\"flex-1 relative\">\n                <MapPin className=\"absolute left-3 top-3.5 w-5 h-5 text-gray-400\" />\n                <input\n                  type=\"text\"\n                  placeholder=\"Search by location, suburb, or area...\"\n                  value={searchLocation}\n                  onChange={(e) => setSearchLocation(e.target.value)}\n                  className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent shadow-sm\"\n                />\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <button className=\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition font-semibold shadow-sm\">\n                  Search\n                </button>\n\n                <button\n                  onClick={() => {\n                    if (!searchLocation || searchLocation.trim() === '') {\n                      alert('Enter a location to subscribe to updates for that area.');\n                      return;\n                    }\n                    if (!currentUser) {\n                      onRequireAuth && onRequireAuth('renter');\n                      return;\n                    }\n                    subscribeToArea && subscribeToArea(currentUser.id, searchLocation.trim());\n                  }}\n                  className=\"bg-white border border-gray-200 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-50 transition text-sm\"\n                >\n                  Subscribe to area\n                </button>\n\n                <button\n                  type=\"button\"\n                  onClick={() => onFindNearby && onFindNearby()}\n                  className=\"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition\"\n                >\n                  Find Nearby\n                </button>\n\n                <select value={nearbyRadius} onChange={(e) => setNearbyRadius(parseInt(e.target.value))} className=\"text-sm bg-gray-50 border border-gray-200 px-3 py-2 rounded-lg text-gray-700\">\n                  <option value={1}>1 km</option>\n                  <option value={3}>3 km</option>\n                  <option value={5}>5 km</option>\n                  <option value={10}>10 km</option>\n                </select>\n\n                {nearbyMode && (\n                  <button onClick={clearNearby} className=\"bg-white border border-gray-200 text-gray-700 px-3 py-2 rounded-lg text-sm\">Clear</button>\n                )}\n\n                <div className=\"text-sm text-gray-600\">\n                  {nearbyStatus}\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Smart Filters Row */}\n          <div className=\"flex gap-2 mb-4 flex-wrap items-center\">\n            {/* Price Range */}\n            <div className=\"flex items-center gap-2 bg-gray-50 px-3 py-2 rounded-lg border border-gray-200\">\n              <span className=\"text-sm text-gray-600 font-medium\">R{priceRange[0].toLocaleString()} - R{priceRange[1].toLocaleString()}</span>\n              <select\n                value={priceRange[0]}\n                onChange={(e) => setPriceRange([parseInt(e.target.value), priceRange[1]])}\n                className=\"text-xs bg-transparent border-l border-gray-300 pl-2 text-gray-600 focus:outline-none\"\n              >\n                <option value=\"0\">Min</option>\n                <option value=\"500\">R500</option>\n                <option value=\"1000\">R1000</option>\n                <option value=\"1500\">R1500</option>\n              </select>\n            </div>\n\n            {/* Sort */}\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-sm text-gray-600\">Sort:</span>\n              <select\n                value={sortBy}\n                onChange={(e) => setSortBy(e.target.value)}\n                className=\"text-sm bg-gray-50 border border-gray-200 px-3 py-2 rounded-lg text-gray-700 focus:ring-2 focus:ring-blue-500\"\n              >\n                <option value=\"newest\">Newest</option>\n                <option value=\"cheapest\">Cheapest</option>\n                <option value=\"expensive\">Most Expensive</option>\n              </select>\n            </div>\n\n            {/* More Filters Button */}\n            <button\n              onClick={() => setShowAdvancedFilters(!showAdvancedFilters)}\n              className=\"text-sm text-blue-600 hover:text-blue-700 font-medium px-3 py-2 rounded-lg hover:bg-blue-50 transition\"\n            >\n              {showAdvancedFilters ? ' Close Filters' : ' More Filters'}\n            </button>\n          </div>\n\n          {/* Advanced Filters (Collapsible) */}\n          {showAdvancedFilters && (\n            <div className=\"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200\">\n              <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4\">\n                <div>\n                  <label className=\"text-sm font-semibold text-gray-700 block mb-2\">Property Type</label>\n                  <select className=\"w-full text-sm border border-gray-300 px-3 py-2 rounded-lg focus:ring-2 focus:ring-blue-500\">\n                    <option>Any</option>\n                    <option>Room</option>\n                    <option>Apartment</option>\n                    <option>House</option>\n                  </select>\n                </div>\n                <div>\n                  <label className=\"text-sm font-semibold text-gray-700 block mb-2\">Max Price</label>\n                  <select\n                    value={priceRange[1]}\n                    onChange={(e) => setPriceRange([priceRange[0], parseInt(e.target.value)])}\n                    className=\"w-full text-sm border border-gray-300 px-3 py-2 rounded-lg focus:ring-2 focus:ring-blue-500\"\n                  >\n                    <option value=\"10000\">Up to R10,000</option>\n                    <option value=\"5000\">Up to R5,000</option>\n                    <option value=\"3000\">Up to R3,000</option>\n                    <option value=\"2000\">Up to R2,000</option>\n                  </select>\n                </div>\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {/* Call-to-Action Section */}\n      {listings.length > 0 && (\n        <div className=\"max-w-7xl mx-auto px-4 py-8\">\n          <div className=\"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200 p-6 mb-8\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h3 className=\"text-lg font-bold text-gray-800 mb-1\">Have a room to rent?</h3>\n                <p className=\"text-gray-600 text-sm\">Join thousands of landlords earning with Room24</p>\n              </div>\n              <button \n                onClick={() => setCurrentView('add')}\n                className=\"bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-semibold transition shadow-md\">\n                List Your Room\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Map / List Toggle - only relevant when there are listings */}\n      {listings.length > 0 && (\n        <div className=\"max-w-7xl mx-auto px-4\">\n          <div className=\"flex justify-between items-center mb-4\">\n            <p className=\"text-sm text-gray-600\">\n              {mapView ? 'Click markers to view details' : `Showing ${listings.length} results`}\n            </p>\n            <button\n              onClick={() => setMapView(!mapView)}\n              className=\"text-sm px-4 py-2 rounded-lg border border-gray-200 bg-white hover:bg-gray-50 transition flex items-center gap-2\"\n            >\n              <MapPin className=\"w-4 h-4\" />\n              {mapView ? 'Show List' : 'Show Map'}\n            </button>\n          </div>\n          {mapView && (\n              <MapView\n                listings={listings}\n                onMarkerClick={(l) => onSelectListing(l)}\n                userLocation={userLocation}\n                nearbyRadius={nearbyRadius}\n                fullHeight={true}\n              />\n          )}\n        </div>\n      )}\n\n      {/* Results Section */}\n      <div className=\"max-w-7xl mx-auto px-4\">\n        <div className=\"mb-6\">\n          <h2 className=\"text-2xl font-bold text-gray-800\">\n            {listings.length === 0 ? 'No rooms available' : `${listings.length} Rooms Available`}\n          </h2>\n          <p className=\"text-sm text-gray-500 mt-1\">Find your perfect room today</p>\n        </div>\n\n        {listings.length === 0 ? (\n          <div className=\"bg-white rounded-lg border border-gray-200 p-12 text-center\">\n            <Home className=\"w-16 h-16 mx-auto mb-4 text-gray-300\" />\n            <p className=\"text-gray-600 font-medium mb-2\">No rooms match your search</p>\n            <p className=\"text-gray-500 text-sm mb-4\">Try adjusting your filters or search in a different location</p>\n            <button\n              onClick={() => {\n                setSearchLocation('');\n                setPriceRange([0, 10000]);\n              }}\n              className=\"text-blue-600 hover:text-blue-700 font-medium text-sm\"\n            >\n              Clear all filters\n            </button>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12\">\n            {listings.map(listing => (\n              <ListingCard key={listing.id} listing={listing} onClick={() => onSelectListing(listing)} />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\nfunction ListingCard({ listing, onClick }) {\n  return (\n    <div \n      onClick={onClick}\n      className=\"bg-white rounded-lg shadow hover:shadow-xl transition-all duration-200 cursor-pointer overflow-hidden border border-gray-100 hover:border-blue-300 group\"\n    >\n      {/* Image Container */}\n      {listing.photos && listing.photos.length > 0 ? (\n        <div className=\"relative bg-gray-200 aspect-video overflow-hidden\">\n          <img \n            src={listing.photos[0]} \n            alt=\"Room\" \n            className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300 skeleton\"\n            onLoad={(e) => e.target.classList.remove('skeleton')}\n          />\n          <div className=\"absolute top-3 right-3 flex gap-2\">\n            {listing.photos.length > 1 && (\n              <div className=\"bg-black bg-opacity-60 text-white px-2 py-1 rounded-md text-xs font-semibold\">\n                {listing.photos.length} \n              </div>\n            )}\n            {/* Availability Badge */}\n            <div className={`px-2 py-1 rounded-md text-xs font-semibold ${\n              listing.status === 'available' \n                ? 'bg-green-500 text-white' \n                : 'bg-gray-700 text-white'\n            }`}>\n              {listing.status === 'available' ? 'Available' : 'Rented'}\n            </div>\n          </div>\n          <div className=\"absolute inset-0 bg-black opacity-0 group-hover:opacity-5 transition-opacity\" />\n        </div>\n      ) : (\n        <div className=\"bg-gradient-to-br from-gray-200 to-gray-300 aspect-video flex items-center justify-center relative\">\n          <Home className=\"w-12 h-12 text-gray-400\" />\n          {/* Availability Badge for no-photo cards */}\n          <div className={`absolute top-3 right-3 px-2 py-1 rounded-md text-xs font-semibold ${\n            listing.status === 'available' \n              ? 'bg-green-500 text-white' \n              : 'bg-gray-700 text-white'\n          }`}>\n            {listing.status === 'available' ? 'Available' : 'Rented'}\n          </div>\n        </div>\n      )}\n\n      {/* Content */}\n      <div className=\"p-4\">\n        {/* Title & Price Header */}\n        <div className=\"mb-3\">\n          <h3 className=\"font-bold text-lg text-gray-800 group-hover:text-blue-600 transition mb-1 line-clamp-2\">\n            {listing.title}\n          </h3>\n          <p className=\"text-red-600 font-bold text-xl\">R{listing.price.toLocaleString()}/month</p>\n        </div>\n\n        {/* Location */}\n        <div className=\"flex items-center text-gray-600 text-sm mb-3 pb-3 border-b border-gray-100\">\n          <MapPin className=\"w-4 h-4 mr-2 text-blue-500 flex-shrink-0\" />\n          <span className=\"truncate\">{listing.location}</span>\n          {typeof listing.__distanceKm === 'number' && (\n            <span className=\"ml-2 text-xs text-gray-500\"> {listing.__distanceKm.toFixed(1)} km</span>\n          )}\n        </div>\n\n        {/* Description */}\n        <p className=\"text-gray-600 text-sm line-clamp-2 mb-3\">\n          {listing.description}\n        </p>\n\n        {/* Amenities */}\n        {listing.amenities && listing.amenities.length > 0 && (\n          <div className=\"flex flex-wrap gap-1 mb-4\">\n            {listing.amenities.slice(0, 3).map((amenity, index) => (\n              <span key={index} className=\"inline-block bg-blue-50 text-blue-700 text-xs px-2 py-1 rounded-full font-medium\">\n                {amenity}\n              </span>\n            ))}\n            {listing.amenities.length > 3 && (\n              <span className=\"inline-block bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded-full font-medium\">\n                +{listing.amenities.length - 3}\n              </span>\n            )}\n          </div>\n        )}\n\n        {/* CTA Button */}\n        <button className=\"w-full bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg font-semibold text-sm transition\">\n          View Details\n        </button>\n      </div>\n    </div>\n  );\n}\n\nfunction AddListingView({ onSubmit, onCancel, currentUser, userType, onRequireAuth, onRequireOnboarding }) {\n  const GEOCODER_KEY = process.env.REACT_APP_GEOCODER_API_KEY;\n  const GEOCODER_PROVIDER = (process.env.REACT_APP_GEOCODER_PROVIDER || '').toLowerCase();\n\n  const [formData, setFormData] = useState({\n    title: '',\n    price: '',\n    location: '',\n    streetAddress: '',\n    description: '',\n    photos: [],\n    status: 'available',\n    availableDate: new Date().toISOString().split('T')[0],\n    amenities: [],\n    latitude: null,\n    longitude: null\n  });\n  const [geocodingStatus, setGecodingStatus] = useState('');\n  const [errors, setErrors] = useState({});\n\n  const availableAmenities = [\n    'WiFi', 'Parking', 'Kitchen', 'Laundry', 'Air Conditioning', \n    'Heating', 'TV', 'Furnished', 'Pet Friendly', 'Garden'\n  ];\n\n  const validateField = (name, value) => {\n    const newErrors = { ...errors };\n    \n    switch (name) {\n      case 'title':\n        if (!value || value.trim().length < 5) {\n          newErrors.title = 'Title must be at least 5 characters';\n        } else {\n          delete newErrors.title;\n        }\n        break;\n      case 'price':\n        if (!value || parseFloat(value) <= 0) {\n          newErrors.price = 'Price must be greater than 0';\n        } else if (parseFloat(value) < 500) {\n          newErrors.price = 'Price seems too low (minimum R500)';\n        } else if (parseFloat(value) > 50000) {\n          newErrors.price = 'Price seems too high (maximum R50,000)';\n        } else {\n          delete newErrors.price;\n        }\n        break;\n      case 'location':\n        if (!value || value.trim().length < 3) {\n          newErrors.location = 'Location is required (min 3 characters)';\n        } else {\n          delete newErrors.location;\n        }\n        break;\n      case 'description':\n        if (value && value.length > 500) {\n          newErrors.description = 'Description is too long (max 500 characters)';\n        } else {\n          delete newErrors.description;\n        }\n        break;\n      default:\n        break;\n    }\n    \n    setErrors(newErrors);\n  };\n\n  // Geocode address using Nominatim (OpenStreetMap)\n  // Use browser geolocation and reverse-geocode to fill address/coords\n  const geolocateCurrentPosition = () => {\n    if (!navigator.geolocation) {\n      setGecodingStatus('Geolocation not supported by your browser');\n      return;\n    }\n\n    setGecodingStatus('Locating...');\n    navigator.geolocation.getCurrentPosition(async (pos) => {\n      const lat = pos.coords.latitude;\n      const lon = pos.coords.longitude;\n      setFormData({ ...formData, latitude: lat, longitude: lon });\n\n      // Reverse geocode to get a readable address\n      try {\n        if (GEOCODER_PROVIDER === 'mapbox' && GEOCODER_KEY) {\n          const rev = await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${lon},${lat}.json?access_token=${GEOCODER_KEY}&limit=1&country=za`);\n          const revData = await rev.json();\n          if (revData && revData.features && revData.features.length > 0) {\n            const place = revData.features[0].place_name || '';\n            const parts = place.split(',').map(p => p.trim());\n            const street = parts.slice(0, 2).join(', ');\n            const area = parts.slice(2, 4).join(', ');\n            setFormData(prev => ({ ...prev, streetAddress: street || prev.streetAddress, location: area || prev.location }));\n            setGecodingStatus(' Current location set');\n            setTimeout(() => setGecodingStatus(''), 2500);\n            return;\n          }\n        } else {\n          const rev = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`);\n          const revData = await rev.json();\n          if (revData) {\n            const display = revData.display_name || '';\n            // Try to split display name into street and area\n            const parts = display.split(',').map(p => p.trim());\n            const street = parts.slice(0, 2).join(', ');\n            const area = parts.slice(2, 4).join(', ');\n            setFormData(prev => ({ ...prev, streetAddress: street || prev.streetAddress, location: area || prev.location }));\n            setGecodingStatus(' Current location set');\n            setTimeout(() => setGecodingStatus(''), 2500);\n            return;\n          }\n        }\n\n      } catch (e) {\n        console.error('Reverse geocode failed', e);\n      }\n\n      setGecodingStatus(' Coordinates obtained');\n      setTimeout(() => setGecodingStatus(''), 2000);\n    }, (err) => {\n      console.error('Geolocation error', err);\n      setGecodingStatus('Could not get your location');\n    }, { enableHighAccuracy: true, timeout: 10000 });\n  };\n\n  const geocodeAddress = async () => {\n    if (!formData.streetAddress) {\n      setGecodingStatus('Please enter a street address');\n      return;\n    }\n    \n    setGecodingStatus('Finding coordinates...');\n    try {\n      const fullAddress = `${formData.streetAddress}, ${formData.location}, South Africa`;\n      // Try Mapbox if configured\n      if (GEOCODER_PROVIDER === 'mapbox' && GEOCODER_KEY) {\n        try {\n          const resp = await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(fullAddress)}.json?access_token=${GEOCODER_KEY}&limit=1&country=za`);\n          const data = await resp.json();\n          if (data && data.features && data.features.length > 0) {\n            const [lon, lat] = data.features[0].center || [];\n            setFormData({ ...formData, latitude: parseFloat(lat), longitude: parseFloat(lon) });\n            setGecodingStatus(' Address found (Mapbox)!');\n            setTimeout(() => setGecodingStatus(''), 2000);\n            return;\n          }\n        } catch (err) {\n          console.warn('Mapbox geocoding failed, falling back to Nominatim', err);\n        }\n      }\n\n      // Default / fallback: Nominatim\n      const response = await fetch(\n        `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(fullAddress)}`\n      );\n      const results = await response.json();\n\n      if (results.length > 0) {\n        const { lat, lon } = results[0];\n        setFormData({ \n          ...formData, \n          latitude: parseFloat(lat), \n          longitude: parseFloat(lon) \n        });\n        setGecodingStatus(' Address found!');\n        setTimeout(() => setGecodingStatus(''), 2000);\n      } else {\n        setGecodingStatus('Address not found. Trying with area only...');\n        // Fallback: just use the area/city\n        const areaResponse = await fetch(\n          `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(formData.location + ', South Africa')}`\n        );\n        const areaResults = await areaResponse.json();\n        if (areaResults.length > 0) {\n          const { lat, lon } = areaResults[0];\n          setFormData({ \n            ...formData, \n            latitude: parseFloat(lat), \n            longitude: parseFloat(lon) \n          });\n          setGecodingStatus(' Area found!');\n          setTimeout(() => setGecodingStatus(''), 2000);\n        } else {\n          setGecodingStatus('Could not find location');\n        }\n      }\n    } catch (error) {\n      console.error('Geocoding error:', error);\n      setGecodingStatus('Error finding address. Check your connection.');\n    }\n  };\n\n  // Draggable preview marker component for Add Listing\n  function DraggablePreview({ lat, lng }) {\n    const [pos, setPos] = useState(lat && lng ? [lat, lng] : null);\n    useEffect(() => {\n      if (lat && lng) setPos([lat, lng]);\n    }, [lat, lng]);\n\n    if (!pos) return null;\n    return (\n      <MapContainer center={pos} zoom={15} className=\"w-full h-48 rounded-lg\" whenCreated={() => {}}>\n        <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" />\n        <Marker\n          position={pos}\n          draggable={true}\n          eventHandlers={{\n            dragend: (e) => {\n              const ll = e.target.getLatLng();\n              setPos([ll.lat, ll.lng]);\n              setFormData(prev => ({ ...prev, latitude: ll.lat, longitude: ll.lng }));\n            }\n          }}\n        />\n      </MapContainer>\n    );\n  }\n\n  const toggleAmenity = (amenity) => {\n    if (formData.amenities.includes(amenity)) {\n      setFormData({ ...formData, amenities: formData.amenities.filter(a => a !== amenity) });\n    } else {\n      setFormData({ ...formData, amenities: [...formData.amenities, amenity] });\n    }\n  };\n\n  const handlePhotoUpload = (e) => {\n    const files = Array.from(e.target.files || []);\n    if (files.length === 0) return;\n\n    const readers = files.map(file => new Promise((resolve) => {\n      const reader = new FileReader();\n      reader.onloadend = () => resolve(reader.result);\n      reader.readAsDataURL(file);\n    }));\n\n    Promise.all(readers).then(images => {\n      const combined = [...formData.photos, ...images].slice(0, 5); // cap at 5\n      setFormData({ ...formData, photos: combined });\n    });\n  };\n\n  const removePhoto = (index) => {\n    const newPhotos = formData.photos.filter((_, i) => i !== index);\n    setFormData({ ...formData, photos: newPhotos });\n  };\n\n  const handleSubmit = () => {\n    // Enforce auth and onboarding checks before allowing submission\n    if (!currentUser) {\n      onRequireAuth && onRequireAuth('landlord');\n      return;\n    }\n    if (userType !== 'landlord') {\n      // prompt to become landlord\n      onRequireAuth && onRequireAuth('landlord');\n      return;\n    }\n    if (!currentUser.landlordComplete) {\n      // send to onboarding\n      onRequireOnboarding && onRequireOnboarding();\n      return;\n    }\n\n    // Validate all fields\n    validateField('title', formData.title);\n    validateField('price', formData.price);\n    validateField('location', formData.location);\n    validateField('description', formData.description);\n\n    if (!formData.title || formData.title.trim().length < 5) {\n      setErrors(prev => ({ ...prev, title: 'Title must be at least 5 characters' }));\n      return;\n    }\n    if (!formData.price || parseFloat(formData.price) <= 0) {\n      setErrors(prev => ({ ...prev, price: 'Price must be greater than 0' }));\n      return;\n    }\n    if (!formData.location || formData.location.trim().length < 3) {\n      setErrors(prev => ({ ...prev, location: 'Location is required' }));\n      return;\n    }\n    if (Object.keys(errors).length > 0) {\n      return;\n    }\n\n    onSubmit(formData);\n  };\n\n  return (\n    <div className=\"p-4 bg-gray-50 min-h-screen pb-20\">\n      <div className=\"max-w-3xl mx-auto mt-8\">\n        <div className=\"bg-white rounded-lg shadow-sm border border-gray-200 p-8\">\n          <div className=\"flex items-center justify-between mb-8\">\n            <h2 className=\"text-3xl font-bold text-gray-800\">Post a Room</h2>\n            <button onClick={onCancel} className=\"text-gray-400 hover:text-gray-600 transition\">\n              <X className=\"w-6 h-6\" />\n            </button>\n          </div>\n\n          <div className=\"space-y-6\">\n            {/* Title */}\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Room Title *</label>\n              <input\n                type=\"text\"\n                required\n                value={formData.title}\n                onChange={(e) => {\n                  setFormData({ ...formData, title: e.target.value });\n                  validateField('title', e.target.value);\n                }}\n                onBlur={(e) => validateField('title', e.target.value)}\n                placeholder=\"e.g., Cozy backroom with bathroom\"\n                className={`w-full px-4 py-3 border ${errors.title ? 'border-red-500' : 'border-gray-300'} bg-white text-gray-800 rounded-lg focus:ring-2 ${errors.title ? 'focus:ring-red-500' : 'focus:ring-blue-500'} focus:border-transparent transition placeholder-gray-400`}\n              />\n              {errors.title && <p className=\"text-red-500 text-xs mt-1\">{errors.title}</p>}\n            </div>\n\n            {/* Price */}\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Monthly Price (R) *</label>\n              <input\n                type=\"number\"\n                required\n                value={formData.price}\n                onChange={(e) => {\n                  setFormData({ ...formData, price: e.target.value });\n                  validateField('price', e.target.value);\n                }}\n                onBlur={(e) => validateField('price', e.target.value)}\n                placeholder=\"e.g., 2500\"\n                className={`w-full px-4 py-3 border ${errors.price ? 'border-red-500' : 'border-gray-300'} bg-white text-gray-800 rounded-lg focus:ring-2 ${errors.price ? 'focus:ring-red-500' : 'focus:ring-blue-500'} focus:border-transparent transition placeholder-gray-400`}\n              />\n              {errors.price && <p className=\"text-red-500 text-xs mt-1\">{errors.price}</p>}\n            </div>\n\n            {/* Location and Street Address */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Area / City *</label>\n                <input\n                  type=\"text\"\n                  required\n                  value={formData.location}\n                  onChange={(e) => {\n                    setFormData({ ...formData, location: e.target.value });\n                    validateField('location', e.target.value);\n                  }}\n                  onBlur={(e) => validateField('location', e.target.value)}\n                  placeholder=\"e.g., Soweto, Johannesburg\"\n                  className={`w-full px-4 py-3 border ${errors.location ? 'border-red-500' : 'border-gray-300'} bg-white text-gray-800 rounded-lg focus:ring-2 ${errors.location ? 'focus:ring-red-500' : 'focus:ring-blue-500'} focus:border-transparent transition placeholder-gray-400`}\n                />\n                {errors.location && <p className=\"text-red-500 text-xs mt-1\">{errors.location}</p>}\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Street Address</label>\n                <input\n                  type=\"text\"\n                  value={formData.streetAddress}\n                  onChange={(e) => setFormData({ ...formData, streetAddress: e.target.value })}\n                  placeholder=\"e.g., 123 Main Street\"\n                  className=\"w-full px-4 py-3 border border-gray-300 bg-white text-gray-800 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition placeholder-gray-400\"\n                />\n              </div>\n            </div>\n\n            {/* Geocode Section - More Prominent */}\n            <div className=\"bg-blue-50 border-2 border-blue-200 rounded-lg p-6\">\n              <div className=\"flex items-start gap-3 mb-4\">\n                <MapPin className=\"w-6 h-6 text-blue-600 flex-shrink-0 mt-1\" />\n                <div className=\"flex-1\">\n                  <h3 className=\"text-lg font-semibold text-gray-800 mb-1\">Set Location on Map</h3>\n                  <p className=\"text-sm text-gray-600\">Help renters find your listing by pinpointing its exact location.</p>\n                </div>\n              </div>\n\n              <div className=\"flex flex-wrap gap-3 items-center mb-4\">\n                <button\n                  type=\"button\"\n                  onClick={geocodeAddress}\n                  className=\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg text-sm font-semibold transition shadow-sm flex items-center gap-2\"\n                >\n                  <MapPin className=\"w-4 h-4\" />\n                  Find on Map\n                </button>\n\n                <button\n                  type=\"button\"\n                  onClick={geolocateCurrentPosition}\n                  className=\"bg-white hover:bg-gray-50 border-2 border-gray-300 text-gray-800 px-6 py-3 rounded-lg text-sm font-semibold transition shadow-sm flex items-center gap-2\"\n                >\n                  <MapPin className=\"w-4 h-4\" />\n                  Use Current Location\n                </button>\n\n                <div className=\"text-sm flex-1\">\n                  {geocodingStatus && (\n                    <span className={`${geocodingStatus.startsWith('') ? 'text-green-600 font-semibold' : 'text-gray-700'} flex items-center gap-1`}>\n                      {geocodingStatus.startsWith('') && <CheckCircle className=\"w-4 h-4\" />}\n                      {geocodingStatus}\n                    </span>\n                  )}\n                  {formData.latitude && formData.longitude && !geocodingStatus && (\n                    <span className=\"text-green-600 font-semibold flex items-center gap-1\">\n                      <CheckCircle className=\"w-4 h-4\" />\n                      Location set: {formData.latitude.toFixed(4)}, {formData.longitude.toFixed(4)}\n                    </span>\n                  )}\n                </div>\n              </div>\n\n              {/* Draggable preview map */}\n              <div className=\"mt-4\">\n                {(formData.latitude && formData.longitude) ? (\n                  <div>\n                    <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Fine-tune Location (drag pin)</label>\n                    <DraggablePreview lat={formData.latitude} lng={formData.longitude} />\n                  </div>\n                ) : (\n                  <div className=\"text-sm text-gray-600 bg-white border border-gray-200 rounded-lg p-4 text-center\">\n                    <MapPin className=\"w-8 h-8 mx-auto mb-2 text-gray-400\" />\n                    No location set yet. Click \"Find on Map\" or \"Use Current Location\" to place a pin.\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* Status and Available Date - Two columns */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Status</label>\n                <select\n                  value={formData.status}\n                  onChange={(e) => setFormData({ ...formData, status: e.target.value })}\n                  className=\"w-full px-4 py-3 border border-gray-300 bg-white text-gray-800 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition\"\n                >\n                  <option value=\"available\">Available</option>\n                  <option value=\"rented\">Rented</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Available Date</label>\n                <input\n                  type=\"date\"\n                  value={formData.availableDate}\n                  onChange={(e) => setFormData({ ...formData, availableDate: e.target.value })}\n                  className=\"w-full px-4 py-3 border border-gray-300 bg-white text-gray-800 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition\"\n                />\n              </div>\n            </div>\n\n            {/* Description */}\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-2\">\n                Description \n                {formData.description && (\n                  <span className={`ml-2 text-xs ${formData.description.length > 500 ? 'text-red-500' : 'text-gray-500'}`}>\n                    ({formData.description.length}/500 characters)\n                  </span>\n                )}\n              </label>\n              <textarea\n                value={formData.description}\n                onChange={(e) => {\n                  setFormData({ ...formData, description: e.target.value });\n                  validateField('description', e.target.value);\n                }}\n                onBlur={(e) => validateField('description', e.target.value)}\n                placeholder=\"Describe the room, amenities, rules, and any other details...\"\n                rows=\"4\"\n                className={`w-full px-4 py-3 border ${errors.description ? 'border-red-500' : 'border-gray-300'} bg-white text-gray-800 rounded-lg focus:ring-2 ${errors.description ? 'focus:ring-red-500' : 'focus:ring-blue-500'} focus:border-transparent transition placeholder-gray-400`}\n              />\n              {errors.description && <p className=\"text-red-500 text-xs mt-1\">{errors.description}</p>}\n            </div>\n\n            {/* Amenities */}\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-3\">Amenities</label>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\n                {availableAmenities.map(amenity => (\n                  <button\n                    key={amenity}\n                    type=\"button\"\n                    onClick={() => toggleAmenity(amenity)}\n                    className={`px-4 py-2 rounded-lg text-sm font-medium transition ${\n                      formData.amenities.includes(amenity)\n                        ? 'bg-blue-600 text-white shadow-sm'\n                        : 'bg-gray-100 text-gray-700 border border-gray-300 hover:bg-gray-200'\n                    }`}\n                  >\n                    {amenity}\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            {/* Photos */}\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Photos (Max 5)</label>\n              <input\n                type=\"file\"\n                accept=\"image/*\"\n                multiple\n                onChange={handlePhotoUpload}\n                disabled={formData.photos.length >= 5}\n                className=\"w-full px-4 py-3 border border-gray-300 bg-white text-gray-700 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition cursor-pointer\"\n              />\n              {formData.photos.length > 0 && (\n                <div className=\"mt-4 grid grid-cols-2 md:grid-cols-3 gap-3\">\n                  {formData.photos.map((photo, index) => (\n                    <div key={index} className=\"relative group\">\n                      <img \n                        src={photo} \n                        alt={`Preview ${index + 1}`} \n                        className=\"w-full h-32 object-cover rounded-lg border border-gray-200 shadow-sm\" \n                      />\n                      <button\n                        type=\"button\"\n                        onClick={() => removePhoto(index)}\n                        className=\"absolute top-2 right-2 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center shadow-lg opacity-0 group-hover:opacity-100 transition\"\n                      >\n                        <X className=\"w-4 h-4\" />\n                      </button>\n                    </div>\n                  ))}\n                </div>\n              )}\n              {formData.photos.length >= 5 && (\n                <p className=\"text-sm text-gray-500 mt-2\">Maximum 5 photos reached</p>\n              )}\n            </div>\n\n            {/* Submit Button */}\n            <div className=\"border-t border-gray-200 pt-6\">\n              <button\n                onClick={handleSubmit}\n                className=\"w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition shadow-sm\"\n              >\n                Post Room\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction MessagesView({ conversations, listings, userType, onSelectConversation }) {\n  return (\n    <div className=\"p-4\">\n      <h2 className=\"text-2xl font-bold mb-4 text-gray-800\">Messages</h2>\n      <div className=\"space-y-3\">\n        {conversations.length === 0 ? (\n          <div className=\"bg-white rounded-lg shadow p-8 text-center text-gray-500\">\n            <MessageSquare className=\"w-16 h-16 mx-auto mb-4 text-gray-300\" />\n            <p>No messages yet.</p>\n          </div>\n        ) : (\n          conversations.map(conv => {\n            const listing = listings.find(l => l.id === conv.listingId);\n            const lastMessage = conv.messages[conv.messages.length - 1];\n            return (\n              <div\n                key={conv.id}\n                onClick={() => onSelectConversation(conv)}\n                className=\"bg-white rounded-lg shadow p-4 cursor-pointer hover:shadow-lg transition\"\n              >\n                <div className=\"flex items-start justify-between mb-2\">\n                  <h3 className=\"font-semibold text-gray-800\">{listing?.title || 'Room'}</h3>\n                  <span className=\"text-xs text-gray-500\">\n                    {new Date(lastMessage.timestamp).toLocaleDateString()}\n                  </span>\n                </div>\n                <p className=\"text-sm text-gray-600 line-clamp-2\">{lastMessage.text}</p>\n              </div>\n            );\n          })\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction MyListingsView({ listings, onDelete }) {\n  return (\n    <div className=\"p-4\">\n      <h2 className=\"text-2xl font-bold mb-4 text-gray-800\">My Listings</h2>\n      <div className=\"space-y-4\">\n        {listings.length === 0 ? (\n          <div className=\"bg-white rounded-lg shadow p-8 text-center text-gray-500\">\n            <Home className=\"w-16 h-16 mx-auto mb-4 text-gray-300\" />\n            <p>You haven't posted any rooms yet.</p>\n          </div>\n        ) : (\n          listings.map(listing => (\n            <div key={listing.id} className=\"bg-white rounded-lg shadow p-4\">\n{listing.photos && listing.photos.length > 0 && (\n  <div className=\"relative mb-3\">\n    <img src={listing.photos[0]} alt=\"Room\" className=\"w-full h-32 object-cover rounded-lg\" />\n    {listing.photos.length > 1 && (\n      <div className=\"absolute top-2 right-2 bg-black bg-opacity-60 text-white px-2 py-1 rounded text-xs\">\n        {listing.photos.length} photos\n      </div>\n    )}\n  </div>\n)}\n              <h3 className=\"font-bold text-lg mb-1\">{listing.title}</h3>\n              <div className=\"text-blue-600 font-bold mb-2\">R{listing.price}/month</div>\n              <div className=\"flex items-center text-gray-600 text-sm mb-3\">\n                <MapPin className=\"w-4 h-4 mr-1\" />\n                {listing.location}\n              </div>\n              <button\n                onClick={() => onDelete(listing.id)}\n                className=\"w-full bg-red-500 hover:bg-red-600 text-white py-2 rounded-lg transition\"\n              >\n                Delete Listing\n              </button>\n            </div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n}\n\nfunction ListingDetailModal({ listing, landlord, onClose, onSendMessage, userType, currentUser, onRequireAuth }) {\n  const [message, setMessage] = useState('');\n  const [showContact, setShowContact] = useState(false);\n  const [showGallery, setShowGallery] = useState(false);\n  const [currentPhotoIndex, setCurrentPhotoIndex] = useState(0);\n\n  const handleNavigate = (direction, index) => {\n    if (direction === 'next' && currentPhotoIndex < listing.photos.length - 1) {\n      setCurrentPhotoIndex(currentPhotoIndex + 1);\n    } else if (direction === 'prev' && currentPhotoIndex > 0) {\n      setCurrentPhotoIndex(currentPhotoIndex - 1);\n    } else if (direction === 'goto') {\n      setCurrentPhotoIndex(index);\n    }\n  };\n\n  const handleSend = () => {\n    if (message.trim() && userType === 'renter') {\n      onSendMessage(listing.id, message);\n      setMessage('');\n      alert('Message sent to landlord!');\n      onClose();\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n        <div className=\"sticky top-0 bg-white border-b p-4 flex justify-between items-center\">\n          <h2 className=\"text-xl font-bold text-gray-800\">Room Details</h2>\n          <button onClick={onClose} className=\"text-gray-500 hover:text-gray-700\">\n            <X className=\"w-6 h-6\" />\n          </button>\n        </div>\n\n        <div className=\"p-4\">\n{listing.photos && listing.photos.length > 0 && (\n  <div className=\"relative mb-4 cursor-pointer\" onClick={() => setShowGallery(true)}>\n    <img src={listing.photos[currentPhotoIndex]} alt=\"Room\" className=\"w-full h-64 object-cover rounded-lg\" />\n    {listing.photos.length > 1 && (\n      <div className=\"absolute bottom-3 right-3 bg-black bg-opacity-60 text-white px-3 py-1 rounded-full text-sm flex items-center gap-1\">\n        <Search className=\"w-4 h-4\" />\n        View all {listing.photos.length} photos\n      </div>\n    )}\n    {listing.photos.length > 1 && (\n      <div className=\"absolute bottom-3 left-3 flex gap-1\">\n        {listing.photos.map((_, index) => (\n          <div\n            key={index}\n            className={`w-2 h-2 rounded-full ${\n              index === currentPhotoIndex ? 'bg-white' : 'bg-white bg-opacity-50'\n            }`}\n          />\n        ))}\n      </div>\n    )}\n  </div>\n)}\n\n{showGallery && listing.photos && (\n  <PhotoGallery\n    photos={listing.photos}\n    currentIndex={currentPhotoIndex}\n    onClose={() => setShowGallery(false)}\n    onNavigate={handleNavigate}\n  />\n)}\n          \n          <h3 className=\"text-2xl font-bold mb-2 text-gray-800\">{listing.title}</h3>\n          <div className=\"text-blue-600 font-bold text-2xl mb-4\">R{listing.price}/month</div>\n          \n          <div className=\"flex items-center text-gray-600 mb-4\">\n            <MapPin className=\"w-5 h-5 mr-2\" />\n            <span className=\"text-lg\">{listing.location}</span>\n          </div>\n\n          <div className=\"bg-gray-50 rounded-lg p-4 mb-4\">\n            <h4 className=\"font-semibold mb-2 text-gray-700\">Description</h4>\n            <p className=\"text-gray-600\">{listing.description || 'No description provided.'}</p>\n          </div>\n\n          {userType === 'renter' && landlord && (\n            <div className=\"bg-blue-50 rounded-lg p-4 mb-4\">\n              <div className=\"flex items-center justify-between mb-3\">\n                <h4 className=\"font-semibold text-gray-700\">Landlord Information</h4>\n                {currentUser ? (\n                  <button\n                    onClick={() => setShowContact(!showContact)}\n                    className=\"text-blue-600 hover:text-blue-700 text-sm font-medium\"\n                  >\n                    {showContact ? 'Hide' : 'Show'} Contact\n                  </button>\n                ) : (\n                  <button\n                    onClick={() => onRequireAuth && onRequireAuth('renter')}\n                    className=\"text-blue-600 hover:text-blue-700 text-sm font-medium\"\n                  >\n                    Sign in to view contact\n                  </button>\n                )}\n              </div>\n\n              <div className=\"flex items-center mb-3\">\n                {landlord.photo ? (\n                  <img src={landlord.photo} alt={landlord.name} className=\"w-12 h-12 rounded-full object-cover mr-3\" />\n                ) : (\n                  <div className=\"w-12 h-12 rounded-full bg-gray-300 flex items-center justify-center mr-3\">\n                    <User className=\"w-6 h-6 text-gray-600\" />\n                  </div>\n                )}\n                <div>\n                  <p className=\"font-semibold text-gray-800\">{landlord.name}</p>\n                  <p className=\"text-xs text-gray-500\">Property Owner</p>\n                </div>\n              </div>\n\n              {currentUser && showContact && (\n                <div className=\"space-y-2 pt-3 border-t border-blue-100\">\n                  <div className=\"flex items-center text-sm\">\n                    <Phone className=\"w-4 h-4 mr-2 text-blue-600\" />\n                    <a href={`tel:${landlord.phone}`} className=\"text-blue-600 hover:underline\">\n                      {landlord.phone}\n                    </a>\n                  </div>\n                  <div className=\"flex items-center text-sm\">\n                    <Mail className=\"w-4 h-4 mr-2 text-blue-600\" />\n                    <a href={`mailto:${landlord.email}`} className=\"text-blue-600 hover:underline\">\n                      {landlord.email}\n                    </a>\n                  </div>\n                </div>\n              )}\n            </div>\n          )}\n\n          {userType === 'renter' && (\n            <div className=\"border-t pt-4\">\n              <h4 className=\"font-semibold mb-3 text-gray-700\">Send a Message</h4>\n              {currentUser ? (\n                <div className=\"flex gap-2\">\n                  <input\n                    type=\"text\"\n                    value={message}\n                    onChange={(e) => setMessage(e.target.value)}\n                    placeholder=\"Type your message...\"\n                    className=\"flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n                  />\n                  <button\n                    onClick={handleSend}\n                    className=\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition flex items-center\"\n                  >\n                    <Send className=\"w-5 h-5\" />\n                  </button>\n                </div>\n              ) : (\n                <div className=\"flex\">\n                  <button\n                    onClick={() => onRequireAuth && onRequireAuth('renter')}\n                    className=\"w-full bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition\"\n                  >\n                    Sign in to message\n                  </button>\n                </div>\n              )}\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction ConversationModal({ conversation, listing, onClose, onSendMessage }) {\n  const [message, setMessage] = useState('');\n\n  const handleSend = () => {\n    if (message.trim()) {\n      onSendMessage(listing.id, message);\n      setMessage('');\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] flex flex-col\">\n        <div className=\"bg-white border-b p-4 flex items-center\">\n          <button onClick={onClose} className=\"mr-3 text-gray-500 hover:text-gray-700\">\n            <ArrowLeft className=\"w-6 h-6\" />\n          </button>\n          <div>\n            <h2 className=\"font-bold text-gray-800\">{listing?.title}</h2>\n            <p className=\"text-sm text-gray-600\">{listing?.location}</p>\n          </div>\n        </div>\n\n        <div className=\"flex-1 overflow-y-auto p-4 space-y-3\">\n          {conversation.messages.map(msg => (\n            <div\n              key={msg.id}\n              className={`flex ${msg.sender === 'landlord' ? 'justify-start' : 'justify-end'}`}\n            >\n              <div\n                className={`max-w-xs px-4 py-2 rounded-lg ${\n                  msg.sender === 'landlord'\n                    ? 'bg-gray-200 text-gray-800'\n                    : 'bg-blue-600 text-white'\n                }`}\n              >\n                <p>{msg.text}</p>\n                <span className=\"text-xs opacity-75\">\n                  {new Date(msg.timestamp).toLocaleTimeString()}\n                </span>\n              </div>\n            </div>\n          ))}\n        </div>\n\n        <div className=\"border-t p-4 flex gap-2\">\n          <input\n            type=\"text\"\n            value={message}\n            onChange={(e) => setMessage(e.target.value)}\n            onKeyPress={(e) => e.key === 'Enter' && handleSend()}\n            placeholder=\"Type a message...\"\n            className=\"flex-1 px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n          />\n          <button\n            onClick={handleSend}\n            className=\"bg-blue-600 hover:bg-blue-700 text-white px-6 py-2 rounded-lg transition\"\n          >\n            <Send className=\"w-5 h-5\" />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction AuthModal({ defaultType = 'renter', onClose, onSubmit }) {\n  const [form, setForm] = useState({ name: '', phone: '', email: '', type: defaultType, photo: '' });\n\n  const handleSubmit = () => {\n    if (!form.name || !form.email) {\n      alert('Please add a name and email');\n      return;\n    }\n    onSubmit(form);\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-lg w-full max-w-md p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-lg font-bold\">Sign in / Create account</h3>\n          <button onClick={onClose} className=\"text-gray-400 hover:text-gray-600\"><X className=\"w-5 h-5\" /></button>\n        </div>\n\n        <div className=\"space-y-3\">\n          <div>\n            <label className=\"block text-sm font-semibold text-gray-700 mb-1\">Full name</label>\n            <input type=\"text\" value={form.name} onChange={(e) => setForm({ ...form, name: e.target.value })} className=\"w-full px-3 py-2 border rounded\" />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-semibold text-gray-700 mb-1\">Email</label>\n            <input type=\"email\" value={form.email} onChange={(e) => setForm({ ...form, email: e.target.value })} className=\"w-full px-3 py-2 border rounded\" />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-semibold text-gray-700 mb-1\">Phone (optional)</label>\n            <input type=\"tel\" value={form.phone} onChange={(e) => setForm({ ...form, phone: e.target.value })} className=\"w-full px-3 py-2 border rounded\" />\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-semibold text-gray-700 mb-1\">I am a</label>\n            <select value={form.type} onChange={(e) => setForm({ ...form, type: e.target.value })} className=\"w-full px-3 py-2 border rounded\">\n              <option value=\"renter\">Looking for a room</option>\n              <option value=\"landlord\">Listing rooms</option>\n            </select>\n          </div>\n\n          <div className=\"flex gap-3 pt-4\">\n            <button onClick={onClose} className=\"flex-1 bg-gray-100 hover:bg-gray-200 py-2 rounded\">Cancel</button>\n            <button onClick={handleSubmit} className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded\">Continue</button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction LocationConsentModal({ onAccept, onDecline }) {\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center p-4 z-50\">\n      <div className=\"bg-white rounded-lg max-w-md w-full p-6 shadow-xl\">\n        <div className=\"flex items-center gap-3 mb-4\">\n          <MapPin className=\"w-8 h-8 text-blue-600\" />\n          <h3 className=\"text-xl font-bold text-gray-800\">Location Access</h3>\n        </div>\n        \n        <p className=\"text-gray-600 mb-4\">\n          Room24 would like to access your location to show nearby rental listings. Your location data:\n        </p>\n        \n        <ul className=\"text-sm text-gray-600 mb-6 space-y-2\">\n          <li className=\"flex items-start gap-2\">\n            <span className=\"text-green-600 mt-0.5\"></span>\n            <span>Is only used to calculate distances to listings</span>\n          </li>\n          <li className=\"flex items-start gap-2\">\n            <span className=\"text-green-600 mt-0.5\"></span>\n            <span>Is not stored on our servers</span>\n          </li>\n          <li className=\"flex items-start gap-2\">\n            <span className=\"text-green-600 mt-0.5\"></span>\n            <span>Is not shared with third parties</span>\n          </li>\n        </ul>\n\n        <div className=\"flex gap-3\">\n          <button\n            onClick={onDecline}\n            className=\"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-3 rounded-lg transition\"\n          >\n            Not Now\n          </button>\n          <button\n            onClick={onAccept}\n            className=\"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 rounded-lg transition\"\n          >\n            Allow\n          </button>\n        </div>\n        \n        <p className=\"text-xs text-gray-500 mt-4 text-center\">\n          You can change this permission anytime in your browser settings.\n        </p>\n      </div>\n    </div>\n  );\n}\n\nfunction PhotoGallery({ photos, currentIndex, onClose, onNavigate }) {\n  return (\n    <div className=\"fixed inset-0 bg-black z-50 flex flex-col\">\n      <div className=\"flex justify-between items-center p-4 text-white\">\n        <span className=\"text-sm\">{currentIndex + 1} / {photos.length}</span>\n        <button onClick={onClose} className=\"hover:bg-gray-800 p-2 rounded-full\">\n          <X className=\"w-6 h-6\" />\n        </button>\n      </div>\n\n      <div className=\"flex-1 flex items-center justify-center relative\">\n        {currentIndex > 0 && (\n          <button\n            onClick={() => onNavigate('prev')}\n            className=\"absolute left-4 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-70 z-10\"\n          >\n            <ArrowLeft className=\"w-6 h-6\" />\n          </button>\n        )}\n\n        <img\n          src={photos[currentIndex]}\n          alt=\"\"\n          className=\"max-w-full max-h-full object-contain\"\n        />\n\n        {currentIndex < photos.length - 1 && (\n          <button\n            onClick={() => onNavigate('next')}\n            className=\"absolute right-4 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-70 z-10\"\n          >\n            <ArrowLeft className=\"w-6 h-6 transform rotate-180\" />\n          </button>\n        )}\n      </div>\n\n      <div className=\"p-4 flex gap-2 overflow-x-auto\">\n        {photos.map((photo, index) => (\n          <img\n            key={index}\n            src={photo}\n            alt={`Thumbnail ${index + 1}`}\n            onClick={() => onNavigate('goto', index)}\n            className={`w-16 h-16 object-cover rounded cursor-pointer ${\n              index === currentIndex ? 'ring-2 ring-blue-500' : 'opacity-60'\n            }`}\n          />\n        ))}\n      </div>\n    </div>\n  );\n}\n\n\n\nfunction BottomNav({ currentView, setCurrentView, userType, messageCount }) {\n  const navItems = [\n    { id: 'browse', label: 'Browse', icon: Search, show: true },\n    { id: 'messages', label: 'Messages', icon: MessageSquare, badge: messageCount, show: true },\n    { id: 'add', label: 'List Room', icon: PlusCircle, show: userType === 'landlord' },\n    { id: 'my-listings', label: 'My Rooms', icon: Home, show: userType === 'landlord' },\n    { id: 'profile', label: 'Profile', icon: User, show: true }\n  ];\n\n  return (\n    <div className=\"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-2xl\">\n      <div className=\"max-w-7xl mx-auto flex justify-around\">\n        {navItems\n          .filter(item => item.show)\n          .map(item => {\n            const Icon = item.icon;\n            const isActive = currentView === item.id || (item.id === 'profile' && currentView === 'edit-profile');\n            \n            return (\n              <button\n                key={item.id}\n                onClick={() => setCurrentView(item.id)}\n                className={`flex-1 flex flex-col items-center justify-center py-3 px-2 transition relative border-t-2 ${\n                  isActive\n                    ? 'border-blue-600 text-blue-600 bg-blue-50'\n                    : 'border-transparent text-gray-600 hover:text-gray-800 hover:bg-gray-50'\n                }`}\n              >\n                <div className=\"relative\">\n                  <Icon className=\"w-6 h-6\" />\n                  {item.badge && item.badge > 0 && (\n                    <span className=\"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-bold\">\n                      {item.badge > 99 ? '99+' : item.badge}\n                    </span>\n                  )}\n                </div>\n                <span className=\"text-xs mt-1 font-medium\">{item.label}</span>\n              </button>\n            );\n          })}\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}