{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Search,PlusCircle,Home,User,MapPin,Clock,Sparkles,ArrowRight,Building2,Shield,Zap}from'lucide-react';import ListingCard from'./ListingCard';import ListingSkeletonCard from'./ListingSkeletonCard';import{SidebarAd,InFeedAd}from'./AdBanner';import{getSavedSearches,checkNewListings,checkPriceDrops,addNotification,saveSearch as saveSearchToEngine}from'../utils/notificationEngine';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function BrowseView(_ref){let{listings,searchLocation,setSearchLocation,priceRange,setPriceRange,selectedAmenities,setSelectedAmenities,sortBy,setSortBy,onSelectListing,setCurrentView,currentUser,onRequireAuth,subscribeToArea,previewMode}=_ref;const[showAdvancedFilters,setShowAdvancedFilters]=useState(false);const[isDesktop,setIsDesktop]=useState(typeof window!=='undefined'?window.innerWidth>=1024:false);const[paymentFilter,setPaymentFilter]=useState('');const[locationSuggestions,setLocationSuggestions]=useState([]);const[locationLoading,setLocationLoading]=useState(false);const[savedSearches,setSavedSearches]=useState([]);const[initialLoad,setInitialLoad]=useState(true);const[favorites,setFavorites]=useState([]);const[roomType,setRoomType]=useState('');// '', 'private', 'shared'\nconst[leaseDuration,setLeaseDuration]=useState('');// '', '1-3', '4-6', '7-12', '12+'\nconst[petFriendly,setPetFriendly]=useState(false);const[genderPreference,setGenderPreference]=useState('');// '', 'male', 'female', 'any'\nconst[recentSearches,setRecentSearches]=useState([]);const[showWelcomeHero,setShowWelcomeHero]=useState(true);const suggestionCacheRef=React.useRef({});// cache: { queryLower: { data: [...], ts } }\nconst SUGGESTION_TTL_MS=15*60*1000;// 15 minutes\n// Load recent searches from localStorage\nuseEffect(()=>{try{const stored=localStorage.getItem('recent-searches');if(stored){const parsed=JSON.parse(stored);if(Array.isArray(parsed))setRecentSearches(parsed.slice(0,5));}// Check if user has dismissed hero before\nconst heroDismissed=localStorage.getItem('hero-dismissed');if(heroDismissed==='true')setShowWelcomeHero(false);}catch(_unused){}},[]);// Save recent search when location changes\nconst addRecentSearch=location=>{if(!location||location.trim().length<2)return;const trimmed=location.trim();setRecentSearches(prev=>{const filtered=prev.filter(s=>s.toLowerCase()!==trimmed.toLowerCase());const updated=[trimmed,...filtered].slice(0,5);try{localStorage.setItem('recent-searches',JSON.stringify(updated));}catch(_unused2){}return updated;});};const dismissHero=()=>{setShowWelcomeHero(false);try{localStorage.setItem('hero-dismissed','true');}catch(_unused3){}};const toggleFavorite=listingId=>{setFavorites(prev=>{const updated=prev.includes(listingId)?prev.filter(id=>id!==listingId):[...prev,listingId];try{localStorage.setItem('favorites',JSON.stringify(updated));}catch(_unused4){}return updated;});};// Restore persisted lightweight filters\nuseEffect(()=>{try{const storedPayment=localStorage.getItem('filter-payment');if(storedPayment)setPaymentFilter(storedPayment);const storedPriceMin=localStorage.getItem('filter-price-min');const storedPriceMax=localStorage.getItem('filter-price-max');if(storedPriceMin&&!isNaN(parseInt(storedPriceMin))&&storedPriceMax&&!isNaN(parseInt(storedPriceMax))){setPriceRange([parseInt(storedPriceMin),parseInt(storedPriceMax)]);}const storedAmenities=localStorage.getItem('filter-amenities');if(storedAmenities){try{const arr=JSON.parse(storedAmenities);if(Array.isArray(arr))setSelectedAmenities(arr);}catch(_unused5){}}const rawSaved=localStorage.getItem('saved-searches');if(rawSaved){try{const arr=JSON.parse(rawSaved);if(Array.isArray(arr))setSavedSearches(arr);}catch(_unused6){}}const rawFavorites=localStorage.getItem('favorites');if(rawFavorites){try{const arr=JSON.parse(rawFavorites);if(Array.isArray(arr))setFavorites(arr);}catch(_unused7){}}const storedRoomType=localStorage.getItem('filter-room-type');if(storedRoomType)setRoomType(storedRoomType);const storedLease=localStorage.getItem('filter-lease-duration');if(storedLease)setLeaseDuration(storedLease);const storedPets=localStorage.getItem('filter-pet-friendly');if(storedPets==='true')setPetFriendly(true);const storedGender=localStorage.getItem('filter-gender-preference');if(storedGender)setGenderPreference(storedGender);}catch(e){// ignore storage errors\n}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);useEffect(()=>{const t=setTimeout(()=>setInitialLoad(false),600);return()=>clearTimeout(t);},[]);useEffect(()=>{const handleResize=()=>setIsDesktop(window.innerWidth>=1024);window.addEventListener('resize',handleResize);return()=>window.removeEventListener('resize',handleResize);},[]);// Persist changes\nuseEffect(()=>{try{localStorage.setItem('filter-payment',paymentFilter);}catch(_unused8){}},[paymentFilter]);useEffect(()=>{try{localStorage.setItem('filter-price-min',String(priceRange[0]));localStorage.setItem('filter-price-max',String(priceRange[1]));}catch(_unused9){}},[priceRange]);useEffect(()=>{try{localStorage.setItem('filter-amenities',JSON.stringify(selectedAmenities));}catch(_unused0){}},[selectedAmenities]);useEffect(()=>{try{localStorage.setItem('filter-room-type',roomType);}catch(_unused1){}},[roomType]);useEffect(()=>{try{localStorage.setItem('filter-lease-duration',leaseDuration);}catch(_unused10){}},[leaseDuration]);useEffect(()=>{try{localStorage.setItem('filter-pet-friendly',String(petFriendly));}catch(_unused11){}},[petFriendly]);useEffect(()=>{try{localStorage.setItem('filter-gender-preference',genderPreference);}catch(_unused12){}},[genderPreference]);// Check for new listings and price drops\nuseEffect(()=>{if(!listings||listings.length===0)return;// Check new listings against saved searches\nconst searches=getSavedSearches();if(searches.length>0){const newListingNotifs=checkNewListings(listings,searches);newListingNotifs.forEach(n=>addNotification(n));}// Check price drops on favorites\nif(favorites.length>0){const priceDropNotifs=checkPriceDrops(listings,favorites);priceDropNotifs.forEach(n=>addNotification(n));}},[listings,favorites]);// Debounced provider-aware suggestions with caching\nuseEffect(()=>{const raw=(searchLocation||'').trim();if(raw.length<3){setLocationSuggestions([]);setLocationLoading(false);return;}const key=(process.env.REACT_APP_GEOCODER_API_KEY||'').trim();const provider=(process.env.REACT_APP_GEOCODER_PROVIDER||'').toLowerCase();const qLower=raw.toLowerCase();const cached=suggestionCacheRef.current[qLower];if(cached&&Date.now()-cached.ts<SUGGESTION_TTL_MS){setLocationSuggestions(cached.data);return;// serve cache, skip network\n}const controller=new AbortController();setLocationLoading(true);const t=setTimeout(async()=>{try{let suggestions=[];if(provider==='mapbox'&&key){const url=\"https://api.mapbox.com/geocoding/v5/mapbox.places/\".concat(encodeURIComponent(raw),\".json?access_token=\").concat(key,\"&limit=5&country=ZA&language=en&types=place,locality,neighborhood\");const resp=await fetch(url,{signal:controller.signal});const data=await resp.json();if(data&&Array.isArray(data.features)){suggestions=data.features.map(f=>f.place_name).filter(Boolean);}}else{const url=\"https://nominatim.openstreetmap.org/search?format=json&q=\".concat(encodeURIComponent(raw+', South Africa'),\"&limit=5\");const resp=await fetch(url,{signal:controller.signal,headers:{'Accept-Language':'en'}});const data=await resp.json();const uniq=[];data.forEach(item=>{const display=item.display_name||'';const parts=display.split(',').map(p=>p.trim());const area=parts.slice(0,2).join(', ');if(area&&!uniq.includes(area))uniq.push(area);});suggestions=uniq.slice(0,5);}suggestionCacheRef.current[qLower]={data:suggestions,ts:Date.now()};setLocationSuggestions(suggestions);}catch(e){setLocationSuggestions([]);}finally{setLocationLoading(false);}},450);return()=>{clearTimeout(t);controller.abort();};},[searchLocation,SUGGESTION_TTL_MS]);// Sidebar navigation items (desktop only)\nconst desktopNavItems=[{id:'browse',label:'Browse',icon:Search},{id:'add',label:'List Room',icon:PlusCircle,show:currentUser&&currentUser.type==='landlord'&&!previewMode},{id:'my-listings',label:'My Rooms',icon:Home,show:currentUser&&currentUser.type==='landlord'&&!previewMode},{id:'profile',label:'Profile',icon:User}];const amenityOptions=['WiFi','Parking','Kitchen','Laundry','Air Conditioning','Heating','Furnished'];const toggleAmenity=amenity=>{if(selectedAmenities.includes(amenity)){setSelectedAmenities(selectedAmenities.filter(a=>a!==amenity));}else{setSelectedAmenities([...selectedAmenities,amenity]);}};const clearChip=(type,value)=>{if(type==='location')setSearchLocation('');if(type==='priceMin')setPriceRange([0,priceRange[1]]);if(type==='priceMax')setPriceRange([priceRange[0],10000]);if(type==='amenity')setSelectedAmenities(selectedAmenities.filter(a=>a!==value));if(type==='sort')setSortBy('newest');if(type==='roomType')setRoomType('');if(type==='lease')setLeaseDuration('');if(type==='pets')setPetFriendly(false);if(type==='gender')setGenderPreference('');};const renderFilterChips=()=>{const chips=[];if(searchLocation)chips.push({type:'location',label:searchLocation});if(priceRange[0]>0)chips.push({type:'priceMin',label:\"Min R\".concat(priceRange[0])});if(priceRange[1]<10000)chips.push({type:'priceMax',label:\"Max R\".concat(priceRange[1])});selectedAmenities.forEach(a=>chips.push({type:'amenity',label:a,value:a}));if(sortBy!=='newest')chips.push({type:'sort',label:\"Sort: \".concat(sortBy)});if(paymentFilter)chips.push({type:'payment',label:\"Pay: \".concat(paymentFilter)});if(roomType)chips.push({type:'roomType',label:\"\".concat(roomType.charAt(0).toUpperCase()+roomType.slice(1),\" room\")});if(leaseDuration)chips.push({type:'lease',label:\"\".concat(leaseDuration,\" months\")});if(petFriendly)chips.push({type:'pets',label:'ðŸ¾ Pet friendly'});if(genderPreference)chips.push({type:'gender',label:\"\".concat(genderPreference.charAt(0).toUpperCase()+genderPreference.slice(1),\" only\")});if(chips.length===0)return null;return/*#__PURE__*/_jsxs(\"div\",{className:\"filter-chip-bar\",\"aria-label\":\"Active filters\",children:[chips.map((chip,idx)=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>clearChip(chip.type,chip.value),className:\"filter-chip\",\"aria-label\":\"Remove \".concat(chip.label,\" filter\"),children:[/*#__PURE__*/_jsx(\"span\",{children:chip.label}),/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:\"\\u2715\"})]},idx)),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSearchLocation('');setPriceRange([0,10000]);setSelectedAmenities([]);setSortBy('newest');setPaymentFilter('');setRoomType('');setLeaseDuration('');setPetFriendly(false);setGenderPreference('');setLocationSuggestions([]);try{localStorage.removeItem('filter-payment');}catch(_unused13){}try{localStorage.removeItem('filter-price-min');localStorage.removeItem('filter-price-max');}catch(_unused14){}try{localStorage.removeItem('filter-amenities');}catch(_unused15){}try{localStorage.removeItem('filter-room-type');}catch(_unused16){}try{localStorage.removeItem('filter-lease-duration');}catch(_unused17){}try{localStorage.removeItem('filter-pet-friendly');}catch(_unused18){}try{localStorage.removeItem('filter-gender-preference');}catch(_unused19){}},className:\"filter-chip bg-red-50 text-red-700 hover:bg-red-100\",children:\"Clear All\"})]});};const saveCurrentSearch=()=>{const criteria={location:searchLocation||'',priceMin:priceRange[0],priceMax:priceRange[1],priceRange:[...priceRange],amenities:[...selectedAmenities]};const saved=saveSearchToEngine(criteria);if(saved){// Also update local state for UI\nsetSavedSearches(getSavedSearches());alert('Search saved! You\\'ll be notified of new listings matching this criteria.');}};const loadSearch=s=>{setSearchLocation(s.location);setPriceRange(s.priceRange);setSelectedAmenities(s.amenities);setPaymentFilter(s.payment);setSortBy(s.sort||'newest');};const renderFiltersBox=()=>/*#__PURE__*/_jsxs(\"div\",{className:\"filters-box\",\"aria-label\":\"Filters panel\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search location...\",value:searchLocation,onChange:e=>setSearchLocation(e.target.value),className:\"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-teal-600 focus:border-transparent\",\"aria-label\":\"Location search\"}),locationLoading&&/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-teal-600 animate-pulse\",\"aria-live\":\"polite\",children:\"Loading...\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-gray-600\",children:\"Price Range\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 text-xs bg-gray-50 px-2 py-1 rounded border border-gray-200\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"R\",priceRange[0].toLocaleString(),\" - R\",priceRange[1].toLocaleString()]}),/*#__PURE__*/_jsxs(\"select\",{value:priceRange[0],onChange:e=>setPriceRange([parseInt(e.target.value),priceRange[1]]),className:\"bg-transparent border-l border-gray-300 pl-2 focus:outline-none\",\"aria-label\":\"Minimum price\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"Min\"}),/*#__PURE__*/_jsx(\"option\",{value:\"500\",children:\"R500\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1000\",children:\"R1000\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1500\",children:\"R1500\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:priceRange[1],onChange:e=>setPriceRange([priceRange[0],parseInt(e.target.value)]),className:\"bg-transparent border-l border-gray-300 pl-2 focus:outline-none\",\"aria-label\":\"Maximum price\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"10000\",children:\"R10,000\"}),/*#__PURE__*/_jsx(\"option\",{value:\"5000\",children:\"R5,000\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3000\",children:\"R3,000\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2000\",children:\"R2,000\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-gray-600\",children:\"Sort\"}),/*#__PURE__*/_jsxs(\"select\",{value:sortBy,onChange:e=>setSortBy(e.target.value),className:\"text-sm bg-white border border-gray-300 px-2 py-1 rounded focus:ring-2 focus:ring-teal-600\",\"aria-label\":\"Sort order\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"newest\",children:\"Newest\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cheapest\",children:\"Cheapest\"}),/*#__PURE__*/_jsx(\"option\",{value:\"expensive\",children:\"Most Expensive\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-gray-600\",children:\"Payment Method\"}),/*#__PURE__*/_jsxs(\"select\",{value:paymentFilter,onChange:e=>setPaymentFilter(e.target.value),className:\"text-sm bg-white border border-gray-300 px-2 py-1 rounded focus:ring-2 focus:ring-teal-600\",\"aria-label\":\"Payment method\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Any\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Bank and Cash\",children:\"Bank and Cash\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Cash Only\",children:\"Cash Only\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Bank Only\",children:\"Bank Only\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col gap-1\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-gray-600\",children:\"Saved Searches\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-1\",children:[savedSearches.length===0&&/*#__PURE__*/_jsx(\"span\",{className:\"text-[11px] text-gray-500\",children:\"None saved\"}),savedSearches.map(s=>/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>loadSearch(s),className:\"px-2 py-1 rounded-md text-[11px] font-medium bg-purple-50 text-purple-700 border border-purple-200 hover:bg-purple-100\",children:[s.location||'Any',\" \\u2022 \",s.priceRange[0],\"-\",s.priceRange[1]]},s.id))]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:saveCurrentSearch,className:\"mt-1 text-xs text-purple-700 hover:text-purple-800 font-medium underline\",children:\"Save Current Search\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-gray-600 mb-1 block\",children:\"Amenities\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-1\",children:amenityOptions.map(a=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>toggleAmenity(a),className:\"px-2 py-1 rounded-md text-[11px] font-medium border transition \".concat(selectedAmenities.includes(a)?'bg-teal-600 text-white border-teal-600 shadow-sm':'bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200'),\"aria-pressed\":selectedAmenities.includes(a),children:a},a))})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAdvancedFilters(!showAdvancedFilters),className:\"mt-2 text-xs text-teal-700 hover:text-teal-800 font-semibold px-2 py-1 rounded hover:bg-teal-50 transition\",\"aria-expanded\":showAdvancedFilters,children:showAdvancedFilters?'Close Advanced':'More Filters'}),showAdvancedFilters&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-2 p-2 bg-gray-50 border border-gray-200 rounded\",\"aria-label\":\"Advanced filters\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-600\",children:\"(Advanced filters placeholder)\"})})]})]});// Desktop layout\nif(isDesktop){return/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-b from-slate-50 to-gray-100 min-h-screen pb-4\",\"aria-labelledby\":\"results-heading\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"layout-desktop\",children:[/*#__PURE__*/_jsxs(\"aside\",{className:\"sidebar-nav\",role:\"navigation\",\"aria-label\":\"Desktop navigation and filters\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"h2\",{className:\"text-xl font-bold flex items-center gap-2 mb-4\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"bg-gradient-to-r from-teal-600 to-cyan-600 bg-clip-text text-transparent\",children:\"Room\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-amber-500\",children:\"24\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-section-title mb-2\",children:\"Navigation\"}),/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-menu\",children:desktopNavItems.filter(i=>i.show===undefined||i.show).map(item=>{const Icon=item.icon;const isActive=item.id==='browse';return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentView(item.id),className:isActive?'active':'',\"aria-label\":item.label,children:[/*#__PURE__*/_jsx(Icon,{className:\"w-4 h-4\"}),\" \",item.label]},item.id);})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"sidebar-section-title mb-2\",children:\"Filters\"}),renderFiltersBox()]}),/*#__PURE__*/_jsx(SidebarAd,{}),!currentUser&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-auto pt-4 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mb-2\",children:\"Join to list rooms.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>onRequireAuth&&onRequireAuth('renter'),className:\"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 text-xs py-2 rounded\",children:\"Sign In\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>onRequireAuth&&onRequireAuth('landlord'),className:\"flex-1 bg-red-500 hover:bg-red-600 text-white text-xs py-2 rounded\",children:\"List Room\"})]})]})]}),/*#__PURE__*/_jsx(\"main\",{className:\"desktop-split\",role:\"main\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"list-pane\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-between mb-3\",children:/*#__PURE__*/_jsx(\"h2\",{id:\"results-heading\",className:\"text-lg font-semibold text-gray-800\",children:listings.length===0?'No rooms':\"\".concat(listings.length,\" rooms\")})}),renderFilterChips(),initialLoad?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6\",\"aria-label\":\"Loading listings\",children:Array.from({length:8}).map((_,i)=>/*#__PURE__*/_jsx(ListingSkeletonCard,{},i))}):(paymentFilter?listings.filter(l=>l.paymentMethod===paymentFilter):listings).length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white border border-gray-200 rounded-2xl p-12 text-center shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 bg-gradient-to-br from-gray-100 to-gray-50 rounded-full flex items-center justify-center mx-auto mb-6\",children:/*#__PURE__*/_jsx(Search,{className:\"w-10 h-10 text-gray-300\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-2\",children:\"No rooms found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm mb-6 max-w-md mx-auto\",children:\"We couldn't find any rooms matching your filters. Try adjusting your search or explore popular areas.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap justify-center gap-2 mb-6\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500\",children:\"Try:\"}),['Sandton','Soweto','Pretoria','Cape Town'].map(area=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSearchLocation(area),className:\"text-xs px-3 py-1.5 rounded-full bg-teal-50 text-teal-700 hover:bg-teal-100 border border-teal-200 transition-all\",children:area},area))]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSearchLocation('');setPriceRange([0,10000]);setSelectedAmenities([]);setPaymentFilter('');},className:\"text-sm text-teal-600 hover:text-teal-700 font-semibold\",children:\"Clear all filters\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6\",children:(paymentFilter?listings.filter(l=>l.paymentMethod===paymentFilter):listings).map((listing,idx)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(ListingCard,{listing:listing,onClick:()=>onSelectListing(listing)}),(idx+1)%6===0&&idx!==listings.length-1&&/*#__PURE__*/_jsx(\"div\",{className:\"md:col-span-2 xl:col-span-3 2xl:col-span-4\",children:/*#__PURE__*/_jsx(InFeedAd,{})})]},listing.id))})]})})]})});}// Mobile / tablet layout\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-b from-slate-50 to-gray-100 min-h-screen pb-24\",role:\"main\",\"aria-labelledby\":\"results-heading\",children:[showWelcomeHero&&!currentUser&&listings.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-teal-600 via-cyan-600 to-teal-700 text-white relative overflow-hidden\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iMC4xIj48cGF0aCBkPSJNMzYgMzRoLTJ2LTRoMnYtMmgtMnYtMmgydi0ySDI0djJoMnYyaC0ydjJoMnY0aC0ydjJoMTJ2LTJ6Ii8+PC9nPjwvZz48L3N2Zz4=')] opacity-30\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 py-8 relative\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:dismissHero,className:\"absolute top-2 right-2 p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-full transition-colors\",\"aria-label\":\"Dismiss welcome message\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-xl\",children:\"\\xD7\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-3\",children:[/*#__PURE__*/_jsx(Sparkles,{className:\"w-5 h-5 text-amber-300\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-teal-100\",children:\"Find your perfect room in South Africa\"})]}),/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl md:text-3xl font-bold mb-3\",children:[\"Welcome to Room\",/*#__PURE__*/_jsx(\"span\",{className:\"text-amber-300\",children:\"24\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-teal-100 mb-6 max-w-lg\",children:\"Discover affordable rooms for rent across South Africa. Connect directly with verified landlords - no middleman fees.\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-4 mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-3 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(Building2,{className:\"w-4 h-4 text-amber-300\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm\",children:[listings.length,\"+ Rooms\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-3 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(Shield,{className:\"w-4 h-4 text-amber-300\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"Verified Listings\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-3 py-2 rounded-lg\",children:[/*#__PURE__*/_jsx(Zap,{className:\"w-4 h-4 text-amber-300\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm\",children:\"Instant Contact\"})]})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onRequireAuth&&onRequireAuth('renter'),className:\"inline-flex items-center gap-2 bg-white text-teal-700 font-semibold px-5 py-2.5 rounded-xl hover:bg-teal-50 transition-colors shadow-lg\",children:[\"Get Started\",/*#__PURE__*/_jsx(ArrowRight,{className:\"w-4 h-4\"})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-white/80 backdrop-blur-sm border-b border-gray-100 shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4 py-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 space-y-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"absolute left-3 top-3.5 w-5 h-5 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by location, suburb, or area...\",value:searchLocation,onChange:e=>setSearchLocation(e.target.value),onBlur:()=>{if(searchLocation)addRecentSearch(searchLocation);},className:\"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-xl text-gray-700 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 shadow-sm transition-all duration-200 hover:border-gray-400\",\"aria-label\":\"Location search\"}),locationLoading&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute right-3 top-3 flex items-center gap-1 text-teal-600\",\"aria-live\":\"polite\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 border-2 border-teal-500 border-t-transparent rounded-full animate-spin\"})}),!locationLoading&&searchLocation&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSearchLocation('');setLocationSuggestions([]);},className:\"absolute right-3 top-3 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors\",\"aria-label\":\"Clear search\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-lg\",children:\"\\xD7\"})}),locationSuggestions.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute left-0 right-0 top-full mt-2 bg-white border border-gray-200 rounded-xl shadow-lg z-20 overflow-hidden animate-fadeIn\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-xs text-gray-500 px-3 py-2 bg-gray-50 border-b border-gray-100 font-medium\",children:\"\\uD83D\\uDCCD Suggestions\"}),locationSuggestions.map((s,i)=>/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>{setSearchLocation(s);setLocationSuggestions([]);addRecentSearch(s);},className:\"w-full text-left px-4 py-2.5 text-sm hover:bg-teal-50 flex items-center gap-2 transition-colors \".concat(i>0?'border-t border-gray-50':''),children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-3.5 h-3.5 text-teal-500 flex-shrink-0\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700\",children:s})]},s))]}),!searchLocation&&recentSearches.length>0&&locationSuggestions.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute left-0 right-0 top-full mt-2 bg-white border border-gray-200 rounded-xl shadow-lg z-20 overflow-hidden\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500 px-3 py-2 bg-gray-50 border-b border-gray-100 font-medium flex items-center gap-1\",children:[/*#__PURE__*/_jsx(Clock,{className:\"w-3 h-3\"}),\" Recent Searches\"]}),recentSearches.map((s,i)=>/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>{setSearchLocation(s);},className:\"w-full text-left px-4 py-2.5 text-sm hover:bg-teal-50 flex items-center gap-2 transition-colors \".concat(i>0?'border-t border-gray-50':''),children:[/*#__PURE__*/_jsx(Clock,{className:\"w-3.5 h-3.5 text-gray-400 flex-shrink-0\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-700\",children:s})]},\"recent-\".concat(i)))]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"bg-gradient-to-r from-teal-500 to-teal-600 hover:from-teal-600 hover:to-teal-700 text-white px-5 py-2.5 rounded-xl transition-all duration-200 font-semibold shadow-md hover:shadow-lg text-sm flex items-center gap-2 active:scale-95\",onClick:()=>{if(searchLocation)addRecentSearch(searchLocation);},\"aria-label\":\"Search submit\",children:[/*#__PURE__*/_jsx(Search,{className:\"w-4 h-4\"}),\"Search\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(!searchLocation||searchLocation.trim()===''){alert('Enter a location to subscribe.');return;}if(!currentUser){onRequireAuth&&onRequireAuth('renter');return;}subscribeToArea&&subscribeToArea(currentUser.id,searchLocation.trim());},className:\"bg-white border border-gray-200 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-50 transition text-sm\",children:\"Subscribe\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:saveCurrentSearch,className:\"bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded-lg text-sm font-semibold shadow-sm\",children:\"Save Search\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 items-center\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500 font-medium\",children:\"Popular:\"}),['Sandton','Soweto','Pretoria','Cape Town','Durban','Johannesburg'].map(area=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSearchLocation(area);addRecentSearch(area);},className:\"text-xs px-3 py-1.5 rounded-full transition-all duration-200 \".concat(searchLocation.toLowerCase()===area.toLowerCase()?'bg-teal-600 text-white shadow-md':'bg-gray-100 text-gray-600 hover:bg-teal-50 hover:text-teal-700 border border-gray-200'),children:area},area))]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-2 items-center pt-2 border-t border-gray-100\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500 font-medium\",children:\"Quick filters:\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPriceRange([0,3000]),className:\"text-xs px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-1 \".concat(priceRange[1]===3000&&priceRange[0]===0?'bg-emerald-600 text-white shadow-md':'bg-emerald-50 text-emerald-700 hover:bg-emerald-100 border border-emerald-200'),children:\"\\uD83D\\uDCB0 Under R3,000\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setPetFriendly(!petFriendly),className:\"text-xs px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-1 \".concat(petFriendly?'bg-amber-500 text-white shadow-md':'bg-amber-50 text-amber-700 hover:bg-amber-100 border border-amber-200'),children:\"\\uD83D\\uDC3E Pet Friendly\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>{// Visual indicator for available now - just scroll to see results\nwindow.scrollTo({top:400,behavior:'smooth'});},className:\"text-xs px-3 py-1.5 rounded-full bg-blue-50 text-blue-700 hover:bg-blue-100 border border-blue-200 transition-all duration-200 flex items-center gap-1\",children:\"\\uD83C\\uDFE0 Available Now\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleAmenity('WiFi'),className:\"text-xs px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-1 \".concat(selectedAmenities.includes('WiFi')?'bg-violet-600 text-white shadow-md':'bg-violet-50 text-violet-700 hover:bg-violet-100 border border-violet-200'),children:\"\\uD83D\\uDCF6 WiFi\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>toggleAmenity('Parking'),className:\"text-xs px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-1 \".concat(selectedAmenities.includes('Parking')?'bg-slate-600 text-white shadow-md':'bg-slate-50 text-slate-700 hover:bg-slate-100 border border-slate-200'),children:\"\\uD83D\\uDE97 Parking\"})]}),savedSearches.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-1 mb-2\",\"aria-label\":\"Saved searches\",children:savedSearches.map(s=>/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>loadSearch(s),className:\"text-[11px] px-2 py-1 rounded bg-purple-50 text-purple-700 border border-purple-200\",children:[s.location||'Any',\" \\u2022 \",s.priceRange[0],\"-\",s.priceRange[1]]},s.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mb-3 flex-wrap items-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 bg-gray-50 px-3 py-2 rounded-lg border border-gray-200\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-600 font-medium\",children:[\"R\",priceRange[0].toLocaleString(),\" - R\",priceRange[1].toLocaleString()]}),/*#__PURE__*/_jsxs(\"select\",{value:priceRange[0],onChange:e=>setPriceRange([parseInt(e.target.value),priceRange[1]]),className:\"text-xs bg-transparent border-l border-gray-300 pl-2 text-gray-600 focus:outline-none\",\"aria-label\":\"Minimum price\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"0\",children:\"Min\"}),/*#__PURE__*/_jsx(\"option\",{value:\"500\",children:\"R500\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1000\",children:\"R1000\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1500\",children:\"R1500\"})]}),/*#__PURE__*/_jsxs(\"select\",{value:priceRange[1],onChange:e=>setPriceRange([priceRange[0],parseInt(e.target.value)]),className:\"text-xs bg-transparent border-l border-gray-300 pl-2 text-gray-600 focus:outline-none\",\"aria-label\":\"Maximum price\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"10000\",children:\"R10k\"}),/*#__PURE__*/_jsx(\"option\",{value:\"5000\",children:\"R5k\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3000\",children:\"R3k\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2000\",children:\"R2k\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Sort:\"}),/*#__PURE__*/_jsxs(\"select\",{value:sortBy,onChange:e=>setSortBy(e.target.value),className:\"text-sm bg-gray-50 border border-gray-200 px-3 py-2 rounded-lg text-gray-700 focus:ring-2 focus:ring-teal-600\",\"aria-label\":\"Sort order\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"newest\",children:\"Newest\"}),/*#__PURE__*/_jsx(\"option\",{value:\"cheapest\",children:\"Cheapest\"}),/*#__PURE__*/_jsx(\"option\",{value:\"expensive\",children:\"Most Expensive\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600\",children:\"Payment:\"}),/*#__PURE__*/_jsxs(\"select\",{value:paymentFilter,onChange:e=>setPaymentFilter(e.target.value),className:\"text-sm bg-gray-50 border border-gray-200 px-3 py-2 rounded-lg text-gray-700 focus:ring-2 focus:ring-teal-600\",\"aria-label\":\"Payment method filter\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Any\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Bank and Cash\",children:\"Bank & Cash\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Cash Only\",children:\"Cash Only\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Bank Only\",children:\"Bank Only\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowAdvancedFilters(!showAdvancedFilters),className:\"text-sm text-teal-700 hover:text-teal-800 font-medium px-3 py-2 rounded-lg hover:bg-teal-50 transition\",\"aria-expanded\":showAdvancedFilters,children:showAdvancedFilters?'âœ• Filters':'âš™ï¸ Filters'})]}),showAdvancedFilters&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 p-4 bg-gray-50 rounded-lg border border-gray-200 space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-gray-700 mb-2 block\",children:\"Room Type\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2\",children:['Private','Shared'].map(type=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setRoomType(roomType===type.toLowerCase()?'':type.toLowerCase()),className:\"px-3 py-1.5 rounded-md text-sm font-medium border transition \".concat(roomType===type.toLowerCase()?'bg-teal-600 text-white border-teal-600 shadow-sm':'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'),children:type},type))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-gray-700 mb-2 block\",children:\"Lease Duration (months)\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2 flex-wrap\",children:[{label:'1-3',value:'1-3'},{label:'4-6',value:'4-6'},{label:'7-12',value:'7-12'},{label:'12+',value:'12+'}].map(opt=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setLeaseDuration(leaseDuration===opt.value?'':opt.value),className:\"px-3 py-1.5 rounded-md text-sm font-medium border transition \".concat(leaseDuration===opt.value?'bg-teal-600 text-white border-teal-600 shadow-sm':'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'),children:opt.label},opt.value))})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-2 cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:petFriendly,onChange:e=>setPetFriendly(e.target.checked),className:\"w-4 h-4 text-teal-600 border-gray-300 rounded focus:ring-teal-500\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"\\uD83D\\uDC3E Pet Friendly\"})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-gray-700 mb-2 block\",children:\"Gender Preference\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2\",children:[{label:'Male',value:'male'},{label:'Female',value:'female'},{label:'Any',value:'any'}].map(opt=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setGenderPreference(genderPreference===opt.value?'':opt.value),className:\"px-3 py-1.5 rounded-md text-sm font-medium border transition \".concat(genderPreference===opt.value?'bg-teal-600 text-white border-teal-600 shadow-sm':'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'),children:opt.label},opt.value))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-xs font-semibold text-gray-700 mb-2 block\",children:\"Amenities\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-1\",\"aria-label\":\"Amenities\",children:amenityOptions.map(a=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>toggleAmenity(a),className:\"px-2 py-1 rounded-md text-[11px] font-medium border transition \".concat(selectedAmenities.includes(a)?'bg-teal-600 text-white border-teal-600 shadow-sm':'bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200'),\"aria-pressed\":selectedAmenities.includes(a),children:a},a))})]})]}),renderFilterChips()]})}),/*#__PURE__*/_jsx(\"div\",{className:\"max-w-7xl mx-auto px-4 pt-3\",children:/*#__PURE__*/_jsx(InFeedAd,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto px-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-between items-center mt-4 mb-4\",children:/*#__PURE__*/_jsx(\"h2\",{id:\"results-heading\",className:\"text-2xl font-bold text-gray-800\",children:listings.length===0?'No rooms available':/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"bg-gradient-to-r from-teal-500 to-cyan-500 text-white text-lg font-bold px-3 py-1 rounded-lg shadow-sm\",children:listings.length}),/*#__PURE__*/_jsx(\"span\",{children:\"Rooms Available\"})]})})}),initialLoad?/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-12 justify-items-center\",\"aria-label\":\"Loading listings\",children:Array.from({length:8}).map((_,i)=>/*#__PURE__*/_jsx(ListingSkeletonCard,{},i))}):(paymentFilter?listings.filter(l=>l.paymentMethod===paymentFilter):listings).length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-gray-50 to-blue-50 rounded-xl border-2 border-dashed border-gray-300 p-16 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-white w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg\",children:/*#__PURE__*/_jsx(Search,{className:\"w-12 h-12 text-gray-400\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-800 mb-3\",children:\"No Rooms Found\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-2\",children:\"We couldn't find any rooms matching your criteria\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm mb-8 max-w-md mx-auto\",children:\"Try adjusting your filters, expanding your search area, or checking back later for new listings\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-col sm:flex-row gap-3 justify-center items-center\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setSearchLocation('');setPriceRange([0,10000]);setSelectedAmenities([]);setSortBy('newest');setRoomType('');setLeaseDuration('');setPetFriendly(false);setGenderPreference('');setPaymentFilter('');},className:\"inline-flex items-center gap-2 bg-teal-600 hover:bg-teal-700 text-white font-medium px-6 py-2.5 rounded-lg transition shadow-sm\",children:\"Clear All Filters\"})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-12 justify-items-center\",children:(paymentFilter?listings.filter(l=>l.paymentMethod===paymentFilter):listings).map((listing,idx)=>/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsx(ListingCard,{listing:listing,onClick:()=>onSelectListing(listing),isFavorite:favorites.includes(listing.id),onToggleFavorite:toggleFavorite}),(idx+1)%8===0&&idx!==listings.length-1&&/*#__PURE__*/_jsx(\"div\",{className:\"sm:col-span-2 lg:col-span-3 xl:col-span-4\",children:/*#__PURE__*/_jsx(InFeedAd,{})})]},listing.id))}),!currentUser&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 md:p-8 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-900 mb-2\",children:\"How Room24 Works\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Find your perfect room in 3 simple steps\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-3 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gradient-to-br from-teal-100 to-cyan-100 rounded-2xl flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(Search,{className:\"w-8 h-8 text-teal-600\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-teal-500 text-white text-xs font-bold w-6 h-6 rounded-full flex items-center justify-center mx-auto -mt-8 mb-2 relative z-10 shadow-md\",children:\"1\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-900 mb-2\",children:\"Search & Filter\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Browse rooms by location, price, and amenities. Use filters to find exactly what you need.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gradient-to-br from-cyan-100 to-blue-100 rounded-2xl flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(Home,{className:\"w-8 h-8 text-cyan-600\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-cyan-500 text-white text-xs font-bold w-6 h-6 rounded-full flex items-center justify-center mx-auto -mt-8 mb-2 relative z-10 shadow-md\",children:\"2\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-900 mb-2\",children:\"View Details\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Check photos, virtual tours, reviews, and landlord verification status.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center p-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-2xl flex items-center justify-center mx-auto mb-4\",children:/*#__PURE__*/_jsx(User,{className:\"w-8 h-8 text-blue-600\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-blue-500 text-white text-xs font-bold w-6 h-6 rounded-full flex items-center justify-center mx-auto -mt-8 mb-2 relative z-10 shadow-md\",children:\"3\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-gray-900 mb-2\",children:\"Contact Landlord\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-gray-600\",children:\"Connect directly via phone, email, or WhatsApp. No middleman fees.\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-6 pt-6 border-t border-gray-100\",children:/*#__PURE__*/_jsxs(\"button\",{onClick:()=>onRequireAuth&&onRequireAuth('renter'),className:\"inline-flex items-center gap-2 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white font-semibold px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all\",children:[\"Create Free Account\",/*#__PURE__*/_jsx(ArrowRight,{className:\"w-4 h-4\"})]})})]})]})]})]});}","map":{"version":3,"names":["React","useState","useEffect","Search","PlusCircle","Home","User","MapPin","Clock","Sparkles","ArrowRight","Building2","Shield","Zap","ListingCard","ListingSkeletonCard","SidebarAd","InFeedAd","getSavedSearches","checkNewListings","checkPriceDrops","addNotification","saveSearch","saveSearchToEngine","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BrowseView","_ref","listings","searchLocation","setSearchLocation","priceRange","setPriceRange","selectedAmenities","setSelectedAmenities","sortBy","setSortBy","onSelectListing","setCurrentView","currentUser","onRequireAuth","subscribeToArea","previewMode","showAdvancedFilters","setShowAdvancedFilters","isDesktop","setIsDesktop","window","innerWidth","paymentFilter","setPaymentFilter","locationSuggestions","setLocationSuggestions","locationLoading","setLocationLoading","savedSearches","setSavedSearches","initialLoad","setInitialLoad","favorites","setFavorites","roomType","setRoomType","leaseDuration","setLeaseDuration","petFriendly","setPetFriendly","genderPreference","setGenderPreference","recentSearches","setRecentSearches","showWelcomeHero","setShowWelcomeHero","suggestionCacheRef","useRef","SUGGESTION_TTL_MS","stored","localStorage","getItem","parsed","JSON","parse","Array","isArray","slice","heroDismissed","_unused","addRecentSearch","location","trim","length","trimmed","prev","filtered","filter","s","toLowerCase","updated","setItem","stringify","_unused2","dismissHero","_unused3","toggleFavorite","listingId","includes","id","_unused4","storedPayment","storedPriceMin","storedPriceMax","isNaN","parseInt","storedAmenities","arr","_unused5","rawSaved","_unused6","rawFavorites","_unused7","storedRoomType","storedLease","storedPets","storedGender","e","t","setTimeout","clearTimeout","handleResize","addEventListener","removeEventListener","_unused8","String","_unused9","_unused0","_unused1","_unused10","_unused11","_unused12","searches","newListingNotifs","forEach","n","priceDropNotifs","raw","key","process","env","REACT_APP_GEOCODER_API_KEY","provider","REACT_APP_GEOCODER_PROVIDER","qLower","cached","current","Date","now","ts","data","controller","AbortController","suggestions","url","concat","encodeURIComponent","resp","fetch","signal","json","features","map","f","place_name","Boolean","headers","uniq","item","display","display_name","parts","split","p","area","join","push","abort","desktopNavItems","label","icon","show","type","amenityOptions","toggleAmenity","amenity","a","clearChip","value","renderFilterChips","chips","charAt","toUpperCase","className","children","chip","idx","onClick","removeItem","_unused13","_unused14","_unused15","_unused16","_unused17","_unused18","_unused19","saveCurrentSearch","criteria","priceMin","priceMax","amenities","saved","alert","loadSearch","payment","sort","renderFiltersBox","placeholder","onChange","target","toLocaleString","role","i","undefined","Icon","isActive","from","_","l","paymentMethod","listing","onBlur","scrollTo","top","behavior","opt","checked","isFavorite","onToggleFavorite"],"sources":["C:/Users/kutum/Documents/room-rental-platform/src/components/BrowseView.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Search, PlusCircle, Home, User, MapPin, Clock, Sparkles, ArrowRight, Building2, Shield, Zap } from 'lucide-react';\r\nimport ListingCard from './ListingCard';\r\nimport ListingSkeletonCard from './ListingSkeletonCard';\r\nimport { SidebarAd, InFeedAd } from './AdBanner';\r\nimport { getSavedSearches, checkNewListings, checkPriceDrops, addNotification, saveSearch as saveSearchToEngine } from '../utils/notificationEngine';\r\n\r\nexport default function BrowseView({\r\n  listings,\r\n  searchLocation,\r\n  setSearchLocation,\r\n  priceRange,\r\n  setPriceRange,\r\n  selectedAmenities,\r\n  setSelectedAmenities,\r\n  sortBy,\r\n  setSortBy,\r\n  onSelectListing,\r\n  setCurrentView,\r\n  currentUser,\r\n  onRequireAuth,\r\n  subscribeToArea,\r\n  previewMode\r\n}) {\r\n  const [showAdvancedFilters, setShowAdvancedFilters] = useState(false);\r\n  const [isDesktop, setIsDesktop] = useState(typeof window !== 'undefined' ? window.innerWidth >= 1024 : false);\r\n  const [paymentFilter, setPaymentFilter] = useState('');\r\n  const [locationSuggestions, setLocationSuggestions] = useState([]);\r\n  const [locationLoading, setLocationLoading] = useState(false);\r\n  const [savedSearches, setSavedSearches] = useState([]);\r\n  const [initialLoad, setInitialLoad] = useState(true);\r\n  const [favorites, setFavorites] = useState([]);\r\n  const [roomType, setRoomType] = useState(''); // '', 'private', 'shared'\r\n  const [leaseDuration, setLeaseDuration] = useState(''); // '', '1-3', '4-6', '7-12', '12+'\r\n  const [petFriendly, setPetFriendly] = useState(false);\r\n  const [genderPreference, setGenderPreference] = useState(''); // '', 'male', 'female', 'any'\r\n  const [recentSearches, setRecentSearches] = useState([]);\r\n  const [showWelcomeHero, setShowWelcomeHero] = useState(true);\r\n  const suggestionCacheRef = React.useRef({}); // cache: { queryLower: { data: [...], ts } }\r\n  const SUGGESTION_TTL_MS = 15 * 60 * 1000; // 15 minutes\r\n\r\n  // Load recent searches from localStorage\r\n  useEffect(() => {\r\n    try {\r\n      const stored = localStorage.getItem('recent-searches');\r\n      if (stored) {\r\n        const parsed = JSON.parse(stored);\r\n        if (Array.isArray(parsed)) setRecentSearches(parsed.slice(0, 5));\r\n      }\r\n      // Check if user has dismissed hero before\r\n      const heroDismissed = localStorage.getItem('hero-dismissed');\r\n      if (heroDismissed === 'true') setShowWelcomeHero(false);\r\n    } catch {}\r\n  }, []);\r\n\r\n  // Save recent search when location changes\r\n  const addRecentSearch = (location) => {\r\n    if (!location || location.trim().length < 2) return;\r\n    const trimmed = location.trim();\r\n    setRecentSearches(prev => {\r\n      const filtered = prev.filter(s => s.toLowerCase() !== trimmed.toLowerCase());\r\n      const updated = [trimmed, ...filtered].slice(0, 5);\r\n      try {\r\n        localStorage.setItem('recent-searches', JSON.stringify(updated));\r\n      } catch {}\r\n      return updated;\r\n    });\r\n  };\r\n\r\n  const dismissHero = () => {\r\n    setShowWelcomeHero(false);\r\n    try {\r\n      localStorage.setItem('hero-dismissed', 'true');\r\n    } catch {}\r\n  };\r\n\r\n  const toggleFavorite = (listingId) => {\r\n    setFavorites(prev => {\r\n      const updated = prev.includes(listingId)\r\n        ? prev.filter(id => id !== listingId)\r\n        : [...prev, listingId];\r\n      try {\r\n        localStorage.setItem('favorites', JSON.stringify(updated));\r\n      } catch {}\r\n      return updated;\r\n    });\r\n  };\r\n\r\n  // Restore persisted lightweight filters\r\n  useEffect(() => {\r\n    try {\r\n      const storedPayment = localStorage.getItem('filter-payment');\r\n      if (storedPayment) setPaymentFilter(storedPayment);\r\n      const storedPriceMin = localStorage.getItem('filter-price-min');\r\n      const storedPriceMax = localStorage.getItem('filter-price-max');\r\n      if (storedPriceMin && !isNaN(parseInt(storedPriceMin)) && storedPriceMax && !isNaN(parseInt(storedPriceMax))) {\r\n        setPriceRange([parseInt(storedPriceMin), parseInt(storedPriceMax)]);\r\n      }\r\n      const storedAmenities = localStorage.getItem('filter-amenities');\r\n      if (storedAmenities) {\r\n        try {\r\n          const arr = JSON.parse(storedAmenities);\r\n          if (Array.isArray(arr)) setSelectedAmenities(arr);\r\n        } catch {}\r\n      }\r\n      const rawSaved = localStorage.getItem('saved-searches');\r\n      if (rawSaved) {\r\n        try {\r\n          const arr = JSON.parse(rawSaved);\r\n          if (Array.isArray(arr)) setSavedSearches(arr);\r\n        } catch {}\r\n      }\r\n      const rawFavorites = localStorage.getItem('favorites');\r\n      if (rawFavorites) {\r\n        try {\r\n          const arr = JSON.parse(rawFavorites);\r\n          if (Array.isArray(arr)) setFavorites(arr);\r\n        } catch {}\r\n      }\r\n      const storedRoomType = localStorage.getItem('filter-room-type');\r\n      if (storedRoomType) setRoomType(storedRoomType);\r\n      const storedLease = localStorage.getItem('filter-lease-duration');\r\n      if (storedLease) setLeaseDuration(storedLease);\r\n      const storedPets = localStorage.getItem('filter-pet-friendly');\r\n      if (storedPets === 'true') setPetFriendly(true);\r\n      const storedGender = localStorage.getItem('filter-gender-preference');\r\n      if (storedGender) setGenderPreference(storedGender);\r\n    } catch (e) {\r\n      // ignore storage errors\r\n    }\r\n    // eslint-disable-next-line react-hooks/exhaustive-deps\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const t = setTimeout(() => setInitialLoad(false), 600);\r\n    return () => clearTimeout(t);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => setIsDesktop(window.innerWidth >= 1024);\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  // Persist changes\r\n  useEffect(() => {\r\n    try { localStorage.setItem('filter-payment', paymentFilter); } catch {}\r\n  }, [paymentFilter]);\r\n  useEffect(() => {\r\n    try {\r\n      localStorage.setItem('filter-price-min', String(priceRange[0]));\r\n      localStorage.setItem('filter-price-max', String(priceRange[1]));\r\n    } catch {}\r\n  }, [priceRange]);\r\n  useEffect(() => {\r\n    try { localStorage.setItem('filter-amenities', JSON.stringify(selectedAmenities)); } catch {}\r\n  }, [selectedAmenities]);\r\n  useEffect(() => {\r\n    try { localStorage.setItem('filter-room-type', roomType); } catch {}\r\n  }, [roomType]);\r\n  useEffect(() => {\r\n    try { localStorage.setItem('filter-lease-duration', leaseDuration); } catch {}\r\n  }, [leaseDuration]);\r\n  useEffect(() => {\r\n    try { localStorage.setItem('filter-pet-friendly', String(petFriendly)); } catch {}\r\n  }, [petFriendly]);\r\n  useEffect(() => {\r\n    try { localStorage.setItem('filter-gender-preference', genderPreference); } catch {}\r\n  }, [genderPreference]);\r\n\r\n  // Check for new listings and price drops\r\n  useEffect(() => {\r\n    if (!listings || listings.length === 0) return;\r\n    \r\n    // Check new listings against saved searches\r\n    const searches = getSavedSearches();\r\n    if (searches.length > 0) {\r\n      const newListingNotifs = checkNewListings(listings, searches);\r\n      newListingNotifs.forEach(n => addNotification(n));\r\n    }\r\n    \r\n    // Check price drops on favorites\r\n    if (favorites.length > 0) {\r\n      const priceDropNotifs = checkPriceDrops(listings, favorites);\r\n      priceDropNotifs.forEach(n => addNotification(n));\r\n    }\r\n  }, [listings, favorites]);\r\n\r\n  // Debounced provider-aware suggestions with caching\r\n  useEffect(() => {\r\n    const raw = (searchLocation || '').trim();\r\n    if (raw.length < 3) {\r\n      setLocationSuggestions([]);\r\n      setLocationLoading(false);\r\n      return;\r\n    }\r\n\r\n    const key = (process.env.REACT_APP_GEOCODER_API_KEY || '').trim();\r\n    const provider = (process.env.REACT_APP_GEOCODER_PROVIDER || '').toLowerCase();\r\n    const qLower = raw.toLowerCase();\r\n    const cached = suggestionCacheRef.current[qLower];\r\n    if (cached && (Date.now() - cached.ts) < SUGGESTION_TTL_MS) {\r\n      setLocationSuggestions(cached.data);\r\n      return; // serve cache, skip network\r\n    }\r\n\r\n    const controller = new AbortController();\r\n    setLocationLoading(true);\r\n    const t = setTimeout(async () => {\r\n      try {\r\n        let suggestions = [];\r\n        if (provider === 'mapbox' && key) {\r\n          const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(raw)}.json?access_token=${key}&limit=5&country=ZA&language=en&types=place,locality,neighborhood`;\r\n          const resp = await fetch(url, { signal: controller.signal });\r\n          const data = await resp.json();\r\n          if (data && Array.isArray(data.features)) {\r\n            suggestions = data.features.map(f => f.place_name).filter(Boolean);\r\n          }\r\n        } else {\r\n          const url = `https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(raw + ', South Africa')}&limit=5`;\r\n          const resp = await fetch(url, { signal: controller.signal, headers: { 'Accept-Language': 'en' } });\r\n          const data = await resp.json();\r\n          const uniq = [];\r\n          data.forEach(item => {\r\n            const display = item.display_name || '';\r\n            const parts = display.split(',').map(p => p.trim());\r\n            const area = parts.slice(0, 2).join(', ');\r\n            if (area && !uniq.includes(area)) uniq.push(area);\r\n          });\r\n          suggestions = uniq.slice(0, 5);\r\n        }\r\n        suggestionCacheRef.current[qLower] = { data: suggestions, ts: Date.now() };\r\n        setLocationSuggestions(suggestions);\r\n      } catch (e) {\r\n        setLocationSuggestions([]);\r\n      } finally {\r\n        setLocationLoading(false);\r\n      }\r\n    }, 450);\r\n    return () => { clearTimeout(t); controller.abort(); };\r\n  }, [searchLocation, SUGGESTION_TTL_MS]);\r\n\r\n  // Sidebar navigation items (desktop only)\r\n  const desktopNavItems = [\r\n    { id: 'browse', label: 'Browse', icon: Search },\r\n    { id: 'add', label: 'List Room', icon: PlusCircle, show: currentUser && currentUser.type === 'landlord' && !previewMode },\r\n    { id: 'my-listings', label: 'My Rooms', icon: Home, show: currentUser && currentUser.type === 'landlord' && !previewMode },\r\n    { id: 'profile', label: 'Profile', icon: User }\r\n  ];\r\n\r\n  const amenityOptions = ['WiFi', 'Parking', 'Kitchen', 'Laundry', 'Air Conditioning', 'Heating', 'Furnished'];\r\n\r\n  const toggleAmenity = (amenity) => {\r\n    if (selectedAmenities.includes(amenity)) {\r\n      setSelectedAmenities(selectedAmenities.filter(a => a !== amenity));\r\n    } else {\r\n      setSelectedAmenities([...selectedAmenities, amenity]);\r\n    }\r\n  };\r\n\r\n  const clearChip = (type, value) => {\r\n    if (type === 'location') setSearchLocation('');\r\n    if (type === 'priceMin') setPriceRange([0, priceRange[1]]);\r\n    if (type === 'priceMax') setPriceRange([priceRange[0], 10000]);\r\n    if (type === 'amenity') setSelectedAmenities(selectedAmenities.filter(a => a !== value));\r\n    if (type === 'sort') setSortBy('newest');\r\n    if (type === 'roomType') setRoomType('');\r\n    if (type === 'lease') setLeaseDuration('');\r\n    if (type === 'pets') setPetFriendly(false);\r\n    if (type === 'gender') setGenderPreference('');\r\n  };\r\n\r\n  const renderFilterChips = () => {\r\n    const chips = [];\r\n    if (searchLocation) chips.push({ type: 'location', label: searchLocation });\r\n    if (priceRange[0] > 0) chips.push({ type: 'priceMin', label: `Min R${priceRange[0]}` });\r\n    if (priceRange[1] < 10000) chips.push({ type: 'priceMax', label: `Max R${priceRange[1]}` });\r\n    selectedAmenities.forEach(a => chips.push({ type: 'amenity', label: a, value: a }));\r\n    if (sortBy !== 'newest') chips.push({ type: 'sort', label: `Sort: ${sortBy}` });\r\n    if (paymentFilter) chips.push({ type: 'payment', label: `Pay: ${paymentFilter}` });\r\n    if (roomType) chips.push({ type: 'roomType', label: `${roomType.charAt(0).toUpperCase() + roomType.slice(1)} room` });\r\n    if (leaseDuration) chips.push({ type: 'lease', label: `${leaseDuration} months` });\r\n    if (petFriendly) chips.push({ type: 'pets', label: 'ðŸ¾ Pet friendly' });\r\n    if (genderPreference) chips.push({ type: 'gender', label: `${genderPreference.charAt(0).toUpperCase() + genderPreference.slice(1)} only` });\r\n    if (chips.length === 0) return null;\r\n    return (\r\n      <div className=\"filter-chip-bar\" aria-label=\"Active filters\">\r\n        {chips.map((chip, idx) => (\r\n          <button\r\n            key={idx}\r\n            onClick={() => clearChip(chip.type, chip.value)}\r\n            className=\"filter-chip\"\r\n            aria-label={`Remove ${chip.label} filter`}\r\n          >\r\n            <span>{chip.label}</span>\r\n            <span aria-hidden=\"true\">âœ•</span>\r\n          </button>\r\n        ))}\r\n        <button\r\n          onClick={() => {\r\n            setSearchLocation('');\r\n            setPriceRange([0, 10000]);\r\n            setSelectedAmenities([]);\r\n            setSortBy('newest');\r\n            setPaymentFilter('');\r\n            setRoomType('');\r\n            setLeaseDuration('');\r\n            setPetFriendly(false);\r\n            setGenderPreference('');\r\n            setLocationSuggestions([]);\r\n            try { localStorage.removeItem('filter-payment'); } catch {}\r\n            try { localStorage.removeItem('filter-price-min'); localStorage.removeItem('filter-price-max'); } catch {}\r\n            try { localStorage.removeItem('filter-amenities'); } catch {}\r\n            try { localStorage.removeItem('filter-room-type'); } catch {}\r\n            try { localStorage.removeItem('filter-lease-duration'); } catch {}\r\n            try { localStorage.removeItem('filter-pet-friendly'); } catch {}\r\n            try { localStorage.removeItem('filter-gender-preference'); } catch {}\r\n          }}\r\n          className=\"filter-chip bg-red-50 text-red-700 hover:bg-red-100\"\r\n        >Clear All</button>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const saveCurrentSearch = () => {\r\n    const criteria = {\r\n      location: searchLocation || '',\r\n      priceMin: priceRange[0],\r\n      priceMax: priceRange[1],\r\n      priceRange: [...priceRange],\r\n      amenities: [...selectedAmenities],\r\n    };\r\n    const saved = saveSearchToEngine(criteria);\r\n    if (saved) {\r\n      // Also update local state for UI\r\n      setSavedSearches(getSavedSearches());\r\n      alert('Search saved! You\\'ll be notified of new listings matching this criteria.');\r\n    }\r\n  };\r\n\r\n  const loadSearch = (s) => {\r\n    setSearchLocation(s.location);\r\n    setPriceRange(s.priceRange);\r\n    setSelectedAmenities(s.amenities);\r\n    setPaymentFilter(s.payment);\r\n    setSortBy(s.sort || 'newest');\r\n  };\r\n\r\n  const renderFiltersBox = () => (\r\n    <div className=\"filters-box\" aria-label=\"Filters panel\">\r\n      <div className=\"flex items-center gap-2 mb-2\">\r\n        <MapPin className=\"w-4 h-4 text-gray-400\" />\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Search location...\"\r\n          value={searchLocation}\r\n          onChange={(e) => setSearchLocation(e.target.value)}\r\n          className=\"flex-1 px-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-teal-600 focus:border-transparent\"\r\n          aria-label=\"Location search\"\r\n        />\r\n        {locationLoading && (\r\n          <span className=\"text-xs text-teal-600 animate-pulse\" aria-live=\"polite\">Loading...</span>\r\n        )}\r\n      </div>\r\n      <div className=\"flex flex-col gap-3\">\r\n        <div className=\"flex flex-col gap-1\">\r\n          <label className=\"text-xs font-semibold text-gray-600\">Price Range</label>\r\n          <div className=\"flex items-center gap-2 text-xs bg-gray-50 px-2 py-1 rounded border border-gray-200\">\r\n            <span>R{priceRange[0].toLocaleString()} - R{priceRange[1].toLocaleString()}</span>\r\n            <select\r\n              value={priceRange[0]}\r\n              onChange={(e) => setPriceRange([parseInt(e.target.value), priceRange[1]])}\r\n              className=\"bg-transparent border-l border-gray-300 pl-2 focus:outline-none\"\r\n              aria-label=\"Minimum price\"\r\n            >\r\n              <option value=\"0\">Min</option>\r\n              <option value=\"500\">R500</option>\r\n              <option value=\"1000\">R1000</option>\r\n              <option value=\"1500\">R1500</option>\r\n            </select>\r\n            <select\r\n              value={priceRange[1]}\r\n              onChange={(e) => setPriceRange([priceRange[0], parseInt(e.target.value)])}\r\n              className=\"bg-transparent border-l border-gray-300 pl-2 focus:outline-none\"\r\n              aria-label=\"Maximum price\"\r\n            >\r\n              <option value=\"10000\">R10,000</option>\r\n              <option value=\"5000\">R5,000</option>\r\n              <option value=\"3000\">R3,000</option>\r\n              <option value=\"2000\">R2,000</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex flex-col gap-1\">\r\n          <label className=\"text-xs font-semibold text-gray-600\">Sort</label>\r\n          <select\r\n            value={sortBy}\r\n            onChange={(e) => setSortBy(e.target.value)}\r\n            className=\"text-sm bg-white border border-gray-300 px-2 py-1 rounded focus:ring-2 focus:ring-teal-600\"\r\n            aria-label=\"Sort order\"\r\n          >\r\n            <option value=\"newest\">Newest</option>\r\n            <option value=\"cheapest\">Cheapest</option>\r\n            <option value=\"expensive\">Most Expensive</option>\r\n          </select>\r\n        </div>\r\n        <div className=\"flex flex-col gap-1\">\r\n          <label className=\"text-xs font-semibold text-gray-600\">Payment Method</label>\r\n          <select\r\n            value={paymentFilter}\r\n            onChange={(e) => setPaymentFilter(e.target.value)}\r\n            className=\"text-sm bg-white border border-gray-300 px-2 py-1 rounded focus:ring-2 focus:ring-teal-600\"\r\n            aria-label=\"Payment method\"\r\n          >\r\n            <option value=\"\">Any</option>\r\n            <option value=\"Bank and Cash\">Bank and Cash</option>\r\n            <option value=\"Cash Only\">Cash Only</option>\r\n            <option value=\"Bank Only\">Bank Only</option>\r\n          </select>\r\n        </div>\r\n            <div className=\"flex flex-col gap-1\">\r\n              <label className=\"text-xs font-semibold text-gray-600\">Saved Searches</label>\r\n              <div className=\"flex flex-wrap gap-1\">\r\n                {savedSearches.length === 0 && (\r\n                  <span className=\"text-[11px] text-gray-500\">None saved</span>\r\n                )}\r\n                {savedSearches.map(s => (\r\n                  <button\r\n                    key={s.id}\r\n                    type=\"button\"\r\n                    onClick={() => loadSearch(s)}\r\n                    className=\"px-2 py-1 rounded-md text-[11px] font-medium bg-purple-50 text-purple-700 border border-purple-200 hover:bg-purple-100\"\r\n                  >{s.location || 'Any'} â€¢ {s.priceRange[0]}-{s.priceRange[1]}</button>\r\n                ))}\r\n              </div>\r\n              <button\r\n                type=\"button\"\r\n                onClick={saveCurrentSearch}\r\n                className=\"mt-1 text-xs text-purple-700 hover:text-purple-800 font-medium underline\"\r\n              >Save Current Search</button>\r\n            </div>\r\n        <div>\r\n          <label className=\"text-xs font-semibold text-gray-600 mb-1 block\">Amenities</label>\r\n          <div className=\"flex flex-wrap gap-1\">\r\n            {amenityOptions.map(a => (\r\n              <button\r\n                key={a}\r\n                type=\"button\"\r\n                onClick={() => toggleAmenity(a)}\r\n                className={`px-2 py-1 rounded-md text-[11px] font-medium border transition ${selectedAmenities.includes(a) ? 'bg-teal-600 text-white border-teal-600 shadow-sm' : 'bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200'}`}\r\n                aria-pressed={selectedAmenities.includes(a)}\r\n              >{a}</button>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <button\r\n          onClick={() => setShowAdvancedFilters(!showAdvancedFilters)}\r\n          className=\"mt-2 text-xs text-teal-700 hover:text-teal-800 font-semibold px-2 py-1 rounded hover:bg-teal-50 transition\"\r\n          aria-expanded={showAdvancedFilters}\r\n        >{showAdvancedFilters ? 'Close Advanced' : 'More Filters'}</button>\r\n        {showAdvancedFilters && (\r\n          <div className=\"mt-2 p-2 bg-gray-50 border border-gray-200 rounded\" aria-label=\"Advanced filters\"><p className=\"text-xs text-gray-600\">(Advanced filters placeholder)</p></div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n\r\n  // Desktop layout\r\n  if (isDesktop) {\r\n    return (\r\n      <div className=\"bg-gradient-to-b from-slate-50 to-gray-100 min-h-screen pb-4\" aria-labelledby=\"results-heading\">\r\n        <div className=\"layout-desktop\">\r\n          <aside className=\"sidebar-nav\" role=\"navigation\" aria-label=\"Desktop navigation and filters\">\r\n            <div>\r\n              <h2 className=\"text-xl font-bold flex items-center gap-2 mb-4\"><span className=\"bg-gradient-to-r from-teal-600 to-cyan-600 bg-clip-text text-transparent\">Room</span><span className=\"text-amber-500\">24</span></h2>\r\n              <div className=\"sidebar-section-title mb-2\">Navigation</div>\r\n              <div className=\"sidebar-menu\">\r\n                {desktopNavItems.filter(i => i.show === undefined || i.show).map(item => {\r\n                  const Icon = item.icon;\r\n                  const isActive = item.id === 'browse';\r\n                  return (\r\n                    <button\r\n                      key={item.id}\r\n                      onClick={() => setCurrentView(item.id)}\r\n                      className={isActive ? 'active' : ''}\r\n                      aria-label={item.label}\r\n                    >\r\n                      <Icon className=\"w-4 h-4\" /> {item.label}\r\n                    </button>\r\n                  );\r\n                })}\r\n              </div>\r\n            </div>\r\n            <div>\r\n              <div className=\"sidebar-section-title mb-2\">Filters</div>\r\n              {renderFiltersBox()}\r\n            </div>\r\n            {/* Sidebar Ad */}\r\n            <SidebarAd />\r\n            {!currentUser && (\r\n              <div className=\"mt-auto pt-4 border-t border-gray-200\">\r\n                <p className=\"text-xs text-gray-500 mb-2\">Join to list rooms.</p>\r\n                <div className=\"flex gap-2\">\r\n                  <button onClick={() => onRequireAuth && onRequireAuth('renter')} className=\"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 text-xs py-2 rounded\">Sign In</button>\r\n                  <button onClick={() => onRequireAuth && onRequireAuth('landlord')} className=\"flex-1 bg-red-500 hover:bg-red-600 text-white text-xs py-2 rounded\">List Room</button>\r\n                </div>\r\n              </div>\r\n            )}\r\n          </aside>\r\n          <main className=\"desktop-split\" role=\"main\">\r\n            <div className=\"list-pane\">\r\n              <div className=\"flex items-center justify-between mb-3\">\r\n                <h2 id=\"results-heading\" className=\"text-lg font-semibold text-gray-800\">{listings.length === 0 ? 'No rooms' : `${listings.length} rooms`}</h2>\r\n              </div>\r\n              {renderFilterChips()}\r\n              {initialLoad ? (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6\" aria-label=\"Loading listings\">\r\n                  {Array.from({ length: 8 }).map((_, i) => <ListingSkeletonCard key={i} />)}\r\n                </div>\r\n              ) : (\r\n                (paymentFilter ? listings.filter(l => l.paymentMethod === paymentFilter) : listings).length === 0 ? (\r\n                  <div className=\"bg-white border border-gray-200 rounded-2xl p-12 text-center shadow-sm\">\r\n                    <div className=\"w-20 h-20 bg-gradient-to-br from-gray-100 to-gray-50 rounded-full flex items-center justify-center mx-auto mb-6\">\r\n                      <Search className=\"w-10 h-10 text-gray-300\" />\r\n                    </div>\r\n                    <h3 className=\"text-xl font-bold text-gray-800 mb-2\">No rooms found</h3>\r\n                    <p className=\"text-gray-500 text-sm mb-6 max-w-md mx-auto\">\r\n                      We couldn't find any rooms matching your filters. Try adjusting your search or explore popular areas.\r\n                    </p>\r\n                    <div className=\"flex flex-wrap justify-center gap-2 mb-6\">\r\n                      <span className=\"text-xs text-gray-500\">Try:</span>\r\n                      {['Sandton', 'Soweto', 'Pretoria', 'Cape Town'].map(area => (\r\n                        <button\r\n                          key={area}\r\n                          onClick={() => setSearchLocation(area)}\r\n                          className=\"text-xs px-3 py-1.5 rounded-full bg-teal-50 text-teal-700 hover:bg-teal-100 border border-teal-200 transition-all\"\r\n                        >\r\n                          {area}\r\n                        </button>\r\n                      ))}\r\n                    </div>\r\n                    <button\r\n                      onClick={() => {\r\n                        setSearchLocation('');\r\n                        setPriceRange([0, 10000]);\r\n                        setSelectedAmenities([]);\r\n                        setPaymentFilter('');\r\n                      }}\r\n                      className=\"text-sm text-teal-600 hover:text-teal-700 font-semibold\"\r\n                    >\r\n                      Clear all filters\r\n                    </button>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6\">\r\n                    {(paymentFilter ? listings.filter(l => l.paymentMethod === paymentFilter) : listings).map((listing, idx) => (\r\n                      <React.Fragment key={listing.id}>\r\n                        <ListingCard listing={listing} onClick={() => onSelectListing(listing)} />\r\n                        {(idx + 1) % 6 === 0 && idx !== listings.length - 1 && (\r\n                          <div className=\"md:col-span-2 xl:col-span-3 2xl:col-span-4\">\r\n                            <InFeedAd />\r\n                          </div>\r\n                        )}\r\n                      </React.Fragment>\r\n                    ))}\r\n                  </div>\r\n                )\r\n              )}\r\n            </div>\r\n          </main>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Mobile / tablet layout\r\n  return (\r\n    <div className=\"bg-gradient-to-b from-slate-50 to-gray-100 min-h-screen pb-24\" role=\"main\" aria-labelledby=\"results-heading\">\r\n      {/* Welcome Hero Section */}\r\n      {showWelcomeHero && !currentUser && listings.length > 0 && (\r\n        <div className=\"bg-gradient-to-r from-teal-600 via-cyan-600 to-teal-700 text-white relative overflow-hidden\">\r\n          <div className=\"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iMC4xIj48cGF0aCBkPSJNMzYgMzRoLTJ2LTRoMnYtMmgtMnYtMmgydi0ySDI0djJoMnYyaC0ydjJoMnY0aC0ydjJoMTJ2LTJ6Ii8+PC9nPjwvZz48L3N2Zz4=')] opacity-30\" />\r\n          <div className=\"max-w-7xl mx-auto px-4 py-8 relative\">\r\n            <button \r\n              onClick={dismissHero}\r\n              className=\"absolute top-2 right-2 p-2 text-white/70 hover:text-white hover:bg-white/10 rounded-full transition-colors\"\r\n              aria-label=\"Dismiss welcome message\"\r\n            >\r\n              <span className=\"text-xl\">Ã—</span>\r\n            </button>\r\n            <div className=\"flex items-center gap-2 mb-3\">\r\n              <Sparkles className=\"w-5 h-5 text-amber-300\" />\r\n              <span className=\"text-sm font-medium text-teal-100\">Find your perfect room in South Africa</span>\r\n            </div>\r\n            <h1 className=\"text-2xl md:text-3xl font-bold mb-3\">\r\n              Welcome to Room<span className=\"text-amber-300\">24</span>\r\n            </h1>\r\n            <p className=\"text-teal-100 mb-6 max-w-lg\">\r\n              Discover affordable rooms for rent across South Africa. Connect directly with verified landlords - no middleman fees.\r\n            </p>\r\n            <div className=\"flex flex-wrap gap-4 mb-4\">\r\n              <div className=\"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-3 py-2 rounded-lg\">\r\n                <Building2 className=\"w-4 h-4 text-amber-300\" />\r\n                <span className=\"text-sm\">{listings.length}+ Rooms</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-3 py-2 rounded-lg\">\r\n                <Shield className=\"w-4 h-4 text-amber-300\" />\r\n                <span className=\"text-sm\">Verified Listings</span>\r\n              </div>\r\n              <div className=\"flex items-center gap-2 bg-white/10 backdrop-blur-sm px-3 py-2 rounded-lg\">\r\n                <Zap className=\"w-4 h-4 text-amber-300\" />\r\n                <span className=\"text-sm\">Instant Contact</span>\r\n              </div>\r\n            </div>\r\n            <button\r\n              onClick={() => onRequireAuth && onRequireAuth('renter')}\r\n              className=\"inline-flex items-center gap-2 bg-white text-teal-700 font-semibold px-5 py-2.5 rounded-xl hover:bg-teal-50 transition-colors shadow-lg\"\r\n            >\r\n              Get Started\r\n              <ArrowRight className=\"w-4 h-4\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      <div className=\"bg-white/80 backdrop-blur-sm border-b border-gray-100 shadow-sm\">\r\n        <div className=\"max-w-7xl mx-auto px-4 py-6\">\r\n          <div className=\"mb-4 space-y-3\">\r\n            <div className=\"relative\">\r\n              <MapPin className=\"absolute left-3 top-3.5 w-5 h-5 text-gray-400\" />\r\n              <input\r\n                type=\"text\"\r\n                placeholder=\"Search by location, suburb, or area...\"\r\n                value={searchLocation}\r\n                onChange={(e) => setSearchLocation(e.target.value)}\r\n                onBlur={() => { if (searchLocation) addRecentSearch(searchLocation); }}\r\n                className=\"w-full pl-10 pr-12 py-3 border border-gray-300 rounded-xl text-gray-700 focus:ring-2 focus:ring-teal-500 focus:border-teal-500 shadow-sm transition-all duration-200 hover:border-gray-400\"\r\n                aria-label=\"Location search\"\r\n              />\r\n              {locationLoading && (\r\n                <div className=\"absolute right-3 top-3 flex items-center gap-1 text-teal-600\" aria-live=\"polite\">\r\n                  <div className=\"w-4 h-4 border-2 border-teal-500 border-t-transparent rounded-full animate-spin\" />\r\n                </div>\r\n              )}\r\n              {!locationLoading && searchLocation && (\r\n                <button \r\n                  onClick={() => { setSearchLocation(''); setLocationSuggestions([]); }}\r\n                  className=\"absolute right-3 top-3 p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full transition-colors\"\r\n                  aria-label=\"Clear search\"\r\n                >\r\n                  <span className=\"text-lg\">Ã—</span>\r\n                </button>\r\n              )}\r\n              {/* Location suggestions dropdown */}\r\n              {locationSuggestions.length > 0 && (\r\n                <div className=\"absolute left-0 right-0 top-full mt-2 bg-white border border-gray-200 rounded-xl shadow-lg z-20 overflow-hidden animate-fadeIn\">\r\n                  <div className=\"text-xs text-gray-500 px-3 py-2 bg-gray-50 border-b border-gray-100 font-medium\">ðŸ“ Suggestions</div>\r\n                  {locationSuggestions.map((s, i) => (\r\n                    <button\r\n                      key={s}\r\n                      type=\"button\"\r\n                      onClick={() => { setSearchLocation(s); setLocationSuggestions([]); addRecentSearch(s); }}\r\n                      className={`w-full text-left px-4 py-2.5 text-sm hover:bg-teal-50 flex items-center gap-2 transition-colors ${i > 0 ? 'border-t border-gray-50' : ''}`}\r\n                    >\r\n                      <MapPin className=\"w-3.5 h-3.5 text-teal-500 flex-shrink-0\" />\r\n                      <span className=\"text-gray-700\">{s}</span>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              )}\r\n              {/* Recent searches dropdown - show when input focused and no suggestions */}\r\n              {!searchLocation && recentSearches.length > 0 && locationSuggestions.length === 0 && (\r\n                <div className=\"absolute left-0 right-0 top-full mt-2 bg-white border border-gray-200 rounded-xl shadow-lg z-20 overflow-hidden\">\r\n                  <div className=\"text-xs text-gray-500 px-3 py-2 bg-gray-50 border-b border-gray-100 font-medium flex items-center gap-1\">\r\n                    <Clock className=\"w-3 h-3\" /> Recent Searches\r\n                  </div>\r\n                  {recentSearches.map((s, i) => (\r\n                    <button\r\n                      key={`recent-${i}`}\r\n                      type=\"button\"\r\n                      onClick={() => { setSearchLocation(s); }}\r\n                      className={`w-full text-left px-4 py-2.5 text-sm hover:bg-teal-50 flex items-center gap-2 transition-colors ${i > 0 ? 'border-t border-gray-50' : ''}`}\r\n                    >\r\n                      <Clock className=\"w-3.5 h-3.5 text-gray-400 flex-shrink-0\" />\r\n                      <span className=\"text-gray-700\">{s}</span>\r\n                    </button>\r\n                  ))}\r\n                </div>\r\n              )}\r\n            </div>\r\n            <div className=\"flex flex-wrap items-center gap-2\">\r\n              <button className=\"bg-gradient-to-r from-teal-500 to-teal-600 hover:from-teal-600 hover:to-teal-700 text-white px-5 py-2.5 rounded-xl transition-all duration-200 font-semibold shadow-md hover:shadow-lg text-sm flex items-center gap-2 active:scale-95\" onClick={() => { if (searchLocation) addRecentSearch(searchLocation); }} aria-label=\"Search submit\">\r\n              <Search className=\"w-4 h-4\" />\r\n              Search\r\n            </button>\r\n              <button\r\n                onClick={() => {\r\n                  if (!searchLocation || searchLocation.trim() === '') {\r\n                    alert('Enter a location to subscribe.');\r\n                    return;\r\n                  }\r\n                  if (!currentUser) {\r\n                    onRequireAuth && onRequireAuth('renter');\r\n                    return;\r\n                  }\r\n                  subscribeToArea && subscribeToArea(currentUser.id, searchLocation.trim());\r\n                }}\r\n                className=\"bg-white border border-gray-200 text-gray-700 px-3 py-2 rounded-lg hover:bg-gray-50 transition text-sm\"\r\n              >Subscribe</button>\r\n              <button\r\n                type=\"button\"\r\n                onClick={saveCurrentSearch}\r\n                className=\"bg-purple-600 hover:bg-purple-700 text-white px-3 py-2 rounded-lg text-sm font-semibold shadow-sm\"\r\n              >Save Search</button>\r\n            </div>\r\n            \r\n            {/* Popular Areas Quick Select */}\r\n            <div className=\"flex flex-wrap gap-2 items-center\">\r\n              <span className=\"text-xs text-gray-500 font-medium\">Popular:</span>\r\n              {['Sandton', 'Soweto', 'Pretoria', 'Cape Town', 'Durban', 'Johannesburg'].map(area => (\r\n                <button\r\n                  key={area}\r\n                  onClick={() => { setSearchLocation(area); addRecentSearch(area); }}\r\n                  className={`text-xs px-3 py-1.5 rounded-full transition-all duration-200 ${\r\n                    searchLocation.toLowerCase() === area.toLowerCase()\r\n                      ? 'bg-teal-600 text-white shadow-md'\r\n                      : 'bg-gray-100 text-gray-600 hover:bg-teal-50 hover:text-teal-700 border border-gray-200'\r\n                  }`}\r\n                >\r\n                  {area}\r\n                </button>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Quick Filter Chips */}\r\n            <div className=\"flex flex-wrap gap-2 items-center pt-2 border-t border-gray-100\">\r\n              <span className=\"text-xs text-gray-500 font-medium\">Quick filters:</span>\r\n              <button\r\n                onClick={() => setPriceRange([0, 3000])}\r\n                className={`text-xs px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-1 ${\r\n                  priceRange[1] === 3000 && priceRange[0] === 0\r\n                    ? 'bg-emerald-600 text-white shadow-md'\r\n                    : 'bg-emerald-50 text-emerald-700 hover:bg-emerald-100 border border-emerald-200'\r\n                }`}\r\n              >\r\n                ðŸ’° Under R3,000\r\n              </button>\r\n              <button\r\n                onClick={() => setPetFriendly(!petFriendly)}\r\n                className={`text-xs px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-1 ${\r\n                  petFriendly\r\n                    ? 'bg-amber-500 text-white shadow-md'\r\n                    : 'bg-amber-50 text-amber-700 hover:bg-amber-100 border border-amber-200'\r\n                }`}\r\n              >\r\n                ðŸ¾ Pet Friendly\r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  // Visual indicator for available now - just scroll to see results\r\n                  window.scrollTo({ top: 400, behavior: 'smooth' });\r\n                }}\r\n                className=\"text-xs px-3 py-1.5 rounded-full bg-blue-50 text-blue-700 hover:bg-blue-100 border border-blue-200 transition-all duration-200 flex items-center gap-1\"\r\n              >\r\n                ðŸ  Available Now\r\n              </button>\r\n              <button\r\n                onClick={() => toggleAmenity('WiFi')}\r\n                className={`text-xs px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-1 ${\r\n                  selectedAmenities.includes('WiFi')\r\n                    ? 'bg-violet-600 text-white shadow-md'\r\n                    : 'bg-violet-50 text-violet-700 hover:bg-violet-100 border border-violet-200'\r\n                }`}\r\n              >\r\n                ðŸ“¶ WiFi\r\n              </button>\r\n              <button\r\n                onClick={() => toggleAmenity('Parking')}\r\n                className={`text-xs px-3 py-1.5 rounded-full transition-all duration-200 flex items-center gap-1 ${\r\n                  selectedAmenities.includes('Parking')\r\n                    ? 'bg-slate-600 text-white shadow-md'\r\n                    : 'bg-slate-50 text-slate-700 hover:bg-slate-100 border border-slate-200'\r\n                }`}\r\n              >\r\n                ðŸš— Parking\r\n              </button>\r\n            </div>\r\n\r\n            {savedSearches.length > 0 && (\r\n              <div className=\"flex flex-wrap gap-1 mb-2\" aria-label=\"Saved searches\">\r\n                {savedSearches.map(s => (\r\n                  <button\r\n                    key={s.id}\r\n                    type=\"button\"\r\n                    onClick={() => loadSearch(s)}\r\n                    className=\"text-[11px] px-2 py-1 rounded bg-purple-50 text-purple-700 border border-purple-200\"\r\n                  >{s.location || 'Any'} â€¢ {s.priceRange[0]}-{s.priceRange[1]}</button>\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div className=\"flex gap-2 mb-3 flex-wrap items-center\">\r\n            <div className=\"flex items-center gap-2 bg-gray-50 px-3 py-2 rounded-lg border border-gray-200\">\r\n              <span className=\"text-sm text-gray-600 font-medium\">R{priceRange[0].toLocaleString()} - R{priceRange[1].toLocaleString()}</span>\r\n              <select\r\n                value={priceRange[0]}\r\n                onChange={(e) => setPriceRange([parseInt(e.target.value), priceRange[1]])}\r\n                className=\"text-xs bg-transparent border-l border-gray-300 pl-2 text-gray-600 focus:outline-none\"\r\n                aria-label=\"Minimum price\"\r\n              >\r\n                <option value=\"0\">Min</option>\r\n                <option value=\"500\">R500</option>\r\n                <option value=\"1000\">R1000</option>\r\n                <option value=\"1500\">R1500</option>\r\n              </select>\r\n              <select\r\n                value={priceRange[1]}\r\n                onChange={(e) => setPriceRange([priceRange[0], parseInt(e.target.value)])}\r\n                className=\"text-xs bg-transparent border-l border-gray-300 pl-2 text-gray-600 focus:outline-none\"\r\n                aria-label=\"Maximum price\"\r\n              >\r\n                <option value=\"10000\">R10k</option>\r\n                <option value=\"5000\">R5k</option>\r\n                <option value=\"3000\">R3k</option>\r\n                <option value=\"2000\">R2k</option>\r\n              </select>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-sm text-gray-600\">Sort:</span>\r\n              <select\r\n                value={sortBy}\r\n                onChange={(e) => setSortBy(e.target.value)}\r\n                className=\"text-sm bg-gray-50 border border-gray-200 px-3 py-2 rounded-lg text-gray-700 focus:ring-2 focus:ring-teal-600\"\r\n                aria-label=\"Sort order\"\r\n              >\r\n                <option value=\"newest\">Newest</option>\r\n                <option value=\"cheapest\">Cheapest</option>\r\n                <option value=\"expensive\">Most Expensive</option>\r\n              </select>\r\n            </div>\r\n            <div className=\"flex items-center gap-2\">\r\n              <span className=\"text-sm text-gray-600\">Payment:</span>\r\n              <select\r\n                value={paymentFilter}\r\n                onChange={(e) => setPaymentFilter(e.target.value)}\r\n                className=\"text-sm bg-gray-50 border border-gray-200 px-3 py-2 rounded-lg text-gray-700 focus:ring-2 focus:ring-teal-600\"\r\n                aria-label=\"Payment method filter\"\r\n              >\r\n                <option value=\"\">Any</option>\r\n                <option value=\"Bank and Cash\">Bank & Cash</option>\r\n                <option value=\"Cash Only\">Cash Only</option>\r\n                <option value=\"Bank Only\">Bank Only</option>\r\n              </select>\r\n            </div>\r\n            <button\r\n              onClick={() => setShowAdvancedFilters(!showAdvancedFilters)}\r\n              className=\"text-sm text-teal-700 hover:text-teal-800 font-medium px-3 py-2 rounded-lg hover:bg-teal-50 transition\"\r\n              aria-expanded={showAdvancedFilters}\r\n            >{showAdvancedFilters ? 'âœ• Filters' : 'âš™ï¸ Filters'}</button>\r\n          </div>\r\n          {showAdvancedFilters && (\r\n            <div className=\"mt-3 p-4 bg-gray-50 rounded-lg border border-gray-200 space-y-4\">\r\n              {/* Room Type */}\r\n              <div>\r\n                <label className=\"text-xs font-semibold text-gray-700 mb-2 block\">Room Type</label>\r\n                <div className=\"flex gap-2\">\r\n                  {['Private', 'Shared'].map(type => (\r\n                    <button\r\n                      key={type}\r\n                      onClick={() => setRoomType(roomType === type.toLowerCase() ? '' : type.toLowerCase())}\r\n                      className={`px-3 py-1.5 rounded-md text-sm font-medium border transition ${ \r\n                        roomType === type.toLowerCase()\r\n                          ? 'bg-teal-600 text-white border-teal-600 shadow-sm'\r\n                          : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'\r\n                      }`}\r\n                    >{type}</button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Lease Duration */}\r\n              <div>\r\n                <label className=\"text-xs font-semibold text-gray-700 mb-2 block\">Lease Duration (months)</label>\r\n                <div className=\"flex gap-2 flex-wrap\">\r\n                  {[\r\n                    { label: '1-3', value: '1-3' },\r\n                    { label: '4-6', value: '4-6' },\r\n                    { label: '7-12', value: '7-12' },\r\n                    { label: '12+', value: '12+' }\r\n                  ].map(opt => (\r\n                    <button\r\n                      key={opt.value}\r\n                      onClick={() => setLeaseDuration(leaseDuration === opt.value ? '' : opt.value)}\r\n                      className={`px-3 py-1.5 rounded-md text-sm font-medium border transition ${\r\n                        leaseDuration === opt.value\r\n                          ? 'bg-teal-600 text-white border-teal-600 shadow-sm'\r\n                          : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'\r\n                      }`}\r\n                    >{opt.label}</button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Pet Friendly */}\r\n              <div>\r\n                <label className=\"flex items-center gap-2 cursor-pointer\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    checked={petFriendly}\r\n                    onChange={(e) => setPetFriendly(e.target.checked)}\r\n                    className=\"w-4 h-4 text-teal-600 border-gray-300 rounded focus:ring-teal-500\"\r\n                  />\r\n                  <span className=\"text-sm font-medium text-gray-700\">ðŸ¾ Pet Friendly</span>\r\n                </label>\r\n              </div>\r\n\r\n              {/* Gender Preference */}\r\n              <div>\r\n                <label className=\"text-xs font-semibold text-gray-700 mb-2 block\">Gender Preference</label>\r\n                <div className=\"flex gap-2\">\r\n                  {[\r\n                    { label: 'Male', value: 'male' },\r\n                    { label: 'Female', value: 'female' },\r\n                    { label: 'Any', value: 'any' }\r\n                  ].map(opt => (\r\n                    <button\r\n                      key={opt.value}\r\n                      onClick={() => setGenderPreference(genderPreference === opt.value ? '' : opt.value)}\r\n                      className={`px-3 py-1.5 rounded-md text-sm font-medium border transition ${\r\n                        genderPreference === opt.value\r\n                          ? 'bg-teal-600 text-white border-teal-600 shadow-sm'\r\n                          : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'\r\n                      }`}\r\n                    >{opt.label}</button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n\r\n              {/* Amenities */}\r\n              <div>\r\n                <label className=\"text-xs font-semibold text-gray-700 mb-2 block\">Amenities</label>\r\n                <div className=\"flex flex-wrap gap-1\" aria-label=\"Amenities\">\r\n                  {amenityOptions.map(a => (\r\n                    <button\r\n                      key={a}\r\n                      type=\"button\"\r\n                      onClick={() => toggleAmenity(a)}\r\n                      className={`px-2 py-1 rounded-md text-[11px] font-medium border transition ${selectedAmenities.includes(a) ? 'bg-teal-600 text-white border-teal-600 shadow-sm' : 'bg-gray-100 text-gray-700 border-gray-300 hover:bg-gray-200'}`}\r\n                      aria-pressed={selectedAmenities.includes(a)}\r\n                    >{a}</button>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n          {renderFilterChips()}\r\n        </div>\r\n      </div>\r\n      {/* Mobile Banner Ad */}\r\n      <div className=\"max-w-7xl mx-auto px-4 pt-3\">\r\n        <InFeedAd />\r\n      </div>\r\n      <div className=\"max-w-7xl mx-auto px-4\">\r\n        <div className=\"flex justify-between items-center mt-4 mb-4\">\r\n          <h2 id=\"results-heading\" className=\"text-2xl font-bold text-gray-800\">\r\n            {listings.length === 0 ? (\r\n              'No rooms available'\r\n            ) : (\r\n              <span className=\"flex items-center gap-2\">\r\n                <span className=\"bg-gradient-to-r from-teal-500 to-cyan-500 text-white text-lg font-bold px-3 py-1 rounded-lg shadow-sm\">{listings.length}</span>\r\n                <span>Rooms Available</span>\r\n              </span>\r\n            )}\r\n          </h2>\r\n        </div>\r\n        {initialLoad ? (\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-12 justify-items-center\" aria-label=\"Loading listings\">\r\n            {Array.from({ length: 8 }).map((_, i) => <ListingSkeletonCard key={i} />)}\r\n          </div>\r\n        ) : (\r\n          (paymentFilter ? listings.filter(l => l.paymentMethod === paymentFilter) : listings).length === 0 ? (\r\n            <div className=\"bg-gradient-to-br from-gray-50 to-blue-50 rounded-xl border-2 border-dashed border-gray-300 p-16 text-center\">\r\n              <div className=\"bg-white w-24 h-24 rounded-full flex items-center justify-center mx-auto mb-6 shadow-lg\">\r\n                <Search className=\"w-12 h-12 text-gray-400\" />\r\n              </div>\r\n              <h3 className=\"text-2xl font-bold text-gray-800 mb-3\">No Rooms Found</h3>\r\n              <p className=\"text-gray-600 mb-2\">We couldn't find any rooms matching your criteria</p>\r\n              <p className=\"text-gray-500 text-sm mb-8 max-w-md mx-auto\">\r\n                Try adjusting your filters, expanding your search area, or checking back later for new listings\r\n              </p>\r\n              <div className=\"flex flex-col sm:flex-row gap-3 justify-center items-center\">\r\n                <button\r\n                  onClick={() => {\r\n                    setSearchLocation('');\r\n                    setPriceRange([0, 10000]);\r\n                    setSelectedAmenities([]);\r\n                    setSortBy('newest');\r\n                    setRoomType('');\r\n                    setLeaseDuration('');\r\n                    setPetFriendly(false);\r\n                    setGenderPreference('');\r\n                    setPaymentFilter('');\r\n                  }}\r\n                  className=\"inline-flex items-center gap-2 bg-teal-600 hover:bg-teal-700 text-white font-medium px-6 py-2.5 rounded-lg transition shadow-sm\"\r\n                >\r\n                  Clear All Filters\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <>\r\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mb-12 justify-items-center\">\r\n                {(paymentFilter ? listings.filter(l => l.paymentMethod === paymentFilter) : listings).map((listing, idx) => (\r\n                  <React.Fragment key={listing.id}>\r\n                    <ListingCard\r\n                      listing={listing}\r\n                      onClick={() => onSelectListing(listing)}\r\n                      isFavorite={favorites.includes(listing.id)}\r\n                      onToggleFavorite={toggleFavorite}\r\n                    />\r\n                    {(idx + 1) % 8 === 0 && idx !== listings.length - 1 && (\r\n                      <div className=\"sm:col-span-2 lg:col-span-3 xl:col-span-4\">\r\n                        <InFeedAd />\r\n                      </div>\r\n                    )}\r\n                  </React.Fragment>\r\n                ))}\r\n              </div>\r\n              \r\n              {/* How It Works Section - show for non-logged in users */}\r\n              {!currentUser && (\r\n                <div className=\"bg-white rounded-2xl shadow-sm border border-gray-100 p-6 md:p-8 mb-8\">\r\n                  <div className=\"text-center mb-8\">\r\n                    <h3 className=\"text-2xl font-bold text-gray-900 mb-2\">How Room24 Works</h3>\r\n                    <p className=\"text-gray-600\">Find your perfect room in 3 simple steps</p>\r\n                  </div>\r\n                  <div className=\"grid md:grid-cols-3 gap-6\">\r\n                    <div className=\"text-center p-4\">\r\n                      <div className=\"w-16 h-16 bg-gradient-to-br from-teal-100 to-cyan-100 rounded-2xl flex items-center justify-center mx-auto mb-4\">\r\n                        <Search className=\"w-8 h-8 text-teal-600\" />\r\n                      </div>\r\n                      <div className=\"bg-teal-500 text-white text-xs font-bold w-6 h-6 rounded-full flex items-center justify-center mx-auto -mt-8 mb-2 relative z-10 shadow-md\">1</div>\r\n                      <h4 className=\"font-semibold text-gray-900 mb-2\">Search & Filter</h4>\r\n                      <p className=\"text-sm text-gray-600\">Browse rooms by location, price, and amenities. Use filters to find exactly what you need.</p>\r\n                    </div>\r\n                    <div className=\"text-center p-4\">\r\n                      <div className=\"w-16 h-16 bg-gradient-to-br from-cyan-100 to-blue-100 rounded-2xl flex items-center justify-center mx-auto mb-4\">\r\n                        <Home className=\"w-8 h-8 text-cyan-600\" />\r\n                      </div>\r\n                      <div className=\"bg-cyan-500 text-white text-xs font-bold w-6 h-6 rounded-full flex items-center justify-center mx-auto -mt-8 mb-2 relative z-10 shadow-md\">2</div>\r\n                      <h4 className=\"font-semibold text-gray-900 mb-2\">View Details</h4>\r\n                      <p className=\"text-sm text-gray-600\">Check photos, virtual tours, reviews, and landlord verification status.</p>\r\n                    </div>\r\n                    <div className=\"text-center p-4\">\r\n                      <div className=\"w-16 h-16 bg-gradient-to-br from-blue-100 to-indigo-100 rounded-2xl flex items-center justify-center mx-auto mb-4\">\r\n                        <User className=\"w-8 h-8 text-blue-600\" />\r\n                      </div>\r\n                      <div className=\"bg-blue-500 text-white text-xs font-bold w-6 h-6 rounded-full flex items-center justify-center mx-auto -mt-8 mb-2 relative z-10 shadow-md\">3</div>\r\n                      <h4 className=\"font-semibold text-gray-900 mb-2\">Contact Landlord</h4>\r\n                      <p className=\"text-sm text-gray-600\">Connect directly via phone, email, or WhatsApp. No middleman fees.</p>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"text-center mt-6 pt-6 border-t border-gray-100\">\r\n                    <button\r\n                      onClick={() => onRequireAuth && onRequireAuth('renter')}\r\n                      className=\"inline-flex items-center gap-2 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white font-semibold px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all\"\r\n                    >\r\n                      Create Free Account\r\n                      <ArrowRight className=\"w-4 h-4\" />\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </>\r\n          )\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}