{"ast":null,"code":"// Firebase client initialization for Room24\n// Replace placeholder environment variables with real Firebase project config.\n// Ensure you have added a web app in Firebase console and enabled Cloud Messaging.\n\nimport { initializeApp } from 'firebase/app';\nimport { getMessaging, getToken, onMessage } from 'firebase/messaging';\nimport { getAnalytics, logEvent } from 'firebase/analytics';\nimport { getFirestore, collection, doc, getDocs, addDoc, updateDoc, deleteDoc, query, where, orderBy, onSnapshot, serverTimestamp } from 'firebase/firestore';\nconst firebaseConfig = {\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\n  measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENT_ID\n};\nlet messagingInstance;\nlet analyticsInstance;\nlet firestoreInstance;\nlet firebaseApp;\nexport function initFirebase() {\n  firebaseApp = initializeApp(firebaseConfig);\n  try {\n    messagingInstance = getMessaging(firebaseApp);\n  } catch (e) {\n    console.warn('Messaging not available', e);\n  }\n  // Initialize Firestore\n  try {\n    firestoreInstance = getFirestore(firebaseApp);\n    console.log('Firestore initialized');\n  } catch (e) {\n    console.warn('Firestore not available', e);\n  }\n  return firebaseApp;\n}\n\n// Get Firestore instance\nexport function getDb() {\n  if (!firestoreInstance && firebaseApp) {\n    firestoreInstance = getFirestore(firebaseApp);\n  }\n  return firestoreInstance;\n}\n\n// ===========================\n// LISTINGS FIRESTORE FUNCTIONS\n// ===========================\n\n// Fetch all listings from Firestore\nexport async function fetchListings() {\n  const db = getDb();\n  if (!db) {\n    console.warn('Firestore not initialized, using localStorage');\n    return null; // Fall back to localStorage\n  }\n  try {\n    const listingsRef = collection(db, 'listings');\n    const q = query(listingsRef, orderBy('createdAt', 'desc'));\n    const snapshot = await getDocs(q);\n    const listings = snapshot.docs.map(doc => {\n      var _doc$data$createdAt, _doc$data$createdAt$t, _doc$data$createdAt$t2, _doc$data$availableDa, _doc$data$availableDa2, _doc$data$availableDa3;\n      return {\n        id: doc.id,\n        ...doc.data(),\n        // Convert Firestore timestamps to ISO strings\n        createdAt: ((_doc$data$createdAt = doc.data().createdAt) === null || _doc$data$createdAt === void 0 ? void 0 : (_doc$data$createdAt$t = _doc$data$createdAt.toDate) === null || _doc$data$createdAt$t === void 0 ? void 0 : (_doc$data$createdAt$t2 = _doc$data$createdAt$t.call(_doc$data$createdAt)) === null || _doc$data$createdAt$t2 === void 0 ? void 0 : _doc$data$createdAt$t2.toISOString()) || doc.data().createdAt,\n        availableDate: ((_doc$data$availableDa = doc.data().availableDate) === null || _doc$data$availableDa === void 0 ? void 0 : (_doc$data$availableDa2 = _doc$data$availableDa.toDate) === null || _doc$data$availableDa2 === void 0 ? void 0 : (_doc$data$availableDa3 = _doc$data$availableDa2.call(_doc$data$availableDa)) === null || _doc$data$availableDa3 === void 0 ? void 0 : _doc$data$availableDa3.toISOString()) || doc.data().availableDate\n      };\n    });\n    console.log(`Fetched ${listings.length} listings from Firestore`);\n    return listings;\n  } catch (error) {\n    console.error('Error fetching listings from Firestore:', error);\n    return null; // Fall back to localStorage\n  }\n}\n\n// Add a new listing to Firestore\nexport async function addListing(listingData) {\n  const db = getDb();\n  if (!db) {\n    console.warn('Firestore not initialized');\n    return null;\n  }\n  try {\n    const listingsRef = collection(db, 'listings');\n    const docRef = await addDoc(listingsRef, {\n      ...listingData,\n      createdAt: serverTimestamp(),\n      status: 'available'\n    });\n    console.log('Listing added with ID:', docRef.id);\n    return docRef.id;\n  } catch (error) {\n    console.error('Error adding listing to Firestore:', error);\n    throw error;\n  }\n}\n\n// Update an existing listing\nexport async function updateListing(listingId, updates) {\n  const db = getDb();\n  if (!db) {\n    console.warn('Firestore not initialized');\n    return false;\n  }\n  try {\n    const listingRef = doc(db, 'listings', listingId);\n    await updateDoc(listingRef, {\n      ...updates,\n      updatedAt: serverTimestamp()\n    });\n    console.log('Listing updated:', listingId);\n    return true;\n  } catch (error) {\n    console.error('Error updating listing in Firestore:', error);\n    throw error;\n  }\n}\n\n// Delete a listing\nexport async function deleteListing(listingId) {\n  const db = getDb();\n  if (!db) {\n    console.warn('Firestore not initialized');\n    return false;\n  }\n  try {\n    const listingRef = doc(db, 'listings', listingId);\n    await deleteDoc(listingRef);\n    console.log('Listing deleted:', listingId);\n    return true;\n  } catch (error) {\n    console.error('Error deleting listing from Firestore:', error);\n    throw error;\n  }\n}\n\n// Get listings by landlord ID\nexport async function fetchListingsByLandlord(landlordId) {\n  const db = getDb();\n  if (!db) return null;\n  try {\n    const listingsRef = collection(db, 'listings');\n    const q = query(listingsRef, where('landlordId', '==', landlordId));\n    const snapshot = await getDocs(q);\n    return snapshot.docs.map(doc => {\n      var _doc$data$createdAt2, _doc$data$createdAt2$, _doc$data$createdAt2$2, _doc$data$availableDa4, _doc$data$availableDa5, _doc$data$availableDa6;\n      return {\n        id: doc.id,\n        ...doc.data(),\n        createdAt: ((_doc$data$createdAt2 = doc.data().createdAt) === null || _doc$data$createdAt2 === void 0 ? void 0 : (_doc$data$createdAt2$ = _doc$data$createdAt2.toDate) === null || _doc$data$createdAt2$ === void 0 ? void 0 : (_doc$data$createdAt2$2 = _doc$data$createdAt2$.call(_doc$data$createdAt2)) === null || _doc$data$createdAt2$2 === void 0 ? void 0 : _doc$data$createdAt2$2.toISOString()) || doc.data().createdAt,\n        availableDate: ((_doc$data$availableDa4 = doc.data().availableDate) === null || _doc$data$availableDa4 === void 0 ? void 0 : (_doc$data$availableDa5 = _doc$data$availableDa4.toDate) === null || _doc$data$availableDa5 === void 0 ? void 0 : (_doc$data$availableDa6 = _doc$data$availableDa5.call(_doc$data$availableDa4)) === null || _doc$data$availableDa6 === void 0 ? void 0 : _doc$data$availableDa6.toISOString()) || doc.data().availableDate\n      };\n    });\n  } catch (error) {\n    console.error('Error fetching landlord listings:', error);\n    return null;\n  }\n}\n\n// Subscribe to real-time listing updates\nexport function subscribeToListings(callback) {\n  const db = getDb();\n  if (!db) {\n    console.warn('Firestore not initialized for real-time updates');\n    return null;\n  }\n  try {\n    const listingsRef = collection(db, 'listings');\n    const q = query(listingsRef, orderBy('createdAt', 'desc'));\n    const unsubscribe = onSnapshot(q, snapshot => {\n      const listings = snapshot.docs.map(doc => {\n        var _doc$data$createdAt3, _doc$data$createdAt3$, _doc$data$createdAt3$2, _doc$data$availableDa7, _doc$data$availableDa8, _doc$data$availableDa9;\n        return {\n          id: doc.id,\n          ...doc.data(),\n          createdAt: ((_doc$data$createdAt3 = doc.data().createdAt) === null || _doc$data$createdAt3 === void 0 ? void 0 : (_doc$data$createdAt3$ = _doc$data$createdAt3.toDate) === null || _doc$data$createdAt3$ === void 0 ? void 0 : (_doc$data$createdAt3$2 = _doc$data$createdAt3$.call(_doc$data$createdAt3)) === null || _doc$data$createdAt3$2 === void 0 ? void 0 : _doc$data$createdAt3$2.toISOString()) || doc.data().createdAt,\n          availableDate: ((_doc$data$availableDa7 = doc.data().availableDate) === null || _doc$data$availableDa7 === void 0 ? void 0 : (_doc$data$availableDa8 = _doc$data$availableDa7.toDate) === null || _doc$data$availableDa8 === void 0 ? void 0 : (_doc$data$availableDa9 = _doc$data$availableDa8.call(_doc$data$availableDa7)) === null || _doc$data$availableDa9 === void 0 ? void 0 : _doc$data$availableDa9.toISOString()) || doc.data().availableDate\n        };\n      });\n      console.log(`Real-time update: ${listings.length} listings`);\n      callback(listings);\n    }, error => {\n      console.error('Real-time listener error:', error);\n    });\n    return unsubscribe;\n  } catch (error) {\n    console.error('Error setting up real-time listener:', error);\n    return null;\n  }\n}\n\n// Check if Firestore is available and configured\nexport function isFirestoreEnabled() {\n  return !!process.env.REACT_APP_FIREBASE_PROJECT_ID && !!getDb();\n}\nexport function initAnalytics(app) {\n  if (process.env.REACT_APP_ENABLE_ANALYTICS !== 'true') return;\n  const consent = localStorage.getItem('analytics-consent');\n  if (consent !== 'yes') return;\n  try {\n    analyticsInstance = getAnalytics(app);\n    console.log('Analytics initialized');\n  } catch (e) {\n    console.warn('Analytics not available', e);\n  }\n}\nexport function trackEvent(eventName, params = {}) {\n  if (!analyticsInstance) return;\n  try {\n    logEvent(analyticsInstance, eventName, params);\n  } catch (e) {\n    console.warn('Event tracking failed', e);\n  }\n}\n\n// Request notification permission and fetch token\nexport async function requestFcmToken() {\n  if (!messagingInstance) return null;\n  const permission = await Notification.requestPermission();\n  if (permission !== 'granted') {\n    console.log('Notification permission denied');\n    return null;\n  }\n  try {\n    const vapidKey = process.env.REACT_APP_FIREBASE_VAPID_KEY; // Public VAPID key\n    const currentToken = await getToken(messagingInstance, {\n      vapidKey\n    });\n    if (currentToken) {\n      console.log('FCM token:', currentToken);\n      // Persist token to backend if configured\n      try {\n        const backend = process.env.REACT_APP_BACKEND_URL;\n        if (backend) {\n          await fetch(`${backend.replace(/\\/$/, '')}/api/push/register`, {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n              token: currentToken\n            })\n          });\n        }\n      } catch (e) {\n        console.warn('Token persistence failed', e);\n      }\n      return currentToken;\n    } else {\n      console.log('No registration token available.');\n      return null;\n    }\n  } catch (err) {\n    console.error('An error occurred while retrieving token.', err);\n    return null;\n  }\n}\nexport function listenForegroundMessages(callback) {\n  if (!messagingInstance) return;\n  onMessage(messagingInstance, payload => {\n    console.log('Foreground message received', payload);\n    if (callback) callback(payload);\n  });\n}","map":{"version":3,"names":["initializeApp","getMessaging","getToken","onMessage","getAnalytics","logEvent","getFirestore","collection","doc","getDocs","addDoc","updateDoc","deleteDoc","query","where","orderBy","onSnapshot","serverTimestamp","firebaseConfig","apiKey","process","env","REACT_APP_FIREBASE_API_KEY","authDomain","REACT_APP_FIREBASE_AUTH_DOMAIN","projectId","REACT_APP_FIREBASE_PROJECT_ID","storageBucket","REACT_APP_FIREBASE_STORAGE_BUCKET","messagingSenderId","REACT_APP_FIREBASE_MESSAGING_SENDER_ID","appId","REACT_APP_FIREBASE_APP_ID","measurementId","REACT_APP_FIREBASE_MEASUREMENT_ID","messagingInstance","analyticsInstance","firestoreInstance","firebaseApp","initFirebase","e","console","warn","log","getDb","fetchListings","db","listingsRef","q","snapshot","listings","docs","map","_doc$data$createdAt","_doc$data$createdAt$t","_doc$data$createdAt$t2","_doc$data$availableDa","_doc$data$availableDa2","_doc$data$availableDa3","id","data","createdAt","toDate","call","toISOString","availableDate","length","error","addListing","listingData","docRef","status","updateListing","listingId","updates","listingRef","updatedAt","deleteListing","fetchListingsByLandlord","landlordId","_doc$data$createdAt2","_doc$data$createdAt2$","_doc$data$createdAt2$2","_doc$data$availableDa4","_doc$data$availableDa5","_doc$data$availableDa6","subscribeToListings","callback","unsubscribe","_doc$data$createdAt3","_doc$data$createdAt3$","_doc$data$createdAt3$2","_doc$data$availableDa7","_doc$data$availableDa8","_doc$data$availableDa9","isFirestoreEnabled","initAnalytics","app","REACT_APP_ENABLE_ANALYTICS","consent","localStorage","getItem","trackEvent","eventName","params","requestFcmToken","permission","Notification","requestPermission","vapidKey","REACT_APP_FIREBASE_VAPID_KEY","currentToken","backend","REACT_APP_BACKEND_URL","fetch","replace","method","headers","body","JSON","stringify","token","err","listenForegroundMessages","payload"],"sources":["C:/Users/kutum/Documents/room-rental-platform/src/firebase.js"],"sourcesContent":["// Firebase client initialization for Room24\r\n// Replace placeholder environment variables with real Firebase project config.\r\n// Ensure you have added a web app in Firebase console and enabled Cloud Messaging.\r\n\r\nimport { initializeApp } from 'firebase/app';\r\nimport { getMessaging, getToken, onMessage } from 'firebase/messaging';\r\nimport { getAnalytics, logEvent } from 'firebase/analytics';\r\nimport { \r\n  getFirestore, \r\n  collection, \r\n  doc, \r\n  getDocs, \r\n  addDoc, \r\n  updateDoc, \r\n  deleteDoc, \r\n  query, \r\n  where, \r\n  orderBy,\r\n  onSnapshot,\r\n  serverTimestamp \r\n} from 'firebase/firestore';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\r\n  measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENT_ID,\r\n};\r\n\r\nlet messagingInstance;\r\nlet analyticsInstance;\r\nlet firestoreInstance;\r\nlet firebaseApp;\r\n\r\nexport function initFirebase() {\r\n  firebaseApp = initializeApp(firebaseConfig);\r\n  try {\r\n    messagingInstance = getMessaging(firebaseApp);\r\n  } catch (e) {\r\n    console.warn('Messaging not available', e);\r\n  }\r\n  // Initialize Firestore\r\n  try {\r\n    firestoreInstance = getFirestore(firebaseApp);\r\n    console.log('Firestore initialized');\r\n  } catch (e) {\r\n    console.warn('Firestore not available', e);\r\n  }\r\n  return firebaseApp;\r\n}\r\n\r\n// Get Firestore instance\r\nexport function getDb() {\r\n  if (!firestoreInstance && firebaseApp) {\r\n    firestoreInstance = getFirestore(firebaseApp);\r\n  }\r\n  return firestoreInstance;\r\n}\r\n\r\n// ===========================\r\n// LISTINGS FIRESTORE FUNCTIONS\r\n// ===========================\r\n\r\n// Fetch all listings from Firestore\r\nexport async function fetchListings() {\r\n  const db = getDb();\r\n  if (!db) {\r\n    console.warn('Firestore not initialized, using localStorage');\r\n    return null; // Fall back to localStorage\r\n  }\r\n  try {\r\n    const listingsRef = collection(db, 'listings');\r\n    const q = query(listingsRef, orderBy('createdAt', 'desc'));\r\n    const snapshot = await getDocs(q);\r\n    const listings = snapshot.docs.map(doc => ({\r\n      id: doc.id,\r\n      ...doc.data(),\r\n      // Convert Firestore timestamps to ISO strings\r\n      createdAt: doc.data().createdAt?.toDate?.()?.toISOString() || doc.data().createdAt,\r\n      availableDate: doc.data().availableDate?.toDate?.()?.toISOString() || doc.data().availableDate,\r\n    }));\r\n    console.log(`Fetched ${listings.length} listings from Firestore`);\r\n    return listings;\r\n  } catch (error) {\r\n    console.error('Error fetching listings from Firestore:', error);\r\n    return null; // Fall back to localStorage\r\n  }\r\n}\r\n\r\n// Add a new listing to Firestore\r\nexport async function addListing(listingData) {\r\n  const db = getDb();\r\n  if (!db) {\r\n    console.warn('Firestore not initialized');\r\n    return null;\r\n  }\r\n  try {\r\n    const listingsRef = collection(db, 'listings');\r\n    const docRef = await addDoc(listingsRef, {\r\n      ...listingData,\r\n      createdAt: serverTimestamp(),\r\n      status: 'available',\r\n    });\r\n    console.log('Listing added with ID:', docRef.id);\r\n    return docRef.id;\r\n  } catch (error) {\r\n    console.error('Error adding listing to Firestore:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Update an existing listing\r\nexport async function updateListing(listingId, updates) {\r\n  const db = getDb();\r\n  if (!db) {\r\n    console.warn('Firestore not initialized');\r\n    return false;\r\n  }\r\n  try {\r\n    const listingRef = doc(db, 'listings', listingId);\r\n    await updateDoc(listingRef, {\r\n      ...updates,\r\n      updatedAt: serverTimestamp(),\r\n    });\r\n    console.log('Listing updated:', listingId);\r\n    return true;\r\n  } catch (error) {\r\n    console.error('Error updating listing in Firestore:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Delete a listing\r\nexport async function deleteListing(listingId) {\r\n  const db = getDb();\r\n  if (!db) {\r\n    console.warn('Firestore not initialized');\r\n    return false;\r\n  }\r\n  try {\r\n    const listingRef = doc(db, 'listings', listingId);\r\n    await deleteDoc(listingRef);\r\n    console.log('Listing deleted:', listingId);\r\n    return true;\r\n  } catch (error) {\r\n    console.error('Error deleting listing from Firestore:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Get listings by landlord ID\r\nexport async function fetchListingsByLandlord(landlordId) {\r\n  const db = getDb();\r\n  if (!db) return null;\r\n  try {\r\n    const listingsRef = collection(db, 'listings');\r\n    const q = query(listingsRef, where('landlordId', '==', landlordId));\r\n    const snapshot = await getDocs(q);\r\n    return snapshot.docs.map(doc => ({\r\n      id: doc.id,\r\n      ...doc.data(),\r\n      createdAt: doc.data().createdAt?.toDate?.()?.toISOString() || doc.data().createdAt,\r\n      availableDate: doc.data().availableDate?.toDate?.()?.toISOString() || doc.data().availableDate,\r\n    }));\r\n  } catch (error) {\r\n    console.error('Error fetching landlord listings:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n// Subscribe to real-time listing updates\r\nexport function subscribeToListings(callback) {\r\n  const db = getDb();\r\n  if (!db) {\r\n    console.warn('Firestore not initialized for real-time updates');\r\n    return null;\r\n  }\r\n  try {\r\n    const listingsRef = collection(db, 'listings');\r\n    const q = query(listingsRef, orderBy('createdAt', 'desc'));\r\n    \r\n    const unsubscribe = onSnapshot(q, (snapshot) => {\r\n      const listings = snapshot.docs.map(doc => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n        createdAt: doc.data().createdAt?.toDate?.()?.toISOString() || doc.data().createdAt,\r\n        availableDate: doc.data().availableDate?.toDate?.()?.toISOString() || doc.data().availableDate,\r\n      }));\r\n      console.log(`Real-time update: ${listings.length} listings`);\r\n      callback(listings);\r\n    }, (error) => {\r\n      console.error('Real-time listener error:', error);\r\n    });\r\n    \r\n    return unsubscribe;\r\n  } catch (error) {\r\n    console.error('Error setting up real-time listener:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n// Check if Firestore is available and configured\r\nexport function isFirestoreEnabled() {\r\n  return !!process.env.REACT_APP_FIREBASE_PROJECT_ID && !!getDb();\r\n}\r\n\r\nexport function initAnalytics(app) {\r\n  if (process.env.REACT_APP_ENABLE_ANALYTICS !== 'true') return;\r\n  const consent = localStorage.getItem('analytics-consent');\r\n  if (consent !== 'yes') return;\r\n  try {\r\n    analyticsInstance = getAnalytics(app);\r\n    console.log('Analytics initialized');\r\n  } catch (e) {\r\n    console.warn('Analytics not available', e);\r\n  }\r\n}\r\n\r\nexport function trackEvent(eventName, params = {}) {\r\n  if (!analyticsInstance) return;\r\n  try {\r\n    logEvent(analyticsInstance, eventName, params);\r\n  } catch (e) {\r\n    console.warn('Event tracking failed', e);\r\n  }\r\n}\r\n\r\n// Request notification permission and fetch token\r\nexport async function requestFcmToken() {\r\n  if (!messagingInstance) return null;\r\n  const permission = await Notification.requestPermission();\r\n  if (permission !== 'granted') {\r\n    console.log('Notification permission denied');\r\n    return null;\r\n  }\r\n  try {\r\n    const vapidKey = process.env.REACT_APP_FIREBASE_VAPID_KEY; // Public VAPID key\r\n    const currentToken = await getToken(messagingInstance, { vapidKey });\r\n    if (currentToken) {\r\n      console.log('FCM token:', currentToken);\r\n      // Persist token to backend if configured\r\n      try {\r\n        const backend = process.env.REACT_APP_BACKEND_URL;\r\n        if (backend) {\r\n          await fetch(`${backend.replace(/\\/$/, '')}/api/push/register`, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ token: currentToken })\r\n          });\r\n        }\r\n      } catch (e) {\r\n        console.warn('Token persistence failed', e);\r\n      }\r\n      return currentToken;\r\n    } else {\r\n      console.log('No registration token available.');\r\n      return null;\r\n    }\r\n  } catch (err) {\r\n    console.error('An error occurred while retrieving token.', err);\r\n    return null;\r\n  }\r\n}\r\n\r\nexport function listenForegroundMessages(callback) {\r\n  if (!messagingInstance) return;\r\n  onMessage(messagingInstance, payload => {\r\n    console.log('Foreground message received', payload);\r\n    if (callback) callback(payload);\r\n  });\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}