{"ast":null,"code":"// Firebase client initialization for Room24\n// Replace placeholder environment variables with real Firebase project config.\n// Ensure you have added a web app in Firebase console and enabled Cloud Messaging.\nimport{initializeApp}from'firebase/app';import{getMessaging,getToken,onMessage}from'firebase/messaging';const firebaseConfig={apiKey:process.env.REACT_APP_FIREBASE_API_KEY,authDomain:process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,projectId:process.env.REACT_APP_FIREBASE_PROJECT_ID,storageBucket:process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,appId:process.env.REACT_APP_FIREBASE_APP_ID,measurementId:process.env.REACT_APP_FIREBASE_MEASUREMENT_ID};let messagingInstance;export function initFirebase(){const app=initializeApp(firebaseConfig);try{messagingInstance=getMessaging(app);}catch(e){console.warn('Messaging not available',e);}return app;}// Request notification permission and fetch token\nexport async function requestFcmToken(){if(!messagingInstance)return null;const permission=await Notification.requestPermission();if(permission!=='granted'){console.log('Notification permission denied');return null;}try{const vapidKey=process.env.REACT_APP_FIREBASE_VAPID_KEY;// Public VAPID key\nconst currentToken=await getToken(messagingInstance,{vapidKey});if(currentToken){console.log('FCM token:',currentToken);return currentToken;}else{console.log('No registration token available.');return null;}}catch(err){console.error('An error occurred while retrieving token.',err);return null;}}export function listenForegroundMessages(callback){if(!messagingInstance)return;onMessage(messagingInstance,payload=>{console.log('Foreground message received',payload);if(callback)callback(payload);});}","map":{"version":3,"names":["initializeApp","getMessaging","getToken","onMessage","firebaseConfig","apiKey","process","env","REACT_APP_FIREBASE_API_KEY","authDomain","REACT_APP_FIREBASE_AUTH_DOMAIN","projectId","REACT_APP_FIREBASE_PROJECT_ID","storageBucket","REACT_APP_FIREBASE_STORAGE_BUCKET","messagingSenderId","REACT_APP_FIREBASE_MESSAGING_SENDER_ID","appId","REACT_APP_FIREBASE_APP_ID","measurementId","REACT_APP_FIREBASE_MEASUREMENT_ID","messagingInstance","initFirebase","app","e","console","warn","requestFcmToken","permission","Notification","requestPermission","log","vapidKey","REACT_APP_FIREBASE_VAPID_KEY","currentToken","err","error","listenForegroundMessages","callback","payload"],"sources":["C:/Users/kutum/Documents/room-rental-platform/src/firebase.js"],"sourcesContent":["// Firebase client initialization for Room24\r\n// Replace placeholder environment variables with real Firebase project config.\r\n// Ensure you have added a web app in Firebase console and enabled Cloud Messaging.\r\n\r\nimport { initializeApp } from 'firebase/app';\r\nimport { getMessaging, getToken, onMessage } from 'firebase/messaging';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\r\n  measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENT_ID,\r\n};\r\n\r\nlet messagingInstance;\r\n\r\nexport function initFirebase() {\r\n  const app = initializeApp(firebaseConfig);\r\n  try {\r\n    messagingInstance = getMessaging(app);\r\n  } catch (e) {\r\n    console.warn('Messaging not available', e);\r\n  }\r\n  return app;\r\n}\r\n\r\n// Request notification permission and fetch token\r\nexport async function requestFcmToken() {\r\n  if (!messagingInstance) return null;\r\n  const permission = await Notification.requestPermission();\r\n  if (permission !== 'granted') {\r\n    console.log('Notification permission denied');\r\n    return null;\r\n  }\r\n  try {\r\n    const vapidKey = process.env.REACT_APP_FIREBASE_VAPID_KEY; // Public VAPID key\r\n    const currentToken = await getToken(messagingInstance, { vapidKey });\r\n    if (currentToken) {\r\n      console.log('FCM token:', currentToken);\r\n      return currentToken;\r\n    } else {\r\n      console.log('No registration token available.');\r\n      return null;\r\n    }\r\n  } catch (err) {\r\n    console.error('An error occurred while retrieving token.', err);\r\n    return null;\r\n  }\r\n}\r\n\r\nexport function listenForegroundMessages(callback) {\r\n  if (!messagingInstance) return;\r\n  onMessage(messagingInstance, payload => {\r\n    console.log('Foreground message received', payload);\r\n    if (callback) callback(payload);\r\n  });\r\n}\r\n"],"mappings":"AAAA;AACA;AACA;AAEA,OAASA,aAAa,KAAQ,cAAc,CAC5C,OAASC,YAAY,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,oBAAoB,CAEtE,KAAM,CAAAC,cAAc,CAAG,CACrBC,MAAM,CAAEC,OAAO,CAACC,GAAG,CAACC,0BAA0B,CAC9CC,UAAU,CAAEH,OAAO,CAACC,GAAG,CAACG,8BAA8B,CACtDC,SAAS,CAAEL,OAAO,CAACC,GAAG,CAACK,6BAA6B,CACpDC,aAAa,CAAEP,OAAO,CAACC,GAAG,CAACO,iCAAiC,CAC5DC,iBAAiB,CAAET,OAAO,CAACC,GAAG,CAACS,sCAAsC,CACrEC,KAAK,CAAEX,OAAO,CAACC,GAAG,CAACW,yBAAyB,CAC5CC,aAAa,CAAEb,OAAO,CAACC,GAAG,CAACa,iCAC7B,CAAC,CAED,GAAI,CAAAC,iBAAiB,CAErB,MAAO,SAAS,CAAAC,YAAYA,CAAA,CAAG,CAC7B,KAAM,CAAAC,GAAG,CAAGvB,aAAa,CAACI,cAAc,CAAC,CACzC,GAAI,CACFiB,iBAAiB,CAAGpB,YAAY,CAACsB,GAAG,CAAC,CACvC,CAAE,MAAOC,CAAC,CAAE,CACVC,OAAO,CAACC,IAAI,CAAC,yBAAyB,CAAEF,CAAC,CAAC,CAC5C,CACA,MAAO,CAAAD,GAAG,CACZ,CAEA;AACA,MAAO,eAAe,CAAAI,eAAeA,CAAA,CAAG,CACtC,GAAI,CAACN,iBAAiB,CAAE,MAAO,KAAI,CACnC,KAAM,CAAAO,UAAU,CAAG,KAAM,CAAAC,YAAY,CAACC,iBAAiB,CAAC,CAAC,CACzD,GAAIF,UAAU,GAAK,SAAS,CAAE,CAC5BH,OAAO,CAACM,GAAG,CAAC,gCAAgC,CAAC,CAC7C,MAAO,KAAI,CACb,CACA,GAAI,CACF,KAAM,CAAAC,QAAQ,CAAG1B,OAAO,CAACC,GAAG,CAAC0B,4BAA4B,CAAE;AAC3D,KAAM,CAAAC,YAAY,CAAG,KAAM,CAAAhC,QAAQ,CAACmB,iBAAiB,CAAE,CAAEW,QAAS,CAAC,CAAC,CACpE,GAAIE,YAAY,CAAE,CAChBT,OAAO,CAACM,GAAG,CAAC,YAAY,CAAEG,YAAY,CAAC,CACvC,MAAO,CAAAA,YAAY,CACrB,CAAC,IAAM,CACLT,OAAO,CAACM,GAAG,CAAC,kCAAkC,CAAC,CAC/C,MAAO,KAAI,CACb,CACF,CAAE,MAAOI,GAAG,CAAE,CACZV,OAAO,CAACW,KAAK,CAAC,2CAA2C,CAAED,GAAG,CAAC,CAC/D,MAAO,KAAI,CACb,CACF,CAEA,MAAO,SAAS,CAAAE,wBAAwBA,CAACC,QAAQ,CAAE,CACjD,GAAI,CAACjB,iBAAiB,CAAE,OACxBlB,SAAS,CAACkB,iBAAiB,CAAEkB,OAAO,EAAI,CACtCd,OAAO,CAACM,GAAG,CAAC,6BAA6B,CAAEQ,OAAO,CAAC,CACnD,GAAID,QAAQ,CAAEA,QAAQ,CAACC,OAAO,CAAC,CACjC,CAAC,CAAC,CACJ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}