{"ast":null,"code":"/*\r\n  Basic custom service worker for Room24 PWA.\r\n  - Precaches core shell assets produced by build\r\n  - Runtime cache strategy for images and map tiles (cache-first with network fallback)\r\n  NOTE: For advanced strategies use Workbox, but this keeps it simple.\r\n*/const VERSION='v1';const CORE_ASSETS=['/','/index.html'// Built asset files (hashed) will be requested and then cached automatically on first load\n];const MAP_TILE_HOST_PATTERNS=['tile.openstreetmap.org','tiles.stadiamaps.com'];self.addEventListener('install',event=>{event.waitUntil(caches.open(VERSION).then(cache=>cache.addAll(CORE_ASSETS)).then(()=>self.skipWaiting()));});self.addEventListener('activate',event=>{event.waitUntil(caches.keys().then(keys=>Promise.all(keys.filter(k=>k!==VERSION).map(k=>caches.delete(k)))).then(()=>self.clients.claim()));});self.addEventListener('fetch',event=>{const{request}=event;const url=new URL(request.url);// Only handle GET\nif(request.method!=='GET')return;// Runtime caching for images & map tiles\nconst isImage=request.destination==='image';const isMapTile=MAP_TILE_HOST_PATTERNS.some(host=>url.host.includes(host));if(isImage||isMapTile){event.respondWith(caches.open('images-runtime').then(cache=>cache.match(request).then(cached=>{if(cached)return cached;return fetch(request).then(response=>{if(response.status===200)cache.put(request,response.clone());return response;}).catch(()=>cached||Response.error());})));return;}// App shell fallback: try network, fallback to cache\nevent.respondWith(fetch(request).catch(()=>caches.match(request)));});","map":{"version":3,"names":["VERSION","CORE_ASSETS","MAP_TILE_HOST_PATTERNS","self","addEventListener","event","waitUntil","caches","open","then","cache","addAll","skipWaiting","keys","Promise","all","filter","k","map","delete","clients","claim","request","url","URL","method","isImage","destination","isMapTile","some","host","includes","respondWith","match","cached","fetch","response","status","put","clone","catch","Response","error"],"sources":["C:/Users/kutum/Documents/room-rental-platform/src/service-worker.js"],"sourcesContent":["/*\r\n  Basic custom service worker for Room24 PWA.\r\n  - Precaches core shell assets produced by build\r\n  - Runtime cache strategy for images and map tiles (cache-first with network fallback)\r\n  NOTE: For advanced strategies use Workbox, but this keeps it simple.\r\n*/\r\n\r\nconst VERSION = 'v1';\r\nconst CORE_ASSETS = [\r\n  '/',\r\n  '/index.html'\r\n  // Built asset files (hashed) will be requested and then cached automatically on first load\r\n];\r\n\r\nconst MAP_TILE_HOST_PATTERNS = [\r\n  'tile.openstreetmap.org',\r\n  'tiles.stadiamaps.com'\r\n];\r\n\r\nself.addEventListener('install', event => {\r\n  event.waitUntil(\r\n    caches.open(VERSION).then(cache => cache.addAll(CORE_ASSETS)).then(() => self.skipWaiting())\r\n  );\r\n});\r\n\r\nself.addEventListener('activate', event => {\r\n  event.waitUntil(\r\n    caches.keys().then(keys => Promise.all(\r\n      keys.filter(k => k !== VERSION).map(k => caches.delete(k))\r\n    )).then(() => self.clients.claim())\r\n  );\r\n});\r\n\r\nself.addEventListener('fetch', event => {\r\n  const { request } = event;\r\n  const url = new URL(request.url);\r\n\r\n  // Only handle GET\r\n  if (request.method !== 'GET') return;\r\n\r\n  // Runtime caching for images & map tiles\r\n  const isImage = request.destination === 'image';\r\n  const isMapTile = MAP_TILE_HOST_PATTERNS.some(host => url.host.includes(host));\r\n\r\n  if (isImage || isMapTile) {\r\n    event.respondWith(\r\n      caches.open('images-runtime').then(cache => \r\n        cache.match(request).then(cached => {\r\n          if (cached) return cached;\r\n          return fetch(request).then(response => {\r\n            if (response.status === 200) cache.put(request, response.clone());\r\n            return response;\r\n          }).catch(() => cached || Response.error());\r\n        })\r\n      )\r\n    );\r\n    return;\r\n  }\r\n\r\n  // App shell fallback: try network, fallback to cache\r\n  event.respondWith(\r\n    fetch(request).catch(() => caches.match(request))\r\n  );\r\n});\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA,EAEA,KAAM,CAAAA,OAAO,CAAG,IAAI,CACpB,KAAM,CAAAC,WAAW,CAAG,CAClB,GAAG,CACH,aACA;AAAA,CACD,CAED,KAAM,CAAAC,sBAAsB,CAAG,CAC7B,wBAAwB,CACxB,sBAAsB,CACvB,CAEDC,IAAI,CAACC,gBAAgB,CAAC,SAAS,CAAEC,KAAK,EAAI,CACxCA,KAAK,CAACC,SAAS,CACbC,MAAM,CAACC,IAAI,CAACR,OAAO,CAAC,CAACS,IAAI,CAACC,KAAK,EAAIA,KAAK,CAACC,MAAM,CAACV,WAAW,CAAC,CAAC,CAACQ,IAAI,CAAC,IAAMN,IAAI,CAACS,WAAW,CAAC,CAAC,CAC7F,CAAC,CACH,CAAC,CAAC,CAEFT,IAAI,CAACC,gBAAgB,CAAC,UAAU,CAAEC,KAAK,EAAI,CACzCA,KAAK,CAACC,SAAS,CACbC,MAAM,CAACM,IAAI,CAAC,CAAC,CAACJ,IAAI,CAACI,IAAI,EAAIC,OAAO,CAACC,GAAG,CACpCF,IAAI,CAACG,MAAM,CAACC,CAAC,EAAIA,CAAC,GAAKjB,OAAO,CAAC,CAACkB,GAAG,CAACD,CAAC,EAAIV,MAAM,CAACY,MAAM,CAACF,CAAC,CAAC,CAC3D,CAAC,CAAC,CAACR,IAAI,CAAC,IAAMN,IAAI,CAACiB,OAAO,CAACC,KAAK,CAAC,CAAC,CACpC,CAAC,CACH,CAAC,CAAC,CAEFlB,IAAI,CAACC,gBAAgB,CAAC,OAAO,CAAEC,KAAK,EAAI,CACtC,KAAM,CAAEiB,OAAQ,CAAC,CAAGjB,KAAK,CACzB,KAAM,CAAAkB,GAAG,CAAG,GAAI,CAAAC,GAAG,CAACF,OAAO,CAACC,GAAG,CAAC,CAEhC;AACA,GAAID,OAAO,CAACG,MAAM,GAAK,KAAK,CAAE,OAE9B;AACA,KAAM,CAAAC,OAAO,CAAGJ,OAAO,CAACK,WAAW,GAAK,OAAO,CAC/C,KAAM,CAAAC,SAAS,CAAG1B,sBAAsB,CAAC2B,IAAI,CAACC,IAAI,EAAIP,GAAG,CAACO,IAAI,CAACC,QAAQ,CAACD,IAAI,CAAC,CAAC,CAE9E,GAAIJ,OAAO,EAAIE,SAAS,CAAE,CACxBvB,KAAK,CAAC2B,WAAW,CACfzB,MAAM,CAACC,IAAI,CAAC,gBAAgB,CAAC,CAACC,IAAI,CAACC,KAAK,EACtCA,KAAK,CAACuB,KAAK,CAACX,OAAO,CAAC,CAACb,IAAI,CAACyB,MAAM,EAAI,CAClC,GAAIA,MAAM,CAAE,MAAO,CAAAA,MAAM,CACzB,MAAO,CAAAC,KAAK,CAACb,OAAO,CAAC,CAACb,IAAI,CAAC2B,QAAQ,EAAI,CACrC,GAAIA,QAAQ,CAACC,MAAM,GAAK,GAAG,CAAE3B,KAAK,CAAC4B,GAAG,CAAChB,OAAO,CAAEc,QAAQ,CAACG,KAAK,CAAC,CAAC,CAAC,CACjE,MAAO,CAAAH,QAAQ,CACjB,CAAC,CAAC,CAACI,KAAK,CAAC,IAAMN,MAAM,EAAIO,QAAQ,CAACC,KAAK,CAAC,CAAC,CAAC,CAC5C,CAAC,CACH,CACF,CAAC,CACD,OACF,CAEA;AACArC,KAAK,CAAC2B,WAAW,CACfG,KAAK,CAACb,OAAO,CAAC,CAACkB,KAAK,CAAC,IAAMjC,MAAM,CAAC0B,KAAK,CAACX,OAAO,CAAC,CAClD,CAAC,CACH,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}