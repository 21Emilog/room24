{"ast":null,"code":"import _objectSpread from \"C:/Users/kutum/Documents/room-rental-platform/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\n/* global document */\nimport * as React from 'react';\nimport { createPortal } from 'react-dom';\nimport { useImperativeHandle, useEffect, useMemo, useRef, useContext, forwardRef, memo } from 'react';\nimport { applyReactStyle } from \"../utils/apply-react-style.js\";\nimport { MapContext } from \"./map.js\";\nimport { arePointsEqual } from \"../utils/deep-equal.js\";\nimport { compareClassNames } from \"../utils/compare-class-names.js\";\n/* eslint-disable complexity,max-statements */\nexport const Marker = memo(forwardRef((props, ref) => {\n  const {\n    map,\n    mapLib\n  } = useContext(MapContext);\n  const thisRef = useRef({\n    props\n  });\n  const marker = useMemo(() => {\n    let hasChildren = false;\n    React.Children.forEach(props.children, el => {\n      if (el) {\n        hasChildren = true;\n      }\n    });\n    const options = _objectSpread(_objectSpread({}, props), {}, {\n      element: hasChildren ? document.createElement('div') : undefined\n    });\n    const mk = new mapLib.Marker(options);\n    mk.setLngLat([props.longitude, props.latitude]);\n    mk.getElement().addEventListener('click', e => {\n      var _thisRef$current$prop, _thisRef$current$prop2;\n      (_thisRef$current$prop = (_thisRef$current$prop2 = thisRef.current.props).onClick) === null || _thisRef$current$prop === void 0 || _thisRef$current$prop.call(_thisRef$current$prop2, {\n        type: 'click',\n        target: mk,\n        originalEvent: e\n      });\n    });\n    mk.on('dragstart', e => {\n      var _thisRef$current$prop3, _thisRef$current$prop4;\n      const evt = e;\n      evt.lngLat = marker.getLngLat();\n      (_thisRef$current$prop3 = (_thisRef$current$prop4 = thisRef.current.props).onDragStart) === null || _thisRef$current$prop3 === void 0 || _thisRef$current$prop3.call(_thisRef$current$prop4, evt);\n    });\n    mk.on('drag', e => {\n      var _thisRef$current$prop5, _thisRef$current$prop6;\n      const evt = e;\n      evt.lngLat = marker.getLngLat();\n      (_thisRef$current$prop5 = (_thisRef$current$prop6 = thisRef.current.props).onDrag) === null || _thisRef$current$prop5 === void 0 || _thisRef$current$prop5.call(_thisRef$current$prop6, evt);\n    });\n    mk.on('dragend', e => {\n      var _thisRef$current$prop7, _thisRef$current$prop8;\n      const evt = e;\n      evt.lngLat = marker.getLngLat();\n      (_thisRef$current$prop7 = (_thisRef$current$prop8 = thisRef.current.props).onDragEnd) === null || _thisRef$current$prop7 === void 0 || _thisRef$current$prop7.call(_thisRef$current$prop8, evt);\n    });\n    return mk;\n  }, []);\n  useEffect(() => {\n    marker.addTo(map.getMap());\n    return () => {\n      marker.remove();\n    };\n  }, []);\n  const {\n    longitude,\n    latitude,\n    offset,\n    style,\n    draggable = false,\n    popup = null,\n    rotation = 0,\n    rotationAlignment = 'auto',\n    pitchAlignment = 'auto'\n  } = props;\n  useEffect(() => {\n    applyReactStyle(marker.getElement(), style);\n  }, [style]);\n  useImperativeHandle(ref, () => marker, []);\n  const oldProps = thisRef.current.props;\n  if (marker.getLngLat().lng !== longitude || marker.getLngLat().lat !== latitude) {\n    marker.setLngLat([longitude, latitude]);\n  }\n  if (offset && !arePointsEqual(marker.getOffset(), offset)) {\n    marker.setOffset(offset);\n  }\n  if (marker.isDraggable() !== draggable) {\n    marker.setDraggable(draggable);\n  }\n  if (marker.getRotation() !== rotation) {\n    marker.setRotation(rotation);\n  }\n  if (marker.getRotationAlignment() !== rotationAlignment) {\n    marker.setRotationAlignment(rotationAlignment);\n  }\n  if (marker.getPitchAlignment() !== pitchAlignment) {\n    marker.setPitchAlignment(pitchAlignment);\n  }\n  if (marker.getPopup() !== popup) {\n    marker.setPopup(popup);\n  }\n  const classNameDiff = compareClassNames(oldProps.className, props.className);\n  if (classNameDiff) {\n    for (const c of classNameDiff) {\n      marker.toggleClassName(c);\n    }\n  }\n  thisRef.current.props = props;\n  return createPortal(props.children, marker.getElement());\n}));","map":{"version":3,"names":["React","createPortal","useImperativeHandle","useEffect","useMemo","useRef","useContext","forwardRef","memo","applyReactStyle","MapContext","arePointsEqual","compareClassNames","Marker","props","ref","map","mapLib","thisRef","marker","hasChildren","Children","forEach","children","el","options","_objectSpread","element","document","createElement","undefined","mk","setLngLat","longitude","latitude","getElement","addEventListener","e","_thisRef$current$prop","_thisRef$current$prop2","current","onClick","call","type","target","originalEvent","on","_thisRef$current$prop3","_thisRef$current$prop4","evt","lngLat","getLngLat","onDragStart","_thisRef$current$prop5","_thisRef$current$prop6","onDrag","_thisRef$current$prop7","_thisRef$current$prop8","onDragEnd","addTo","getMap","remove","offset","style","draggable","popup","rotation","rotationAlignment","pitchAlignment","oldProps","lng","lat","getOffset","setOffset","isDraggable","setDraggable","getRotation","setRotation","getRotationAlignment","setRotationAlignment","getPitchAlignment","setPitchAlignment","getPopup","setPopup","classNameDiff","className","c","toggleClassName"],"sources":["C:\\Users\\kutum\\Documents\\room-rental-platform\\node_modules\\@vis.gl\\react-maplibre\\src\\components\\marker.ts"],"sourcesContent":["/* global document */\nimport * as React from 'react';\nimport {createPortal} from 'react-dom';\nimport {useImperativeHandle, useEffect, useMemo, useRef, useContext, forwardRef, memo} from 'react';\nimport {applyReactStyle} from '../utils/apply-react-style';\n\nimport type {PopupInstance, MarkerInstance, MarkerOptions} from '../types/lib';\nimport type {MarkerEvent, MarkerDragEvent} from '../types/events';\n\nimport {MapContext} from './map';\nimport {arePointsEqual} from '../utils/deep-equal';\nimport {compareClassNames} from '../utils/compare-class-names';\n\nexport type MarkerProps = MarkerOptions & {\n  /** Longitude of the anchor location */\n  longitude: number;\n  /** Latitude of the anchor location */\n  latitude: number;\n\n  popup?: PopupInstance;\n\n  /** CSS style override, applied to the control's container */\n  style?: React.CSSProperties;\n  onClick?: (e: MarkerEvent<MouseEvent>) => void;\n  onDragStart?: (e: MarkerDragEvent) => void;\n  onDrag?: (e: MarkerDragEvent) => void;\n  onDragEnd?: (e: MarkerDragEvent) => void;\n  children?: React.ReactNode;\n};\n\n/* eslint-disable complexity,max-statements */\nexport const Marker = memo(\n  forwardRef((props: MarkerProps, ref: React.Ref<MarkerInstance>) => {\n    const {map, mapLib} = useContext(MapContext);\n    const thisRef = useRef({props});\n\n    const marker: MarkerInstance = useMemo(() => {\n      let hasChildren = false;\n      React.Children.forEach(props.children, el => {\n        if (el) {\n          hasChildren = true;\n        }\n      });\n      const options = {\n        ...props,\n        element: hasChildren ? document.createElement('div') : undefined\n      };\n\n      const mk = new mapLib.Marker(options);\n      mk.setLngLat([props.longitude, props.latitude]);\n\n      mk.getElement().addEventListener('click', (e: MouseEvent) => {\n        thisRef.current.props.onClick?.({\n          type: 'click',\n          target: mk,\n          originalEvent: e\n        });\n      });\n\n      mk.on('dragstart', e => {\n        const evt = e as MarkerDragEvent;\n        evt.lngLat = marker.getLngLat();\n        thisRef.current.props.onDragStart?.(evt);\n      });\n      mk.on('drag', e => {\n        const evt = e as MarkerDragEvent;\n        evt.lngLat = marker.getLngLat();\n        thisRef.current.props.onDrag?.(evt);\n      });\n      mk.on('dragend', e => {\n        const evt = e as MarkerDragEvent;\n        evt.lngLat = marker.getLngLat();\n        thisRef.current.props.onDragEnd?.(evt);\n      });\n\n      return mk;\n    }, []);\n\n    useEffect(() => {\n      marker.addTo(map.getMap());\n\n      return () => {\n        marker.remove();\n      };\n    }, []);\n\n    const {\n      longitude,\n      latitude,\n      offset,\n      style,\n      draggable = false,\n      popup = null,\n      rotation = 0,\n      rotationAlignment = 'auto',\n      pitchAlignment = 'auto'\n    } = props;\n\n    useEffect(() => {\n      applyReactStyle(marker.getElement(), style);\n    }, [style]);\n\n    useImperativeHandle(ref, () => marker, []);\n\n    const oldProps = thisRef.current.props;\n    if (marker.getLngLat().lng !== longitude || marker.getLngLat().lat !== latitude) {\n      marker.setLngLat([longitude, latitude]);\n    }\n    if (offset && !arePointsEqual(marker.getOffset(), offset)) {\n      marker.setOffset(offset);\n    }\n    if (marker.isDraggable() !== draggable) {\n      marker.setDraggable(draggable);\n    }\n    if (marker.getRotation() !== rotation) {\n      marker.setRotation(rotation);\n    }\n    if (marker.getRotationAlignment() !== rotationAlignment) {\n      marker.setRotationAlignment(rotationAlignment);\n    }\n    if (marker.getPitchAlignment() !== pitchAlignment) {\n      marker.setPitchAlignment(pitchAlignment);\n    }\n    if (marker.getPopup() !== popup) {\n      marker.setPopup(popup);\n    }\n    const classNameDiff = compareClassNames(oldProps.className, props.className);\n    if (classNameDiff) {\n      for (const c of classNameDiff) {\n        marker.toggleClassName(c);\n      }\n    }\n\n    thisRef.current.props = props;\n    return createPortal(props.children, marker.getElement());\n  })\n);\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}