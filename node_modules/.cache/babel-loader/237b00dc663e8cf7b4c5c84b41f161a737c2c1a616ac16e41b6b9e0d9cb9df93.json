{"ast":null,"code":"import _objectSpread from\"C:/Users/kutum/Documents/room-rental-platform/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";// Firebase client initialization for Room24\n// Replace placeholder environment variables with real Firebase project config.\n// Ensure you have added a web app in Firebase console and enabled Cloud Messaging.\nimport{initializeApp}from'firebase/app';import{getMessaging,getToken,onMessage}from'firebase/messaging';import{getAnalytics,logEvent}from'firebase/analytics';import{getFirestore,collection,doc,getDocs,getDoc,setDoc,addDoc,updateDoc,deleteDoc,query,where,orderBy,onSnapshot,serverTimestamp}from'firebase/firestore';import{getAuth,createUserWithEmailAndPassword,signInWithEmailAndPassword,signInWithPopup,GoogleAuthProvider,signOut as firebaseSignOut,onAuthStateChanged,updateProfile,sendPasswordResetEmail}from'firebase/auth';const firebaseConfig={apiKey:process.env.REACT_APP_FIREBASE_API_KEY,authDomain:process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,projectId:process.env.REACT_APP_FIREBASE_PROJECT_ID,storageBucket:process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,appId:process.env.REACT_APP_FIREBASE_APP_ID,measurementId:process.env.REACT_APP_FIREBASE_MEASUREMENT_ID};let messagingInstance;let analyticsInstance;let firestoreInstance;let authInstance;let firebaseApp;export function initFirebase(){firebaseApp=initializeApp(firebaseConfig);try{messagingInstance=getMessaging(firebaseApp);}catch(e){console.warn('Messaging not available',e);}// Initialize Firestore\ntry{firestoreInstance=getFirestore(firebaseApp);console.log('Firestore initialized');}catch(e){console.warn('Firestore not available',e);}// Initialize Auth\ntry{authInstance=getAuth(firebaseApp);console.log('Auth initialized');}catch(e){console.warn('Auth not available',e);}return firebaseApp;}// Get Auth instance\nexport function getAuthInstance(){if(!authInstance&&firebaseApp){authInstance=getAuth(firebaseApp);}return authInstance;}// Get Firestore instance\nexport function getDb(){if(!firestoreInstance&&firebaseApp){firestoreInstance=getFirestore(firebaseApp);}return firestoreInstance;}// ===========================\n// AUTHENTICATION FUNCTIONS\n// ===========================\n// Sign up with email and password\nexport async function signUpWithEmail(email,password,displayName){const auth=getAuthInstance();if(!auth)throw new Error('Auth not initialized');const userCredential=await createUserWithEmailAndPassword(auth,email,password);// Update display name\nif(displayName){await updateProfile(userCredential.user,{displayName});}return userCredential.user;}// Sign in with email and password\nexport async function signInWithEmail(email,password){const auth=getAuthInstance();if(!auth)throw new Error('Auth not initialized');const userCredential=await signInWithEmailAndPassword(auth,email,password);return userCredential.user;}// Sign in with Google\nexport async function signInWithGoogle(){const auth=getAuthInstance();if(!auth)throw new Error('Auth not initialized');const provider=new GoogleAuthProvider();const userCredential=await signInWithPopup(auth,provider);return userCredential.user;}// Sign out\nexport async function signOut(){const auth=getAuthInstance();if(!auth)throw new Error('Auth not initialized');await firebaseSignOut(auth);}// Listen to auth state changes\nexport function subscribeToAuthState(callback){const auth=getAuthInstance();if(!auth){console.warn('Auth not initialized');return()=>{};}return onAuthStateChanged(auth,callback);}// Send password reset email\nexport async function resetPassword(email){const auth=getAuthInstance();if(!auth)throw new Error('Auth not initialized');await sendPasswordResetEmail(auth,email);}// Get current user\nexport function getCurrentUser(){const auth=getAuthInstance();return(auth===null||auth===void 0?void 0:auth.currentUser)||null;}// ===========================\n// USER PROFILE FUNCTIONS\n// ===========================\n// Get user profile from Firestore\nexport async function getUserProfile(userId){const db=getDb();if(!db)return null;try{const userRef=doc(db,'users',userId);const snapshot=await getDoc(userRef);if(snapshot.exists()){return _objectSpread({id:snapshot.id},snapshot.data());}return null;}catch(error){console.error('Error fetching user profile:',error);return null;}}// Create or update user profile in Firestore\nexport async function saveUserProfile(userId,profileData){const db=getDb();if(!db)throw new Error('Firestore not initialized');try{const userRef=doc(db,'users',userId);await setDoc(userRef,_objectSpread(_objectSpread({},profileData),{},{updatedAt:serverTimestamp()}),{merge:true});console.log('User profile saved:',userId);return true;}catch(error){console.error('Error saving user profile:',error);throw error;}}// ===========================\n// LISTINGS FIRESTORE FUNCTIONS\n// ===========================\n// Fetch all listings from Firestore\nexport async function fetchListings(){const db=getDb();if(!db){console.warn('Firestore not initialized, using localStorage');return null;// Fall back to localStorage\n}try{const listingsRef=collection(db,'listings');const q=query(listingsRef,orderBy('createdAt','desc'));const snapshot=await getDocs(q);const listings=snapshot.docs.map(doc=>{var _doc$data$createdAt,_doc$data$createdAt$t,_doc$data$createdAt$t2,_doc$data$availableDa,_doc$data$availableDa2,_doc$data$availableDa3;return _objectSpread(_objectSpread({id:doc.id},doc.data()),{},{// Convert Firestore timestamps to ISO strings\ncreatedAt:((_doc$data$createdAt=doc.data().createdAt)===null||_doc$data$createdAt===void 0?void 0:(_doc$data$createdAt$t=_doc$data$createdAt.toDate)===null||_doc$data$createdAt$t===void 0?void 0:(_doc$data$createdAt$t2=_doc$data$createdAt$t.call(_doc$data$createdAt))===null||_doc$data$createdAt$t2===void 0?void 0:_doc$data$createdAt$t2.toISOString())||doc.data().createdAt,availableDate:((_doc$data$availableDa=doc.data().availableDate)===null||_doc$data$availableDa===void 0?void 0:(_doc$data$availableDa2=_doc$data$availableDa.toDate)===null||_doc$data$availableDa2===void 0?void 0:(_doc$data$availableDa3=_doc$data$availableDa2.call(_doc$data$availableDa))===null||_doc$data$availableDa3===void 0?void 0:_doc$data$availableDa3.toISOString())||doc.data().availableDate});});console.log(\"Fetched \".concat(listings.length,\" listings from Firestore\"));return listings;}catch(error){console.error('Error fetching listings from Firestore:',error);return null;// Fall back to localStorage\n}}// Add a new listing to Firestore\nexport async function addListing(listingData){const db=getDb();if(!db){console.warn('Firestore not initialized');return null;}try{const listingsRef=collection(db,'listings');const docRef=await addDoc(listingsRef,_objectSpread(_objectSpread({},listingData),{},{createdAt:serverTimestamp(),status:'available'}));console.log('Listing added with ID:',docRef.id);return docRef.id;}catch(error){console.error('Error adding listing to Firestore:',error);throw error;}}// Update an existing listing\nexport async function updateListing(listingId,updates){const db=getDb();if(!db){console.warn('Firestore not initialized');return false;}try{const listingRef=doc(db,'listings',listingId);await updateDoc(listingRef,_objectSpread(_objectSpread({},updates),{},{updatedAt:serverTimestamp()}));console.log('Listing updated:',listingId);return true;}catch(error){console.error('Error updating listing in Firestore:',error);throw error;}}// Delete a listing\nexport async function deleteListing(listingId){const db=getDb();if(!db){console.warn('Firestore not initialized');return false;}try{const listingRef=doc(db,'listings',listingId);await deleteDoc(listingRef);console.log('Listing deleted:',listingId);return true;}catch(error){console.error('Error deleting listing from Firestore:',error);throw error;}}// Get listings by landlord ID\nexport async function fetchListingsByLandlord(landlordId){const db=getDb();if(!db)return null;try{const listingsRef=collection(db,'listings');const q=query(listingsRef,where('landlordId','==',landlordId));const snapshot=await getDocs(q);return snapshot.docs.map(doc=>{var _doc$data$createdAt2,_doc$data$createdAt2$,_doc$data$createdAt2$2,_doc$data$availableDa4,_doc$data$availableDa5,_doc$data$availableDa6;return _objectSpread(_objectSpread({id:doc.id},doc.data()),{},{createdAt:((_doc$data$createdAt2=doc.data().createdAt)===null||_doc$data$createdAt2===void 0?void 0:(_doc$data$createdAt2$=_doc$data$createdAt2.toDate)===null||_doc$data$createdAt2$===void 0?void 0:(_doc$data$createdAt2$2=_doc$data$createdAt2$.call(_doc$data$createdAt2))===null||_doc$data$createdAt2$2===void 0?void 0:_doc$data$createdAt2$2.toISOString())||doc.data().createdAt,availableDate:((_doc$data$availableDa4=doc.data().availableDate)===null||_doc$data$availableDa4===void 0?void 0:(_doc$data$availableDa5=_doc$data$availableDa4.toDate)===null||_doc$data$availableDa5===void 0?void 0:(_doc$data$availableDa6=_doc$data$availableDa5.call(_doc$data$availableDa4))===null||_doc$data$availableDa6===void 0?void 0:_doc$data$availableDa6.toISOString())||doc.data().availableDate});});}catch(error){console.error('Error fetching landlord listings:',error);return null;}}// Subscribe to real-time listing updates\nexport function subscribeToListings(callback){const db=getDb();if(!db){console.warn('Firestore not initialized for real-time updates');return null;}try{const listingsRef=collection(db,'listings');const q=query(listingsRef,orderBy('createdAt','desc'));const unsubscribe=onSnapshot(q,snapshot=>{const listings=snapshot.docs.map(doc=>{var _doc$data$createdAt3,_doc$data$createdAt3$,_doc$data$createdAt3$2,_doc$data$availableDa7,_doc$data$availableDa8,_doc$data$availableDa9;return _objectSpread(_objectSpread({id:doc.id},doc.data()),{},{createdAt:((_doc$data$createdAt3=doc.data().createdAt)===null||_doc$data$createdAt3===void 0?void 0:(_doc$data$createdAt3$=_doc$data$createdAt3.toDate)===null||_doc$data$createdAt3$===void 0?void 0:(_doc$data$createdAt3$2=_doc$data$createdAt3$.call(_doc$data$createdAt3))===null||_doc$data$createdAt3$2===void 0?void 0:_doc$data$createdAt3$2.toISOString())||doc.data().createdAt,availableDate:((_doc$data$availableDa7=doc.data().availableDate)===null||_doc$data$availableDa7===void 0?void 0:(_doc$data$availableDa8=_doc$data$availableDa7.toDate)===null||_doc$data$availableDa8===void 0?void 0:(_doc$data$availableDa9=_doc$data$availableDa8.call(_doc$data$availableDa7))===null||_doc$data$availableDa9===void 0?void 0:_doc$data$availableDa9.toISOString())||doc.data().availableDate});});console.log(\"Real-time update: \".concat(listings.length,\" listings\"));callback(listings);},error=>{console.error('Real-time listener error:',error);});return unsubscribe;}catch(error){console.error('Error setting up real-time listener:',error);return null;}}// Check if Firestore is available and configured\nexport function isFirestoreEnabled(){return!!process.env.REACT_APP_FIREBASE_PROJECT_ID&&!!getDb();}export function initAnalytics(app){if(process.env.REACT_APP_ENABLE_ANALYTICS!=='true')return;const consent=localStorage.getItem('analytics-consent');if(consent!=='yes')return;try{analyticsInstance=getAnalytics(app);console.log('Analytics initialized');}catch(e){console.warn('Analytics not available',e);}}export function trackEvent(eventName){let params=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};if(!analyticsInstance)return;try{logEvent(analyticsInstance,eventName,params);}catch(e){console.warn('Event tracking failed',e);}}// Request notification permission and fetch token\nexport async function requestFcmToken(){if(!messagingInstance)return null;const permission=await Notification.requestPermission();if(permission!=='granted'){console.log('Notification permission denied');return null;}try{const vapidKey=process.env.REACT_APP_FIREBASE_VAPID_KEY;// Public VAPID key\nconst currentToken=await getToken(messagingInstance,{vapidKey});if(currentToken){console.log('FCM token:',currentToken);// Persist token to backend if configured\ntry{const backend=process.env.REACT_APP_BACKEND_URL;if(backend){await fetch(\"\".concat(backend.replace(/\\/$/,''),\"/api/push/register\"),{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({token:currentToken})});}}catch(e){console.warn('Token persistence failed',e);}return currentToken;}else{console.log('No registration token available.');return null;}}catch(err){console.error('An error occurred while retrieving token.',err);return null;}}export function listenForegroundMessages(callback){if(!messagingInstance)return;onMessage(messagingInstance,payload=>{console.log('Foreground message received',payload);if(callback)callback(payload);});}","map":{"version":3,"names":["initializeApp","getMessaging","getToken","onMessage","getAnalytics","logEvent","getFirestore","collection","doc","getDocs","getDoc","setDoc","addDoc","updateDoc","deleteDoc","query","where","orderBy","onSnapshot","serverTimestamp","getAuth","createUserWithEmailAndPassword","signInWithEmailAndPassword","signInWithPopup","GoogleAuthProvider","signOut","firebaseSignOut","onAuthStateChanged","updateProfile","sendPasswordResetEmail","firebaseConfig","apiKey","process","env","REACT_APP_FIREBASE_API_KEY","authDomain","REACT_APP_FIREBASE_AUTH_DOMAIN","projectId","REACT_APP_FIREBASE_PROJECT_ID","storageBucket","REACT_APP_FIREBASE_STORAGE_BUCKET","messagingSenderId","REACT_APP_FIREBASE_MESSAGING_SENDER_ID","appId","REACT_APP_FIREBASE_APP_ID","measurementId","REACT_APP_FIREBASE_MEASUREMENT_ID","messagingInstance","analyticsInstance","firestoreInstance","authInstance","firebaseApp","initFirebase","e","console","warn","log","getAuthInstance","getDb","signUpWithEmail","email","password","displayName","auth","Error","userCredential","user","signInWithEmail","signInWithGoogle","provider","subscribeToAuthState","callback","resetPassword","getCurrentUser","currentUser","getUserProfile","userId","db","userRef","snapshot","exists","_objectSpread","id","data","error","saveUserProfile","profileData","updatedAt","merge","fetchListings","listingsRef","q","listings","docs","map","_doc$data$createdAt","_doc$data$createdAt$t","_doc$data$createdAt$t2","_doc$data$availableDa","_doc$data$availableDa2","_doc$data$availableDa3","createdAt","toDate","call","toISOString","availableDate","concat","length","addListing","listingData","docRef","status","updateListing","listingId","updates","listingRef","deleteListing","fetchListingsByLandlord","landlordId","_doc$data$createdAt2","_doc$data$createdAt2$","_doc$data$createdAt2$2","_doc$data$availableDa4","_doc$data$availableDa5","_doc$data$availableDa6","subscribeToListings","unsubscribe","_doc$data$createdAt3","_doc$data$createdAt3$","_doc$data$createdAt3$2","_doc$data$availableDa7","_doc$data$availableDa8","_doc$data$availableDa9","isFirestoreEnabled","initAnalytics","app","REACT_APP_ENABLE_ANALYTICS","consent","localStorage","getItem","trackEvent","eventName","params","arguments","undefined","requestFcmToken","permission","Notification","requestPermission","vapidKey","REACT_APP_FIREBASE_VAPID_KEY","currentToken","backend","REACT_APP_BACKEND_URL","fetch","replace","method","headers","body","JSON","stringify","token","err","listenForegroundMessages","payload"],"sources":["C:/Users/kutum/Documents/room-rental-platform/src/firebase.js"],"sourcesContent":["// Firebase client initialization for Room24\r\n// Replace placeholder environment variables with real Firebase project config.\r\n// Ensure you have added a web app in Firebase console and enabled Cloud Messaging.\r\n\r\nimport { initializeApp } from 'firebase/app';\r\nimport { getMessaging, getToken, onMessage } from 'firebase/messaging';\r\nimport { getAnalytics, logEvent } from 'firebase/analytics';\r\nimport { \r\n  getFirestore, \r\n  collection, \r\n  doc, \r\n  getDocs, \r\n  getDoc,\r\n  setDoc,\r\n  addDoc, \r\n  updateDoc, \r\n  deleteDoc, \r\n  query, \r\n  where, \r\n  orderBy,\r\n  onSnapshot,\r\n  serverTimestamp \r\n} from 'firebase/firestore';\r\nimport {\r\n  getAuth,\r\n  createUserWithEmailAndPassword,\r\n  signInWithEmailAndPassword,\r\n  signInWithPopup,\r\n  GoogleAuthProvider,\r\n  signOut as firebaseSignOut,\r\n  onAuthStateChanged,\r\n  updateProfile,\r\n  sendPasswordResetEmail\r\n} from 'firebase/auth';\r\n\r\nconst firebaseConfig = {\r\n  apiKey: process.env.REACT_APP_FIREBASE_API_KEY,\r\n  authDomain: process.env.REACT_APP_FIREBASE_AUTH_DOMAIN,\r\n  projectId: process.env.REACT_APP_FIREBASE_PROJECT_ID,\r\n  storageBucket: process.env.REACT_APP_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: process.env.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: process.env.REACT_APP_FIREBASE_APP_ID,\r\n  measurementId: process.env.REACT_APP_FIREBASE_MEASUREMENT_ID,\r\n};\r\n\r\nlet messagingInstance;\r\nlet analyticsInstance;\r\nlet firestoreInstance;\r\nlet authInstance;\r\nlet firebaseApp;\r\n\r\nexport function initFirebase() {\r\n  firebaseApp = initializeApp(firebaseConfig);\r\n  try {\r\n    messagingInstance = getMessaging(firebaseApp);\r\n  } catch (e) {\r\n    console.warn('Messaging not available', e);\r\n  }\r\n  // Initialize Firestore\r\n  try {\r\n    firestoreInstance = getFirestore(firebaseApp);\r\n    console.log('Firestore initialized');\r\n  } catch (e) {\r\n    console.warn('Firestore not available', e);\r\n  }\r\n  // Initialize Auth\r\n  try {\r\n    authInstance = getAuth(firebaseApp);\r\n    console.log('Auth initialized');\r\n  } catch (e) {\r\n    console.warn('Auth not available', e);\r\n  }\r\n  return firebaseApp;\r\n}\r\n\r\n// Get Auth instance\r\nexport function getAuthInstance() {\r\n  if (!authInstance && firebaseApp) {\r\n    authInstance = getAuth(firebaseApp);\r\n  }\r\n  return authInstance;\r\n}\r\n\r\n// Get Firestore instance\r\nexport function getDb() {\r\n  if (!firestoreInstance && firebaseApp) {\r\n    firestoreInstance = getFirestore(firebaseApp);\r\n  }\r\n  return firestoreInstance;\r\n}\r\n\r\n// ===========================\r\n// AUTHENTICATION FUNCTIONS\r\n// ===========================\r\n\r\n// Sign up with email and password\r\nexport async function signUpWithEmail(email, password, displayName) {\r\n  const auth = getAuthInstance();\r\n  if (!auth) throw new Error('Auth not initialized');\r\n  \r\n  const userCredential = await createUserWithEmailAndPassword(auth, email, password);\r\n  \r\n  // Update display name\r\n  if (displayName) {\r\n    await updateProfile(userCredential.user, { displayName });\r\n  }\r\n  \r\n  return userCredential.user;\r\n}\r\n\r\n// Sign in with email and password\r\nexport async function signInWithEmail(email, password) {\r\n  const auth = getAuthInstance();\r\n  if (!auth) throw new Error('Auth not initialized');\r\n  \r\n  const userCredential = await signInWithEmailAndPassword(auth, email, password);\r\n  return userCredential.user;\r\n}\r\n\r\n// Sign in with Google\r\nexport async function signInWithGoogle() {\r\n  const auth = getAuthInstance();\r\n  if (!auth) throw new Error('Auth not initialized');\r\n  \r\n  const provider = new GoogleAuthProvider();\r\n  const userCredential = await signInWithPopup(auth, provider);\r\n  return userCredential.user;\r\n}\r\n\r\n// Sign out\r\nexport async function signOut() {\r\n  const auth = getAuthInstance();\r\n  if (!auth) throw new Error('Auth not initialized');\r\n  \r\n  await firebaseSignOut(auth);\r\n}\r\n\r\n// Listen to auth state changes\r\nexport function subscribeToAuthState(callback) {\r\n  const auth = getAuthInstance();\r\n  if (!auth) {\r\n    console.warn('Auth not initialized');\r\n    return () => {};\r\n  }\r\n  \r\n  return onAuthStateChanged(auth, callback);\r\n}\r\n\r\n// Send password reset email\r\nexport async function resetPassword(email) {\r\n  const auth = getAuthInstance();\r\n  if (!auth) throw new Error('Auth not initialized');\r\n  \r\n  await sendPasswordResetEmail(auth, email);\r\n}\r\n\r\n// Get current user\r\nexport function getCurrentUser() {\r\n  const auth = getAuthInstance();\r\n  return auth?.currentUser || null;\r\n}\r\n\r\n// ===========================\r\n// USER PROFILE FUNCTIONS\r\n// ===========================\r\n\r\n// Get user profile from Firestore\r\nexport async function getUserProfile(userId) {\r\n  const db = getDb();\r\n  if (!db) return null;\r\n  \r\n  try {\r\n    const userRef = doc(db, 'users', userId);\r\n    const snapshot = await getDoc(userRef);\r\n    if (snapshot.exists()) {\r\n      return { id: snapshot.id, ...snapshot.data() };\r\n    }\r\n    return null;\r\n  } catch (error) {\r\n    console.error('Error fetching user profile:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n// Create or update user profile in Firestore\r\nexport async function saveUserProfile(userId, profileData) {\r\n  const db = getDb();\r\n  if (!db) throw new Error('Firestore not initialized');\r\n  \r\n  try {\r\n    const userRef = doc(db, 'users', userId);\r\n    await setDoc(userRef, {\r\n      ...profileData,\r\n      updatedAt: serverTimestamp(),\r\n    }, { merge: true });\r\n    console.log('User profile saved:', userId);\r\n    return true;\r\n  } catch (error) {\r\n    console.error('Error saving user profile:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// ===========================\r\n// LISTINGS FIRESTORE FUNCTIONS\r\n// ===========================\r\n\r\n// Fetch all listings from Firestore\r\nexport async function fetchListings() {\r\n  const db = getDb();\r\n  if (!db) {\r\n    console.warn('Firestore not initialized, using localStorage');\r\n    return null; // Fall back to localStorage\r\n  }\r\n  try {\r\n    const listingsRef = collection(db, 'listings');\r\n    const q = query(listingsRef, orderBy('createdAt', 'desc'));\r\n    const snapshot = await getDocs(q);\r\n    const listings = snapshot.docs.map(doc => ({\r\n      id: doc.id,\r\n      ...doc.data(),\r\n      // Convert Firestore timestamps to ISO strings\r\n      createdAt: doc.data().createdAt?.toDate?.()?.toISOString() || doc.data().createdAt,\r\n      availableDate: doc.data().availableDate?.toDate?.()?.toISOString() || doc.data().availableDate,\r\n    }));\r\n    console.log(`Fetched ${listings.length} listings from Firestore`);\r\n    return listings;\r\n  } catch (error) {\r\n    console.error('Error fetching listings from Firestore:', error);\r\n    return null; // Fall back to localStorage\r\n  }\r\n}\r\n\r\n// Add a new listing to Firestore\r\nexport async function addListing(listingData) {\r\n  const db = getDb();\r\n  if (!db) {\r\n    console.warn('Firestore not initialized');\r\n    return null;\r\n  }\r\n  try {\r\n    const listingsRef = collection(db, 'listings');\r\n    const docRef = await addDoc(listingsRef, {\r\n      ...listingData,\r\n      createdAt: serverTimestamp(),\r\n      status: 'available',\r\n    });\r\n    console.log('Listing added with ID:', docRef.id);\r\n    return docRef.id;\r\n  } catch (error) {\r\n    console.error('Error adding listing to Firestore:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Update an existing listing\r\nexport async function updateListing(listingId, updates) {\r\n  const db = getDb();\r\n  if (!db) {\r\n    console.warn('Firestore not initialized');\r\n    return false;\r\n  }\r\n  try {\r\n    const listingRef = doc(db, 'listings', listingId);\r\n    await updateDoc(listingRef, {\r\n      ...updates,\r\n      updatedAt: serverTimestamp(),\r\n    });\r\n    console.log('Listing updated:', listingId);\r\n    return true;\r\n  } catch (error) {\r\n    console.error('Error updating listing in Firestore:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Delete a listing\r\nexport async function deleteListing(listingId) {\r\n  const db = getDb();\r\n  if (!db) {\r\n    console.warn('Firestore not initialized');\r\n    return false;\r\n  }\r\n  try {\r\n    const listingRef = doc(db, 'listings', listingId);\r\n    await deleteDoc(listingRef);\r\n    console.log('Listing deleted:', listingId);\r\n    return true;\r\n  } catch (error) {\r\n    console.error('Error deleting listing from Firestore:', error);\r\n    throw error;\r\n  }\r\n}\r\n\r\n// Get listings by landlord ID\r\nexport async function fetchListingsByLandlord(landlordId) {\r\n  const db = getDb();\r\n  if (!db) return null;\r\n  try {\r\n    const listingsRef = collection(db, 'listings');\r\n    const q = query(listingsRef, where('landlordId', '==', landlordId));\r\n    const snapshot = await getDocs(q);\r\n    return snapshot.docs.map(doc => ({\r\n      id: doc.id,\r\n      ...doc.data(),\r\n      createdAt: doc.data().createdAt?.toDate?.()?.toISOString() || doc.data().createdAt,\r\n      availableDate: doc.data().availableDate?.toDate?.()?.toISOString() || doc.data().availableDate,\r\n    }));\r\n  } catch (error) {\r\n    console.error('Error fetching landlord listings:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n// Subscribe to real-time listing updates\r\nexport function subscribeToListings(callback) {\r\n  const db = getDb();\r\n  if (!db) {\r\n    console.warn('Firestore not initialized for real-time updates');\r\n    return null;\r\n  }\r\n  try {\r\n    const listingsRef = collection(db, 'listings');\r\n    const q = query(listingsRef, orderBy('createdAt', 'desc'));\r\n    \r\n    const unsubscribe = onSnapshot(q, (snapshot) => {\r\n      const listings = snapshot.docs.map(doc => ({\r\n        id: doc.id,\r\n        ...doc.data(),\r\n        createdAt: doc.data().createdAt?.toDate?.()?.toISOString() || doc.data().createdAt,\r\n        availableDate: doc.data().availableDate?.toDate?.()?.toISOString() || doc.data().availableDate,\r\n      }));\r\n      console.log(`Real-time update: ${listings.length} listings`);\r\n      callback(listings);\r\n    }, (error) => {\r\n      console.error('Real-time listener error:', error);\r\n    });\r\n    \r\n    return unsubscribe;\r\n  } catch (error) {\r\n    console.error('Error setting up real-time listener:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\n// Check if Firestore is available and configured\r\nexport function isFirestoreEnabled() {\r\n  return !!process.env.REACT_APP_FIREBASE_PROJECT_ID && !!getDb();\r\n}\r\n\r\nexport function initAnalytics(app) {\r\n  if (process.env.REACT_APP_ENABLE_ANALYTICS !== 'true') return;\r\n  const consent = localStorage.getItem('analytics-consent');\r\n  if (consent !== 'yes') return;\r\n  try {\r\n    analyticsInstance = getAnalytics(app);\r\n    console.log('Analytics initialized');\r\n  } catch (e) {\r\n    console.warn('Analytics not available', e);\r\n  }\r\n}\r\n\r\nexport function trackEvent(eventName, params = {}) {\r\n  if (!analyticsInstance) return;\r\n  try {\r\n    logEvent(analyticsInstance, eventName, params);\r\n  } catch (e) {\r\n    console.warn('Event tracking failed', e);\r\n  }\r\n}\r\n\r\n// Request notification permission and fetch token\r\nexport async function requestFcmToken() {\r\n  if (!messagingInstance) return null;\r\n  const permission = await Notification.requestPermission();\r\n  if (permission !== 'granted') {\r\n    console.log('Notification permission denied');\r\n    return null;\r\n  }\r\n  try {\r\n    const vapidKey = process.env.REACT_APP_FIREBASE_VAPID_KEY; // Public VAPID key\r\n    const currentToken = await getToken(messagingInstance, { vapidKey });\r\n    if (currentToken) {\r\n      console.log('FCM token:', currentToken);\r\n      // Persist token to backend if configured\r\n      try {\r\n        const backend = process.env.REACT_APP_BACKEND_URL;\r\n        if (backend) {\r\n          await fetch(`${backend.replace(/\\/$/, '')}/api/push/register`, {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ token: currentToken })\r\n          });\r\n        }\r\n      } catch (e) {\r\n        console.warn('Token persistence failed', e);\r\n      }\r\n      return currentToken;\r\n    } else {\r\n      console.log('No registration token available.');\r\n      return null;\r\n    }\r\n  } catch (err) {\r\n    console.error('An error occurred while retrieving token.', err);\r\n    return null;\r\n  }\r\n}\r\n\r\nexport function listenForegroundMessages(callback) {\r\n  if (!messagingInstance) return;\r\n  onMessage(messagingInstance, payload => {\r\n    console.log('Foreground message received', payload);\r\n    if (callback) callback(payload);\r\n  });\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}