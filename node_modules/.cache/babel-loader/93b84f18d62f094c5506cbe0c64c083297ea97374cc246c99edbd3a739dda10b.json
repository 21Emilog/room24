{"ast":null,"code":"import _objectSpread from\"C:/Users/kutum/Documents/room-rental-platform/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useMemo,useCallback}from'react';import{initFirebase,initAnalytics,requestFcmToken,listenForegroundMessages,trackEvent,fetchListings,addListing,deleteListing,subscribeToListings,isFirestoreEnabled,subscribeToAuthState,getUserProfile,saveUserProfile,initRecaptcha,sendPhoneOTP,verifyPhoneOTP,clearRecaptcha,getLinkedProviders,linkGoogleAccount}from'./firebase';import{Home,PlusCircle,Search,MapPin,X,User,Phone,Mail,Edit,CheckCircle,Heart,Calendar,Bell,AlertTriangle,LogOut,Link2,Download,Smartphone}from'lucide-react';import Header from'./components/Header';import ListingDetailModal from'./components/ListingDetailModal';import Footer from'./components/Footer';import BrowseView from'./components/BrowseView';import PrivacyPolicyModal from'./components/PrivacyPolicyModal';import NotificationBanner from'./components/NotificationBanner';import AnalyticsConsentModal from'./components/AnalyticsConsentModal';import NotificationsPanel from'./components/NotificationsPanel';import PhotoEditor from'./components/PhotoEditor';import OfflineIndicator from'./components/OfflineIndicator';import BackToTop from'./components/BackToTop';import{getNotifications}from'./utils/notificationEngine';import{loadListingTemplate,saveListingTemplate,clearListingTemplate}from'./utils/listingTemplateStorage';import{signUpWithEmail,signInWithEmail,signInWithGoogle,signOut as firebaseSignOut,resetPassword}from'./firebase';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export default function RentalPlatform(){const[currentView,setCurrentView]=useState('browse');const[userType,setUserType]=useState(null);const[previewAsRenter,setPreviewAsRenter]=useState(false);// landlord UI preview toggle\nconst[listings,setListings]=useState([]);const[selectedListing,setSelectedListing]=useState(null);const[users,setUsers]=useState([]);// registry of all users (localStorage 'users')\nconst[searchLocation,setSearchLocation]=useState('');const[priceRange,setPriceRange]=useState([0,10000]);const[selectedAmenities,setSelectedAmenities]=useState([]);const[sortBy,setSortBy]=useState('newest');const[currentUser,setCurrentUser]=useState(null);const[userProfile,setUserProfile]=useState(null);// Extended profile from Firestore\nconst[authLoading,setAuthLoading]=useState(true);// Loading state for auth\nconst[showAuthModal,setShowAuthModal]=useState(false);const[authDefaultType,setAuthDefaultType]=useState('renter');// Mobile menu state moved into Header component\nconst[toast,setToast]=useState(null);const[showPrivacyPolicy,setShowPrivacyPolicy]=useState(false);const[notificationBanner,setNotificationBanner]=useState(null);const[showAnalyticsConsent,setShowAnalyticsConsent]=useState(false);const[showNotificationsPanel,setShowNotificationsPanel]=useState(false);const[unreadCount,setUnreadCount]=useState(0);const[showInstallBanner,setShowInstallBanner]=useState(false);const[deferredPrompt,setDeferredPrompt]=useState(null);const openAuthModal=function(){let type=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'renter';setAuthDefaultType(type);setShowAuthModal(true);};// Auth functions to pass to AuthModal\nconst authFunctions={signUp:async function(email,password,displayName){let userTypeParam=arguments.length>3&&arguments[3]!==undefined?arguments[3]:'renter';let phone=arguments.length>4&&arguments[4]!==undefined?arguments[4]:'';const firebaseUser=await signUpWithEmail(email,password,displayName);// Create user profile in Firestore\nconst profileData={email:firebaseUser.email,displayName:displayName||firebaseUser.displayName,userType:userTypeParam,phone,photoURL:firebaseUser.photoURL||'',createdAt:new Date().toISOString(),landlordComplete:userTypeParam==='renter'};await saveUserProfile(firebaseUser.uid,profileData);return firebaseUser;},signIn:async(email,password)=>{return await signInWithEmail(email,password);},signInGoogle:async function(){let userTypeParam=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'renter';const firebaseUser=await signInWithGoogle();// Check if user profile exists\nlet profile=await getUserProfile(firebaseUser.uid);if(!profile){// Create new profile for Google user\nconst profileData={email:firebaseUser.email,displayName:firebaseUser.displayName||'',userType:userTypeParam,phone:firebaseUser.phoneNumber||'',photoURL:firebaseUser.photoURL||'',createdAt:new Date().toISOString(),landlordComplete:userTypeParam==='renter'};await saveUserProfile(firebaseUser.uid,profileData);}return firebaseUser;},sendPasswordReset:async email=>{await resetPassword(email);},sendPhoneOTP:async phoneNumber=>{// Initialize reCAPTCHA if not already done\ninitRecaptcha('phone-sign-in-button');return await sendPhoneOTP(phoneNumber);},verifyPhoneOTP:async function(otpCode){let userTypeParam=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'renter';let displayName=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';const firebaseUser=await verifyPhoneOTP(otpCode);// Check if user profile exists\nlet profile=await getUserProfile(firebaseUser.uid);if(!profile){// Create new profile for phone user\nconst profileData={email:'',displayName:displayName||firebaseUser.phoneNumber,userType:userTypeParam,phone:firebaseUser.phoneNumber||'',photoURL:'',createdAt:new Date().toISOString(),landlordComplete:userTypeParam==='renter'};await saveUserProfile(firebaseUser.uid,profileData);}return firebaseUser;},clearPhoneAuth:()=>{clearRecaptcha();}};// Update unread notification count\nuseEffect(()=>{const updateUnreadCount=()=>{const notifications=getNotifications();setUnreadCount(notifications.filter(n=>!n.read).length);};updateUnreadCount();const interval=setInterval(updateUnreadCount,5000);// check every 5s\nreturn()=>clearInterval(interval);},[]);// PWA Install Banner Logic\nuseEffect(()=>{// Check if already installed or dismissed\nconst isInstalled=window.matchMedia('(display-mode: standalone)').matches||window.navigator.standalone===true;const wasDismissed=localStorage.getItem('installBannerDismissed');const dismissedTime=wasDismissed?parseInt(wasDismissed,10):0;const daysSinceDismissed=(Date.now()-dismissedTime)/(1000*60*60*24);if(isInstalled){setShowInstallBanner(false);return;}// Listen for the beforeinstallprompt event\nconst handleBeforeInstallPrompt=e=>{e.preventDefault();setDeferredPrompt(e);// Show banner if not dismissed recently (within 7 days)\nif(!wasDismissed||daysSinceDismissed>7){setTimeout(()=>setShowInstallBanner(true),3000);// Show after 3 seconds\n}};window.addEventListener('beforeinstallprompt',handleBeforeInstallPrompt);// For iOS (no beforeinstallprompt), show manual instructions after delay\nconst isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent);if(isIOS&&!isInstalled&&(!wasDismissed||daysSinceDismissed>7)){setTimeout(()=>setShowInstallBanner(true),5000);}return()=>{window.removeEventListener('beforeinstallprompt',handleBeforeInstallPrompt);};},[]);const handleInstallClick=async()=>{if(deferredPrompt){deferredPrompt.prompt();const{outcome}=await deferredPrompt.userChoice;if(outcome==='accepted'){setShowInstallBanner(false);}setDeferredPrompt(null);}else{// iOS - show instructions\nshowToast('Tap the Share button, then \"Add to Home Screen\"','info','Install Room24');}};const dismissInstallBanner=()=>{setShowInstallBanner(false);localStorage.setItem('installBannerDismissed',Date.now().toString());};useEffect(()=>{loadData();// Initialize Firebase + FCM token fetch (deferred until user interaction if desired)\nconst app=initFirebase();// Set up Firebase Auth listener\nconst unsubscribeAuth=subscribeToAuthState(async firebaseUser=>{if(firebaseUser){setCurrentUser(firebaseUser);// Fetch extended profile from Firestore\ntry{const profile=await getUserProfile(firebaseUser.uid);if(profile){setUserProfile(profile);setUserType(profile.userType||'renter');}}catch(err){console.error('Error fetching user profile:',err);}}else{setCurrentUser(null);setUserProfile(null);setUserType(null);}setAuthLoading(false);});// Set up real-time listener for Firestore listings\nlet unsubscribeListings=null;if(isFirestoreEnabled()){unsubscribeListings=subscribeToListings(firestoreListings=>{if(firestoreListings&&firestoreListings.length>=0){setListings(firestoreListings);// Cache locally for offline access\nlocalStorage.setItem('listings',JSON.stringify(firestoreListings));}});}// Check analytics consent and show modal if not set\nconst analyticsConsent=localStorage.getItem('analytics-consent');if(!analyticsConsent&&process.env.REACT_APP_ENABLE_ANALYTICS==='true'){// Delay modal slightly so UI loads first\nsetTimeout(()=>setShowAnalyticsConsent(true),2000);}else if(analyticsConsent==='yes'){initAnalytics(app);}(async()=>{try{const token=await requestFcmToken();if(token){console.log('Obtained FCM token:',token);trackEvent('fcm_token_obtained');}}catch(e){console.warn('FCM token request failed',e);}})();listenForegroundMessages(payload=>{// Display notification banner instead of toast\nconst notification=(payload===null||payload===void 0?void 0:payload.notification)||{};if(notification.title||notification.body){setNotificationBanner({title:notification.title,body:notification.body});// Auto-dismiss after 8 seconds\nsetTimeout(()=>setNotificationBanner(null),8000);}});// Cleanup: unsubscribe from listeners on unmount\nreturn()=>{if(unsubscribeAuth){unsubscribeAuth();}if(unsubscribeListings){unsubscribeListings();}};},[]);// Guard: if someone navigates to 'add' without landlord auth, prompt to sign in\nuseEffect(()=>{if(authLoading)return;// Wait for auth to load\nif(currentView==='add'){if(!currentUser){openAuthModal('landlord');setCurrentView('browse');}else if(userType!=='landlord'){// Not a landlord - prompt to become one\nopenAuthModal('landlord');setCurrentView('browse');}else if(!(userProfile!==null&&userProfile!==void 0&&userProfile.landlordComplete)){// Landlord but hasn't completed onboarding\nsetCurrentView('landlord-onboarding');}}},[currentView,currentUser,userType,userProfile,authLoading]);const loadData=async()=>{try{// Try to load from Firestore first\nconst firestoreListings=await fetchListings();if(firestoreListings&&firestoreListings.length>0){console.log('Loaded listings from Firestore');setListings(firestoreListings);// Also cache to localStorage for offline access\nlocalStorage.setItem('listings',JSON.stringify(firestoreListings));}else{// Fall back to localStorage\nconst listingsResult=localStorage.getItem('listings');if(listingsResult){console.log('Loaded listings from localStorage (Firestore empty or unavailable)');setListings(JSON.parse(listingsResult));}}const userResult=localStorage.getItem('current-user');const usersResult=localStorage.getItem('users');if(userResult){const user=JSON.parse(userResult);setCurrentUser(user);setUserType(user.type);}if(usersResult){try{const parsed=JSON.parse(usersResult);setUsers(Array.isArray(parsed)?parsed:[]);}catch(e){console.warn('Corrupt users array in storage, resetting');setUsers([]);}}}catch(error){console.log('No existing data found, starting fresh');// Add sample listings for testing the map\nconst sampleListings=[{id:'listing-1',title:'Cozy Room in Soweto',price:2500,location:'Soweto, Johannesburg',description:'Comfortable room with bathroom and kitchen access',photos:[],status:'available',availableDate:new Date().toISOString(),amenities:['WiFi','Kitchen'],landlordId:'landlord-1',landlordName:'John Smith',landlordPhone:'+27 123 456 7890',landlordEmail:'john@example.com',landlordPhoto:'',createdAt:new Date().toISOString()},{id:'listing-2',title:'Modern Apartment in Sandton',price:4500,location:'Sandton, Johannesburg',description:'Luxurious apartment with parking and security',photos:[],status:'available',availableDate:new Date().toISOString(),amenities:['WiFi','Parking','Air Conditioning'],landlordId:'landlord-2',landlordName:'Jane Doe',landlordPhone:'+27 987 654 3210',landlordEmail:'jane@example.com',landlordPhoto:'',createdAt:new Date().toISOString()},{id:'listing-3',title:'Studio in Midrand',price:3200,location:'Midrand, Johannesburg',description:'Spacious studio flat with laundry facilities',photos:[],status:'available',availableDate:new Date().toISOString(),amenities:['Laundry','WiFi'],landlordId:'landlord-3',landlordName:'Mike Johnson',landlordPhone:'+27 555 555 5555',landlordEmail:'mike@example.com',landlordPhoto:'',createdAt:new Date().toISOString()}];setListings(sampleListings);}};// Helper: check for duplicate phone or email in registry (exclude an optional user id)\nconst isDuplicateContact=function(phone,email){let ignoreId=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;const normalizedPhone=(phone||'').trim();const normalizedEmail=(email||'').trim().toLowerCase();if(!users||users.length===0)return false;return users.some(u=>{if(ignoreId&&u.id===ignoreId)return false;const uPhone=(u.phone||'').trim();const uEmail=(u.email||'').trim().toLowerCase();const phoneMatch=normalizedPhone&&uPhone&&uPhone===normalizedPhone;const emailMatch=normalizedEmail&&uEmail&&uEmail===normalizedEmail;return phoneMatch||emailMatch;});};// Toast notification helper\nconst showToast=function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'info';let title=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'';setToast({message,type,title});setTimeout(()=>setToast(null),5000);};const handleAnalyticsConsentAccept=()=>{localStorage.setItem('analytics-consent','yes');setShowAnalyticsConsent(false);const app=initFirebase();initAnalytics(app);trackEvent('analytics_consent_granted');showToast('Analytics enabled','success','Thank you!');};const handleAnalyticsConsentDecline=()=>{localStorage.setItem('analytics-consent','no');setShowAnalyticsConsent(false);showToast('Analytics disabled','info');};const saveListings=async newListings=>{try{localStorage.setItem('listings',JSON.stringify(newListings));setListings(newListings);// Broadcast to runtime service worker for offline snapshot caching\nif(navigator.serviceWorker&&navigator.serviceWorker.controller){try{navigator.serviceWorker.controller.postMessage({type:'SYNC_LISTINGS',payload:newListings});}catch(_unused){}}}catch(error){console.error('Error saving listings:',error);}};const saveSubscriptions=async subscriptions=>{try{localStorage.setItem('subscriptions',JSON.stringify(subscriptions));}catch(error){console.error('Error saving subscriptions:',error);}};const getSubscriptions=async()=>{try{const res=localStorage.getItem('subscriptions');return res?JSON.parse(res):{};}catch(err){console.error('Error loading subscriptions',err);}return{};};const subscribeToArea=async(userId,area)=>{if(!userId){openAuthModal('renter');return;}if(!area||area.trim()===''){alert('Please enter a location to subscribe to.');return;}try{const subs=await getSubscriptions();subs[userId]=subs[userId]||[];if(!subs[userId].includes(area)){subs[userId].push(area);await saveSubscriptions(subs);alert(\"Subscribed to updates for \".concat(area));}else{alert(\"You are already subscribed to \".concat(area));}}catch(err){console.error('Subscribe failed',err);alert('Could not subscribe. Please try again.');}};const handleProfileSetup=async profileData=>{try{// Duplicate guard\nif(isDuplicateContact(profileData.phone,profileData.email)){showToast('Phone or email already registered','error','Duplicate');return;}const userId=\"user-\".concat(Date.now());const user=_objectSpread(_objectSpread({id:userId,type:userType},profileData),{},{whatsapp:profileData.whatsapp||'',notificationPrefs:{updates:true,marketing:false},createdAt:new Date().toISOString()});localStorage.setItem('current-user',JSON.stringify(user));setCurrentUser(user);// Update users registry\nconst existingUsersRaw=localStorage.getItem('users');let existingUsers=[];if(existingUsersRaw){try{existingUsers=JSON.parse(existingUsersRaw);}catch(_unused2){existingUsers=[];}}existingUsers.push(user);localStorage.setItem('users',JSON.stringify(existingUsers));setUsers(existingUsers);showToast('Profile created successfully!','success','Welcome!');setCurrentView('browse');}catch(error){console.error('Error saving profile:',error);// Still set the user locally even if storage fails\nconst userId=\"user-\".concat(Date.now());const user=_objectSpread(_objectSpread({id:userId,type:userType},profileData),{},{whatsapp:profileData.whatsapp||'',createdAt:new Date().toISOString()});setCurrentUser(user);const existingUsersRaw=localStorage.getItem('users');let existingUsers=[];if(existingUsersRaw){try{existingUsers=JSON.parse(existingUsersRaw);}catch(_unused3){existingUsers=[];}}existingUsers.push(user);try{localStorage.setItem('users',JSON.stringify(existingUsers));}catch(_unused4){}setUsers(existingUsers);showToast('Profile created (data may not be persisted)','error');setCurrentView('browse');}};const handleUpdateProfile=async profileData=>{try{// Duplicate guard (exclude current user id)\nif(isDuplicateContact(profileData.phone,profileData.email,currentUser===null||currentUser===void 0?void 0:currentUser.id)){showToast('Phone or email already used by another account','error','Duplicate');return;}const updatedUser=_objectSpread(_objectSpread({},currentUser),profileData);localStorage.setItem('current-user',JSON.stringify(updatedUser));setCurrentUser(updatedUser);// Update registry entry\nconst existingUsersRaw=localStorage.getItem('users');let existingUsers=[];if(existingUsersRaw){try{existingUsers=JSON.parse(existingUsersRaw);}catch(_unused5){existingUsers=[];}}const idx=existingUsers.findIndex(u=>u.id===updatedUser.id);if(idx!==-1){existingUsers[idx]=updatedUser;}else{existingUsers.push(updatedUser);// ensure presence\n}localStorage.setItem('users',JSON.stringify(existingUsers));setUsers(existingUsers);showToast('Profile updated successfully!','success');setCurrentView('browse');}catch(error){console.error('Error updating profile:',error);const updatedUser=_objectSpread(_objectSpread({},currentUser),profileData);setCurrentUser(updatedUser);const existingUsersRaw=localStorage.getItem('users');let existingUsers=[];if(existingUsersRaw){try{existingUsers=JSON.parse(existingUsersRaw);}catch(_unused6){existingUsers=[];}}const idx=existingUsers.findIndex(u=>u.id===updatedUser.id);if(idx!==-1){existingUsers[idx]=updatedUser;}else{existingUsers.push(updatedUser);}try{localStorage.setItem('users',JSON.stringify(existingUsers));}catch(_unused7){}setUsers(existingUsers);showToast('Profile updated (data may not be persisted)','error');setCurrentView('browse');}};// Sign out using Firebase\nconst handleSignOut=async()=>{try{await firebaseSignOut();setCurrentUser(null);setUserProfile(null);setUserType(null);setCurrentView('browse');showToast('Signed out successfully.','info');}catch(e){console.error('Sign out error:',e);showToast('Error signing out. Please try again.','error');}};const handleCompleteOnboarding=async onboardData=>{try{if(currentUser!==null&&currentUser!==void 0&&currentUser.uid){await saveUserProfile(currentUser.uid,{landlordComplete:true,landlordInfo:onboardData});setUserProfile(prev=>_objectSpread(_objectSpread({},prev),{},{landlordComplete:true,landlordInfo:onboardData}));}setCurrentView('browse');showToast('Profile complete! You can now create listings.','success');}catch(err){console.error('Onboarding save failed',err);setCurrentView('browse');}};const handleAddListing=async listingData=>{var _listingData$latitude,_listingData$longitud;// Combine streetAddress and location into fullAddress for complete address storage\nconst fullAddress=[listingData.streetAddress,listingData.location].filter(Boolean).join(', ');const newListingData={title:listingData.title,price:listingData.price,location:listingData.location,streetAddress:listingData.streetAddress||'',fullAddress:fullAddress||listingData.location||'',// Store complete address\ndescription:listingData.description,photos:listingData.photos||[],status:listingData.status||'available',availableDate:listingData.availableDate||new Date().toISOString(),amenities:listingData.amenities||[],latitude:(_listingData$latitude=listingData.latitude)!==null&&_listingData$latitude!==void 0?_listingData$latitude:null,longitude:(_listingData$longitud=listingData.longitude)!==null&&_listingData$longitud!==void 0?_listingData$longitud:null,paymentMethod:listingData.paymentMethod||'Bank and Cash',premium:!!listingData.premium,// Use Firebase UID for landlordId\nlandlordId:(currentUser===null||currentUser===void 0?void 0:currentUser.uid)||(currentUser===null||currentUser===void 0?void 0:currentUser.id),landlordName:(userProfile===null||userProfile===void 0?void 0:userProfile.displayName)||(currentUser===null||currentUser===void 0?void 0:currentUser.displayName)||'',landlordPhone:(userProfile===null||userProfile===void 0?void 0:userProfile.phone)||'',landlordEmail:(currentUser===null||currentUser===void 0?void 0:currentUser.email)||'',landlordPhoto:(userProfile===null||userProfile===void 0?void 0:userProfile.photoURL)||(currentUser===null||currentUser===void 0?void 0:currentUser.photoURL)||''};try{// Try to save to Firestore first\nconst firestoreId=await addListing(newListingData);if(firestoreId){// Successfully saved to Firestore\nconst newListing=_objectSpread(_objectSpread({},newListingData),{},{id:firestoreId,createdAt:new Date().toISOString()});const updatedListings=[...listings,newListing];setListings(updatedListings);// Also cache locally\nlocalStorage.setItem('listings',JSON.stringify(updatedListings));showToast('Listing created and shared online!','success','Success!');}else{// Firestore not available, save locally only\nconst newListing=_objectSpread(_objectSpread({},newListingData),{},{id:\"listing-\".concat(Date.now()),createdAt:new Date().toISOString()});const updatedListings=[...listings,newListing];await saveListings(updatedListings);showToast('Listing saved locally (offline mode)','info','Saved');}}catch(error){console.error('Error adding listing:',error);// Fall back to local save\nconst newListing=_objectSpread(_objectSpread({},newListingData),{},{id:\"listing-\".concat(Date.now()),createdAt:new Date().toISOString()});const updatedListings=[...listings,newListing];await saveListings(updatedListings);showToast('Listing saved locally','info','Saved');}setCurrentView('browse');// Scroll to top to see new listing\nwindow.scrollTo({top:0,behavior:'smooth'});};// Messaging removed\nconst filteredListings=listings.filter(listing=>{const matchesLocation=!searchLocation||(listing.location||'').toLowerCase().includes(searchLocation.toLowerCase());const price=parseFloat(listing.price);const matchesPrice=price>=priceRange[0]&&price<=priceRange[1];const matchesAmenities=selectedAmenities.length===0||selectedAmenities.every(amenity=>{var _listing$amenities;return(_listing$amenities=listing.amenities)===null||_listing$amenities===void 0?void 0:_listing$amenities.includes(amenity);});return matchesLocation&&matchesPrice&&matchesAmenities;}).sort((a,b)=>{if(a.premium&&!b.premium)return-1;if(!a.premium&&b.premium)return 1;if(sortBy==='newest'){return new Date(b.createdAt)-new Date(a.createdAt);}else if(sortBy==='cheapest'){return parseFloat(a.price)-parseFloat(b.price);}else if(sortBy==='expensive'){return parseFloat(b.price)-parseFloat(a.price);}return 0;});// Allow guests to land on Browse by default. If userType isn't set,\n// show a gentle callout in the header (below) so users can pick a role\n// when they want to post or set up their profile.\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-b from-slate-50 to-gray-100\",children:[/*#__PURE__*/_jsx(OfflineIndicator,{}),showInstallBanner&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed bottom-20 left-4 right-4 md:left-auto md:right-4 md:max-w-sm z-50 bg-gradient-to-r from-teal-600 to-cyan-600 rounded-2xl shadow-2xl p-4 fade-in border border-teal-400/30\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center flex-shrink-0\",children:/*#__PURE__*/_jsx(Smartphone,{className:\"w-6 h-6 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold text-white text-sm\",children:\"Install Room24\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-teal-100 text-xs mt-0.5\",children:\"Add to your home screen for the best experience!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2 mt-3\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:handleInstallClick,className:\"flex items-center gap-1.5 px-4 py-2 bg-white text-teal-700 font-semibold text-xs rounded-lg hover:bg-teal-50 transition-colors shadow-sm\",children:[/*#__PURE__*/_jsx(Download,{className:\"w-4 h-4\"}),\"Install\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:dismissInstallBanner,className:\"px-3 py-2 text-white/80 hover:text-white text-xs font-medium transition-colors\",children:\"Maybe Later\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:dismissInstallBanner,className:\"text-white/60 hover:text-white transition-colors p-1\",children:/*#__PURE__*/_jsx(X,{className:\"w-4 h-4\"})})]})}),/*#__PURE__*/_jsx(BackToTop,{}),/*#__PURE__*/_jsx(Header,{currentUser:currentUser,previewAsRenter:previewAsRenter,setPreviewAsRenter:setPreviewAsRenter,openAuthModal:openAuthModal,handleSignOut:handleSignOut,setCurrentView:setCurrentView,unreadCount:unreadCount,onOpenNotifications:()=>setShowNotificationsPanel(true)}),notificationBanner&&/*#__PURE__*/_jsx(NotificationBanner,{title:notificationBanner.title,body:notificationBanner.body,onClose:()=>setNotificationBanner(null)}),toast&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed top-20 right-4 z-50 max-w-sm w-full transition-all duration-300 \".concat(toast.type==='error'?'bg-gradient-to-r from-rose-50 to-red-50 border-rose-400':toast.type==='success'?'bg-gradient-to-r from-emerald-50 to-green-50 border-emerald-400':toast.type==='warning'?'bg-gradient-to-r from-amber-50 to-yellow-50 border-amber-400':'bg-gradient-to-r from-sky-50 to-blue-50 border-sky-400',\" border-l-4 rounded-xl shadow-2xl p-4 fade-in backdrop-blur-sm\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-shrink-0 w-8 h-8 rounded-xl flex items-center justify-center shadow-sm \".concat(toast.type==='error'?'bg-rose-500':toast.type==='success'?'bg-emerald-500':toast.type==='warning'?'bg-amber-500':'bg-sky-500'),children:[toast.type==='success'&&/*#__PURE__*/_jsx(CheckCircle,{className:\"w-5 h-5 text-white\"}),toast.type==='error'&&/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-bold text-sm\",children:\"\\u2715\"}),toast.type==='warning'&&/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-bold text-sm\",children:\"!\"}),toast.type==='info'&&/*#__PURE__*/_jsx(\"span\",{className:\"text-white font-bold text-sm\",children:\"i\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1 min-w-0\",children:[toast.title&&/*#__PURE__*/_jsx(\"p\",{className:\"font-bold mb-0.5 \".concat(toast.type==='error'?'text-rose-800':toast.type==='success'?'text-emerald-800':toast.type==='warning'?'text-amber-800':'text-sky-800'),children:toast.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm \".concat(toast.type==='error'?'text-rose-700':toast.type==='success'?'text-emerald-700':toast.type==='warning'?'text-amber-700':'text-sky-700'),children:toast.message})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setToast(null),className:\"flex-shrink-0 p-1.5 rounded-lg hover:bg-white/50 transition \".concat(toast.type==='error'?'text-rose-500 hover:text-rose-700':toast.type==='success'?'text-emerald-500 hover:text-emerald-700':toast.type==='warning'?'text-amber-500 hover:text-amber-700':'text-sky-500 hover:text-sky-700'),\"aria-label\":\"Close notification\",children:/*#__PURE__*/_jsx(X,{className:\"w-4 h-4\"})})]})}),/*#__PURE__*/_jsxs(\"div\",{id:\"main-content\",className:\"max-w-7xl mx-auto pb-24 px-4 sm:px-6 lg:px-8\",role:\"main\",children:[currentView==='setup-profile'&&/*#__PURE__*/_jsx(ProfileSetupView,{onSubmit:handleProfileSetup,userType:userType}),currentView==='profile'&&currentUser&&/*#__PURE__*/_jsx(ProfileView,{user:{name:(userProfile===null||userProfile===void 0?void 0:userProfile.displayName)||(currentUser===null||currentUser===void 0?void 0:currentUser.displayName)||'',email:(currentUser===null||currentUser===void 0?void 0:currentUser.email)||'',phone:(userProfile===null||userProfile===void 0?void 0:userProfile.phone)||'',photo:(userProfile===null||userProfile===void 0?void 0:userProfile.photoURL)||(currentUser===null||currentUser===void 0?void 0:currentUser.photoURL)||'',type:(userProfile===null||userProfile===void 0?void 0:userProfile.userType)||userType||'renter',notificationPrefs:(userProfile===null||userProfile===void 0?void 0:userProfile.notificationPrefs)||{updates:true,marketing:false}},onEdit:()=>setCurrentView('edit-profile'),onSignOut:handleSignOut,linkedProviders:getLinkedProviders(),onLinkGoogle:async()=>{await linkGoogleAccount();// Refresh to show updated providers\nwindow.location.reload();},onLinkPhone:()=>{// Open auth modal for phone linking\nshowToast('Phone linking coming soon!','info');},onUpdatePrefs:async prefs=>{if(currentUser!==null&&currentUser!==void 0&&currentUser.uid){try{await saveUserProfile(currentUser.uid,{notificationPrefs:prefs});setUserProfile(prev=>_objectSpread(_objectSpread({},prev),{},{notificationPrefs:prefs}));showToast('Preferences updated','success');}catch(err){console.error('Failed to update prefs:',err);showToast('Failed to update preferences','error');}}}}),currentView==='edit-profile'&&currentUser&&/*#__PURE__*/_jsx(EditProfileView,{user:currentUser,onSubmit:handleUpdateProfile,onCancel:()=>setCurrentView('profile')}),currentView==='landlord-onboarding'&&currentUser&&userType==='landlord'&&/*#__PURE__*/_jsx(LandlordOnboardingView,{onComplete:handleCompleteOnboarding,onCancel:()=>setCurrentView('browse'),currentUser:currentUser}),currentView==='browse'&&/*#__PURE__*/_jsx(BrowseView,{listings:filteredListings,searchLocation:searchLocation,setSearchLocation:setSearchLocation,priceRange:priceRange,setPriceRange:setPriceRange,selectedAmenities:selectedAmenities,setSelectedAmenities:setSelectedAmenities,sortBy:sortBy,setSortBy:setSortBy,onSelectListing:setSelectedListing,setCurrentView:setCurrentView,currentUser:currentUser,onRequireAuth:openAuthModal,subscribeToArea:subscribeToArea,previewMode:previewAsRenter}),currentView==='add'&&/*#__PURE__*/_jsx(AddListingView,{onSubmit:handleAddListing,onCancel:()=>setCurrentView('browse'),currentUser:currentUser,userType:userType,onRequireAuth:openAuthModal,onRequireOnboarding:()=>setCurrentView('landlord-onboarding')}),currentView==='my-listings'&&currentUser&&userType==='landlord'&&/*#__PURE__*/_jsx(MyListingsView,{listings:listings.filter(l=>l.landlordId===currentUser.uid||l.landlordId===currentUser.id),onDelete:async id=>{try{// Try to delete from Firestore first\nconst deleted=await deleteListing(id);if(deleted){showToast('Listing deleted','success');}}catch(error){console.error('Firestore delete failed:',error);}// Also update local state and localStorage\nconst updated=listings.filter(l=>l.id!==id);setListings(updated);localStorage.setItem('listings',JSON.stringify(updated));}}),currentView==='favorites'&&/*#__PURE__*/_jsx(FavoritesView,{listings:listings,onSelectListing:setSelectedListing})]}),selectedListing&&/*#__PURE__*/_jsx(ListingDetailModal,{listing:selectedListing,landlord:{name:selectedListing.landlordName,phone:selectedListing.landlordPhone,email:selectedListing.landlordEmail,photo:selectedListing.landlordPhoto},onClose:()=>setSelectedListing(null),userType:userType,currentUser:currentUser,onRequireAuth:openAuthModal,previewMode:previewAsRenter,showToast:showToast}),showAuthModal&&/*#__PURE__*/_jsx(AuthModal,{defaultType:authDefaultType,onClose:()=>setShowAuthModal(false),onSuccess:()=>{showToast('Signed in successfully!','success','Welcome!');},authFunctions:authFunctions}),/*#__PURE__*/_jsx(BottomNav,{currentView:currentView,setCurrentView:setCurrentView,userType:userType}),showPrivacyPolicy&&/*#__PURE__*/_jsx(PrivacyPolicyModal,{onClose:()=>setShowPrivacyPolicy(false)}),showAnalyticsConsent&&/*#__PURE__*/_jsx(AnalyticsConsentModal,{onAccept:handleAnalyticsConsentAccept,onDecline:handleAnalyticsConsentDecline}),showNotificationsPanel&&/*#__PURE__*/_jsx(NotificationsPanel,{onClose:()=>{setShowNotificationsPanel(false);setUnreadCount(getNotifications().filter(n=>!n.read).length);},onSelectListing:listingId=>{const listing=listings.find(l=>(l.id||\"\".concat(l.title,\"-\").concat(l.createdAt))===listingId);if(listing){setSelectedListing(listing);}setShowNotificationsPanel(false);}}),/*#__PURE__*/_jsx(Footer,{onOpenPrivacy:()=>setShowPrivacyPolicy(true)})]});}function ProfileSetupView(_ref){let{onSubmit,userType}=_ref;const[formData,setFormData]=useState({name:'',phone:'',email:'',whatsapp:'',photo:''});const[errors,setErrors]=useState({});const[touched,setTouched]=useState({});const validateField=function(name,value){let extras=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};const newErrors=_objectSpread({},errors);switch(name){case'name':if(!value||value.trim().length<2){newErrors.name='Name must be at least 2 characters';}else{delete newErrors.name;}break;case'phone':if(!value||!/^[+]?[-0-9()\\s]{7,}$/.test(value.trim())){newErrors.phone='Enter a valid phone number (min 7 digits)';}else{delete newErrors.phone;}break;case'email':if(!value||!/^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$/.test(value.trim())){newErrors.email='Enter a valid email address';}else{delete newErrors.email;}break;case'photo':if(value==='FILE_TOO_LARGE'){newErrors.photo='Photo is too large (max 2MB)';}else{delete newErrors.photo;}break;default:break;}setErrors(newErrors);};const handlePhotoUpload=e=>{const file=e.target.files[0];if(file){if(file.size>2*1024*1024){// 2MB limit\nsetFormData(_objectSpread(_objectSpread({},formData),{},{photo:''}));validateField('photo','FILE_TOO_LARGE');return;}const reader=new FileReader();reader.onloadend=()=>{setFormData(_objectSpread(_objectSpread({},formData),{},{photo:reader.result}));validateField('photo',reader.result);};reader.readAsDataURL(file);}};const handleSubmit=()=>{// Touch all fields\nconst allTouched={name:true,phone:true,email:true,photo:true};setTouched(allTouched);validateField('name',formData.name);validateField('phone',formData.phone);validateField('email',formData.email);if(Object.keys(errors).length===0&&formData.name&&formData.phone&&formData.email){onSubmit(formData);}};return/*#__PURE__*/_jsx(\"div\",{className:\"p-4 min-h-screen bg-gradient-to-b from-slate-50 to-gray-100 pb-24\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-2xl mx-auto mt-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg border border-gray-100 p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-extrabold text-gray-900 mb-2\",children:\"Complete Your Profile\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Help others know who you are\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[formData.photo?/*#__PURE__*/_jsx(\"img\",{src:formData.photo,alt:\"Profile\",className:\"w-32 h-32 rounded-full object-cover border-4 border-blue-200 shadow-lg\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-32 h-32 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center border-4 border-blue-200 shadow-lg\",children:/*#__PURE__*/_jsx(User,{className:\"w-16 h-16 text-blue-600\"})}),/*#__PURE__*/_jsxs(\"label\",{className:\"absolute bottom-0 right-0 bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full cursor-pointer shadow-lg transition group\",\"aria-label\":\"Upload profile photo\",children:[/*#__PURE__*/_jsx(Edit,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handlePhotoUpload,className:\"hidden\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Full Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:formData.name,onChange:e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{name:e.target.value}));if(touched.name)validateField('name',e.target.value);},onBlur:e=>{setTouched(_objectSpread(_objectSpread({},touched),{},{name:true}));validateField('name',e.target.value);},placeholder:\"Enter your full name\",\"aria-invalid\":errors.name?'true':'false',\"aria-describedby\":errors.name?'profile-name-error':undefined,className:\"w-full px-4 py-3 border-2 \".concat(errors.name?'border-red-400':'border-gray-200',\" bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400\")}),errors.name&&touched.name&&/*#__PURE__*/_jsx(\"p\",{id:\"profile-name-error\",className:\"mt-1 text-xs text-red-600\",children:errors.name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Phone Number *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Phone,{className:\"absolute left-4 top-3.5 w-5 h-5 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",required:true,value:formData.phone,onChange:e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{phone:e.target.value}));if(touched.phone)validateField('phone',e.target.value);},onBlur:e=>{setTouched(_objectSpread(_objectSpread({},touched),{},{phone:true}));validateField('phone',e.target.value);},placeholder:\"e.g., +27 12 345 6789\",\"aria-invalid\":errors.phone?'true':'false',\"aria-describedby\":errors.phone?'profile-phone-error':undefined,className:\"w-full pl-11 pr-4 py-3 border-2 \".concat(errors.phone?'border-red-400':'border-gray-200',\" bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400\")})]}),errors.phone&&touched.phone&&/*#__PURE__*/_jsx(\"p\",{id:\"profile-phone-error\",className:\"mt-1 text-xs text-red-600\",children:errors.phone})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Email Address *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Mail,{className:\"absolute left-4 top-3.5 w-5 h-5 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",required:true,value:formData.email,onChange:e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{email:e.target.value}));if(touched.email)validateField('email',e.target.value);},onBlur:e=>{setTouched(_objectSpread(_objectSpread({},touched),{},{email:true}));validateField('email',e.target.value);},placeholder:\"your.email@example.com\",\"aria-invalid\":errors.email?'true':'false',\"aria-describedby\":errors.email?'profile-email-error':undefined,className:\"w-full pl-11 pr-4 py-3 border-2 \".concat(errors.email?'border-red-400':'border-gray-200',\" bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400\")})]}),errors.email&&touched.email&&/*#__PURE__*/_jsx(\"p\",{id:\"profile-email-error\",className:\"mt-1 text-xs text-red-600\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"WhatsApp (optional)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Phone,{className:\"absolute left-4 top-3.5 w-5 h-5 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:formData.whatsapp,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{whatsapp:e.target.value})),placeholder:\"e.g., +27 71 234 5678\",className:\"w-full pl-11 pr-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Used to create a WhatsApp chat link on your listings.\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"w-full bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white font-semibold py-3 rounded-xl transition mt-8 shadow-lg hover:shadow-xl\",children:\"Complete Setup\"})]})]})})});}function ProfileView(_ref2){var _user$name,_user$name$charAt;let{user,onEdit,onUpdatePrefs,onSignOut,linkedProviders,onLinkGoogle,onLinkPhone}=_ref2;const prefs=user.notificationPrefs||{updates:true,marketing:false};const[localPrefs,setLocalPrefs]=React.useState(prefs);const[linkingInProgress,setLinkingInProgress]=React.useState(null);const[linkError,setLinkError]=React.useState('');const[linkSuccess,setLinkSuccess]=React.useState('');const togglePref=key=>{const next=_objectSpread(_objectSpread({},localPrefs),{},{[key]:!localPrefs[key]});setLocalPrefs(next);onUpdatePrefs&&onUpdatePrefs(next);};const handleLinkGoogle=async()=>{if(!onLinkGoogle)return;setLinkingInProgress('google');setLinkError('');setLinkSuccess('');try{await onLinkGoogle();setLinkSuccess('Google account linked successfully!');}catch(err){setLinkError(err.message||'Failed to link Google account');}finally{setLinkingInProgress(null);}};const handleLinkPhone=()=>{if(!onLinkPhone)return;onLinkPhone();};const hasGoogle=linkedProviders===null||linkedProviders===void 0?void 0:linkedProviders.includes('google.com');const hasPhone=linkedProviders===null||linkedProviders===void 0?void 0:linkedProviders.includes('phone');const hasPassword=linkedProviders===null||linkedProviders===void 0?void 0:linkedProviders.includes('password');return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-b from-slate-50 to-gray-100 pb-24\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-teal-600 via-teal-500 to-cyan-500 pt-8 pb-20 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-xl mx-auto flex justify-between items-start\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white\",children:\"My Profile\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:onEdit,className:\"bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white px-4 py-2 rounded-xl transition-all duration-200 flex items-center gap-2 border border-white/30\",children:[/*#__PURE__*/_jsx(Edit,{className:\"w-4 h-4\"}),\"Edit\"]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 -mt-16\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl border border-gray-100 p-6 max-w-xl mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col items-center -mt-16 mb-6\",children:[user.photo?/*#__PURE__*/_jsx(\"img\",{src:user.photo,alt:\"Profile\",className:\"w-28 h-28 rounded-2xl object-cover border-4 border-white shadow-lg mb-4\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-28 h-28 rounded-2xl bg-gradient-to-br from-teal-400 to-cyan-500 flex items-center justify-center border-4 border-white shadow-lg mb-4\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-4xl font-bold text-white\",children:((_user$name=user.name)===null||_user$name===void 0?void 0:(_user$name$charAt=_user$name.charAt(0))===null||_user$name$charAt===void 0?void 0:_user$name$charAt.toUpperCase())||'U'})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-bold text-gray-900\",children:user.name}),/*#__PURE__*/_jsx(\"span\",{className:\"inline-flex items-center mt-2 px-4 py-1.5 bg-gradient-to-r from-teal-50 to-cyan-50 text-teal-700 rounded-full text-sm font-semibold border border-teal-100\",children:user.type==='landlord'?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Home,{className:\"w-4 h-4 mr-1.5\"}),\"Landlord\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(User,{className:\"w-4 h-4 mr-1.5\"}),\"Renter\"]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3 mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-gray-50 to-slate-50 rounded-xl p-4 border border-gray-100 hover:border-gray-200 transition-colors\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-11 h-11 bg-gradient-to-br from-teal-100 to-cyan-100 rounded-xl flex items-center justify-center mr-4 shadow-sm\",children:/*#__PURE__*/_jsx(Phone,{className:\"w-5 h-5 text-teal-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-medium text-gray-500 mb-0.5\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-800\",children:user.phone})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-gray-50 to-slate-50 rounded-xl p-4 border border-gray-100 hover:border-gray-200 transition-colors\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-11 h-11 bg-gradient-to-br from-cyan-100 to-blue-100 rounded-xl flex items-center justify-center mr-4 shadow-sm\",children:/*#__PURE__*/_jsx(Mail,{className:\"w-5 h-5 text-cyan-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-medium text-gray-500 mb-0.5\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-800\",children:user.email})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-gray-50 to-slate-50 rounded-xl p-4 border border-gray-100 hover:border-gray-200 transition-colors\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-11 h-11 bg-gradient-to-br from-violet-100 to-purple-100 rounded-xl flex items-center justify-center mr-4 shadow-sm\",children:/*#__PURE__*/_jsx(Calendar,{className:\"w-5 h-5 text-violet-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs font-medium text-gray-500 mb-0.5\",children:\"Member Since\"}),/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-800\",children:new Date(user.createdAt).toLocaleDateString('en-ZA',{year:'numeric',month:'long',day:'numeric'})})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-teal-50 via-cyan-50 to-sky-50 rounded-xl p-5 border border-teal-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-gradient-to-br from-teal-500 to-cyan-500 rounded-xl flex items-center justify-center shadow-sm\",children:/*#__PURE__*/_jsx(Bell,{className:\"w-5 h-5 text-white\"})}),/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold text-gray-800\",children:\"Notification Preferences\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-3\",children:[/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-3 p-3 bg-white rounded-lg border border-gray-100 cursor-pointer hover:border-teal-200 transition-colors\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:localPrefs.updates,onChange:()=>togglePref('updates'),className:\"w-5 h-5 rounded border-gray-300 text-teal-600 focus:ring-teal-500\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-800\",children:\"Room Alerts\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Get notified about new rooms in your saved areas\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-center gap-3 p-3 bg-white rounded-lg border border-gray-100 cursor-pointer hover:border-teal-200 transition-colors\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:localPrefs.marketing,onChange:()=>togglePref('marketing'),className:\"w-5 h-5 rounded border-gray-300 text-teal-600 focus:ring-teal-500\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-800\",children:\"Tips & Updates\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Occasional features and helpful content\"})]})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[11px] text-gray-500 mt-3 text-center\",children:\"Changes save automatically \\u2022 You can opt out anytime\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-blue-50 via-indigo-50 to-violet-50 rounded-xl p-5 border border-blue-100 mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 mb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-xl flex items-center justify-center shadow-sm\",children:/*#__PURE__*/_jsx(Link2,{className:\"w-5 h-5 text-white\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold text-gray-800\",children:\"Linked Accounts\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Connect multiple sign-in methods\"})]})]}),linkSuccess&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700 text-sm flex items-center gap-2\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-4 h-4\"}),linkSuccess]}),linkError&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-3 p-3 bg-rose-50 border border-rose-200 rounded-lg text-rose-700 text-sm flex items-center gap-2\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-4 h-4\"}),linkError]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-white rounded-lg border \".concat(hasGoogle?'border-green-200':'border-gray-100'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"w-5 h-5\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"path\",{fill:\"#4285F4\",d:\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"}),/*#__PURE__*/_jsx(\"path\",{fill:\"#34A853\",d:\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"}),/*#__PURE__*/_jsx(\"path\",{fill:\"#FBBC05\",d:\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"}),/*#__PURE__*/_jsx(\"path\",{fill:\"#EA4335\",d:\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"})]}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-700\",children:\"Google\"})]}),hasGoogle?/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs font-medium text-green-600 flex items-center gap-1\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-4 h-4\"}),\" Linked\"]}):/*#__PURE__*/_jsx(\"button\",{onClick:handleLinkGoogle,disabled:linkingInProgress==='google',className:\"text-xs font-medium text-blue-600 hover:text-blue-700 px-3 py-1.5 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors disabled:opacity-50\",children:linkingInProgress==='google'?'Linking...':'Link'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-white rounded-lg border \".concat(hasPhone?'border-green-200':'border-gray-100'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(Phone,{className:\"w-5 h-5 text-green-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-700\",children:\"Phone\"})]}),hasPhone?/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs font-medium text-green-600 flex items-center gap-1\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-4 h-4\"}),\" Linked\"]}):/*#__PURE__*/_jsx(\"button\",{onClick:handleLinkPhone,className:\"text-xs font-medium text-blue-600 hover:text-blue-700 px-3 py-1.5 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors\",children:\"Link\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between p-3 bg-white rounded-lg border \".concat(hasPassword?'border-green-200':'border-gray-100'),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(Mail,{className:\"w-5 h-5 text-blue-600\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium text-gray-700\",children:\"Email & Password\"})]}),hasPassword?/*#__PURE__*/_jsxs(\"span\",{className:\"text-xs font-medium text-green-600 flex items-center gap-1\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-4 h-4\"}),\" Linked\"]}):/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-400\",children:\"Coming soon\"})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-[11px] text-gray-500 mt-3 text-center\",children:\"Link accounts to sign in with any method\"})]}),onSignOut&&/*#__PURE__*/_jsxs(\"button\",{onClick:onSignOut,className:\"w-full mt-4 flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold rounded-xl transition-colors\",children:[/*#__PURE__*/_jsx(LogOut,{className:\"w-5 h-5\"}),\"Sign Out\"]})]})})]});}function LandlordOnboardingView(_ref3){var _currentUser$name,_currentUser$name$cha;let{onComplete,onCancel,currentUser}=_ref3;const[form,setForm]=useState({businessName:(currentUser===null||currentUser===void 0?void 0:currentUser.name)||'',bankDetails:'',idNumber:'',agree:false});const handleSubmit=()=>{if(!form.businessName||!form.agree){alert('Please provide a display name and agree to the terms.');return;}onComplete(form);};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-b from-slate-50 to-gray-100 pb-24\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-br from-teal-600 via-teal-500 to-cyan-500 pt-8 pb-16 px-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-2xl mx-auto text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center mx-auto mb-4 border border-white/30\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-4xl font-bold text-white\",children:(currentUser===null||currentUser===void 0?void 0:(_currentUser$name=currentUser.name)===null||_currentUser$name===void 0?void 0:(_currentUser$name$cha=_currentUser$name.charAt(0))===null||_currentUser$name$cha===void 0?void 0:_currentUser$name$cha.toUpperCase())||'L'})}),/*#__PURE__*/_jsxs(\"h2\",{className:\"text-2xl font-bold text-white mb-2\",children:[\"Welcome, \",(currentUser===null||currentUser===void 0?void 0:currentUser.name)||'Landlord',\"!\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-teal-100\",children:\"Complete your profile to start listing properties\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"px-4 -mt-8\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-2xl mx-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-xl border border-gray-100 p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-center gap-2 mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-teal-600 text-white rounded-full flex items-center justify-center text-sm font-bold\",children:\"1\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700\",children:\"Profile Details\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-0.5 bg-gray-200\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-gray-200 text-gray-500 rounded-full flex items-center justify-center text-sm font-bold\",children:\"2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-400\",children:\"Start Listing\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-5\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Display Name *\"}),/*#__PURE__*/_jsx(\"input\",{value:form.businessName,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{businessName:e.target.value})),className:\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all\",placeholder:\"Your name or business name\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1.5\",children:\"This name is shown to renters on your listings and messages.\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Payment Details (Optional)\"}),/*#__PURE__*/_jsx(\"input\",{value:form.bankDetails,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{bankDetails:e.target.value})),placeholder:\"Bank account or preferred payment method\",className:\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1.5\",children:\"Private - only shown to confirmed renters.\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"ID Number (Optional)\"}),/*#__PURE__*/_jsx(\"input\",{value:form.idNumber,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{idNumber:e.target.value})),className:\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all\",placeholder:\"For verification purposes\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1.5\",children:\"Verified landlords get a trust badge on their listings.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-gradient-to-r from-teal-50 to-cyan-50 rounded-xl p-4 border border-teal-100\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"flex items-start gap-3 cursor-pointer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:form.agree,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{agree:e.target.checked})),className:\"mt-1 w-5 h-5 rounded border-gray-300 text-teal-600 focus:ring-teal-500\"}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-700\",children:[\"I confirm I am authorised to list these properties and agree to the\",' ',/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:e=>e.preventDefault(),className:\"text-teal-600 hover:text-teal-700 font-medium underline\",children:\"terms of service\"}),\".\"]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 pt-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-3.5 rounded-xl transition-colors\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"flex-1 bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-700 hover:to-cyan-700 text-white font-semibold py-3.5 rounded-xl transition-all shadow-md hover:shadow-lg\",children:\"Complete & Start Listing\"})]})]})]})})})]});}function EditProfileView(_ref4){let{user,onSubmit,onCancel}=_ref4;const[formData,setFormData]=useState({name:user.name||'',phone:user.phone||'',email:user.email||'',whatsapp:user.whatsapp||'',photo:user.photo||''});const[errors,setErrors]=useState({});const[touched,setTouched]=useState({});const validateField=function(name,value){let extras=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};const newErrors=_objectSpread({},errors);switch(name){case'name':if(!value||value.trim().length<2){newErrors.name='Name must be at least 2 characters';}else{delete newErrors.name;}break;case'phone':if(!value||!/^[+]?[-0-9()\\s]{7,}$/.test(value.trim())){newErrors.phone='Enter a valid phone number';}else{delete newErrors.phone;}break;case'email':if(!value||!/^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$/.test(value.trim())){newErrors.email='Enter a valid email';}else{delete newErrors.email;}break;default:break;}setErrors(newErrors);};const handlePhotoUpload=e=>{const file=e.target.files[0];if(file){const reader=new FileReader();reader.onloadend=()=>{setFormData(_objectSpread(_objectSpread({},formData),{},{photo:reader.result}));};reader.readAsDataURL(file);}};const handleSubmit=()=>{setTouched({name:true,phone:true,email:true});validateField('name',formData.name);validateField('phone',formData.phone);validateField('email',formData.email);if(Object.keys(errors).length===0&&formData.name&&formData.phone&&formData.email){onSubmit(formData);}};return/*#__PURE__*/_jsx(\"div\",{className:\"p-4 min-h-screen bg-gradient-to-b from-slate-50 to-gray-100 pb-24\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-2xl mx-auto mt-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg border border-gray-100 p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-8\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-extrabold text-gray-900\",children:\"Edit Profile\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"text-gray-400 hover:text-gray-600 transition\",children:/*#__PURE__*/_jsx(X,{className:\"w-6 h-6\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[formData.photo?/*#__PURE__*/_jsx(\"img\",{src:formData.photo,alt:\"Profile\",className:\"w-32 h-32 rounded-full object-cover border-4 border-blue-200 shadow-lg\"}):/*#__PURE__*/_jsx(\"div\",{className:\"w-32 h-32 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center border-4 border-blue-200 shadow-lg\",children:/*#__PURE__*/_jsx(User,{className:\"w-16 h-16 text-blue-600\"})}),/*#__PURE__*/_jsxs(\"label\",{className:\"absolute bottom-0 right-0 bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full cursor-pointer shadow-lg transition\",\"aria-label\":\"Upload new profile photo\",children:[/*#__PURE__*/_jsx(Edit,{className:\"w-5 h-5\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\"image/*\",onChange:handlePhotoUpload,className:\"hidden\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Full Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:formData.name,onChange:e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{name:e.target.value}));if(touched.name)validateField('name',e.target.value);},onBlur:e=>{setTouched(_objectSpread(_objectSpread({},touched),{},{name:true}));validateField('name',e.target.value);},\"aria-invalid\":errors.name?'true':'false',\"aria-describedby\":errors.name?'edit-name-error':undefined,className:\"w-full px-4 py-3 border-2 \".concat(errors.name?'border-red-400':'border-gray-200',\" bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400\")}),errors.name&&touched.name&&/*#__PURE__*/_jsx(\"p\",{id:\"edit-name-error\",className:\"mt-1 text-xs text-red-600\",children:errors.name})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Phone Number\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Phone,{className:\"absolute left-4 top-3.5 w-5 h-5 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",required:true,value:formData.phone,onChange:e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{phone:e.target.value}));if(touched.phone)validateField('phone',e.target.value);},onBlur:e=>{setTouched(_objectSpread(_objectSpread({},touched),{},{phone:true}));validateField('phone',e.target.value);},\"aria-invalid\":errors.phone?'true':'false',\"aria-describedby\":errors.phone?'edit-phone-error':undefined,className:\"w-full pl-11 pr-4 py-3 border-2 \".concat(errors.phone?'border-red-400':'border-gray-200',\" bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400\")})]}),errors.phone&&touched.phone&&/*#__PURE__*/_jsx(\"p\",{id:\"edit-phone-error\",className:\"mt-1 text-xs text-red-600\",children:errors.phone})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Email Address\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Mail,{className:\"absolute left-4 top-3.5 w-5 h-5 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",required:true,value:formData.email,onChange:e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{email:e.target.value}));if(touched.email)validateField('email',e.target.value);},onBlur:e=>{setTouched(_objectSpread(_objectSpread({},touched),{},{email:true}));validateField('email',e.target.value);},\"aria-invalid\":errors.email?'true':'false',\"aria-describedby\":errors.email?'edit-email-error':undefined,className:\"w-full pl-11 pr-4 py-3 border-2 \".concat(errors.email?'border-red-400':'border-gray-200',\" bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400\")})]}),errors.email&&touched.email&&/*#__PURE__*/_jsx(\"p\",{id:\"edit-email-error\",className:\"mt-1 text-xs text-red-600\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"WhatsApp (optional)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(Phone,{className:\"absolute left-4 top-3.5 w-5 h-5 text-gray-400\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:formData.whatsapp,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{whatsapp:e.target.value})),placeholder:\"e.g., +27 71 234 5678\",className:\"w-full pl-11 pr-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"Used to create a WhatsApp chat link on your listings.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-3 pt-6 border-t border-gray-200\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-3 rounded-xl transition\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,className:\"flex-1 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white font-semibold py-3 rounded-xl transition shadow-lg\",children:\"Save Changes\"})]})]})]})})});}/* BrowseView extracted to components/BrowseView.jsx */function FavoritesView(_ref5){let{listings,onSelectListing}=_ref5;const[favorites,setFavorites]=useState([]);useEffect(()=>{try{const rawFavorites=localStorage.getItem('favorites');if(rawFavorites){const arr=JSON.parse(rawFavorites);if(Array.isArray(arr))setFavorites(arr);}}catch(_unused8){}},[]);const toggleFavorite=listingId=>{setFavorites(prev=>{const updated=prev.filter(id=>id!==listingId);try{localStorage.setItem('favorites',JSON.stringify(updated));}catch(_unused9){}return updated;});};const favoriteListings=listings.filter(l=>favorites.includes(l.id));return/*#__PURE__*/_jsx(\"div\",{className:\"p-4 min-h-screen bg-gradient-to-b from-slate-50 to-gray-100 pb-24\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto mt-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-14 h-14 bg-gradient-to-br from-rose-100 to-pink-100 rounded-2xl flex items-center justify-center shadow-sm\",children:/*#__PURE__*/_jsx(Heart,{className:\"w-7 h-7 text-rose-500 fill-rose-500\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-extrabold text-gray-900\",children:\"Saved Listings\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:favoriteListings.length===0?'Your favorites will appear here':\"\".concat(favoriteListings.length,\" saved \").concat(favoriteListings.length===1?'listing':'listings')})]})]})}),favoriteListings.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl border border-gray-100 shadow-sm p-12 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-24 h-24 bg-gradient-to-br from-rose-50 to-pink-50 rounded-full flex items-center justify-center mx-auto mb-6\",children:/*#__PURE__*/_jsx(Heart,{className:\"w-12 h-12 text-rose-300\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-2\",children:\"No saved listings yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm mb-6 max-w-md mx-auto\",children:\"Browse rooms and tap the heart icon to save your favorites. They'll appear here for easy access.\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\",children:favoriteListings.map(listing=>{const ListingCard=require('./components/ListingCard').default;return/*#__PURE__*/_jsx(ListingCard,{listing:listing,onClick:()=>onSelectListing(listing),isFavorite:true,onToggleFavorite:toggleFavorite},listing.id);})})]})});}const createDefaultListingForm=()=>({title:'',price:'',location:'',streetAddress:'',description:'',photos:[],status:'available',availableDate:new Date().toISOString().split('T')[0],amenities:[],latitude:null,longitude:null,paymentMethod:'Bank and Cash',roomType:'private',leaseDuration:'7-12',petFriendly:false,genderPreference:'any',premium:false});function AddListingView(_ref6){let{onSubmit,onCancel,currentUser,userType,onRequireAuth,onRequireOnboarding}=_ref6;const GEOCODER_KEY=process.env.REACT_APP_GEOCODER_API_KEY;const GEOCODER_PROVIDER=(process.env.REACT_APP_GEOCODER_PROVIDER||'').toLowerCase();const landlordId=currentUser===null||currentUser===void 0?void 0:currentUser.id;const[formData,setFormData]=useState(()=>{const base=createDefaultListingForm();if(landlordId){const saved=loadListingTemplate(landlordId);if(saved){var _saved$petFriendly,_saved$premium;return _objectSpread(_objectSpread(_objectSpread({},base),saved),{},{amenities:Array.isArray(saved.amenities)?saved.amenities:base.amenities,petFriendly:(_saved$petFriendly=saved.petFriendly)!==null&&_saved$petFriendly!==void 0?_saved$petFriendly:base.petFriendly,premium:(_saved$premium=saved.premium)!==null&&_saved$premium!==void 0?_saved$premium:base.premium,photos:[]});}}return base;});const[geocodingStatus,setGecodingStatus]=useState('');const[errors,setErrors]=useState({});const[showPhotoEditor,setShowPhotoEditor]=useState(false);const reverseGeocodeCacheRef=React.useRef({});const[lastGeocodeSource,setLastGeocodeSource]=useState(null);// 'cached' | 'mapbox' | 'proxy' | 'direct' | 'coords-only' | 'manual-geocode'\nconst[fullAddressInput,setFullAddressInput]=useState('');const[isFullAddressEditing,setIsFullAddressEditing]=useState(false);useEffect(()=>{if(!landlordId)return;const saved=loadListingTemplate(landlordId);if(saved){setFormData(prev=>{var _saved$petFriendly2,_saved$premium2;return _objectSpread(_objectSpread(_objectSpread({},prev),saved),{},{amenities:Array.isArray(saved.amenities)?saved.amenities:[],petFriendly:(_saved$petFriendly2=saved.petFriendly)!==null&&_saved$petFriendly2!==void 0?_saved$petFriendly2:false,premium:(_saved$premium2=saved.premium)!==null&&_saved$premium2!==void 0?_saved$premium2:false,photos:[]});});}else{setFormData(createDefaultListingForm());}},[landlordId]);useEffect(()=>{if(!landlordId||userType!=='landlord')return;saveListingTemplate(landlordId,formData);},[formData,landlordId,userType]);// Warn user before leaving if form has unsaved data\nuseEffect(()=>{var _formData$photos;const hasFormData=formData.title||formData.description||((_formData$photos=formData.photos)===null||_formData$photos===void 0?void 0:_formData$photos.length)>0;const handleBeforeUnload=e=>{if(hasFormData){e.preventDefault();e.returnValue='';return'';}};if(hasFormData){window.addEventListener('beforeunload',handleBeforeUnload);}return()=>{window.removeEventListener('beforeunload',handleBeforeUnload);};},[formData.title,formData.description,formData.photos]);// Helper: fetch with graceful fallbacks when third-party APIs lack CORS headers\nconst corsFallbackTransforms=useMemo(()=>[url=>url.startsWith('https://cors.isomorphic-git.org/')?url:\"https://cors.isomorphic-git.org/\".concat(url),url=>url.startsWith('https://corsproxy.io/?')?url:\"https://corsproxy.io/?\".concat(encodeURIComponent(url))],[]);const fetchWithCorsFallback=useCallback(async function(url){let options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};const cloneOptions=()=>{const base=_objectSpread({},options);if(options.headers)base.headers=_objectSpread({},options.headers);return base;};const attempt=async targetUrl=>{const resp=await fetch(targetUrl,cloneOptions());if(!resp.ok)throw new Error(\"Request failed with status \".concat(resp.status));return resp;};try{return await attempt(url);}catch(err){var _options$signal;if((_options$signal=options.signal)!==null&&_options$signal!==void 0&&_options$signal.aborted)throw err;let lastError=err;for(const transform of corsFallbackTransforms){try{const proxiedUrl=transform(url);return await attempt(proxiedUrl);}catch(proxyErr){var _options$signal2;lastError=proxyErr;if((_options$signal2=options.signal)!==null&&_options$signal2!==void 0&&_options$signal2.aborted)break;}}throw lastError;}},[corsFallbackTransforms]);// Forward geocode helper for manual address lookups\nconst forwardGeocodeAddress=async query=>{if(!query||query.trim().length<3)return[];// 1. Mapbox (if configured)\nif(GEOCODER_PROVIDER==='mapbox'&&GEOCODER_KEY){try{var _data$features;const resp=await fetch(\"https://api.mapbox.com/geocoding/v5/mapbox.places/\".concat(encodeURIComponent(query),\".json?access_token=\").concat(GEOCODER_KEY,\"&limit=3&country=za&types=address,place,locality\"));const data=await resp.json();if(data!==null&&data!==void 0&&(_data$features=data.features)!==null&&_data$features!==void 0&&_data$features.length){return data.features.map(f=>{var _f$geometry,_f$geometry$coordinat,_f$geometry2,_f$geometry2$coordina;return{lat:f.center?f.center[1]:(_f$geometry=f.geometry)===null||_f$geometry===void 0?void 0:(_f$geometry$coordinat=_f$geometry.coordinates)===null||_f$geometry$coordinat===void 0?void 0:_f$geometry$coordinat[1],lon:f.center?f.center[0]:(_f$geometry2=f.geometry)===null||_f$geometry2===void 0?void 0:(_f$geometry2$coordina=_f$geometry2.coordinates)===null||_f$geometry2$coordina===void 0?void 0:_f$geometry2$coordina[0],label:f.place_name||f.text,source:'mapbox'};}).filter(entry=>typeof entry.lat==='number'&&typeof entry.lon==='number');}}catch(err){console.warn('Mapbox forward geocode failed',err);}}// 2. maps.co (CORS-friendly)\ntry{const mapsResp=await fetch(\"https://geocode.maps.co/search?q=\".concat(encodeURIComponent(query),\"&limit=3\"));if(mapsResp.ok){const mapsData=await mapsResp.json();if(Array.isArray(mapsData)&&mapsData.length){return mapsData.slice(0,3).map(entry=>({lat:parseFloat(entry.lat),lon:parseFloat(entry.lon),label:entry.display_name||entry.name,source:'maps.co'}));}}}catch(mapsErr){console.warn('maps.co forward geocode failed',mapsErr);}// 3. Local proxy (if running)\nconst API_BASE=process.env.REACT_APP_PROXY_BASE||(window.location&&window.location.port==='8443'?'https://localhost:4443':'');if(API_BASE){try{const proxyResp=await fetch(\"\".concat(API_BASE,\"/api/search?q=\").concat(encodeURIComponent(query)));if(proxyResp.ok){const proxyData=await proxyResp.json();if(Array.isArray(proxyData)&&proxyData.length){return proxyData.slice(0,3).map(entry=>({lat:parseFloat(entry.lat),lon:parseFloat(entry.lon),label:entry.display_name,source:API_BASE.includes('localhost')?'local-proxy':'proxy'}));}}}catch(proxyErr){console.warn('Local proxy forward geocode failed',proxyErr);}}// 4. Direct Nominatim fallback (may still be blocked, but last resort)\ntry{const directResp=await fetchWithCorsFallback(\"https://nominatim.openstreetmap.org/search?format=json&addressdetails=1&q=\".concat(encodeURIComponent(query)),{headers:{'User-Agent':'room-rental-platform/1.0 (direct fallback)','Accept':'application/json'}});if(directResp.ok){const directData=await directResp.json();if(Array.isArray(directData)&&directData.length){return directData.slice(0,3).map(entry=>({lat:parseFloat(entry.lat),lon:parseFloat(entry.lon),label:entry.display_name,source:'direct'}));}}}catch(directErr){console.warn('Direct nominatim forward geocode failed',directErr);}return[];};const availableAmenities=['WiFi','Parking','Kitchen','Laundry','Air Conditioning','Heating','TV','Furnished','Pet Friendly','Garden'];const validateField=function(name,value){let extras=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};const newErrors=_objectSpread({},errors);switch(name){case'title':if(!value||value.trim().length<5){newErrors.title='Title must be at least 5 characters';}else{delete newErrors.title;}break;case'price':if(!value||parseFloat(value)<=0){newErrors.price='Price must be greater than 0';}else if(parseFloat(value)<500){newErrors.price='Price seems too low (minimum R500)';}else if(parseFloat(value)>50000){newErrors.price='Price seems too high (maximum R50,000)';}else{delete newErrors.price;}break;case'location':{var _ref7,_extras$streetAddress,_ref8,_extras$location;const streetText=((_ref7=(_extras$streetAddress=extras.streetAddress)!==null&&_extras$streetAddress!==void 0?_extras$streetAddress:formData.streetAddress)!==null&&_ref7!==void 0?_ref7:'').trim();const areaText=((_ref8=(_extras$location=extras.location)!==null&&_extras$location!==void 0?_extras$location:value)!==null&&_ref8!==void 0?_ref8:'').trim();if(!streetText||streetText.length<3){newErrors.location='Add the street or stand number (e.g., 5170 Molefe St)';}else if(!areaText||areaText.length<3){newErrors.location='Add the suburb, city, and postal code (e.g., Ivory Park, Midrand, 1693)';}else{delete newErrors.location;}break;}case'description':if(value&&value.length>500){newErrors.description='Description is too long (max 500 characters)';}else{delete newErrors.description;}break;default:break;}setErrors(newErrors);};// Load persisted reverse geocode cache\nuseEffect(()=>{try{const raw=localStorage.getItem('reverse-geocode-cache');if(raw){const parsed=JSON.parse(raw);if(parsed&&typeof parsed==='object'){reverseGeocodeCacheRef.current=parsed;}}}catch(e){/* ignore */}},[]);// Geocode address using Nominatim (OpenStreetMap)\nconst geocodeAddress=async()=>{if(!formData.streetAddress){setGecodingStatus('Please enter a street address');return;}setGecodingStatus('Finding coordinates...');try{const fullAddress=\"\".concat(formData.streetAddress,\", \").concat(formData.location,\", South Africa\");const results=await forwardGeocodeAddress(fullAddress);if(results.length>0){const best=results[0];setFormData(_objectSpread(_objectSpread({},formData),{},{latitude:parseFloat(best.lat),longitude:parseFloat(best.lon)}));setGecodingStatus(\"\\u2713 Address found!\");setTimeout(()=>setGecodingStatus(''),2000);setLastGeocodeSource(best.source||'manual-geocode');return;}setGecodingStatus('Address not found. Trying with area only...');const areaResults=await forwardGeocodeAddress(\"\".concat(formData.location,\", South Africa\"));if(areaResults.length>0){const bestArea=areaResults[0];setFormData(_objectSpread(_objectSpread({},formData),{},{latitude:parseFloat(bestArea.lat),longitude:parseFloat(bestArea.lon)}));setGecodingStatus(' Area found!');setTimeout(()=>setGecodingStatus(''),2000);setLastGeocodeSource(bestArea.source||'manual-geocode');}else{setGecodingStatus('Could not find location');}}catch(error){console.error('Geocoding error:',error);setGecodingStatus('Error finding address. Check your connection.');setLastGeocodeSource(null);}};const toggleAmenity=amenity=>{if(formData.amenities.includes(amenity)){setFormData(_objectSpread(_objectSpread({},formData),{},{amenities:formData.amenities.filter(a=>a!==amenity)}));}else{setFormData(_objectSpread(_objectSpread({},formData),{},{amenities:[...formData.amenities,amenity]}));}};const[isSubmitting,setIsSubmitting]=useState(false);const handleSubmit=async()=>{// Enforce auth and onboarding checks before allowing submission\nif(!currentUser){onRequireAuth&&onRequireAuth('landlord');return;}if(userType!=='landlord'){// prompt to become landlord\nonRequireAuth&&onRequireAuth('landlord');return;}if(!currentUser.landlordComplete){// send to onboarding\nonRequireOnboarding&&onRequireOnboarding();return;}// Validate all fields\nvalidateField('title',formData.title);validateField('price',formData.price);validateField('location',formData.location,{location:formData.location,streetAddress:formData.streetAddress});validateField('description',formData.description);if(!formData.title||formData.title.trim().length<5){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{title:'Title must be at least 5 characters'}));return;}if(!formData.price||parseFloat(formData.price)<=0){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{price:'Price must be greater than 0'}));return;}if(!formData.location||formData.location.trim().length<3){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{location:'Location is required'}));return;}if(Object.keys(errors).length>0){return;}setIsSubmitting(true);try{await onSubmit(formData);}finally{setIsSubmitting(false);}};const googleMapsQuery=[formData.streetAddress,formData.location,'South Africa'].filter(Boolean).join(', ');const googleMapsUrl=googleMapsQuery?\"https://www.google.com/maps/search/?api=1&query=\".concat(encodeURIComponent(googleMapsQuery)):'';const combinedFormAddress=[formData.streetAddress,formData.location].map(part=>(part||'').trim()).filter(Boolean).join(', ');useEffect(()=>{if(isFullAddressEditing)return;setFullAddressInput(prev=>prev===combinedFormAddress?prev:combinedFormAddress);},[combinedFormAddress,isFullAddressEditing]);const handleFullAddressChange=value=>{setFullAddressInput(value);if(!value||value.length<3){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{streetAddress:'',location:''}));validateField('location','');return;}const parts=value.split(',').map(part=>part.trim()).filter(Boolean);if(parts.length===0){setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{streetAddress:'',location:''}));validateField('location','');return;}let street=parts[0]||'';let derivedLocation=parts.slice(1).join(', ');if(!derivedLocation){const words=street.split(/\\s+/).filter(Boolean);if(words.length>=4){// Guess that the last few tokens describe the suburb/city/postal portion.\nconst locationWordCount=Math.min(4,Math.ceil(words.length/2));derivedLocation=words.slice(-locationWordCount).join(' ');street=words.slice(0,words.length-locationWordCount).join(' ');}else{derivedLocation=street;}}setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{streetAddress:street,location:derivedLocation}));validateField('location',derivedLocation||street,{location:derivedLocation,streetAddress:street});};const handleResetSavedTemplate=()=>{if(!landlordId)return;clearListingTemplate(landlordId);const blank=createDefaultListingForm();setFormData(blank);setFullAddressInput('');};return/*#__PURE__*/_jsx(\"div\",{className:\"p-4 bg-gradient-to-b from-slate-50 to-gray-100 min-h-screen pb-24\",children:/*#__PURE__*/_jsx(\"div\",{className:\"max-w-3xl mx-auto mt-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-lg border border-gray-100 p-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-extrabold text-gray-900\",children:\"Post a Room\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onCancel,className:\"text-gray-400 hover:text-gray-600 transition-colors p-2 rounded-full hover:bg-gray-100\",children:/*#__PURE__*/_jsx(X,{className:\"w-6 h-6\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mb-8\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-2\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-600\",children:\"Form Progress\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-semibold text-teal-600\",children:(()=>{let completed=0;const total=5;if(formData.title&&formData.title.trim().length>=5)completed++;if(formData.price&&parseFloat(formData.price)>=500)completed++;if(formData.streetAddress&&formData.location)completed++;if(formData.description&&formData.description.length>=10)completed++;if(formData.photos&&formData.photos.length>0)completed++;return\"\".concat(completed,\"/\").concat(total,\" completed\");})()})]}),/*#__PURE__*/_jsx(\"div\",{className:\"h-2 bg-gray-100 rounded-full overflow-hidden\",children:/*#__PURE__*/_jsx(\"div\",{className:\"h-full bg-gradient-to-r from-teal-500 to-cyan-500 rounded-full transition-all duration-500\",style:{width:\"\".concat((()=>{let completed=0;if(formData.title&&formData.title.trim().length>=5)completed++;if(formData.price&&parseFloat(formData.price)>=500)completed++;if(formData.streetAddress&&formData.location)completed++;if(formData.description&&formData.description.length>=10)completed++;if(formData.photos&&formData.photos.length>0)completed++;return completed/5*100;})(),\"%\")}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[(currentUser===null||currentUser===void 0?void 0:currentUser.type)==='landlord'&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-teal-50 to-cyan-50 border border-teal-200 text-teal-800 text-sm rounded-xl p-4 flex items-start gap-3\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-5 h-5 text-teal-600 mt-0.5\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"We remember your latest listing details (address, price, and more) so you only need to upload fresh photos next time. Update any field below and we'll save it automatically.\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:handleResetSavedTemplate,className:\"text-xs font-semibold text-teal-700 underline hover:text-teal-900 transition-colors\",children:\"Reset saved info\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:[\"Room Title *\",formData.title&&formData.title.trim().length>=5&&!errors.title&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-green-600 text-xs\",children:\"\\u2713 Looks good\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",required:true,value:formData.title,onChange:e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{title:e.target.value}));validateField('title',e.target.value);},onBlur:e=>validateField('title',e.target.value),placeholder:\"e.g., Cozy backroom with private bathroom\",className:\"w-full px-4 py-3 pr-10 border-2 \".concat(errors.title?'border-red-400 bg-red-50':formData.title&&formData.title.trim().length>=5?'border-teal-400 bg-teal-50/30':'border-gray-200',\" text-gray-800 rounded-xl focus:ring-2 \").concat(errors.title?'focus:ring-red-400':'focus:ring-teal-400',\" focus:border-transparent transition-all placeholder-gray-400\")}),formData.title&&formData.title.trim().length>=5&&!errors.title&&/*#__PURE__*/_jsx(CheckCircle,{className:\"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-teal-600\"})]}),errors.title&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-500 text-xs mt-1 flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u26A0\"}),\" \",errors.title]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:[\"Monthly Price (R) *\",formData.price&&parseFloat(formData.price)>=500&&parseFloat(formData.price)<=50000&&!errors.price&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 text-green-600 text-xs\",children:\"\\u2713 Valid price\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium\",children:\"R\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",required:true,value:formData.price,onChange:e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{price:e.target.value}));validateField('price',e.target.value);},onBlur:e=>validateField('price',e.target.value),placeholder:\"2500\",min:\"500\",max:\"50000\",className:\"w-full pl-10 pr-4 py-3 border-2 \".concat(errors.price?'border-red-400 bg-red-50':formData.price&&parseFloat(formData.price)>=500&&parseFloat(formData.price)<=50000?'border-teal-400 bg-teal-50/30':'border-gray-200',\" text-gray-800 rounded-xl focus:ring-2 \").concat(errors.price?'focus:ring-red-400':'focus:ring-teal-400',\" focus:border-transparent transition-all placeholder-gray-400\")}),formData.price&&parseFloat(formData.price)>=500&&parseFloat(formData.price)<=50000&&!errors.price&&/*#__PURE__*/_jsx(CheckCircle,{className:\"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-teal-600\"})]}),errors.price&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-red-500 text-xs mt-1 flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u26A0\"}),\" \",errors.price]}),!errors.price&&formData.price&&/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-xs mt-1\",children:\"Suggested range: R500 - R50,000 per month\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-1\",children:\"Full South African Address *\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mb-2\",children:\"Example: 5170 Molefe St, Ivory Park, Midrand, 1693\"}),/*#__PURE__*/_jsx(\"textarea\",{required:true,rows:\"2\",value:fullAddressInput,onChange:e=>handleFullAddressChange(e.target.value),onFocus:()=>setIsFullAddressEditing(true),onBlur:e=>{setIsFullAddressEditing(false);handleFullAddressChange(e.target.value);},placeholder:\"Type the full street + suburb + city + postal code\",className:\"w-full px-4 py-3 border-2 \".concat(errors.location?'border-red-400':'border-gray-200',\" bg-white text-gray-800 rounded-xl focus:ring-2 \").concat(errors.location?'focus:ring-red-400':'focus:ring-teal-400',\" focus:border-transparent transition placeholder-gray-400\")}),errors.location&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-xs mt-1\",\"aria-live\":\"assertive\",children:errors.location}),!errors.location&&/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-xs mt-1\",children:\"Include the street/stand number plus suburb, city, and postal code. Commas are optional; we will split it for you.\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-teal-50 to-cyan-50 border-2 border-teal-200 rounded-xl p-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3 mb-4\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-6 h-6 text-teal-600 flex-shrink-0 mt-1\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold text-gray-800 mb-1\",children:\"Confirm Your Address\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-600\",children:[\"Type the exact street + suburb above, then tap \",/*#__PURE__*/_jsx(\"strong\",{children:\"Look Up Address\"}),\" if you\\x110d like us to fetch coordinates for your Google Maps preview.\"]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-wrap gap-3 items-start\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:geocodeAddress,className:\"w-full md:w-auto bg-white hover:bg-gray-50 text-gray-700 border-2 border-gray-300 px-6 py-3 rounded-lg text-sm font-semibold transition flex items-center justify-center gap-2\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4\"}),\"Look Up Address\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm flex-1 min-w-[220px]\",children:[geocodingStatus&&/*#__PURE__*/_jsxs(\"span\",{className:\"\".concat(geocodingStatus.startsWith('')?'text-green-600 font-semibold':geocodingStatus.startsWith('')?'text-amber-600':'text-gray-700',\" flex items-center gap-1\"),children:[geocodingStatus.startsWith('')&&/*#__PURE__*/_jsx(CheckCircle,{className:\"w-4 h-4\"}),geocodingStatus,lastGeocodeSource==='cached'&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 inline-block px-2 py-1 text-[10px] rounded bg-purple-100 text-purple-600 font-semibold\",children:\"CACHED\"}),lastGeocodeSource==='mapbox'&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 inline-block px-2 py-1 text-[10px] rounded bg-blue-100 text-blue-600 font-semibold\",children:\"MAPBOX\"}),lastGeocodeSource==='maps.co'&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 inline-block px-2 py-1 text-[10px] rounded bg-indigo-100 text-indigo-600 font-semibold\",children:\"MAPS.CO\"}),lastGeocodeSource==='proxy'&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 inline-block px-2 py-1 text-[10px] rounded bg-green-100 text-green-600 font-semibold\",children:\"PROXY\"}),lastGeocodeSource==='direct'&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 inline-block px-2 py-1 text-[10px] rounded bg-yellow-100 text-yellow-700 font-semibold\",children:\"FALLBACK\"})]}),formData.latitude&&formData.longitude&&!geocodingStatus&&/*#__PURE__*/_jsxs(\"span\",{className:\"text-green-600 font-semibold flex items-center gap-1\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-4 h-4\"}),\"Coordinates saved: \",formData.latitude.toFixed(4),\", \",formData.longitude.toFixed(4),lastGeocodeSource==='cached'&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 inline-block px-2 py-1 text-[10px] rounded bg-purple-100 text-purple-600 font-semibold\",children:\"CACHED\"}),lastGeocodeSource==='maps.co'&&/*#__PURE__*/_jsx(\"span\",{className:\"ml-2 inline-block px-2 py-1 text-[10px] rounded bg-indigo-100 text-indigo-600 font-semibold\",children:\"MAPS.CO\"})]}),googleMapsUrl&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 bg-white border border-gray-200 rounded-lg p-3 text-xs text-gray-600\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"block text-gray-800 font-semibold mb-1\",children:\"Preview this address\"}),/*#__PURE__*/_jsxs(\"a\",{href:googleMapsUrl,target:\"_blank\",rel:\"noopener noreferrer\",className:\"inline-flex items-center gap-2 text-teal-700 font-semibold hover:text-teal-900 underline\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-3 h-3\"}),\" Open in Google Maps\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"block mt-2 text-[11px] text-gray-500\",children:\"Renters will see the same button under your listing.\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 text-sm text-gray-600 bg-white border border-dashed border-gray-300 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-gray-800 mb-1\",children:\"Manual address confirmed\"}),/*#__PURE__*/_jsx(\"p\",{children:\"We now rely on the address you type here. Use Google Maps above if you want to double-check directions.\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Status\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.status,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{status:e.target.value})),className:\"w-full px-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"available\",children:\"Available\"}),/*#__PURE__*/_jsx(\"option\",{value:\"rented\",children:\"Rented\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Available Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:formData.availableDate,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{availableDate:e.target.value})),className:\"w-full px-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Payment Method\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.paymentMethod,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{paymentMethod:e.target.value})),className:\"w-full px-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Bank and Cash\",children:\"Bank and Cash\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Cash Only\",children:\"Cash Only\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Bank Only\",children:\"Bank Only\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Room Type\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.roomType,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{roomType:e.target.value})),className:\"w-full px-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"private\",children:\"Private Room\"}),/*#__PURE__*/_jsx(\"option\",{value:\"shared\",children:\"Shared Room\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Lease Duration (months)\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.leaseDuration,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{leaseDuration:e.target.value})),className:\"w-full px-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"1-3\",children:\"1-3 months\"}),/*#__PURE__*/_jsx(\"option\",{value:\"4-6\",children:\"4-6 months\"}),/*#__PURE__*/_jsx(\"option\",{value:\"7-12\",children:\"7-12 months\"}),/*#__PURE__*/_jsx(\"option\",{value:\"12+\",children:\"12+ months\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:formData.petFriendly,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{petFriendly:e.target.checked})),id:\"petFriendly\",className:\"w-5 h-5 text-teal-600 border-gray-300 rounded focus:ring-teal-500\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"petFriendly\",className:\"text-sm font-medium text-gray-700\",children:\"\\uD83D\\uDC3E Pet Friendly\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Gender Preference\"}),/*#__PURE__*/_jsxs(\"select\",{value:formData.genderPreference,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{genderPreference:e.target.value})),className:\"w-full px-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"any\",children:\"Any\"}),/*#__PURE__*/_jsx(\"option\",{value:\"male\",children:\"Male Only\"}),/*#__PURE__*/_jsx(\"option\",{value:\"female\",children:\"Female Only\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:!!formData.premium,onChange:e=>setFormData(_objectSpread(_objectSpread({},formData),{},{premium:e.target.checked})),id:\"premiumFlag\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"premiumFlag\",className:\"text-sm font-medium text-gray-700\",children:\"Premium listing (highlight & priority sorting)\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:[\"Description\",formData.description&&/*#__PURE__*/_jsxs(\"span\",{className:\"ml-2 text-xs \".concat(formData.description.length>500?'text-red-500':'text-gray-500'),children:[\"(\",formData.description.length,\"/500 characters)\"]})]}),/*#__PURE__*/_jsx(\"textarea\",{value:formData.description,onChange:e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{description:e.target.value}));validateField('description',e.target.value);},onBlur:e=>validateField('description',e.target.value),placeholder:\"Describe the room, amenities, rules, and any other details...\",rows:\"4\",className:\"w-full px-4 py-3 border-2 \".concat(errors.description?'border-red-400':'border-gray-200',\" bg-white text-gray-800 rounded-xl focus:ring-2 \").concat(errors.description?'focus:ring-red-400':'focus:ring-teal-400',\" focus:border-transparent transition placeholder-gray-400\")}),errors.description&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-xs mt-1\",children:errors.description})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-3\",children:\"Amenities\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 gap-2\",children:availableAmenities.map(amenity=>/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>toggleAmenity(amenity),className:\"px-4 py-2.5 rounded-xl text-sm font-medium transition-all \".concat(formData.amenities.includes(amenity)?'bg-gradient-to-r from-teal-500 to-cyan-500 text-white shadow-md':'bg-gray-100 text-gray-700 border-2 border-gray-200 hover:border-teal-300 hover:bg-teal-50'),children:amenity},amenity))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-800 mb-2\",children:\"Photos (Max 5)\"}),/*#__PURE__*/_jsx(\"div\",{className:\"relative border-2 border-dashed border-gray-300 bg-gradient-to-br from-gray-50 to-slate-50 rounded-xl p-6 hover:border-teal-400 hover:bg-teal-50/30 transition-all duration-300 cursor-pointer group\",onClick:()=>setShowPhotoEditor(true),children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-16 h-16 bg-gradient-to-br from-teal-100 to-cyan-100 rounded-2xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform duration-300\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-3xl\",children:\"\\uD83D\\uDCF7\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-700 font-semibold mb-1\",children:formData.photos.length===0?'Add Photos':\"\".concat(formData.photos.length,\"/5 Photos Added\")}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500\",children:\"Click to upload \\u2022 JPG, PNG up to 5MB each\"}),formData.photos.length===0&&/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-teal-600 mt-2 font-medium\",children:\"Tip: Listings with photos get 3x more views!\"})]})}),formData.photos.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 grid grid-cols-2 md:grid-cols-3 gap-3\",children:formData.photos.map((photo,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"relative group\",children:[index===0&&/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-2 left-2 bg-gradient-to-r from-teal-500 to-cyan-500 text-white text-xs px-2 py-1 rounded-full font-semibold z-10\",children:\"Cover\"}),/*#__PURE__*/_jsx(\"img\",{src:photo,alt:\"Preview \".concat(index+1),className:\"w-full h-32 object-cover rounded-xl border-2 border-gray-200 shadow-sm\"})]},index))}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowPhotoEditor(true),className:\"mt-3 text-sm text-teal-600 hover:text-teal-700 font-medium\",children:formData.photos.length>0?' Edit Photos':''})]}),showPhotoEditor&&/*#__PURE__*/_jsx(PhotoEditor,{photos:formData.photos,onPhotosChange:newPhotos=>setFormData(_objectSpread(_objectSpread({},formData),{},{photos:newPhotos})),onClose:()=>setShowPhotoEditor(false),maxPhotos:5}),/*#__PURE__*/_jsxs(\"div\",{className:\"border-t border-gray-200 pt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:handleSubmit,disabled:isSubmitting||Object.keys(errors).length>0,className:\"w-full font-semibold py-3.5 rounded-xl transition-all shadow-lg relative \".concat(isSubmitting||Object.keys(errors).length>0?'bg-gray-400 cursor-not-allowed':'bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white hover:shadow-xl hover:shadow-teal-500/25'),children:isSubmitting?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"opacity-0\",children:\"Post Room\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\"})})]}):'Post Room'}),Object.keys(errors).length>0&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-xs mt-2 text-center\",children:\"Please fix the errors above before submitting\"})]})]})]})})});}// MessagesView removed - using direct contact instead\nfunction MyListingsView(_ref9){let{listings,onDelete}=_ref9;return/*#__PURE__*/_jsx(\"div\",{className:\"p-4 min-h-screen bg-gradient-to-b from-slate-50 to-gray-100 pb-24\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-7xl mx-auto mt-8\",children:[listings.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"mb-6 bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-2xl p-4 shadow-sm\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start gap-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-amber-100 rounded-xl flex items-center justify-center flex-shrink-0\",children:/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-5 h-5 text-amber-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-amber-800 mb-1\",children:\"Found a tenant?\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-amber-700 text-sm leading-relaxed\",children:[\"Remember to \",/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:\"delete your listing\"}),\" once you've found a tenant. This will stop new calls and messages from other renters looking at your ad.\"]})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"mb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-4 mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-14 h-14 bg-gradient-to-br from-teal-100 to-cyan-100 rounded-2xl flex items-center justify-center shadow-sm\",children:/*#__PURE__*/_jsx(Home,{className:\"w-7 h-7 text-teal-600\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-extrabold text-gray-900\",children:\"My Listings\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:listings.length===0?'Your properties will appear here':\"\".concat(listings.length,\" active \").concat(listings.length===1?'listing':'listings')})]})]})}),listings.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl border border-gray-100 shadow-sm p-12 text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-24 h-24 bg-gradient-to-br from-teal-50 to-cyan-50 rounded-full flex items-center justify-center mx-auto mb-6\",children:/*#__PURE__*/_jsx(Home,{className:\"w-12 h-12 text-teal-400\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold text-gray-800 mb-2\",children:\"No Listings Yet\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-500 text-sm mb-6 max-w-md mx-auto\",children:\"Start earning by posting your first room. It only takes a few minutes!\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>window.location.hash='#add',className:\"inline-flex items-center gap-2 bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-700 hover:to-cyan-700 text-white font-semibold px-6 py-3 rounded-xl transition-all shadow-md hover:shadow-lg\",children:[/*#__PURE__*/_jsx(PlusCircle,{className:\"w-5 h-5\"}),\"Post Your First Room\"]})]}):/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\",children:listings.map(listing=>{var _listing$price;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow\",children:[listing.photos&&listing.photos.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"img\",{src:listing.photos[0],alt:\"Room\",className:\"w-full h-48 object-cover\"}),listing.photos.length>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"absolute top-3 right-3 bg-black/60 backdrop-blur-sm text-white px-2.5 py-1 rounded-full text-xs font-medium\",children:[listing.photos.length,\" photos\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-3 left-3 px-2.5 py-1 rounded-full text-xs font-semibold \".concat(listing.status==='available'?'bg-emerald-500 text-white':'bg-gray-500 text-white'),children:listing.status==='available'?'Active':'Rented'})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"p-5\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-bold text-lg text-gray-900 mb-1 line-clamp-1\",children:listing.title}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-teal-600 font-bold text-xl mb-2\",children:[\"R\",(_listing$price=listing.price)===null||_listing$price===void 0?void 0:_listing$price.toLocaleString(),\"/month\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center text-gray-500 text-sm mb-4\",children:[/*#__PURE__*/_jsx(MapPin,{className:\"w-4 h-4 mr-1.5 text-gray-400\"}),/*#__PURE__*/_jsx(\"span\",{className:\"line-clamp-1\",children:listing.location})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex gap-2\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>onDelete(listing.id),className:\"flex-1 bg-red-50 hover:bg-red-100 text-red-600 font-medium py-2.5 rounded-xl transition-colors text-sm\",children:\"Delete\"})})]})]},listing.id);})})]})});}// Inline message box component with validation for listing detail view\n// ListingInlineMessageBox removed\n// ConversationModal removed\nfunction AuthModal(_ref0){let{defaultType='renter',onClose,onSuccess,authFunctions}=_ref0;const[mode,setMode]=useState('signin');// 'signin', 'signup', 'reset', 'phone', 'phone-verify'\nconst[form,setForm]=useState({name:'',phone:'',email:'',password:'',confirmPassword:'',otp:'',type:defaultType});const[errors,setErrors]=useState({});const[isSubmitting,setIsSubmitting]=useState(false);const[authError,setAuthError]=useState('');const[resetSent,setResetSent]=useState(false);const[otpSent,setOtpSent]=useState(false);const[phoneFormatted,setPhoneFormatted]=useState('');const validateForm=()=>{const newErrors={};if(mode==='phone'){if(!form.phone||form.phone.trim().length<9){newErrors.phone='Please enter a valid phone number';}}else if(mode==='phone-verify'){if(!form.otp||form.otp.length!==6){newErrors.otp='Please enter the 6-digit code';}}else{if(mode==='signup'){if(!form.name||form.name.trim().length<2){newErrors.name='Name must be at least 2 characters';}}if(!form.email||!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(form.email)){newErrors.email='Please enter a valid email address';}if(mode!=='reset'){if(!form.password||form.password.length<6){newErrors.password='Password must be at least 6 characters';}}if(mode==='signup'&&form.password!==form.confirmPassword){newErrors.confirmPassword='Passwords do not match';}}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=async()=>{if(!validateForm())return;setIsSubmitting(true);setAuthError('');try{if(mode==='signup'){await authFunctions.signUp(form.email,form.password,form.name,form.type,form.phone);onSuccess===null||onSuccess===void 0?void 0:onSuccess();onClose();}else if(mode==='signin'){await authFunctions.signIn(form.email,form.password);onSuccess===null||onSuccess===void 0?void 0:onSuccess();onClose();}else if(mode==='reset'){await authFunctions.sendPasswordReset(form.email);setResetSent(true);}else if(mode==='phone'){// Send OTP\nconst result=await authFunctions.sendPhoneOTP(form.phone);setPhoneFormatted(result.formattedNumber);setOtpSent(true);setMode('phone-verify');}else if(mode==='phone-verify'){// Verify OTP\nawait authFunctions.verifyPhoneOTP(form.otp,form.type,form.name);onSuccess===null||onSuccess===void 0?void 0:onSuccess();onClose();}}catch(err){console.error('Auth error:',err);let errorMessage='An error occurred. Please try again.';if(err.code==='auth/invalid-phone-number'){errorMessage='Invalid phone number format. Please use format: 0XX XXX XXXX';}else if(err.code==='auth/too-many-requests'){errorMessage='Too many attempts. Please try again later.';}else if(err.code==='auth/invalid-verification-code'){errorMessage='Invalid code. Please check and try again.';}else if(err.code==='auth/code-expired'){errorMessage='Code expired. Please request a new one.';}else if(err.message){errorMessage=err.message;}setAuthError(errorMessage);}finally{setIsSubmitting(false);}};const handleGoogleSignIn=async()=>{setIsSubmitting(true);setAuthError('');try{await authFunctions.signInGoogle(form.type);onSuccess===null||onSuccess===void 0?void 0:onSuccess();onClose();}catch(err){setAuthError(err.message||'Google sign-in failed. Please try again.');}finally{setIsSubmitting(false);}};const startPhoneAuth=()=>{setMode('phone');setAuthError('');setOtpSent(false);};return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-gray-900/60 backdrop-blur-sm flex items-start sm:items-center justify-center p-4 pt-16 sm:pt-4 z-50 overflow-y-auto\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-2xl w-full max-w-md p-8 my-auto shadow-2xl fade-in border border-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start justify-between mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2 mb-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-10 h-10 bg-gradient-to-br from-teal-500 to-cyan-500 rounded-xl flex items-center justify-center shadow-lg\",children:/*#__PURE__*/_jsx(Home,{className:\"w-5 h-5 text-white\"})}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-xl font-extrabold\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"bg-gradient-to-r from-teal-600 to-cyan-600 bg-clip-text text-transparent\",children:\"Room\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-rose-500\",children:\"24\"})]})]}),/*#__PURE__*/_jsxs(\"h3\",{className:\"text-xl font-bold text-gray-900 mt-4\",children:[mode==='signin'&&'Welcome back!',mode==='signup'&&'Create your account',mode==='reset'&&'Reset password',mode==='phone'&&'Sign in with phone',mode==='phone-verify'&&'Enter verification code']}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500 mt-1\",children:[mode==='signin'&&'Sign in to continue',mode==='signup'&&'Join Room24 today',mode==='reset'&&\"We'll send you a reset link\",mode==='phone'&&\"We'll send you a verification code\",mode==='phone-verify'&&\"Code sent to \".concat(phoneFormatted)]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-colors\",children:/*#__PURE__*/_jsx(X,{className:\"w-5 h-5\"})})]}),authError&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-3 bg-rose-50 border border-rose-200 rounded-xl text-rose-700 text-sm flex items-center gap-2\",children:[/*#__PURE__*/_jsx(AlertTriangle,{className:\"w-4 h-4 flex-shrink-0\"}),authError]}),resetSent&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-3 bg-green-50 border border-green-200 rounded-xl text-green-700 text-sm flex items-center gap-2\",children:[/*#__PURE__*/_jsx(CheckCircle,{className:\"w-4 h-4 flex-shrink-0\"}),\"Password reset email sent! Check your inbox.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[mode==='phone-verify'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"Verification Code *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",inputMode:\"numeric\",maxLength:6,value:form.otp,onChange:e=>{const val=e.target.value.replace(/\\D/g,'').slice(0,6);setForm(_objectSpread(_objectSpread({},form),{},{otp:val}));setErrors(_objectSpread(_objectSpread({},errors),{},{otp:''}));setAuthError('');},className:\"w-full px-4 py-4 border-2 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500 text-center text-2xl font-bold tracking-[0.5em] \".concat(errors.otp?'border-rose-400 bg-rose-50':'border-gray-200 hover:border-gray-300'),placeholder:\"000000\",autoFocus:true}),errors.otp&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-rose-500 text-xs mt-1.5 flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u26A0\"}),errors.otp]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"Your Name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:form.name,onChange:e=>{setForm(_objectSpread(_objectSpread({},form),{},{name:e.target.value}));setErrors(_objectSpread(_objectSpread({},errors),{},{name:''}));},className:\"w-full px-4 py-3 border-2 border-gray-200 hover:border-gray-300 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500\",placeholder:\"John Doe\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"I am a\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setForm(_objectSpread(_objectSpread({},form),{},{type:'renter'})),className:\"p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-1 \".concat(form.type==='renter'?'border-teal-500 bg-gradient-to-br from-teal-50 to-cyan-50 text-teal-700 shadow-md':'border-gray-200 hover:border-gray-300 text-gray-600 hover:bg-gray-50'),children:[/*#__PURE__*/_jsx(Search,{className:\"w-5 h-5 \".concat(form.type==='renter'?'text-teal-500':'')}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-semibold\",children:\"Looking for a room\"})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setForm(_objectSpread(_objectSpread({},form),{},{type:'landlord'})),className:\"p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-1 \".concat(form.type==='landlord'?'border-rose-500 bg-gradient-to-br from-rose-50 to-pink-50 text-rose-700 shadow-md':'border-gray-200 hover:border-gray-300 text-gray-600 hover:bg-gray-50'),children:[/*#__PURE__*/_jsx(Home,{className:\"w-5 h-5 \".concat(form.type==='landlord'?'text-rose-500':'')}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-semibold\",children:\"Listing rooms\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setMode('phone');setOtpSent(false);setForm(_objectSpread(_objectSpread({},form),{},{otp:''}));},className:\"text-sm text-teal-600 hover:text-teal-700 font-medium\",children:\"\\u2190 Change phone number\"})]}),mode==='phone'&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"Phone Number *\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center px-3 bg-gray-100 border-2 border-gray-200 rounded-xl text-gray-600 font-medium\",children:\"\\uD83C\\uDDFF\\uD83C\\uDDE6 +27\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:form.phone,onChange:e=>{setForm(_objectSpread(_objectSpread({},form),{},{phone:e.target.value}));setErrors(_objectSpread(_objectSpread({},errors),{},{phone:''}));setAuthError('');},className:\"flex-1 px-4 py-3 border-2 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500 \".concat(errors.phone?'border-rose-400 bg-rose-50':'border-gray-200 hover:border-gray-300'),placeholder:\"72 123 4567\",autoFocus:true})]}),errors.phone&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-rose-500 text-xs mt-1.5 flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u26A0\"}),errors.phone]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-2\",children:\"We'll send you an SMS with a verification code\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setMode('signin');setAuthError('');},className:\"text-sm text-teal-600 hover:text-teal-700 font-medium\",children:\"\\u2190 Use email instead\"})]}),(mode==='signin'||mode==='signup')&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:handleGoogleSignIn,disabled:isSubmitting,className:\"flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 hover:border-gray-300 rounded-xl transition-all hover:bg-gray-50 font-medium text-gray-700\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"w-5 h-5\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"path\",{fill:\"#4285F4\",d:\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"}),/*#__PURE__*/_jsx(\"path\",{fill:\"#34A853\",d:\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"}),/*#__PURE__*/_jsx(\"path\",{fill:\"#FBBC05\",d:\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"}),/*#__PURE__*/_jsx(\"path\",{fill:\"#EA4335\",d:\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"})]}),\"Google\"]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:startPhoneAuth,disabled:isSubmitting,className:\"flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 hover:border-gray-300 rounded-xl transition-all hover:bg-gray-50 font-medium text-gray-700\",children:[/*#__PURE__*/_jsx(Phone,{className:\"w-5 h-5 text-green-600\"}),\"Phone\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-full border-t border-gray-200\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"relative flex justify-center text-sm\",children:/*#__PURE__*/_jsx(\"span\",{className:\"px-4 bg-white text-gray-500\",children:\"or use email\"})})]})]}),mode==='reset'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"Email *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:form.email,onChange:e=>{setForm(_objectSpread(_objectSpread({},form),{},{email:e.target.value}));setErrors(_objectSpread(_objectSpread({},errors),{},{email:''}));setAuthError('');},className:\"w-full px-4 py-3 border-2 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500 \".concat(errors.email?'border-rose-400 bg-rose-50':'border-gray-200 hover:border-gray-300'),placeholder:\"john@example.com\"}),errors.email&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-rose-500 text-xs mt-1.5 flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u26A0\"}),errors.email]})]}),(mode==='signin'||mode==='signup')&&/*#__PURE__*/_jsxs(_Fragment,{children:[mode==='signup'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"Full name *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:form.name,onChange:e=>{setForm(_objectSpread(_objectSpread({},form),{},{name:e.target.value}));setErrors(_objectSpread(_objectSpread({},errors),{},{name:''}));},className:\"w-full px-4 py-3 border-2 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500 \".concat(errors.name?'border-rose-400 bg-rose-50':'border-gray-200 hover:border-gray-300'),placeholder:\"John Doe\"}),errors.name&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-rose-500 text-xs mt-1.5 flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u26A0\"}),errors.name]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"Email *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",value:form.email,onChange:e=>{setForm(_objectSpread(_objectSpread({},form),{},{email:e.target.value}));setErrors(_objectSpread(_objectSpread({},errors),{},{email:''}));setAuthError('');},className:\"w-full px-4 py-3 border-2 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500 \".concat(errors.email?'border-rose-400 bg-rose-50':'border-gray-200 hover:border-gray-300'),placeholder:\"john@example.com\"}),errors.email&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-rose-500 text-xs mt-1.5 flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u26A0\"}),errors.email]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"Password *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:form.password,onChange:e=>{setForm(_objectSpread(_objectSpread({},form),{},{password:e.target.value}));setErrors(_objectSpread(_objectSpread({},errors),{},{password:''}));setAuthError('');},className:\"w-full px-4 py-3 border-2 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500 \".concat(errors.password?'border-rose-400 bg-rose-50':'border-gray-200 hover:border-gray-300'),placeholder:\"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\"}),errors.password&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-rose-500 text-xs mt-1.5 flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u26A0\"}),errors.password]})]}),mode==='signup'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"Confirm Password *\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:form.confirmPassword,onChange:e=>{setForm(_objectSpread(_objectSpread({},form),{},{confirmPassword:e.target.value}));setErrors(_objectSpread(_objectSpread({},errors),{},{confirmPassword:''}));},className:\"w-full px-4 py-3 border-2 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500 \".concat(errors.confirmPassword?'border-rose-400 bg-rose-50':'border-gray-200 hover:border-gray-300'),placeholder:\"\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\\u2022\"}),errors.confirmPassword&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-rose-500 text-xs mt-1.5 flex items-center gap-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u26A0\"}),errors.confirmPassword]})]}),mode==='signup'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:[\"Phone \",/*#__PURE__*/_jsx(\"span\",{className:\"text-gray-400 font-normal\",children:\"(optional)\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",value:form.phone,onChange:e=>setForm(_objectSpread(_objectSpread({},form),{},{phone:e.target.value})),className:\"w-full px-4 py-3 border-2 border-gray-200 hover:border-gray-300 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500\",placeholder:\"+27 12 345 6789\"})]}),mode==='signup'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-semibold text-gray-700 mb-2\",children:\"I am a\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setForm(_objectSpread(_objectSpread({},form),{},{type:'renter'})),className:\"p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-1 \".concat(form.type==='renter'?'border-teal-500 bg-gradient-to-br from-teal-50 to-cyan-50 text-teal-700 shadow-md':'border-gray-200 hover:border-gray-300 text-gray-600 hover:bg-gray-50'),children:[/*#__PURE__*/_jsx(Search,{className:\"w-5 h-5 \".concat(form.type==='renter'?'text-teal-500':'')}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-semibold\",children:\"Looking for a room\"})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setForm(_objectSpread(_objectSpread({},form),{},{type:'landlord'})),className:\"p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-1 \".concat(form.type==='landlord'?'border-rose-500 bg-gradient-to-br from-rose-50 to-pink-50 text-rose-700 shadow-md':'border-gray-200 hover:border-gray-300 text-gray-600 hover:bg-gray-50'),children:[/*#__PURE__*/_jsx(Home,{className:\"w-5 h-5 \".concat(form.type==='landlord'?'text-rose-500':'')}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-semibold\",children:\"Listing rooms\"})]})]})]}),mode==='signin'&&/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>{setMode('reset');setAuthError('');setResetSent(false);},className:\"text-sm text-teal-600 hover:text-teal-700 font-medium\",children:\"Forgot your password?\"})]}),/*#__PURE__*/_jsx(\"button\",{id:\"phone-sign-in-button\",onClick:handleSubmit,disabled:isSubmitting,className:\"w-full font-bold py-3 rounded-xl transition-all relative \".concat(isSubmitting?'bg-teal-400 cursor-not-allowed':'bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white shadow-lg hover:shadow-xl hover:shadow-teal-500/25'),children:isSubmitting?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"opacity-0\",children:\"Submit\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute inset-0 flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\"})})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[mode==='signin'&&'Sign In',mode==='signup'&&'Create Account',mode==='reset'&&'Send Reset Link',mode==='phone'&&'Send Verification Code',mode==='phone-verify'&&'Verify & Sign In']})}),/*#__PURE__*/_jsx(\"div\",{id:\"recaptcha-container\",className:\"flex justify-center\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center text-sm text-gray-600\",children:[mode==='signin'&&/*#__PURE__*/_jsxs(_Fragment,{children:[\"Don't have an account?\",' ',/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setMode('signup');setAuthError('');},className:\"text-teal-600 hover:text-teal-700 font-semibold\",children:\"Sign up\"})]}),mode==='signup'&&/*#__PURE__*/_jsxs(_Fragment,{children:[\"Already have an account?\",' ',/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setMode('signin');setAuthError('');},className:\"text-teal-600 hover:text-teal-700 font-semibold\",children:\"Sign in\"})]}),mode==='reset'&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setMode('signin');setAuthError('');setResetSent(false);},className:\"text-teal-600 hover:text-teal-700 font-semibold\",children:\"\\u2190 Back to sign in\"}),(mode==='phone'||mode==='phone-verify')&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>{setMode('signin');setAuthError('');setOtpSent(false);},className:\"text-teal-600 hover:text-teal-700 font-semibold\",children:\"\\u2190 Back to sign in\"})]})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-400 text-center mt-6\",children:[\"By continuing, you agree to our \",/*#__PURE__*/_jsx(\"button\",{className:\"text-teal-600 hover:underline\",children:\"Terms of Service\"}),\" and \",/*#__PURE__*/_jsx(\"button\",{className:\"text-teal-600 hover:underline\",children:\"Privacy Policy\"})]})]})});}function BottomNav(_ref1){let{currentView,setCurrentView,userType}=_ref1;const navItems=[{id:'browse',label:'Browse',icon:/*#__PURE__*/_jsx(Search,{className:\"w-5 h-5\"}),activeColor:'teal'},{id:'add',label:'List',icon:/*#__PURE__*/_jsx(PlusCircle,{className:\"w-5 h-5\"}),requiresLandlord:true,activeColor:'rose'},{id:'favorites',label:'Saved',icon:/*#__PURE__*/_jsx(Heart,{className:\"w-5 h-5\"}),activeColor:'rose'},{id:'profile',label:'Profile',icon:/*#__PURE__*/_jsx(User,{className:\"w-5 h-5\"}),activeColor:'blue'}];return/*#__PURE__*/_jsx(\"div\",{className:\"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-gray-100 px-4 py-2 z-20 md:hidden safe-area-bottom\",children:/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-4 gap-1 max-w-md mx-auto\",children:navItems.map(item=>{const disabled=item.requiresLandlord&&userType!=='landlord';const isActive=currentView===item.id;const colorClasses={teal:'text-teal-600 bg-teal-50',rose:'text-rose-600 bg-rose-50',blue:'text-blue-600 bg-blue-50'};return/*#__PURE__*/_jsxs(\"button\",{type:\"button\",disabled:disabled,onClick:()=>!disabled&&setCurrentView(item.id),className:\"flex flex-col items-center gap-0.5 py-2 px-1 rounded-xl transition-all duration-200 \".concat(disabled?'opacity-40 cursor-not-allowed':'active:scale-95',\" \").concat(isActive?\"\".concat(colorClasses[item.activeColor],\" font-semibold\"):'text-gray-400 hover:text-gray-600 hover:bg-gray-50'),children:[/*#__PURE__*/_jsx(\"span\",{className:\"transition-transform duration-200 \".concat(isActive?'scale-110':''),children:item.icon}),/*#__PURE__*/_jsx(\"span\",{className:\"text-[10px] font-medium\",children:item.label})]},item.id);})})});}","map":{"version":3,"names":["React","useState","useEffect","useMemo","useCallback","initFirebase","initAnalytics","requestFcmToken","listenForegroundMessages","trackEvent","fetchListings","addListing","deleteListing","subscribeToListings","isFirestoreEnabled","subscribeToAuthState","getUserProfile","saveUserProfile","initRecaptcha","sendPhoneOTP","verifyPhoneOTP","clearRecaptcha","getLinkedProviders","linkGoogleAccount","Home","PlusCircle","Search","MapPin","X","User","Phone","Mail","Edit","CheckCircle","Heart","Calendar","Bell","AlertTriangle","LogOut","Link2","Download","Smartphone","Header","ListingDetailModal","Footer","BrowseView","PrivacyPolicyModal","NotificationBanner","AnalyticsConsentModal","NotificationsPanel","PhotoEditor","OfflineIndicator","BackToTop","getNotifications","loadListingTemplate","saveListingTemplate","clearListingTemplate","signUpWithEmail","signInWithEmail","signInWithGoogle","signOut","firebaseSignOut","resetPassword","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","RentalPlatform","currentView","setCurrentView","userType","setUserType","previewAsRenter","setPreviewAsRenter","listings","setListings","selectedListing","setSelectedListing","users","setUsers","searchLocation","setSearchLocation","priceRange","setPriceRange","selectedAmenities","setSelectedAmenities","sortBy","setSortBy","currentUser","setCurrentUser","userProfile","setUserProfile","authLoading","setAuthLoading","showAuthModal","setShowAuthModal","authDefaultType","setAuthDefaultType","toast","setToast","showPrivacyPolicy","setShowPrivacyPolicy","notificationBanner","setNotificationBanner","showAnalyticsConsent","setShowAnalyticsConsent","showNotificationsPanel","setShowNotificationsPanel","unreadCount","setUnreadCount","showInstallBanner","setShowInstallBanner","deferredPrompt","setDeferredPrompt","openAuthModal","type","arguments","length","undefined","authFunctions","signUp","email","password","displayName","userTypeParam","phone","firebaseUser","profileData","photoURL","createdAt","Date","toISOString","landlordComplete","uid","signIn","signInGoogle","profile","phoneNumber","sendPasswordReset","otpCode","clearPhoneAuth","updateUnreadCount","notifications","filter","n","read","interval","setInterval","clearInterval","isInstalled","window","matchMedia","matches","navigator","standalone","wasDismissed","localStorage","getItem","dismissedTime","parseInt","daysSinceDismissed","now","handleBeforeInstallPrompt","e","preventDefault","setTimeout","addEventListener","isIOS","test","userAgent","removeEventListener","handleInstallClick","prompt","outcome","userChoice","showToast","dismissInstallBanner","setItem","toString","loadData","app","unsubscribeAuth","err","console","error","unsubscribeListings","firestoreListings","JSON","stringify","analyticsConsent","process","env","REACT_APP_ENABLE_ANALYTICS","token","log","warn","payload","notification","title","body","listingsResult","parse","userResult","usersResult","user","parsed","Array","isArray","sampleListings","id","price","location","description","photos","status","availableDate","amenities","landlordId","landlordName","landlordPhone","landlordEmail","landlordPhoto","isDuplicateContact","ignoreId","normalizedPhone","trim","normalizedEmail","toLowerCase","some","u","uPhone","uEmail","phoneMatch","emailMatch","message","handleAnalyticsConsentAccept","handleAnalyticsConsentDecline","saveListings","newListings","serviceWorker","controller","postMessage","_unused","saveSubscriptions","subscriptions","getSubscriptions","res","subscribeToArea","userId","area","alert","subs","includes","push","concat","handleProfileSetup","_objectSpread","whatsapp","notificationPrefs","updates","marketing","existingUsersRaw","existingUsers","_unused2","_unused3","_unused4","handleUpdateProfile","updatedUser","_unused5","idx","findIndex","_unused6","_unused7","handleSignOut","handleCompleteOnboarding","onboardData","landlordInfo","prev","handleAddListing","listingData","_listingData$latitude","_listingData$longitud","fullAddress","streetAddress","Boolean","join","newListingData","latitude","longitude","paymentMethod","premium","firestoreId","newListing","updatedListings","scrollTo","top","behavior","filteredListings","listing","matchesLocation","parseFloat","matchesPrice","matchesAmenities","every","amenity","_listing$amenities","sort","a","b","className","children","onClick","onOpenNotifications","onClose","role","ProfileSetupView","onSubmit","ProfileView","name","photo","onEdit","onSignOut","linkedProviders","onLinkGoogle","reload","onLinkPhone","onUpdatePrefs","prefs","EditProfileView","onCancel","LandlordOnboardingView","onComplete","onSelectListing","onRequireAuth","previewMode","AddListingView","onRequireOnboarding","MyListingsView","l","onDelete","deleted","updated","FavoritesView","landlord","AuthModal","defaultType","onSuccess","BottomNav","onAccept","onDecline","listingId","find","onOpenPrivacy","_ref","formData","setFormData","errors","setErrors","touched","setTouched","validateField","value","extras","newErrors","handlePhotoUpload","file","target","files","size","reader","FileReader","onloadend","result","readAsDataURL","handleSubmit","allTouched","Object","keys","src","alt","accept","onChange","required","onBlur","placeholder","_ref2","_user$name","_user$name$charAt","localPrefs","setLocalPrefs","linkingInProgress","setLinkingInProgress","linkError","setLinkError","linkSuccess","setLinkSuccess","togglePref","key","next","handleLinkGoogle","handleLinkPhone","hasGoogle","hasPhone","hasPassword","charAt","toUpperCase","toLocaleDateString","year","month","day","checked","viewBox","fill","d","disabled","_ref3","_currentUser$name","_currentUser$name$cha","form","setForm","businessName","bankDetails","idNumber","agree","_ref4","_ref5","favorites","setFavorites","rawFavorites","arr","_unused8","toggleFavorite","_unused9","favoriteListings","map","ListingCard","require","default","isFavorite","onToggleFavorite","createDefaultListingForm","split","roomType","leaseDuration","petFriendly","genderPreference","_ref6","GEOCODER_KEY","REACT_APP_GEOCODER_API_KEY","GEOCODER_PROVIDER","REACT_APP_GEOCODER_PROVIDER","base","saved","_saved$petFriendly","_saved$premium","geocodingStatus","setGecodingStatus","showPhotoEditor","setShowPhotoEditor","reverseGeocodeCacheRef","useRef","lastGeocodeSource","setLastGeocodeSource","fullAddressInput","setFullAddressInput","isFullAddressEditing","setIsFullAddressEditing","_saved$petFriendly2","_saved$premium2","_formData$photos","hasFormData","handleBeforeUnload","returnValue","corsFallbackTransforms","url","startsWith","encodeURIComponent","fetchWithCorsFallback","options","cloneOptions","headers","attempt","targetUrl","resp","fetch","ok","Error","_options$signal","signal","aborted","lastError","transform","proxiedUrl","proxyErr","_options$signal2","forwardGeocodeAddress","query","_data$features","data","json","features","f","_f$geometry","_f$geometry$coordinat","_f$geometry2","_f$geometry2$coordina","lat","center","geometry","coordinates","lon","label","place_name","text","source","entry","mapsResp","mapsData","slice","display_name","mapsErr","API_BASE","REACT_APP_PROXY_BASE","port","proxyResp","proxyData","directResp","directData","directErr","availableAmenities","_ref7","_extras$streetAddress","_ref8","_extras$location","streetText","areaText","raw","current","geocodeAddress","results","best","areaResults","bestArea","toggleAmenity","isSubmitting","setIsSubmitting","googleMapsQuery","googleMapsUrl","combinedFormAddress","part","handleFullAddressChange","parts","street","derivedLocation","words","locationWordCount","Math","min","ceil","handleResetSavedTemplate","blank","completed","total","style","width","max","rows","onFocus","toFixed","href","rel","htmlFor","index","onPhotosChange","newPhotos","maxPhotos","_ref9","hash","_listing$price","toLocaleString","_ref0","mode","setMode","confirmPassword","otp","authError","setAuthError","resetSent","setResetSent","otpSent","setOtpSent","phoneFormatted","setPhoneFormatted","validateForm","formattedNumber","errorMessage","code","handleGoogleSignIn","startPhoneAuth","inputMode","maxLength","val","replace","autoFocus","_ref1","navItems","icon","activeColor","requiresLandlord","item","isActive","colorClasses","teal","rose","blue"],"sources":["C:/Users/kutum/Documents/room-rental-platform/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useMemo, useCallback } from 'react';\nimport { initFirebase, initAnalytics, requestFcmToken, listenForegroundMessages, trackEvent, fetchListings, addListing, deleteListing, subscribeToListings, isFirestoreEnabled, subscribeToAuthState, getUserProfile, saveUserProfile, initRecaptcha, sendPhoneOTP, verifyPhoneOTP, clearRecaptcha, getLinkedProviders, linkGoogleAccount } from './firebase';\nimport { Home, PlusCircle, Search, MapPin, X, User, Phone, Mail, Edit, CheckCircle, Heart, Calendar, Bell, AlertTriangle, LogOut, Link2, Download, Smartphone } from 'lucide-react';\nimport Header from './components/Header';\nimport ListingDetailModal from './components/ListingDetailModal';\nimport Footer from './components/Footer';\nimport BrowseView from './components/BrowseView';\nimport PrivacyPolicyModal from './components/PrivacyPolicyModal';\nimport NotificationBanner from './components/NotificationBanner';\nimport AnalyticsConsentModal from './components/AnalyticsConsentModal';\nimport NotificationsPanel from './components/NotificationsPanel';\nimport PhotoEditor from './components/PhotoEditor';\nimport OfflineIndicator from './components/OfflineIndicator';\nimport BackToTop from './components/BackToTop';\nimport { getNotifications } from './utils/notificationEngine';\nimport { loadListingTemplate, saveListingTemplate, clearListingTemplate } from './utils/listingTemplateStorage';\nimport { \n  signUpWithEmail, \n  signInWithEmail, \n  signInWithGoogle, \n  signOut as firebaseSignOut, \n  resetPassword \n} from './firebase';\n\nexport default function RentalPlatform() {\n  const [currentView, setCurrentView] = useState('browse');\n  const [userType, setUserType] = useState(null);\n  const [previewAsRenter, setPreviewAsRenter] = useState(false); // landlord UI preview toggle\n  const [listings, setListings] = useState([]);\n  const [selectedListing, setSelectedListing] = useState(null);\n  const [users, setUsers] = useState([]); // registry of all users (localStorage 'users')\n  const [searchLocation, setSearchLocation] = useState('');\n  const [priceRange, setPriceRange] = useState([0, 10000]);\n  const [selectedAmenities, setSelectedAmenities] = useState([]);\n  const [sortBy, setSortBy] = useState('newest');\n  const [currentUser, setCurrentUser] = useState(null);\n  const [userProfile, setUserProfile] = useState(null); // Extended profile from Firestore\n  const [authLoading, setAuthLoading] = useState(true); // Loading state for auth\n  const [showAuthModal, setShowAuthModal] = useState(false);\n  const [authDefaultType, setAuthDefaultType] = useState('renter');\n  // Mobile menu state moved into Header component\n  const [toast, setToast] = useState(null);\n  const [showPrivacyPolicy, setShowPrivacyPolicy] = useState(false);\n  const [notificationBanner, setNotificationBanner] = useState(null);\n  const [showAnalyticsConsent, setShowAnalyticsConsent] = useState(false);\n  const [showNotificationsPanel, setShowNotificationsPanel] = useState(false);\n  const [unreadCount, setUnreadCount] = useState(0);\n  const [showInstallBanner, setShowInstallBanner] = useState(false);\n  const [deferredPrompt, setDeferredPrompt] = useState(null);\n\n  const openAuthModal = (type = 'renter') => {\n    setAuthDefaultType(type);\n    setShowAuthModal(true);\n  };\n\n  // Auth functions to pass to AuthModal\n  const authFunctions = {\n    signUp: async (email, password, displayName, userTypeParam = 'renter', phone = '') => {\n      const firebaseUser = await signUpWithEmail(email, password, displayName);\n      \n      // Create user profile in Firestore\n      const profileData = {\n        email: firebaseUser.email,\n        displayName: displayName || firebaseUser.displayName,\n        userType: userTypeParam,\n        phone,\n        photoURL: firebaseUser.photoURL || '',\n        createdAt: new Date().toISOString(),\n        landlordComplete: userTypeParam === 'renter',\n      };\n      \n      await saveUserProfile(firebaseUser.uid, profileData);\n      return firebaseUser;\n    },\n    signIn: async (email, password) => {\n      return await signInWithEmail(email, password);\n    },\n    signInGoogle: async (userTypeParam = 'renter') => {\n      const firebaseUser = await signInWithGoogle();\n      \n      // Check if user profile exists\n      let profile = await getUserProfile(firebaseUser.uid);\n      \n      if (!profile) {\n        // Create new profile for Google user\n        const profileData = {\n          email: firebaseUser.email,\n          displayName: firebaseUser.displayName || '',\n          userType: userTypeParam,\n          phone: firebaseUser.phoneNumber || '',\n          photoURL: firebaseUser.photoURL || '',\n          createdAt: new Date().toISOString(),\n          landlordComplete: userTypeParam === 'renter',\n        };\n        \n        await saveUserProfile(firebaseUser.uid, profileData);\n      }\n      \n      return firebaseUser;\n    },\n    sendPasswordReset: async (email) => {\n      await resetPassword(email);\n    },\n    sendPhoneOTP: async (phoneNumber) => {\n      // Initialize reCAPTCHA if not already done\n      initRecaptcha('phone-sign-in-button');\n      return await sendPhoneOTP(phoneNumber);\n    },\n    verifyPhoneOTP: async (otpCode, userTypeParam = 'renter', displayName = '') => {\n      const firebaseUser = await verifyPhoneOTP(otpCode);\n      \n      // Check if user profile exists\n      let profile = await getUserProfile(firebaseUser.uid);\n      \n      if (!profile) {\n        // Create new profile for phone user\n        const profileData = {\n          email: '',\n          displayName: displayName || firebaseUser.phoneNumber,\n          userType: userTypeParam,\n          phone: firebaseUser.phoneNumber || '',\n          photoURL: '',\n          createdAt: new Date().toISOString(),\n          landlordComplete: userTypeParam === 'renter',\n        };\n        \n        await saveUserProfile(firebaseUser.uid, profileData);\n      }\n      \n      return firebaseUser;\n    },\n    clearPhoneAuth: () => {\n      clearRecaptcha();\n    }\n  };\n\n  // Update unread notification count\n  useEffect(() => {\n    const updateUnreadCount = () => {\n      const notifications = getNotifications();\n      setUnreadCount(notifications.filter(n => !n.read).length);\n    };\n    updateUnreadCount();\n    const interval = setInterval(updateUnreadCount, 5000); // check every 5s\n    return () => clearInterval(interval);\n  }, []);\n\n  // PWA Install Banner Logic\n  useEffect(() => {\n    // Check if already installed or dismissed\n    const isInstalled = window.matchMedia('(display-mode: standalone)').matches \n                     || window.navigator.standalone === true;\n    const wasDismissed = localStorage.getItem('installBannerDismissed');\n    const dismissedTime = wasDismissed ? parseInt(wasDismissed, 10) : 0;\n    const daysSinceDismissed = (Date.now() - dismissedTime) / (1000 * 60 * 60 * 24);\n    \n    if (isInstalled) {\n      setShowInstallBanner(false);\n      return;\n    }\n\n    // Listen for the beforeinstallprompt event\n    const handleBeforeInstallPrompt = (e) => {\n      e.preventDefault();\n      setDeferredPrompt(e);\n      // Show banner if not dismissed recently (within 7 days)\n      if (!wasDismissed || daysSinceDismissed > 7) {\n        setTimeout(() => setShowInstallBanner(true), 3000); // Show after 3 seconds\n      }\n    };\n\n    window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n\n    // For iOS (no beforeinstallprompt), show manual instructions after delay\n    const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);\n    if (isIOS && !isInstalled && (!wasDismissed || daysSinceDismissed > 7)) {\n      setTimeout(() => setShowInstallBanner(true), 5000);\n    }\n\n    return () => {\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n    };\n  }, []);\n\n  const handleInstallClick = async () => {\n    if (deferredPrompt) {\n      deferredPrompt.prompt();\n      const { outcome } = await deferredPrompt.userChoice;\n      if (outcome === 'accepted') {\n        setShowInstallBanner(false);\n      }\n      setDeferredPrompt(null);\n    } else {\n      // iOS - show instructions\n      showToast('Tap the Share button, then \"Add to Home Screen\"', 'info', 'Install Room24');\n    }\n  };\n\n  const dismissInstallBanner = () => {\n    setShowInstallBanner(false);\n    localStorage.setItem('installBannerDismissed', Date.now().toString());\n  };\n  \n\n  useEffect(() => {\n    loadData();\n    // Initialize Firebase + FCM token fetch (deferred until user interaction if desired)\n    const app = initFirebase();\n    \n    // Set up Firebase Auth listener\n    const unsubscribeAuth = subscribeToAuthState(async (firebaseUser) => {\n      if (firebaseUser) {\n        setCurrentUser(firebaseUser);\n        // Fetch extended profile from Firestore\n        try {\n          const profile = await getUserProfile(firebaseUser.uid);\n          if (profile) {\n            setUserProfile(profile);\n            setUserType(profile.userType || 'renter');\n          }\n        } catch (err) {\n          console.error('Error fetching user profile:', err);\n        }\n      } else {\n        setCurrentUser(null);\n        setUserProfile(null);\n        setUserType(null);\n      }\n      setAuthLoading(false);\n    });\n    \n    // Set up real-time listener for Firestore listings\n    let unsubscribeListings = null;\n    if (isFirestoreEnabled()) {\n      unsubscribeListings = subscribeToListings((firestoreListings) => {\n        if (firestoreListings && firestoreListings.length >= 0) {\n          setListings(firestoreListings);\n          // Cache locally for offline access\n          localStorage.setItem('listings', JSON.stringify(firestoreListings));\n        }\n      });\n    }\n    \n    // Check analytics consent and show modal if not set\n    const analyticsConsent = localStorage.getItem('analytics-consent');\n    if (!analyticsConsent && process.env.REACT_APP_ENABLE_ANALYTICS === 'true') {\n      // Delay modal slightly so UI loads first\n      setTimeout(() => setShowAnalyticsConsent(true), 2000);\n    } else if (analyticsConsent === 'yes') {\n      initAnalytics(app);\n    }\n\n    (async () => {\n      try {\n        const token = await requestFcmToken();\n        if (token) {\n          console.log('Obtained FCM token:', token);\n          trackEvent('fcm_token_obtained');\n        }\n      } catch (e) {\n        console.warn('FCM token request failed', e);\n      }\n    })();\n    \n    listenForegroundMessages((payload) => {\n      // Display notification banner instead of toast\n      const notification = payload?.notification || {};\n      if (notification.title || notification.body) {\n        setNotificationBanner({\n          title: notification.title,\n          body: notification.body\n        });\n        // Auto-dismiss after 8 seconds\n        setTimeout(() => setNotificationBanner(null), 8000);\n      }\n    });\n    \n    // Cleanup: unsubscribe from listeners on unmount\n    return () => {\n      if (unsubscribeAuth) {\n        unsubscribeAuth();\n      }\n      if (unsubscribeListings) {\n        unsubscribeListings();\n      }\n    };\n  }, []);\n\n  // Guard: if someone navigates to 'add' without landlord auth, prompt to sign in\n  useEffect(() => {\n    if (authLoading) return; // Wait for auth to load\n    \n    if (currentView === 'add') {\n      if (!currentUser) {\n        openAuthModal('landlord');\n        setCurrentView('browse');\n      } else if (userType !== 'landlord') {\n        // Not a landlord - prompt to become one\n        openAuthModal('landlord');\n        setCurrentView('browse');\n      } else if (!userProfile?.landlordComplete) {\n        // Landlord but hasn't completed onboarding\n        setCurrentView('landlord-onboarding');\n      }\n    }\n  }, [currentView, currentUser, userType, userProfile, authLoading]);\n\n  const loadData = async () => {\n    try {\n      // Try to load from Firestore first\n      const firestoreListings = await fetchListings();\n      if (firestoreListings && firestoreListings.length > 0) {\n        console.log('Loaded listings from Firestore');\n        setListings(firestoreListings);\n        // Also cache to localStorage for offline access\n        localStorage.setItem('listings', JSON.stringify(firestoreListings));\n      } else {\n        // Fall back to localStorage\n        const listingsResult = localStorage.getItem('listings');\n        if (listingsResult) {\n          console.log('Loaded listings from localStorage (Firestore empty or unavailable)');\n          setListings(JSON.parse(listingsResult));\n        }\n      }\n      \n      const userResult = localStorage.getItem('current-user');\n      const usersResult = localStorage.getItem('users');\n      if (userResult) {\n        const user = JSON.parse(userResult);\n        setCurrentUser(user);\n        setUserType(user.type);\n      }\n      if (usersResult) {\n        try {\n          const parsed = JSON.parse(usersResult);\n          setUsers(Array.isArray(parsed) ? parsed : []);\n        } catch (e) {\n          console.warn('Corrupt users array in storage, resetting');\n          setUsers([]);\n        }\n      }\n    } catch (error) {\n      console.log('No existing data found, starting fresh');\n      // Add sample listings for testing the map\n      const sampleListings = [\n        {\n          id: 'listing-1',\n          title: 'Cozy Room in Soweto',\n          price: 2500,\n          location: 'Soweto, Johannesburg',\n          description: 'Comfortable room with bathroom and kitchen access',\n          photos: [],\n          status: 'available',\n          availableDate: new Date().toISOString(),\n          amenities: ['WiFi', 'Kitchen'],\n          landlordId: 'landlord-1',\n          landlordName: 'John Smith',\n          landlordPhone: '+27 123 456 7890',\n          landlordEmail: 'john@example.com',\n          landlordPhoto: '',\n          createdAt: new Date().toISOString()\n        },\n        {\n          id: 'listing-2',\n          title: 'Modern Apartment in Sandton',\n          price: 4500,\n          location: 'Sandton, Johannesburg',\n          description: 'Luxurious apartment with parking and security',\n          photos: [],\n          status: 'available',\n          availableDate: new Date().toISOString(),\n          amenities: ['WiFi', 'Parking', 'Air Conditioning'],\n          landlordId: 'landlord-2',\n          landlordName: 'Jane Doe',\n          landlordPhone: '+27 987 654 3210',\n          landlordEmail: 'jane@example.com',\n          landlordPhoto: '',\n          createdAt: new Date().toISOString()\n        },\n        {\n          id: 'listing-3',\n          title: 'Studio in Midrand',\n          price: 3200,\n          location: 'Midrand, Johannesburg',\n          description: 'Spacious studio flat with laundry facilities',\n          photos: [],\n          status: 'available',\n          availableDate: new Date().toISOString(),\n          amenities: ['Laundry', 'WiFi'],\n          landlordId: 'landlord-3',\n          landlordName: 'Mike Johnson',\n          landlordPhone: '+27 555 555 5555',\n          landlordEmail: 'mike@example.com',\n          landlordPhoto: '',\n          createdAt: new Date().toISOString()\n        }\n      ];\n      setListings(sampleListings);\n    }\n  };\n\n  // Helper: check for duplicate phone or email in registry (exclude an optional user id)\n  const isDuplicateContact = (phone, email, ignoreId = null) => {\n    const normalizedPhone = (phone || '').trim();\n    const normalizedEmail = (email || '').trim().toLowerCase();\n    if (!users || users.length === 0) return false;\n    return users.some(u => {\n      if (ignoreId && u.id === ignoreId) return false;\n      const uPhone = (u.phone || '').trim();\n      const uEmail = (u.email || '').trim().toLowerCase();\n      const phoneMatch = normalizedPhone && uPhone && uPhone === normalizedPhone;\n      const emailMatch = normalizedEmail && uEmail && uEmail === normalizedEmail;\n      return phoneMatch || emailMatch;\n    });\n  };\n\n  // Toast notification helper\n  const showToast = (message, type = 'info', title = '') => {\n    setToast({ message, type, title });\n    setTimeout(() => setToast(null), 5000);\n  };\n\n  const handleAnalyticsConsentAccept = () => {\n    localStorage.setItem('analytics-consent', 'yes');\n    setShowAnalyticsConsent(false);\n    const app = initFirebase();\n    initAnalytics(app);\n    trackEvent('analytics_consent_granted');\n    showToast('Analytics enabled', 'success', 'Thank you!');\n  };\n\n  const handleAnalyticsConsentDecline = () => {\n    localStorage.setItem('analytics-consent', 'no');\n    setShowAnalyticsConsent(false);\n    showToast('Analytics disabled', 'info');\n  };\n\n  const saveListings = async (newListings) => {\n    try {\n      localStorage.setItem('listings', JSON.stringify(newListings));\n      setListings(newListings);\n      // Broadcast to runtime service worker for offline snapshot caching\n      if (navigator.serviceWorker && navigator.serviceWorker.controller) {\n        try { navigator.serviceWorker.controller.postMessage({ type: 'SYNC_LISTINGS', payload: newListings }); } catch {}\n      }\n    } catch (error) {\n      console.error('Error saving listings:', error);\n    }\n  };\n\n  const saveSubscriptions = async (subscriptions) => {\n    try {\n      localStorage.setItem('subscriptions', JSON.stringify(subscriptions));\n    } catch (error) {\n      console.error('Error saving subscriptions:', error);\n    }\n  };\n\n  const getSubscriptions = async () => {\n    try {\n      const res = localStorage.getItem('subscriptions');\n      return res ? JSON.parse(res) : {};\n    } catch (err) {\n      console.error('Error loading subscriptions', err);\n    }\n    return {};\n  };\n\n  const subscribeToArea = async (userId, area) => {\n    if (!userId) {\n      openAuthModal('renter');\n      return;\n    }\n    if (!area || area.trim() === '') {\n      alert('Please enter a location to subscribe to.');\n      return;\n    }\n    try {\n      const subs = await getSubscriptions();\n      subs[userId] = subs[userId] || [];\n      if (!subs[userId].includes(area)) {\n        subs[userId].push(area);\n        await saveSubscriptions(subs);\n        alert(`Subscribed to updates for ${area}`);\n      } else {\n        alert(`You are already subscribed to ${area}`);\n      }\n    } catch (err) {\n      console.error('Subscribe failed', err);\n      alert('Could not subscribe. Please try again.');\n    }\n  };\n\n  \n\nconst handleProfileSetup = async (profileData) => {\n  try {\n    // Duplicate guard\n    if (isDuplicateContact(profileData.phone, profileData.email)) {\n      showToast('Phone or email already registered', 'error', 'Duplicate');\n      return;\n    }\n    const userId = `user-${Date.now()}`;\n    const user = { \n      id: userId, \n      type: userType, \n      ...profileData,\n      whatsapp: profileData.whatsapp || '',\n      notificationPrefs: { updates: true, marketing: false },\n      createdAt: new Date().toISOString()\n    };\n    \n    localStorage.setItem('current-user', JSON.stringify(user));\n    setCurrentUser(user);\n    // Update users registry\n    const existingUsersRaw = localStorage.getItem('users');\n    let existingUsers = [];\n    if (existingUsersRaw) {\n      try { existingUsers = JSON.parse(existingUsersRaw); } catch { existingUsers = []; }\n    }\n    existingUsers.push(user);\n    localStorage.setItem('users', JSON.stringify(existingUsers));\n    setUsers(existingUsers);\n    showToast('Profile created successfully!', 'success', 'Welcome!');\n    setCurrentView('browse');\n  } catch (error) {\n    console.error('Error saving profile:', error);\n    // Still set the user locally even if storage fails\n    const userId = `user-${Date.now()}`;\n    const user = { \n      id: userId, \n      type: userType, \n      ...profileData,\n      whatsapp: profileData.whatsapp || '',\n      createdAt: new Date().toISOString()\n    };\n    setCurrentUser(user);\n    const existingUsersRaw = localStorage.getItem('users');\n    let existingUsers = [];\n    if (existingUsersRaw) {\n      try { existingUsers = JSON.parse(existingUsersRaw); } catch { existingUsers = []; }\n    }\n    existingUsers.push(user);\n    try { localStorage.setItem('users', JSON.stringify(existingUsers)); } catch {}\n    setUsers(existingUsers);\n    showToast('Profile created (data may not be persisted)', 'error');\n    setCurrentView('browse');\n  }\n};\n\nconst handleUpdateProfile = async (profileData) => {\n  try {\n    // Duplicate guard (exclude current user id)\n    if (isDuplicateContact(profileData.phone, profileData.email, currentUser?.id)) {\n      showToast('Phone or email already used by another account', 'error', 'Duplicate');\n      return;\n    }\n    const updatedUser = { ...currentUser, ...profileData };\n    \n    localStorage.setItem('current-user', JSON.stringify(updatedUser));\n    setCurrentUser(updatedUser);\n    // Update registry entry\n    const existingUsersRaw = localStorage.getItem('users');\n    let existingUsers = [];\n    if (existingUsersRaw) {\n      try { existingUsers = JSON.parse(existingUsersRaw); } catch { existingUsers = []; }\n    }\n    const idx = existingUsers.findIndex(u => u.id === updatedUser.id);\n    if (idx !== -1) {\n      existingUsers[idx] = updatedUser;\n    } else {\n      existingUsers.push(updatedUser); // ensure presence\n    }\n    localStorage.setItem('users', JSON.stringify(existingUsers));\n    setUsers(existingUsers);\n    showToast('Profile updated successfully!', 'success');\n    setCurrentView('browse');\n  } catch (error) {\n    console.error('Error updating profile:', error);\n    const updatedUser = { ...currentUser, ...profileData };\n    setCurrentUser(updatedUser);\n    const existingUsersRaw = localStorage.getItem('users');\n    let existingUsers = [];\n    if (existingUsersRaw) {\n      try { existingUsers = JSON.parse(existingUsersRaw); } catch { existingUsers = []; }\n    }\n    const idx = existingUsers.findIndex(u => u.id === updatedUser.id);\n    if (idx !== -1) {\n      existingUsers[idx] = updatedUser;\n    } else {\n      existingUsers.push(updatedUser);\n    }\n    try { localStorage.setItem('users', JSON.stringify(existingUsers)); } catch {}\n    setUsers(existingUsers);\n    showToast('Profile updated (data may not be persisted)', 'error');\n    setCurrentView('browse');\n  }\n};\n\n// Sign out using Firebase\nconst handleSignOut = async () => {\n  try {\n    await firebaseSignOut();\n    setCurrentUser(null);\n    setUserProfile(null);\n    setUserType(null);\n    setCurrentView('browse');\n    showToast('Signed out successfully.', 'info');\n  } catch (e) {\n    console.error('Sign out error:', e);\n    showToast('Error signing out. Please try again.', 'error');\n  }\n};\n\nconst handleCompleteOnboarding = async (onboardData) => {\n  try {\n    if (currentUser?.uid) {\n      await saveUserProfile(currentUser.uid, { \n        landlordComplete: true, \n        landlordInfo: onboardData \n      });\n      setUserProfile(prev => ({ ...prev, landlordComplete: true, landlordInfo: onboardData }));\n    }\n    setCurrentView('browse');\n    showToast('Profile complete! You can now create listings.', 'success');\n  } catch (err) {\n    console.error('Onboarding save failed', err);\n    setCurrentView('browse');\n  }\n};\n\nconst handleAddListing = async (listingData) => {\n  // Combine streetAddress and location into fullAddress for complete address storage\n  const fullAddress = [listingData.streetAddress, listingData.location]\n    .filter(Boolean)\n    .join(', ');\n  \n  const newListingData = {\n    title: listingData.title,\n    price: listingData.price,\n    location: listingData.location,\n    streetAddress: listingData.streetAddress || '',\n    fullAddress: fullAddress || listingData.location || '', // Store complete address\n    description: listingData.description,\n    photos: listingData.photos || [],\n    status: listingData.status || 'available',\n    availableDate: listingData.availableDate || new Date().toISOString(),\n    amenities: listingData.amenities || [],\n    latitude: listingData.latitude ?? null,\n    longitude: listingData.longitude ?? null,\n    paymentMethod: listingData.paymentMethod || 'Bank and Cash',\n    premium: !!listingData.premium,\n    // Use Firebase UID for landlordId\n    landlordId: currentUser?.uid || currentUser?.id,\n    landlordName: userProfile?.displayName || currentUser?.displayName || '',\n    landlordPhone: userProfile?.phone || '',\n    landlordEmail: currentUser?.email || '',\n    landlordPhoto: userProfile?.photoURL || currentUser?.photoURL || '',\n  };\n\n  try {\n    // Try to save to Firestore first\n    const firestoreId = await addListing(newListingData);\n    if (firestoreId) {\n      // Successfully saved to Firestore\n      const newListing = { ...newListingData, id: firestoreId, createdAt: new Date().toISOString() };\n      const updatedListings = [...listings, newListing];\n      setListings(updatedListings);\n      // Also cache locally\n      localStorage.setItem('listings', JSON.stringify(updatedListings));\n      showToast('Listing created and shared online!', 'success', 'Success!');\n    } else {\n      // Firestore not available, save locally only\n      const newListing = { ...newListingData, id: `listing-${Date.now()}`, createdAt: new Date().toISOString() };\n      const updatedListings = [...listings, newListing];\n      await saveListings(updatedListings);\n      showToast('Listing saved locally (offline mode)', 'info', 'Saved');\n    }\n  } catch (error) {\n    console.error('Error adding listing:', error);\n    // Fall back to local save\n    const newListing = { ...newListingData, id: `listing-${Date.now()}`, createdAt: new Date().toISOString() };\n    const updatedListings = [...listings, newListing];\n    await saveListings(updatedListings);\n    showToast('Listing saved locally', 'info', 'Saved');\n  }\n  \n  setCurrentView('browse');\n  // Scroll to top to see new listing\n  window.scrollTo({ top: 0, behavior: 'smooth' });\n};\n\n  // Messaging removed\n\nconst filteredListings = listings\n  .filter(listing => {\n    const matchesLocation = !searchLocation || \n      (listing.location || '').toLowerCase().includes(searchLocation.toLowerCase());\n    const price = parseFloat(listing.price);\n    const matchesPrice = price >= priceRange[0] && price <= priceRange[1];\n    const matchesAmenities = selectedAmenities.length === 0 || \n      selectedAmenities.every(amenity => listing.amenities?.includes(amenity));\n\n    return matchesLocation && matchesPrice && matchesAmenities;\n  })\n  .sort((a, b) => {\n    if (a.premium && !b.premium) return -1;\n    if (!a.premium && b.premium) return 1;\n    if (sortBy === 'newest') {\n      return new Date(b.createdAt) - new Date(a.createdAt);\n    } else if (sortBy === 'cheapest') {\n      return parseFloat(a.price) - parseFloat(b.price);\n    } else if (sortBy === 'expensive') {\n      return parseFloat(b.price) - parseFloat(a.price);\n    }\n    return 0;\n  });\n\n  // Allow guests to land on Browse by default. If userType isn't set,\n  // show a gentle callout in the header (below) so users can pick a role\n  // when they want to post or set up their profile.\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-slate-50 to-gray-100\">\n      {/* Offline Indicator */}\n      <OfflineIndicator />\n      \n      {/* PWA Install Banner */}\n      {showInstallBanner && (\n        <div className=\"fixed bottom-20 left-4 right-4 md:left-auto md:right-4 md:max-w-sm z-50 bg-gradient-to-r from-teal-600 to-cyan-600 rounded-2xl shadow-2xl p-4 fade-in border border-teal-400/30\">\n          <div className=\"flex items-start gap-3\">\n            <div className=\"w-12 h-12 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center flex-shrink-0\">\n              <Smartphone className=\"w-6 h-6 text-white\" />\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              <h4 className=\"font-bold text-white text-sm\">Install Room24</h4>\n              <p className=\"text-teal-100 text-xs mt-0.5\">Add to your home screen for the best experience!</p>\n              <div className=\"flex gap-2 mt-3\">\n                <button\n                  onClick={handleInstallClick}\n                  className=\"flex items-center gap-1.5 px-4 py-2 bg-white text-teal-700 font-semibold text-xs rounded-lg hover:bg-teal-50 transition-colors shadow-sm\"\n                >\n                  <Download className=\"w-4 h-4\" />\n                  Install\n                </button>\n                <button\n                  onClick={dismissInstallBanner}\n                  className=\"px-3 py-2 text-white/80 hover:text-white text-xs font-medium transition-colors\"\n                >\n                  Maybe Later\n                </button>\n              </div>\n            </div>\n            <button\n              onClick={dismissInstallBanner}\n              className=\"text-white/60 hover:text-white transition-colors p-1\"\n            >\n              <X className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </div>\n      )}\n      \n      {/* Back to Top Button */}\n      <BackToTop />\n      \n      <Header\n        currentUser={currentUser}\n        previewAsRenter={previewAsRenter}\n        setPreviewAsRenter={setPreviewAsRenter}\n        openAuthModal={openAuthModal}\n        handleSignOut={handleSignOut}\n        setCurrentView={setCurrentView}\n        unreadCount={unreadCount}\n        onOpenNotifications={() => setShowNotificationsPanel(true)}\n      />\n\n      {/* Notification Banner (Push Notifications) */}\n      {notificationBanner && (\n        <NotificationBanner\n          title={notificationBanner.title}\n          body={notificationBanner.body}\n          onClose={() => setNotificationBanner(null)}\n        />\n      )}\n\n      {/* Toast Notification */}\n      {toast && (\n        <div className={`fixed top-20 right-4 z-50 max-w-sm w-full transition-all duration-300 ${\n          toast.type === 'error' ? 'bg-gradient-to-r from-rose-50 to-red-50 border-rose-400' :\n          toast.type === 'success' ? 'bg-gradient-to-r from-emerald-50 to-green-50 border-emerald-400' :\n          toast.type === 'warning' ? 'bg-gradient-to-r from-amber-50 to-yellow-50 border-amber-400' :\n          'bg-gradient-to-r from-sky-50 to-blue-50 border-sky-400'\n        } border-l-4 rounded-xl shadow-2xl p-4 fade-in backdrop-blur-sm`}>\n          <div className=\"flex items-start gap-3\">\n            <div className={`flex-shrink-0 w-8 h-8 rounded-xl flex items-center justify-center shadow-sm ${\n              toast.type === 'error' ? 'bg-rose-500' :\n              toast.type === 'success' ? 'bg-emerald-500' :\n              toast.type === 'warning' ? 'bg-amber-500' :\n              'bg-sky-500'\n            }`}>\n              {toast.type === 'success' && <CheckCircle className=\"w-5 h-5 text-white\" />}\n              {toast.type === 'error' && <span className=\"text-white font-bold text-sm\"></span>}\n              {toast.type === 'warning' && <span className=\"text-white font-bold text-sm\">!</span>}\n              {toast.type === 'info' && <span className=\"text-white font-bold text-sm\">i</span>}\n            </div>\n            <div className=\"flex-1 min-w-0\">\n              {toast.title && <p className={`font-bold mb-0.5 ${\n                toast.type === 'error' ? 'text-rose-800' :\n                toast.type === 'success' ? 'text-emerald-800' :\n                toast.type === 'warning' ? 'text-amber-800' :\n                'text-sky-800'\n              }`}>{toast.title}</p>}\n              <p className={`text-sm ${\n                toast.type === 'error' ? 'text-rose-700' :\n                toast.type === 'success' ? 'text-emerald-700' :\n                toast.type === 'warning' ? 'text-amber-700' :\n                'text-sky-700'\n              }`}>{toast.message}</p>\n            </div>\n            <button \n              onClick={() => setToast(null)}\n              className={`flex-shrink-0 p-1.5 rounded-lg hover:bg-white/50 transition ${\n                toast.type === 'error' ? 'text-rose-500 hover:text-rose-700' :\n                toast.type === 'success' ? 'text-emerald-500 hover:text-emerald-700' :\n                toast.type === 'warning' ? 'text-amber-500 hover:text-amber-700' :\n                'text-sky-500 hover:text-sky-700'\n              }`}\n              aria-label=\"Close notification\"\n            >\n              <X className=\"w-4 h-4\" />\n            </button>\n          </div>\n        </div>\n      )}\n\n      <div id=\"main-content\" className=\"max-w-7xl mx-auto pb-24 px-4 sm:px-6 lg:px-8\" role=\"main\">\n        {currentView === 'setup-profile' && (\n          <ProfileSetupView onSubmit={handleProfileSetup} userType={userType} />\n        )}\n\n        {currentView === 'profile' && currentUser && (\n          <ProfileView \n            user={{\n              name: userProfile?.displayName || currentUser?.displayName || '',\n              email: currentUser?.email || '',\n              phone: userProfile?.phone || '',\n              photo: userProfile?.photoURL || currentUser?.photoURL || '',\n              type: userProfile?.userType || userType || 'renter',\n              notificationPrefs: userProfile?.notificationPrefs || { updates: true, marketing: false },\n            }}\n            onEdit={() => setCurrentView('edit-profile')} \n            onSignOut={handleSignOut}\n            linkedProviders={getLinkedProviders()}\n            onLinkGoogle={async () => {\n              await linkGoogleAccount();\n              // Refresh to show updated providers\n              window.location.reload();\n            }}\n            onLinkPhone={() => {\n              // Open auth modal for phone linking\n              showToast('Phone linking coming soon!', 'info');\n            }}\n            onUpdatePrefs={async (prefs) => {\n              if (currentUser?.uid) {\n                try {\n                  await saveUserProfile(currentUser.uid, { notificationPrefs: prefs });\n                  setUserProfile(prev => ({ ...prev, notificationPrefs: prefs }));\n                  showToast('Preferences updated', 'success');\n                } catch (err) {\n                  console.error('Failed to update prefs:', err);\n                  showToast('Failed to update preferences', 'error');\n                }\n              }\n            }}\n          />\n        )}\n\n        {currentView === 'edit-profile' && currentUser && (\n          <EditProfileView user={currentUser} onSubmit={handleUpdateProfile} onCancel={() => setCurrentView('profile')} />\n        )}\n\n        {currentView === 'landlord-onboarding' && currentUser && userType === 'landlord' && (\n          <LandlordOnboardingView onComplete={handleCompleteOnboarding} onCancel={() => setCurrentView('browse')} currentUser={currentUser} />\n        )}\n\n        {currentView === 'browse' && (\n                    <BrowseView \n                      listings={filteredListings}\n                      searchLocation={searchLocation}\n                      setSearchLocation={setSearchLocation}\n                      priceRange={priceRange}\n                      setPriceRange={setPriceRange}\n                      selectedAmenities={selectedAmenities}\n                      setSelectedAmenities={setSelectedAmenities}\n                      sortBy={sortBy}\n                      setSortBy={setSortBy}\n                      onSelectListing={setSelectedListing}\n                      setCurrentView={setCurrentView}\n                      currentUser={currentUser}\n                      onRequireAuth={openAuthModal}\n                      subscribeToArea={subscribeToArea}\n                      previewMode={previewAsRenter}\n                    />\n        )}\n\n        {/* Messages view removed */}\n\n        {currentView === 'add' && (\n          <AddListingView\n            onSubmit={handleAddListing}\n            onCancel={() => setCurrentView('browse')}\n            currentUser={currentUser}\n            userType={userType}\n            onRequireAuth={openAuthModal}\n            onRequireOnboarding={() => setCurrentView('landlord-onboarding')}\n          />\n        )}\n\n        {currentView === 'my-listings' && currentUser && userType === 'landlord' && (\n          <MyListingsView \n            listings={listings.filter(l => l.landlordId === currentUser.uid || l.landlordId === currentUser.id)}\n            onDelete={async (id) => {\n              try {\n                // Try to delete from Firestore first\n                const deleted = await deleteListing(id);\n                if (deleted) {\n                  showToast('Listing deleted', 'success');\n                }\n              } catch (error) {\n                console.error('Firestore delete failed:', error);\n              }\n              // Also update local state and localStorage\n              const updated = listings.filter(l => l.id !== id);\n              setListings(updated);\n              localStorage.setItem('listings', JSON.stringify(updated));\n            }}\n          />\n        )}\n\n        {currentView === 'favorites' && (\n          <FavoritesView\n            listings={listings}\n            onSelectListing={setSelectedListing}\n          />\n        )}\n      </div>\n\n      {selectedListing && (\n        <ListingDetailModal \n          listing={selectedListing}\n          landlord={{\n            name: selectedListing.landlordName,\n            phone: selectedListing.landlordPhone,\n            email: selectedListing.landlordEmail,\n            photo: selectedListing.landlordPhoto\n          }}\n          onClose={() => setSelectedListing(null)}\n          userType={userType}\n          currentUser={currentUser}\n          onRequireAuth={openAuthModal}\n          previewMode={previewAsRenter}\n          showToast={showToast}\n        />\n      )}\n\n      {/* Conversation modal removed */}\n\n      {showAuthModal && (\n        <AuthModal\n          defaultType={authDefaultType}\n          onClose={() => setShowAuthModal(false)}\n          onSuccess={() => {\n            showToast('Signed in successfully!', 'success', 'Welcome!');\n          }}\n          authFunctions={authFunctions}\n        />\n      )}\n\n      <BottomNav \n        currentView={currentView}\n        setCurrentView={setCurrentView}\n        userType={userType}\n      />\n\n      {showPrivacyPolicy && (\n        <PrivacyPolicyModal onClose={() => setShowPrivacyPolicy(false)} />\n      )}\n\n      {showAnalyticsConsent && (\n        <AnalyticsConsentModal\n          onAccept={handleAnalyticsConsentAccept}\n          onDecline={handleAnalyticsConsentDecline}\n        />\n      )}\n\n      {showNotificationsPanel && (\n        <NotificationsPanel\n          onClose={() => {\n            setShowNotificationsPanel(false);\n            setUnreadCount(getNotifications().filter(n => !n.read).length);\n          }}\n          onSelectListing={(listingId) => {\n            const listing = listings.find(l => (l.id || `${l.title}-${l.createdAt}`) === listingId);\n            if (listing) {\n              setSelectedListing(listing);\n            }\n            setShowNotificationsPanel(false);\n          }}\n        />\n      )}\n\n      <Footer onOpenPrivacy={() => setShowPrivacyPolicy(true)} />\n    </div>\n  );\n}\n\n\n\nfunction ProfileSetupView({ onSubmit, userType }) {\n  const [formData, setFormData] = useState({\n    name: '',\n    phone: '',\n    email: '',\n    whatsapp: '',\n    photo: ''\n  });\n  const [errors, setErrors] = useState({});\n  const [touched, setTouched] = useState({});\n\n  const validateField = (name, value, extras = {}) => {\n    const newErrors = { ...errors };\n    switch (name) {\n      case 'name':\n        if (!value || value.trim().length < 2) {\n          newErrors.name = 'Name must be at least 2 characters';\n        } else {\n          delete newErrors.name;\n        }\n        break;\n      case 'phone':\n        if (!value || !/^[+]?[-0-9()\\s]{7,}$/.test(value.trim())) {\n          newErrors.phone = 'Enter a valid phone number (min 7 digits)';\n        } else {\n          delete newErrors.phone;\n        }\n        break;\n      case 'email':\n        if (!value || !/^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$/.test(value.trim())) {\n          newErrors.email = 'Enter a valid email address';\n        } else {\n          delete newErrors.email;\n        }\n        break;\n      case 'photo':\n        if (value === 'FILE_TOO_LARGE') {\n          newErrors.photo = 'Photo is too large (max 2MB)';\n        } else {\n          delete newErrors.photo;\n        }\n        break;\n      default:\n        break;\n    }\n    setErrors(newErrors);\n  };\n\n  const handlePhotoUpload = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      if (file.size > 2 * 1024 * 1024) { // 2MB limit\n        setFormData({ ...formData, photo: '' });\n        validateField('photo', 'FILE_TOO_LARGE');\n        return;\n      }\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setFormData({ ...formData, photo: reader.result });\n        validateField('photo', reader.result);\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleSubmit = () => {\n    // Touch all fields\n    const allTouched = { name: true, phone: true, email: true, photo: true };\n    setTouched(allTouched);\n    validateField('name', formData.name);\n    validateField('phone', formData.phone);\n    validateField('email', formData.email);\n    if (Object.keys(errors).length === 0 && formData.name && formData.phone && formData.email) {\n      onSubmit(formData);\n    }\n  };\n\n  return (\n    <div className=\"p-4 min-h-screen bg-gradient-to-b from-slate-50 to-gray-100 pb-24\">\n      <div className=\"max-w-2xl mx-auto mt-8\">\n        <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 p-8\">\n          <div className=\"text-center mb-8\">\n            <h2 className=\"text-3xl font-extrabold text-gray-900 mb-2\">Complete Your Profile</h2>\n            <p className=\"text-gray-600\">Help others know who you are</p>\n          </div>\n\n          <div className=\"space-y-6\">\n            {/* Photo Upload */}\n            <div className=\"flex justify-center mb-8\">\n              <div className=\"relative\">\n                {formData.photo ? (\n                  <img \n                    src={formData.photo} \n                    alt=\"Profile\" \n                    className=\"w-32 h-32 rounded-full object-cover border-4 border-blue-200 shadow-lg\" \n                  />\n                ) : (\n                  <div className=\"w-32 h-32 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center border-4 border-blue-200 shadow-lg\">\n                    <User className=\"w-16 h-16 text-blue-600\" />\n                  </div>\n                )}\n                <label className=\"absolute bottom-0 right-0 bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full cursor-pointer shadow-lg transition group\" aria-label=\"Upload profile photo\">\n                  <Edit className=\"w-5 h-5\" />\n                  <input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handlePhotoUpload}\n                    className=\"hidden\"\n                  />\n                </label>\n              </div>\n            </div>\n\n            {/* Form Fields */}\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Full Name *</label>\n              <input\n                type=\"text\"\n                required\n                value={formData.name}\n                onChange={(e) => { setFormData({ ...formData, name: e.target.value }); if (touched.name) validateField('name', e.target.value); }}\n                onBlur={(e) => { setTouched({ ...touched, name: true }); validateField('name', e.target.value); }}\n                placeholder=\"Enter your full name\"\n                aria-invalid={errors.name ? 'true' : 'false'}\n                aria-describedby={errors.name ? 'profile-name-error' : undefined}\n                className={`w-full px-4 py-3 border-2 ${errors.name ? 'border-red-400' : 'border-gray-200'} bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400`}\n              />\n              {errors.name && touched.name && <p id=\"profile-name-error\" className=\"mt-1 text-xs text-red-600\">{errors.name}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Phone Number *</label>\n              <div className=\"relative\">\n                <Phone className=\"absolute left-4 top-3.5 w-5 h-5 text-gray-400\" />\n                <input\n                  type=\"tel\"\n                  required\n                  value={formData.phone}\n                  onChange={(e) => { setFormData({ ...formData, phone: e.target.value }); if (touched.phone) validateField('phone', e.target.value); }}\n                  onBlur={(e) => { setTouched({ ...touched, phone: true }); validateField('phone', e.target.value); }}\n                  placeholder=\"e.g., +27 12 345 6789\"\n                  aria-invalid={errors.phone ? 'true' : 'false'}\n                  aria-describedby={errors.phone ? 'profile-phone-error' : undefined}\n                  className={`w-full pl-11 pr-4 py-3 border-2 ${errors.phone ? 'border-red-400' : 'border-gray-200'} bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400`}\n                />\n              </div>\n              {errors.phone && touched.phone && <p id=\"profile-phone-error\" className=\"mt-1 text-xs text-red-600\">{errors.phone}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Email Address *</label>\n              <div className=\"relative\">\n                <Mail className=\"absolute left-4 top-3.5 w-5 h-5 text-gray-400\" />\n                <input\n                  type=\"email\"\n                  required\n                  value={formData.email}\n                  onChange={(e) => { setFormData({ ...formData, email: e.target.value }); if (touched.email) validateField('email', e.target.value); }}\n                  onBlur={(e) => { setTouched({ ...touched, email: true }); validateField('email', e.target.value); }}\n                  placeholder=\"your.email@example.com\"\n                  aria-invalid={errors.email ? 'true' : 'false'}\n                  aria-describedby={errors.email ? 'profile-email-error' : undefined}\n                  className={`w-full pl-11 pr-4 py-3 border-2 ${errors.email ? 'border-red-400' : 'border-gray-200'} bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400`}\n                />\n              </div>\n              {errors.email && touched.email && <p id=\"profile-email-error\" className=\"mt-1 text-xs text-red-600\">{errors.email}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-2\">WhatsApp (optional)</label>\n              <div className=\"relative\">\n                <Phone className=\"absolute left-4 top-3.5 w-5 h-5 text-gray-400\" />\n                <input\n                  type=\"tel\"\n                  value={formData.whatsapp}\n                  onChange={(e) => setFormData({ ...formData, whatsapp: e.target.value })}\n                  placeholder=\"e.g., +27 71 234 5678\"\n                  className=\"w-full pl-11 pr-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400\"\n                />\n              </div>\n              <p className=\"text-xs text-gray-500 mt-1\">Used to create a WhatsApp chat link on your listings.</p>\n            </div>\n\n            {/* Submit Button */}\n            <button\n              onClick={handleSubmit}\n              className=\"w-full bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white font-semibold py-3 rounded-xl transition mt-8 shadow-lg hover:shadow-xl\"\n            >\n              Complete Setup\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction ProfileView({ user, onEdit, onUpdatePrefs, onSignOut, linkedProviders, onLinkGoogle, onLinkPhone }) {\n  const prefs = user.notificationPrefs || { updates: true, marketing: false };\n  const [localPrefs, setLocalPrefs] = React.useState(prefs);\n  const [linkingInProgress, setLinkingInProgress] = React.useState(null);\n  const [linkError, setLinkError] = React.useState('');\n  const [linkSuccess, setLinkSuccess] = React.useState('');\n\n  const togglePref = (key) => {\n    const next = { ...localPrefs, [key]: !localPrefs[key] };\n    setLocalPrefs(next);\n    onUpdatePrefs && onUpdatePrefs(next);\n  };\n\n  const handleLinkGoogle = async () => {\n    if (!onLinkGoogle) return;\n    setLinkingInProgress('google');\n    setLinkError('');\n    setLinkSuccess('');\n    try {\n      await onLinkGoogle();\n      setLinkSuccess('Google account linked successfully!');\n    } catch (err) {\n      setLinkError(err.message || 'Failed to link Google account');\n    } finally {\n      setLinkingInProgress(null);\n    }\n  };\n\n  const handleLinkPhone = () => {\n    if (!onLinkPhone) return;\n    onLinkPhone();\n  };\n\n  const hasGoogle = linkedProviders?.includes('google.com');\n  const hasPhone = linkedProviders?.includes('phone');\n  const hasPassword = linkedProviders?.includes('password');\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-slate-50 to-gray-100 pb-24\">\n      {/* Profile Header with Gradient */}\n      <div className=\"bg-gradient-to-br from-teal-600 via-teal-500 to-cyan-500 pt-8 pb-20 px-4\">\n        <div className=\"max-w-xl mx-auto flex justify-between items-start\">\n          <h2 className=\"text-2xl font-bold text-white\">My Profile</h2>\n          <button\n            onClick={onEdit}\n            className=\"bg-white/20 hover:bg-white/30 backdrop-blur-sm text-white px-4 py-2 rounded-xl transition-all duration-200 flex items-center gap-2 border border-white/30\"\n          >\n            <Edit className=\"w-4 h-4\" />\n            Edit\n          </button>\n        </div>\n      </div>\n\n      {/* Profile Card - Overlapping Header */}\n      <div className=\"px-4 -mt-16\">\n        <div className=\"bg-white rounded-2xl shadow-xl border border-gray-100 p-6 max-w-xl mx-auto\">\n          {/* Avatar & Name */}\n          <div className=\"flex flex-col items-center -mt-16 mb-6\">\n            {user.photo ? (\n              <img \n                src={user.photo} \n                alt=\"Profile\" \n                className=\"w-28 h-28 rounded-2xl object-cover border-4 border-white shadow-lg mb-4\" \n              />\n            ) : (\n              <div className=\"w-28 h-28 rounded-2xl bg-gradient-to-br from-teal-400 to-cyan-500 flex items-center justify-center border-4 border-white shadow-lg mb-4\">\n                <span className=\"text-4xl font-bold text-white\">\n                  {user.name?.charAt(0)?.toUpperCase() || 'U'}\n                </span>\n              </div>\n            )}\n            <h3 className=\"text-2xl font-bold text-gray-900\">{user.name}</h3>\n            <span className=\"inline-flex items-center mt-2 px-4 py-1.5 bg-gradient-to-r from-teal-50 to-cyan-50 text-teal-700 rounded-full text-sm font-semibold border border-teal-100\">\n              {user.type === 'landlord' ? (\n                <>\n                  <Home className=\"w-4 h-4 mr-1.5\" />\n                  Landlord\n                </>\n              ) : (\n                <>\n                  <User className=\"w-4 h-4 mr-1.5\" />\n                  Renter\n                </>\n              )}\n            </span>\n          </div>\n\n          {/* Contact Info Cards */}\n          <div className=\"space-y-3 mb-6\">\n            <div className=\"bg-gradient-to-r from-gray-50 to-slate-50 rounded-xl p-4 border border-gray-100 hover:border-gray-200 transition-colors\">\n              <div className=\"flex items-center\">\n                <div className=\"w-11 h-11 bg-gradient-to-br from-teal-100 to-cyan-100 rounded-xl flex items-center justify-center mr-4 shadow-sm\">\n                  <Phone className=\"w-5 h-5 text-teal-600\" />\n                </div>\n                <div>\n                  <p className=\"text-xs font-medium text-gray-500 mb-0.5\">Phone Number</p>\n                  <p className=\"font-semibold text-gray-800\">{user.phone}</p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-gradient-to-r from-gray-50 to-slate-50 rounded-xl p-4 border border-gray-100 hover:border-gray-200 transition-colors\">\n              <div className=\"flex items-center\">\n                <div className=\"w-11 h-11 bg-gradient-to-br from-cyan-100 to-blue-100 rounded-xl flex items-center justify-center mr-4 shadow-sm\">\n                  <Mail className=\"w-5 h-5 text-cyan-600\" />\n                </div>\n                <div>\n                  <p className=\"text-xs font-medium text-gray-500 mb-0.5\">Email Address</p>\n                  <p className=\"font-semibold text-gray-800\">{user.email}</p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-gradient-to-r from-gray-50 to-slate-50 rounded-xl p-4 border border-gray-100 hover:border-gray-200 transition-colors\">\n              <div className=\"flex items-center\">\n                <div className=\"w-11 h-11 bg-gradient-to-br from-violet-100 to-purple-100 rounded-xl flex items-center justify-center mr-4 shadow-sm\">\n                  <Calendar className=\"w-5 h-5 text-violet-600\" />\n                </div>\n                <div>\n                  <p className=\"text-xs font-medium text-gray-500 mb-0.5\">Member Since</p>\n                  <p className=\"font-semibold text-gray-800\">\n                    {new Date(user.createdAt).toLocaleDateString('en-ZA', { \n                      year: 'numeric', \n                      month: 'long', \n                      day: 'numeric' \n                    })}\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* Notification Preferences */}\n          <div className=\"bg-gradient-to-br from-teal-50 via-cyan-50 to-sky-50 rounded-xl p-5 border border-teal-100\">\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div className=\"w-10 h-10 bg-gradient-to-br from-teal-500 to-cyan-500 rounded-xl flex items-center justify-center shadow-sm\">\n                <Bell className=\"w-5 h-5 text-white\" />\n              </div>\n              <h4 className=\"font-bold text-gray-800\">Notification Preferences</h4>\n            </div>\n            <div className=\"space-y-3\">\n              <label className=\"flex items-center gap-3 p-3 bg-white rounded-lg border border-gray-100 cursor-pointer hover:border-teal-200 transition-colors\">\n                <input\n                  type=\"checkbox\"\n                  checked={localPrefs.updates}\n                  onChange={() => togglePref('updates')}\n                  className=\"w-5 h-5 rounded border-gray-300 text-teal-600 focus:ring-teal-500\"\n                />\n                <div>\n                  <p className=\"text-sm font-medium text-gray-800\">Room Alerts</p>\n                  <p className=\"text-xs text-gray-500\">Get notified about new rooms in your saved areas</p>\n                </div>\n              </label>\n              <label className=\"flex items-center gap-3 p-3 bg-white rounded-lg border border-gray-100 cursor-pointer hover:border-teal-200 transition-colors\">\n                <input\n                  type=\"checkbox\"\n                  checked={localPrefs.marketing}\n                  onChange={() => togglePref('marketing')}\n                  className=\"w-5 h-5 rounded border-gray-300 text-teal-600 focus:ring-teal-500\"\n                />\n                <div>\n                  <p className=\"text-sm font-medium text-gray-800\">Tips & Updates</p>\n                  <p className=\"text-xs text-gray-500\">Occasional features and helpful content</p>\n                </div>\n              </label>\n            </div>\n            <p className=\"text-[11px] text-gray-500 mt-3 text-center\">Changes save automatically  You can opt out anytime</p>\n          </div>\n\n          {/* Account Linking Section */}\n          <div className=\"bg-gradient-to-br from-blue-50 via-indigo-50 to-violet-50 rounded-xl p-5 border border-blue-100 mt-4\">\n            <div className=\"flex items-center gap-3 mb-4\">\n              <div className=\"w-10 h-10 bg-gradient-to-br from-blue-500 to-indigo-500 rounded-xl flex items-center justify-center shadow-sm\">\n                <Link2 className=\"w-5 h-5 text-white\" />\n              </div>\n              <div>\n                <h4 className=\"font-bold text-gray-800\">Linked Accounts</h4>\n                <p className=\"text-xs text-gray-500\">Connect multiple sign-in methods</p>\n              </div>\n            </div>\n\n            {/* Success/Error Messages */}\n            {linkSuccess && (\n              <div className=\"mb-3 p-3 bg-green-50 border border-green-200 rounded-lg text-green-700 text-sm flex items-center gap-2\">\n                <CheckCircle className=\"w-4 h-4\" />\n                {linkSuccess}\n              </div>\n            )}\n            {linkError && (\n              <div className=\"mb-3 p-3 bg-rose-50 border border-rose-200 rounded-lg text-rose-700 text-sm flex items-center gap-2\">\n                <AlertTriangle className=\"w-4 h-4\" />\n                {linkError}\n              </div>\n            )}\n\n            <div className=\"space-y-2\">\n              {/* Google */}\n              <div className={`flex items-center justify-between p-3 bg-white rounded-lg border ${hasGoogle ? 'border-green-200' : 'border-gray-100'}`}>\n                <div className=\"flex items-center gap-3\">\n                  <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\n                    <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\n                    <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\n                    <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\n                    <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\n                  </svg>\n                  <span className=\"font-medium text-gray-700\">Google</span>\n                </div>\n                {hasGoogle ? (\n                  <span className=\"text-xs font-medium text-green-600 flex items-center gap-1\">\n                    <CheckCircle className=\"w-4 h-4\" /> Linked\n                  </span>\n                ) : (\n                  <button\n                    onClick={handleLinkGoogle}\n                    disabled={linkingInProgress === 'google'}\n                    className=\"text-xs font-medium text-blue-600 hover:text-blue-700 px-3 py-1.5 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors disabled:opacity-50\"\n                  >\n                    {linkingInProgress === 'google' ? 'Linking...' : 'Link'}\n                  </button>\n                )}\n              </div>\n\n              {/* Phone */}\n              <div className={`flex items-center justify-between p-3 bg-white rounded-lg border ${hasPhone ? 'border-green-200' : 'border-gray-100'}`}>\n                <div className=\"flex items-center gap-3\">\n                  <Phone className=\"w-5 h-5 text-green-600\" />\n                  <span className=\"font-medium text-gray-700\">Phone</span>\n                </div>\n                {hasPhone ? (\n                  <span className=\"text-xs font-medium text-green-600 flex items-center gap-1\">\n                    <CheckCircle className=\"w-4 h-4\" /> Linked\n                  </span>\n                ) : (\n                  <button\n                    onClick={handleLinkPhone}\n                    className=\"text-xs font-medium text-blue-600 hover:text-blue-700 px-3 py-1.5 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors\"\n                  >\n                    Link\n                  </button>\n                )}\n              </div>\n\n              {/* Email/Password */}\n              <div className={`flex items-center justify-between p-3 bg-white rounded-lg border ${hasPassword ? 'border-green-200' : 'border-gray-100'}`}>\n                <div className=\"flex items-center gap-3\">\n                  <Mail className=\"w-5 h-5 text-blue-600\" />\n                  <span className=\"font-medium text-gray-700\">Email & Password</span>\n                </div>\n                {hasPassword ? (\n                  <span className=\"text-xs font-medium text-green-600 flex items-center gap-1\">\n                    <CheckCircle className=\"w-4 h-4\" /> Linked\n                  </span>\n                ) : (\n                  <span className=\"text-xs text-gray-400\">Coming soon</span>\n                )}\n              </div>\n            </div>\n\n            <p className=\"text-[11px] text-gray-500 mt-3 text-center\">Link accounts to sign in with any method</p>\n          </div>\n\n          {/* Sign Out Button */}\n          {onSignOut && (\n            <button\n              onClick={onSignOut}\n              className=\"w-full mt-4 flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold rounded-xl transition-colors\"\n            >\n              <LogOut className=\"w-5 h-5\" />\n              Sign Out\n            </button>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction LandlordOnboardingView({ onComplete, onCancel, currentUser }) {\n  const [form, setForm] = useState({ businessName: currentUser?.name || '', bankDetails: '', idNumber: '', agree: false });\n\n  const handleSubmit = () => {\n    if (!form.businessName || !form.agree) {\n      alert('Please provide a display name and agree to the terms.');\n      return;\n    }\n    onComplete(form);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-slate-50 to-gray-100 pb-24\">\n      {/* Header Banner */}\n      <div className=\"bg-gradient-to-br from-teal-600 via-teal-500 to-cyan-500 pt-8 pb-16 px-4\">\n        <div className=\"max-w-2xl mx-auto text-center\">\n          <div className=\"w-20 h-20 bg-white/20 backdrop-blur-sm rounded-2xl flex items-center justify-center mx-auto mb-4 border border-white/30\">\n            <span className=\"text-4xl font-bold text-white\">\n              {currentUser?.name?.charAt(0)?.toUpperCase() || 'L'}\n            </span>\n          </div>\n          <h2 className=\"text-2xl font-bold text-white mb-2\">Welcome, {currentUser?.name || 'Landlord'}!</h2>\n          <p className=\"text-teal-100\">Complete your profile to start listing properties</p>\n        </div>\n      </div>\n\n      {/* Form Card */}\n      <div className=\"px-4 -mt-8\">\n        <div className=\"max-w-2xl mx-auto\">\n          <div className=\"bg-white rounded-2xl shadow-xl border border-gray-100 p-8\">\n            {/* Progress Steps */}\n            <div className=\"flex items-center justify-center gap-2 mb-8\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-8 h-8 bg-teal-600 text-white rounded-full flex items-center justify-center text-sm font-bold\">1</div>\n                <span className=\"text-sm font-medium text-gray-700\">Profile Details</span>\n              </div>\n              <div className=\"w-8 h-0.5 bg-gray-200\"></div>\n              <div className=\"flex items-center gap-2\">\n                <div className=\"w-8 h-8 bg-gray-200 text-gray-500 rounded-full flex items-center justify-center text-sm font-bold\">2</div>\n                <span className=\"text-sm text-gray-400\">Start Listing</span>\n              </div>\n            </div>\n\n            <div className=\"space-y-5\">\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Display Name *</label>\n                <input \n                  value={form.businessName} \n                  onChange={(e) => setForm({ ...form, businessName: e.target.value })} \n                  className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all\" \n                  placeholder=\"Your name or business name\"\n                />\n                <p className=\"text-xs text-gray-500 mt-1.5\">This name is shown to renters on your listings and messages.</p>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Payment Details (Optional)</label>\n                <input \n                  value={form.bankDetails} \n                  onChange={(e) => setForm({ ...form, bankDetails: e.target.value })} \n                  placeholder=\"Bank account or preferred payment method\" \n                  className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all\" \n                />\n                <p className=\"text-xs text-gray-500 mt-1.5\">Private - only shown to confirmed renters.</p>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-800 mb-2\">ID Number (Optional)</label>\n                <input \n                  value={form.idNumber} \n                  onChange={(e) => setForm({ ...form, idNumber: e.target.value })} \n                  className=\"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition-all\" \n                  placeholder=\"For verification purposes\"\n                />\n                <p className=\"text-xs text-gray-500 mt-1.5\">Verified landlords get a trust badge on their listings.</p>\n              </div>\n\n              <div className=\"bg-gradient-to-r from-teal-50 to-cyan-50 rounded-xl p-4 border border-teal-100\">\n                <label className=\"flex items-start gap-3 cursor-pointer\">\n                  <input \n                    type=\"checkbox\" \n                    checked={form.agree} \n                    onChange={(e) => setForm({ ...form, agree: e.target.checked })} \n                    className=\"mt-1 w-5 h-5 rounded border-gray-300 text-teal-600 focus:ring-teal-500\"\n                  />\n                  <span className=\"text-sm text-gray-700\">\n                    I confirm I am authorised to list these properties and agree to the{' '}\n                    <button type=\"button\" onClick={(e) => e.preventDefault()} className=\"text-teal-600 hover:text-teal-700 font-medium underline\">\n                      terms of service\n                    </button>.\n                  </span>\n                </label>\n              </div>\n\n              <div className=\"flex gap-3 pt-4\">\n                <button \n                  onClick={onCancel} \n                  className=\"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-3.5 rounded-xl transition-colors\"\n                >\n                  Cancel\n                </button>\n                <button \n                  onClick={handleSubmit} \n                  className=\"flex-1 bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-700 hover:to-cyan-700 text-white font-semibold py-3.5 rounded-xl transition-all shadow-md hover:shadow-lg\"\n                >\n                  Complete & Start Listing\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction EditProfileView({ user, onSubmit, onCancel }) {\n  const [formData, setFormData] = useState({\n    name: user.name || '',\n    phone: user.phone || '',\n    email: user.email || '',\n    whatsapp: user.whatsapp || '',\n    photo: user.photo || ''\n  });\n  const [errors, setErrors] = useState({});\n  const [touched, setTouched] = useState({});\n\n  const validateField = (name, value, extras = {}) => {\n    const newErrors = { ...errors };\n    switch (name) {\n      case 'name':\n        if (!value || value.trim().length < 2) {\n          newErrors.name = 'Name must be at least 2 characters';\n        } else {\n          delete newErrors.name;\n        }\n        break;\n      case 'phone':\n        if (!value || !/^[+]?[-0-9()\\s]{7,}$/.test(value.trim())) {\n          newErrors.phone = 'Enter a valid phone number';\n        } else {\n          delete newErrors.phone;\n        }\n        break;\n      case 'email':\n        if (!value || !/^[^@\\s]+@[^@\\s]+\\.[^@\\s]+$/.test(value.trim())) {\n          newErrors.email = 'Enter a valid email';\n        } else {\n          delete newErrors.email;\n        }\n        break;\n      default:\n        break;\n    }\n    setErrors(newErrors);\n  };\n\n  const handlePhotoUpload = (e) => {\n    const file = e.target.files[0];\n    if (file) {\n      const reader = new FileReader();\n      reader.onloadend = () => {\n        setFormData({ ...formData, photo: reader.result });\n      };\n      reader.readAsDataURL(file);\n    }\n  };\n\n  const handleSubmit = () => {\n    setTouched({ name: true, phone: true, email: true });\n    validateField('name', formData.name);\n    validateField('phone', formData.phone);\n    validateField('email', formData.email);\n    if (Object.keys(errors).length === 0 && formData.name && formData.phone && formData.email) {\n      onSubmit(formData);\n    }\n  };\n\n  return (\n    <div className=\"p-4 min-h-screen bg-gradient-to-b from-slate-50 to-gray-100 pb-24\">\n      <div className=\"max-w-2xl mx-auto mt-8\">\n        <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 p-8\">\n          <div className=\"flex items-center justify-between mb-8\">\n            <h2 className=\"text-3xl font-extrabold text-gray-900\">Edit Profile</h2>\n            <button onClick={onCancel} className=\"text-gray-400 hover:text-gray-600 transition\">\n              <X className=\"w-6 h-6\" />\n            </button>\n          </div>\n\n          <div className=\"space-y-6\">\n            {/* Photo Upload */}\n            <div className=\"flex justify-center mb-8\">\n              <div className=\"relative\">\n                {formData.photo ? (\n                  <img src={formData.photo} alt=\"Profile\" className=\"w-32 h-32 rounded-full object-cover border-4 border-blue-200 shadow-lg\" />\n                ) : (\n                  <div className=\"w-32 h-32 rounded-full bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center border-4 border-blue-200 shadow-lg\">\n                    <User className=\"w-16 h-16 text-blue-600\" />\n                  </div>\n                )}\n                <label className=\"absolute bottom-0 right-0 bg-blue-600 hover:bg-blue-700 text-white p-3 rounded-full cursor-pointer shadow-lg transition\" aria-label=\"Upload new profile photo\">\n                  <Edit className=\"w-5 h-5\" />\n                  <input\n                    type=\"file\"\n                    accept=\"image/*\"\n                    onChange={handlePhotoUpload}\n                    className=\"hidden\"\n                  />\n                </label>\n              </div>\n            </div>\n\n            {/* Form Fields */}\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Full Name</label>\n              <input\n                type=\"text\"\n                required\n                value={formData.name}\n                onChange={(e) => { setFormData({ ...formData, name: e.target.value }); if (touched.name) validateField('name', e.target.value); }}\n                onBlur={(e) => { setTouched({ ...touched, name: true }); validateField('name', e.target.value); }}\n                aria-invalid={errors.name ? 'true' : 'false'}\n                aria-describedby={errors.name ? 'edit-name-error' : undefined}\n                className={`w-full px-4 py-3 border-2 ${errors.name ? 'border-red-400' : 'border-gray-200'} bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400`}\n              />\n              {errors.name && touched.name && <p id=\"edit-name-error\" className=\"mt-1 text-xs text-red-600\">{errors.name}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Phone Number</label>\n              <div className=\"relative\">\n                <Phone className=\"absolute left-4 top-3.5 w-5 h-5 text-gray-400\" />\n                <input\n                  type=\"tel\"\n                  required\n                  value={formData.phone}\n                  onChange={(e) => { setFormData({ ...formData, phone: e.target.value }); if (touched.phone) validateField('phone', e.target.value); }}\n                  onBlur={(e) => { setTouched({ ...touched, phone: true }); validateField('phone', e.target.value); }}\n                  aria-invalid={errors.phone ? 'true' : 'false'}\n                  aria-describedby={errors.phone ? 'edit-phone-error' : undefined}\n                  className={`w-full pl-11 pr-4 py-3 border-2 ${errors.phone ? 'border-red-400' : 'border-gray-200'} bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400`}\n                />\n              </div>\n              {errors.phone && touched.phone && <p id=\"edit-phone-error\" className=\"mt-1 text-xs text-red-600\">{errors.phone}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Email Address</label>\n              <div className=\"relative\">\n                <Mail className=\"absolute left-4 top-3.5 w-5 h-5 text-gray-400\" />\n                <input\n                  type=\"email\"\n                  required\n                  value={formData.email}\n                  onChange={(e) => { setFormData({ ...formData, email: e.target.value }); if (touched.email) validateField('email', e.target.value); }}\n                  onBlur={(e) => { setTouched({ ...touched, email: true }); validateField('email', e.target.value); }}\n                  aria-invalid={errors.email ? 'true' : 'false'}\n                  aria-describedby={errors.email ? 'edit-email-error' : undefined}\n                  className={`w-full pl-11 pr-4 py-3 border-2 ${errors.email ? 'border-red-400' : 'border-gray-200'} bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400`}\n                />\n              </div>\n              {errors.email && touched.email && <p id=\"edit-email-error\" className=\"mt-1 text-xs text-red-600\">{errors.email}</p>}\n            </div>\n\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-2\">WhatsApp (optional)</label>\n              <div className=\"relative\">\n                <Phone className=\"absolute left-4 top-3.5 w-5 h-5 text-gray-400\" />\n                <input\n                  type=\"tel\"\n                  value={formData.whatsapp}\n                  onChange={(e) => setFormData({ ...formData, whatsapp: e.target.value })}\n                  placeholder=\"e.g., +27 71 234 5678\"\n                  className=\"w-full pl-11 pr-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition placeholder-gray-400\"\n                />\n              </div>\n              <p className=\"text-xs text-gray-500 mt-1\">Used to create a WhatsApp chat link on your listings.</p>\n            </div>\n\n            {/* Action Buttons */}\n            <div className=\"flex gap-3 pt-6 border-t border-gray-200\">\n              <button\n                onClick={onCancel}\n                className=\"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-800 font-semibold py-3 rounded-xl transition\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleSubmit}\n                className=\"flex-1 bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white font-semibold py-3 rounded-xl transition shadow-lg\"\n              >\n                Save Changes\n              </button>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n/* BrowseView extracted to components/BrowseView.jsx */\n\nfunction FavoritesView({ listings, onSelectListing }) {\n  const [favorites, setFavorites] = useState([]);\n\n  useEffect(() => {\n    try {\n      const rawFavorites = localStorage.getItem('favorites');\n      if (rawFavorites) {\n        const arr = JSON.parse(rawFavorites);\n        if (Array.isArray(arr)) setFavorites(arr);\n      }\n    } catch {}\n  }, []);\n\n  const toggleFavorite = (listingId) => {\n    setFavorites(prev => {\n      const updated = prev.filter(id => id !== listingId);\n      try {\n        localStorage.setItem('favorites', JSON.stringify(updated));\n      } catch {}\n      return updated;\n    });\n  };\n\n  const favoriteListings = listings.filter(l => favorites.includes(l.id));\n\n  return (\n    <div className=\"p-4 min-h-screen bg-gradient-to-b from-slate-50 to-gray-100 pb-24\">\n      <div className=\"max-w-7xl mx-auto mt-8\">\n        <div className=\"mb-8\">\n          <div className=\"flex items-center gap-4 mb-3\">\n            <div className=\"w-14 h-14 bg-gradient-to-br from-rose-100 to-pink-100 rounded-2xl flex items-center justify-center shadow-sm\">\n              <Heart className=\"w-7 h-7 text-rose-500 fill-rose-500\" />\n            </div>\n            <div>\n              <h2 className=\"text-3xl font-extrabold text-gray-900\">Saved Listings</h2>\n              <p className=\"text-gray-600\">\n                {favoriteListings.length === 0\n                  ? 'Your favorites will appear here'\n                  : `${favoriteListings.length} saved ${favoriteListings.length === 1 ? 'listing' : 'listings'}`}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {favoriteListings.length === 0 ? (\n          <div className=\"bg-white rounded-2xl border border-gray-100 shadow-sm p-12 text-center\">\n            <div className=\"w-24 h-24 bg-gradient-to-br from-rose-50 to-pink-50 rounded-full flex items-center justify-center mx-auto mb-6\">\n              <Heart className=\"w-12 h-12 text-rose-300\" />\n            </div>\n            <h3 className=\"text-xl font-bold text-gray-800 mb-2\">No saved listings yet</h3>\n            <p className=\"text-gray-500 text-sm mb-6 max-w-md mx-auto\">\n              Browse rooms and tap the heart icon to save your favorites. They'll appear here for easy access.\n            </p>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n            {favoriteListings.map(listing => {\n              const ListingCard = require('./components/ListingCard').default;\n              return (\n                <ListingCard\n                  key={listing.id}\n                  listing={listing}\n                  onClick={() => onSelectListing(listing)}\n                  isFavorite={true}\n                  onToggleFavorite={toggleFavorite}\n                />\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\nconst createDefaultListingForm = () => ({\n  title: '',\n  price: '',\n  location: '',\n  streetAddress: '',\n  description: '',\n  photos: [],\n  status: 'available',\n  availableDate: new Date().toISOString().split('T')[0],\n  amenities: [],\n  latitude: null,\n  longitude: null,\n  paymentMethod: 'Bank and Cash',\n  roomType: 'private',\n  leaseDuration: '7-12',\n  petFriendly: false,\n  genderPreference: 'any',\n  premium: false\n});\n\nfunction AddListingView({ onSubmit, onCancel, currentUser, userType, onRequireAuth, onRequireOnboarding }) {\n  const GEOCODER_KEY = process.env.REACT_APP_GEOCODER_API_KEY;\n  const GEOCODER_PROVIDER = (process.env.REACT_APP_GEOCODER_PROVIDER || '').toLowerCase();\n\n  const landlordId = currentUser?.id;\n  const [formData, setFormData] = useState(() => {\n    const base = createDefaultListingForm();\n    if (landlordId) {\n      const saved = loadListingTemplate(landlordId);\n      if (saved) {\n        return {\n          ...base,\n          ...saved,\n          amenities: Array.isArray(saved.amenities) ? saved.amenities : base.amenities,\n          petFriendly: saved.petFriendly ?? base.petFriendly,\n          premium: saved.premium ?? base.premium,\n          photos: []\n        };\n      }\n    }\n    return base;\n  });\n  const [geocodingStatus, setGecodingStatus] = useState('');\n  const [errors, setErrors] = useState({});\n  const [showPhotoEditor, setShowPhotoEditor] = useState(false);\n  const reverseGeocodeCacheRef = React.useRef({});\n  const [lastGeocodeSource, setLastGeocodeSource] = useState(null); // 'cached' | 'mapbox' | 'proxy' | 'direct' | 'coords-only' | 'manual-geocode'\n  const [fullAddressInput, setFullAddressInput] = useState('');\n  const [isFullAddressEditing, setIsFullAddressEditing] = useState(false);\n\n  useEffect(() => {\n    if (!landlordId) return;\n    const saved = loadListingTemplate(landlordId);\n    if (saved) {\n      setFormData(prev => ({\n        ...prev,\n        ...saved,\n        amenities: Array.isArray(saved.amenities) ? saved.amenities : [],\n        petFriendly: saved.petFriendly ?? false,\n        premium: saved.premium ?? false,\n        photos: []\n      }));\n    } else {\n      setFormData(createDefaultListingForm());\n    }\n  }, [landlordId]);\n\n  useEffect(() => {\n    if (!landlordId || userType !== 'landlord') return;\n    saveListingTemplate(landlordId, formData);\n  }, [formData, landlordId, userType]);\n\n  // Warn user before leaving if form has unsaved data\n  useEffect(() => {\n    const hasFormData = formData.title || formData.description || formData.photos?.length > 0;\n    \n    const handleBeforeUnload = (e) => {\n      if (hasFormData) {\n        e.preventDefault();\n        e.returnValue = '';\n        return '';\n      }\n    };\n    \n    if (hasFormData) {\n      window.addEventListener('beforeunload', handleBeforeUnload);\n    }\n    \n    return () => {\n      window.removeEventListener('beforeunload', handleBeforeUnload);\n    };\n  }, [formData.title, formData.description, formData.photos]);\n\n  // Helper: fetch with graceful fallbacks when third-party APIs lack CORS headers\n  const corsFallbackTransforms = useMemo(() => [\n    (url) => url.startsWith('https://cors.isomorphic-git.org/') ? url : `https://cors.isomorphic-git.org/${url}`,\n    (url) => url.startsWith('https://corsproxy.io/?') ? url : `https://corsproxy.io/?${encodeURIComponent(url)}`\n  ], []);\n\n  const fetchWithCorsFallback = useCallback(async (url, options = {}) => {\n    const cloneOptions = () => {\n      const base = { ...options };\n      if (options.headers) base.headers = { ...options.headers };\n      return base;\n    };\n\n    const attempt = async (targetUrl) => {\n      const resp = await fetch(targetUrl, cloneOptions());\n      if (!resp.ok) throw new Error(`Request failed with status ${resp.status}`);\n      return resp;\n    };\n\n    try {\n      return await attempt(url);\n    } catch (err) {\n      if (options.signal?.aborted) throw err;\n      let lastError = err;\n      for (const transform of corsFallbackTransforms) {\n        try {\n          const proxiedUrl = transform(url);\n          return await attempt(proxiedUrl);\n        } catch (proxyErr) {\n          lastError = proxyErr;\n          if (options.signal?.aborted) break;\n        }\n      }\n      throw lastError;\n    }\n  }, [corsFallbackTransforms]);\n\n  // Forward geocode helper for manual address lookups\n  const forwardGeocodeAddress = async (query) => {\n    if (!query || query.trim().length < 3) return [];\n\n    // 1. Mapbox (if configured)\n    if (GEOCODER_PROVIDER === 'mapbox' && GEOCODER_KEY) {\n      try {\n        const resp = await fetch(`https://api.mapbox.com/geocoding/v5/mapbox.places/${encodeURIComponent(query)}.json?access_token=${GEOCODER_KEY}&limit=3&country=za&types=address,place,locality`);\n        const data = await resp.json();\n        if (data?.features?.length) {\n          return data.features.map(f => ({\n            lat: f.center ? f.center[1] : f.geometry?.coordinates?.[1],\n            lon: f.center ? f.center[0] : f.geometry?.coordinates?.[0],\n            label: f.place_name || f.text,\n            source: 'mapbox'\n          })).filter(entry => typeof entry.lat === 'number' && typeof entry.lon === 'number');\n        }\n      } catch (err) {\n        console.warn('Mapbox forward geocode failed', err);\n      }\n    }\n\n    // 2. maps.co (CORS-friendly)\n    try {\n      const mapsResp = await fetch(`https://geocode.maps.co/search?q=${encodeURIComponent(query)}&limit=3`);\n      if (mapsResp.ok) {\n        const mapsData = await mapsResp.json();\n        if (Array.isArray(mapsData) && mapsData.length) {\n          return mapsData.slice(0, 3).map(entry => ({\n            lat: parseFloat(entry.lat),\n            lon: parseFloat(entry.lon),\n            label: entry.display_name || entry.name,\n            source: 'maps.co'\n          }));\n        }\n      }\n    } catch (mapsErr) {\n      console.warn('maps.co forward geocode failed', mapsErr);\n    }\n\n    // 3. Local proxy (if running)\n    const API_BASE = (process.env.REACT_APP_PROXY_BASE || (window.location && window.location.port === '8443' ? 'https://localhost:4443' : ''));\n    if (API_BASE) {\n      try {\n        const proxyResp = await fetch(`${API_BASE}/api/search?q=${encodeURIComponent(query)}`);\n        if (proxyResp.ok) {\n          const proxyData = await proxyResp.json();\n          if (Array.isArray(proxyData) && proxyData.length) {\n            return proxyData.slice(0, 3).map(entry => ({\n              lat: parseFloat(entry.lat),\n              lon: parseFloat(entry.lon),\n              label: entry.display_name,\n              source: API_BASE.includes('localhost') ? 'local-proxy' : 'proxy'\n            }));\n          }\n        }\n      } catch (proxyErr) {\n        console.warn('Local proxy forward geocode failed', proxyErr);\n      }\n    }\n\n    // 4. Direct Nominatim fallback (may still be blocked, but last resort)\n    try {\n      const directResp = await fetchWithCorsFallback(`https://nominatim.openstreetmap.org/search?format=json&addressdetails=1&q=${encodeURIComponent(query)}`, {\n        headers: {\n          'User-Agent': 'room-rental-platform/1.0 (direct fallback)',\n          'Accept': 'application/json'\n        }\n      });\n      if (directResp.ok) {\n        const directData = await directResp.json();\n        if (Array.isArray(directData) && directData.length) {\n          return directData.slice(0, 3).map(entry => ({\n            lat: parseFloat(entry.lat),\n            lon: parseFloat(entry.lon),\n            label: entry.display_name,\n            source: 'direct'\n          }));\n        }\n      }\n    } catch (directErr) {\n      console.warn('Direct nominatim forward geocode failed', directErr);\n    }\n\n    return [];\n  };\n\n  const availableAmenities = [\n    'WiFi', 'Parking', 'Kitchen', 'Laundry', 'Air Conditioning', \n    'Heating', 'TV', 'Furnished', 'Pet Friendly', 'Garden'\n  ];\n\n  const validateField = (name, value, extras = {}) => {\n    const newErrors = { ...errors };\n    \n    switch (name) {\n      case 'title':\n        if (!value || value.trim().length < 5) {\n          newErrors.title = 'Title must be at least 5 characters';\n        } else {\n          delete newErrors.title;\n        }\n        break;\n      case 'price':\n        if (!value || parseFloat(value) <= 0) {\n          newErrors.price = 'Price must be greater than 0';\n        } else if (parseFloat(value) < 500) {\n          newErrors.price = 'Price seems too low (minimum R500)';\n        } else if (parseFloat(value) > 50000) {\n          newErrors.price = 'Price seems too high (maximum R50,000)';\n        } else {\n          delete newErrors.price;\n        }\n        break;\n      case 'location': {\n        const streetText = (extras.streetAddress ?? formData.streetAddress ?? '').trim();\n        const areaText = (extras.location ?? value ?? '').trim();\n        if (!streetText || streetText.length < 3) {\n          newErrors.location = 'Add the street or stand number (e.g., 5170 Molefe St)';\n        } else if (!areaText || areaText.length < 3) {\n          newErrors.location = 'Add the suburb, city, and postal code (e.g., Ivory Park, Midrand, 1693)';\n        } else {\n          delete newErrors.location;\n        }\n        break;\n      }\n      case 'description':\n        if (value && value.length > 500) {\n          newErrors.description = 'Description is too long (max 500 characters)';\n        } else {\n          delete newErrors.description;\n        }\n        break;\n      default:\n        break;\n    }\n    \n    setErrors(newErrors);\n  };\n\n  \n\n  // Load persisted reverse geocode cache\n  useEffect(() => {\n    try {\n      const raw = localStorage.getItem('reverse-geocode-cache');\n      if (raw) {\n        const parsed = JSON.parse(raw);\n        if (parsed && typeof parsed === 'object') {\n          reverseGeocodeCacheRef.current = parsed;\n        }\n      }\n    } catch (e) { /* ignore */ }\n  }, []);\n\n  // Geocode address using Nominatim (OpenStreetMap)\n  const geocodeAddress = async () => {\n    if (!formData.streetAddress) {\n      setGecodingStatus('Please enter a street address');\n      return;\n    }\n    \n    setGecodingStatus('Finding coordinates...');\n    try {\n      const fullAddress = `${formData.streetAddress}, ${formData.location}, South Africa`;\n      const results = await forwardGeocodeAddress(fullAddress);\n\n      if (results.length > 0) {\n        const best = results[0];\n        setFormData({ \n          ...formData, \n          latitude: parseFloat(best.lat), \n          longitude: parseFloat(best.lon) \n        });\n        setGecodingStatus(` Address found!`);\n        setTimeout(() => setGecodingStatus(''), 2000);\n        setLastGeocodeSource(best.source || 'manual-geocode');\n        return;\n      }\n\n      setGecodingStatus('Address not found. Trying with area only...');\n      const areaResults = await forwardGeocodeAddress(`${formData.location}, South Africa`);\n      if (areaResults.length > 0) {\n        const bestArea = areaResults[0];\n        setFormData({ \n          ...formData, \n          latitude: parseFloat(bestArea.lat), \n          longitude: parseFloat(bestArea.lon) \n        });\n        setGecodingStatus(' Area found!');\n        setTimeout(() => setGecodingStatus(''), 2000);\n        setLastGeocodeSource(bestArea.source || 'manual-geocode');\n      } else {\n        setGecodingStatus('Could not find location');\n      }\n    } catch (error) {\n      console.error('Geocoding error:', error);\n      setGecodingStatus('Error finding address. Check your connection.');\n      setLastGeocodeSource(null);\n    }\n  };\n\n  const toggleAmenity = (amenity) => {\n    if (formData.amenities.includes(amenity)) {\n      setFormData({ ...formData, amenities: formData.amenities.filter(a => a !== amenity) });\n    } else {\n      setFormData({ ...formData, amenities: [...formData.amenities, amenity] });\n    }\n  };\n\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const handleSubmit = async () => {\n    // Enforce auth and onboarding checks before allowing submission\n    if (!currentUser) {\n      onRequireAuth && onRequireAuth('landlord');\n      return;\n    }\n    if (userType !== 'landlord') {\n      // prompt to become landlord\n      onRequireAuth && onRequireAuth('landlord');\n      return;\n    }\n    if (!currentUser.landlordComplete) {\n      // send to onboarding\n      onRequireOnboarding && onRequireOnboarding();\n      return;\n    }\n\n    // Validate all fields\n    validateField('title', formData.title);\n    validateField('price', formData.price);\n    validateField('location', formData.location, {\n      location: formData.location,\n      streetAddress: formData.streetAddress\n    });\n    validateField('description', formData.description);\n\n    if (!formData.title || formData.title.trim().length < 5) {\n      setErrors(prev => ({ ...prev, title: 'Title must be at least 5 characters' }));\n      return;\n    }\n    if (!formData.price || parseFloat(formData.price) <= 0) {\n      setErrors(prev => ({ ...prev, price: 'Price must be greater than 0' }));\n      return;\n    }\n    if (!formData.location || formData.location.trim().length < 3) {\n      setErrors(prev => ({ ...prev, location: 'Location is required' }));\n      return;\n    }\n    if (Object.keys(errors).length > 0) {\n      return;\n    }\n\n    setIsSubmitting(true);\n    try {\n      await onSubmit(formData);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const googleMapsQuery = [formData.streetAddress, formData.location, 'South Africa']\n    .filter(Boolean)\n    .join(', ');\n  const googleMapsUrl = googleMapsQuery\n    ? `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(googleMapsQuery)}`\n    : '';\n  const combinedFormAddress = [formData.streetAddress, formData.location]\n    .map(part => (part || '').trim())\n    .filter(Boolean)\n    .join(', ');\n\n  useEffect(() => {\n    if (isFullAddressEditing) return;\n    setFullAddressInput(prev => (prev === combinedFormAddress ? prev : combinedFormAddress));\n  }, [combinedFormAddress, isFullAddressEditing]);\n\n  const handleFullAddressChange = (value) => {\n    setFullAddressInput(value);\n    if (!value || value.length < 3) {\n      setFormData(prev => ({ ...prev, streetAddress: '', location: '' }));\n      validateField('location', '');\n      return;\n    }\n\n    const parts = value\n      .split(',')\n      .map(part => part.trim())\n      .filter(Boolean);\n\n    if (parts.length === 0) {\n      setFormData(prev => ({ ...prev, streetAddress: '', location: '' }));\n      validateField('location', '');\n      return;\n    }\n\n    let street = parts[0] || '';\n    let derivedLocation = parts.slice(1).join(', ');\n\n    if (!derivedLocation) {\n      const words = street.split(/\\s+/).filter(Boolean);\n      if (words.length >= 4) {\n        // Guess that the last few tokens describe the suburb/city/postal portion.\n        const locationWordCount = Math.min(4, Math.ceil(words.length / 2));\n        derivedLocation = words.slice(-locationWordCount).join(' ');\n        street = words.slice(0, words.length - locationWordCount).join(' ');\n      } else {\n        derivedLocation = street;\n      }\n    }\n\n    setFormData(prev => ({\n      ...prev,\n      streetAddress: street,\n      location: derivedLocation\n    }));\n    validateField('location', derivedLocation || street, {\n      location: derivedLocation,\n      streetAddress: street\n    });\n  };\n\n  const handleResetSavedTemplate = () => {\n    if (!landlordId) return;\n    clearListingTemplate(landlordId);\n    const blank = createDefaultListingForm();\n    setFormData(blank);\n    setFullAddressInput('');\n  };\n\n  return (\n    <div className=\"p-4 bg-gradient-to-b from-slate-50 to-gray-100 min-h-screen pb-24\">\n      <div className=\"max-w-3xl mx-auto mt-8\">\n        <div className=\"bg-white rounded-2xl shadow-lg border border-gray-100 p-8\">\n          <div className=\"flex items-center justify-between mb-6\">\n            <h2 className=\"text-3xl font-extrabold text-gray-900\">Post a Room</h2>\n            <button onClick={onCancel} className=\"text-gray-400 hover:text-gray-600 transition-colors p-2 rounded-full hover:bg-gray-100\">\n              <X className=\"w-6 h-6\" />\n            </button>\n          </div>\n\n          {/* Progress Indicator */}\n          <div className=\"mb-8\">\n            <div className=\"flex justify-between items-center mb-2\">\n              <span className=\"text-sm font-medium text-gray-600\">Form Progress</span>\n              <span className=\"text-sm font-semibold text-teal-600\">\n                {(() => {\n                  let completed = 0;\n                  const total = 5;\n                  if (formData.title && formData.title.trim().length >= 5) completed++;\n                  if (formData.price && parseFloat(formData.price) >= 500) completed++;\n                  if (formData.streetAddress && formData.location) completed++;\n                  if (formData.description && formData.description.length >= 10) completed++;\n                  if (formData.photos && formData.photos.length > 0) completed++;\n                  return `${completed}/${total} completed`;\n                })()}\n              </span>\n            </div>\n            <div className=\"h-2 bg-gray-100 rounded-full overflow-hidden\">\n              <div \n                className=\"h-full bg-gradient-to-r from-teal-500 to-cyan-500 rounded-full transition-all duration-500\"\n                style={{\n                  width: `${(() => {\n                    let completed = 0;\n                    if (formData.title && formData.title.trim().length >= 5) completed++;\n                    if (formData.price && parseFloat(formData.price) >= 500) completed++;\n                    if (formData.streetAddress && formData.location) completed++;\n                    if (formData.description && formData.description.length >= 10) completed++;\n                    if (formData.photos && formData.photos.length > 0) completed++;\n                    return (completed / 5) * 100;\n                  })()}%`\n                }}\n              />\n            </div>\n          </div>\n\n          <div className=\"space-y-6\">\n            {currentUser?.type === 'landlord' && (\n              <div className=\"bg-gradient-to-r from-teal-50 to-cyan-50 border border-teal-200 text-teal-800 text-sm rounded-xl p-4 flex items-start gap-3\">\n                <CheckCircle className=\"w-5 h-5 text-teal-600 mt-0.5\" />\n                <div className=\"space-y-2\">\n                  <p>\n                    We remember your latest listing details (address, price, and more) so you only need to upload fresh photos next time.\n                    Update any field below and we'll save it automatically.\n                  </p>\n                  <button\n                    type=\"button\"\n                    onClick={handleResetSavedTemplate}\n                    className=\"text-xs font-semibold text-teal-700 underline hover:text-teal-900 transition-colors\"\n                  >\n                    Reset saved info\n                  </button>\n                </div>\n              </div>\n            )}\n            {/* Title */}\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-2\">\n                Room Title *\n                {formData.title && formData.title.trim().length >= 5 && !errors.title && (\n                  <span className=\"ml-2 text-green-600 text-xs\"> Looks good</span>\n                )}\n              </label>\n              <div className=\"relative\">\n                <input\n                  type=\"text\"\n                  required\n                  value={formData.title}\n                  onChange={(e) => {\n                    setFormData({ ...formData, title: e.target.value });\n                    validateField('title', e.target.value);\n                  }}\n                  onBlur={(e) => validateField('title', e.target.value)}\n                  placeholder=\"e.g., Cozy backroom with private bathroom\"\n                  className={`w-full px-4 py-3 pr-10 border-2 ${\n                    errors.title ? 'border-red-400 bg-red-50' : \n                    formData.title && formData.title.trim().length >= 5 ? 'border-teal-400 bg-teal-50/30' : \n                    'border-gray-200'\n                  } text-gray-800 rounded-xl focus:ring-2 ${\n                    errors.title ? 'focus:ring-red-400' : 'focus:ring-teal-400'\n                  } focus:border-transparent transition-all placeholder-gray-400`}\n                />\n                {formData.title && formData.title.trim().length >= 5 && !errors.title && (\n                  <CheckCircle className=\"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-teal-600\" />\n                )}\n              </div>\n              {errors.title && <p className=\"text-red-500 text-xs mt-1 flex items-center gap-1\"><span></span> {errors.title}</p>}\n            </div>\n\n            {/* Price */}\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-2\">\n                Monthly Price (R) *\n                {formData.price && parseFloat(formData.price) >= 500 && parseFloat(formData.price) <= 50000 && !errors.price && (\n                  <span className=\"ml-2 text-green-600 text-xs\"> Valid price</span>\n                )}\n              </label>\n              <div className=\"relative\">\n                <span className=\"absolute left-4 top-1/2 -translate-y-1/2 text-gray-500 font-medium\">R</span>\n                <input\n                  type=\"number\"\n                  required\n                  value={formData.price}\n                  onChange={(e) => {\n                    setFormData({ ...formData, price: e.target.value });\n                    validateField('price', e.target.value);\n                  }}\n                  onBlur={(e) => validateField('price', e.target.value)}\n                  placeholder=\"2500\"\n                  min=\"500\"\n                  max=\"50000\"\n                  className={`w-full pl-10 pr-4 py-3 border-2 ${\n                    errors.price ? 'border-red-400 bg-red-50' : \n                    formData.price && parseFloat(formData.price) >= 500 && parseFloat(formData.price) <= 50000 ? 'border-teal-400 bg-teal-50/30' : \n                    'border-gray-200'\n                  } text-gray-800 rounded-xl focus:ring-2 ${\n                    errors.price ? 'focus:ring-red-400' : 'focus:ring-teal-400'\n                  } focus:border-transparent transition-all placeholder-gray-400`}\n                />\n                {formData.price && parseFloat(formData.price) >= 500 && parseFloat(formData.price) <= 50000 && !errors.price && (\n                  <CheckCircle className=\"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-teal-600\" />\n                )}\n              </div>\n              {errors.price && <p className=\"text-red-500 text-xs mt-1 flex items-center gap-1\"><span></span> {errors.price}</p>}\n              {!errors.price && formData.price && (\n                <p className=\"text-gray-500 text-xs mt-1\">Suggested range: R500 - R50,000 per month</p>\n              )}\n            </div>\n\n            {/* Full Address */}\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-1\">Full South African Address *</label>\n              <p className=\"text-xs text-gray-500 mb-2\">Example: 5170 Molefe St, Ivory Park, Midrand, 1693</p>\n              <textarea\n                required\n                rows=\"2\"\n                value={fullAddressInput}\n                onChange={(e) => handleFullAddressChange(e.target.value)}\n                onFocus={() => setIsFullAddressEditing(true)}\n                onBlur={(e) => { setIsFullAddressEditing(false); handleFullAddressChange(e.target.value); }}\n                placeholder=\"Type the full street + suburb + city + postal code\"\n                className={`w-full px-4 py-3 border-2 ${errors.location ? 'border-red-400' : 'border-gray-200'} bg-white text-gray-800 rounded-xl focus:ring-2 ${errors.location ? 'focus:ring-red-400' : 'focus:ring-teal-400'} focus:border-transparent transition placeholder-gray-400`}\n              />\n              {errors.location && <p className=\"text-red-500 text-xs mt-1\" aria-live=\"assertive\">{errors.location}</p>}\n              {!errors.location && (\n                <p className=\"text-gray-500 text-xs mt-1\">\n                  Include the street/stand number plus suburb, city, and postal code. Commas are optional; we will split it for you.\n                </p>\n              )}\n            </div>\n\n            {/* Geocode Section - Manual confirmation only */}\n            <div className=\"bg-gradient-to-br from-teal-50 to-cyan-50 border-2 border-teal-200 rounded-xl p-6\">\n              <div className=\"flex items-start gap-3 mb-4\">\n                <MapPin className=\"w-6 h-6 text-teal-600 flex-shrink-0 mt-1\" />\n                <div className=\"flex-1\">\n                  <h3 className=\"text-lg font-semibold text-gray-800 mb-1\">Confirm Your Address</h3>\n                  <p className=\"text-sm text-gray-600\">\n                    Type the exact street + suburb above, then tap <strong>Look Up Address</strong> if you\u00110d like us to fetch coordinates for your Google Maps preview.\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex flex-wrap gap-3 items-start\">\n                <button\n                  type=\"button\"\n                  onClick={geocodeAddress}\n                  className=\"w-full md:w-auto bg-white hover:bg-gray-50 text-gray-700 border-2 border-gray-300 px-6 py-3 rounded-lg text-sm font-semibold transition flex items-center justify-center gap-2\"\n                >\n                  <MapPin className=\"w-4 h-4\" />\n                  Look Up Address\n                </button>\n\n                <div className=\"text-sm flex-1 min-w-[220px]\">\n                  {geocodingStatus && (\n                    <span className={`${geocodingStatus.startsWith('') ? 'text-green-600 font-semibold' : geocodingStatus.startsWith('') ? 'text-amber-600' : 'text-gray-700'} flex items-center gap-1`}>\n                      {geocodingStatus.startsWith('') && <CheckCircle className=\"w-4 h-4\" />}\n                      {geocodingStatus}\n                      {lastGeocodeSource === 'cached' && (\n                        <span className=\"ml-2 inline-block px-2 py-1 text-[10px] rounded bg-purple-100 text-purple-600 font-semibold\">CACHED</span>\n                      )}\n                      {lastGeocodeSource === 'mapbox' && (\n                        <span className=\"ml-2 inline-block px-2 py-1 text-[10px] rounded bg-blue-100 text-blue-600 font-semibold\">MAPBOX</span>\n                      )}\n                      {lastGeocodeSource === 'maps.co' && (\n                        <span className=\"ml-2 inline-block px-2 py-1 text-[10px] rounded bg-indigo-100 text-indigo-600 font-semibold\">MAPS.CO</span>\n                      )}\n                      {lastGeocodeSource === 'proxy' && (\n                        <span className=\"ml-2 inline-block px-2 py-1 text-[10px] rounded bg-green-100 text-green-600 font-semibold\">PROXY</span>\n                      )}\n                      {lastGeocodeSource === 'direct' && (\n                        <span className=\"ml-2 inline-block px-2 py-1 text-[10px] rounded bg-yellow-100 text-yellow-700 font-semibold\">FALLBACK</span>\n                      )}\n                    </span>\n                  )}\n                  {formData.latitude && formData.longitude && !geocodingStatus && (\n                    <span className=\"text-green-600 font-semibold flex items-center gap-1\">\n                      <CheckCircle className=\"w-4 h-4\" />\n                      Coordinates saved: {formData.latitude.toFixed(4)}, {formData.longitude.toFixed(4)}\n                      {lastGeocodeSource === 'cached' && (\n                        <span className=\"ml-2 inline-block px-2 py-1 text-[10px] rounded bg-purple-100 text-purple-600 font-semibold\">CACHED</span>\n                      )}\n                      {lastGeocodeSource === 'maps.co' && (\n                        <span className=\"ml-2 inline-block px-2 py-1 text-[10px] rounded bg-indigo-100 text-indigo-600 font-semibold\">MAPS.CO</span>\n                      )}\n                    </span>\n                  )}\n                  {googleMapsUrl && (\n                    <div className=\"mt-3 bg-white border border-gray-200 rounded-lg p-3 text-xs text-gray-600\">\n                      <span className=\"block text-gray-800 font-semibold mb-1\">Preview this address</span>\n                      <a\n                        href={googleMapsUrl}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"inline-flex items-center gap-2 text-teal-700 font-semibold hover:text-teal-900 underline\"\n                      >\n                        <MapPin className=\"w-3 h-3\" /> Open in Google Maps\n                      </a>\n                      <span className=\"block mt-2 text-[11px] text-gray-500\">Renters will see the same button under your listing.</span>\n                    </div>\n                  )}\n                </div>\n              </div>\n              <div className=\"mt-4 text-sm text-gray-600 bg-white border border-dashed border-gray-300 rounded-lg p-4\">\n                <p className=\"font-semibold text-gray-800 mb-1\">Manual address confirmed</p>\n                <p>We now rely on the address you type here. Use Google Maps above if you want to double-check directions.</p>\n              </div>\n            </div>\n\n            {/* Status and Available Date - Two columns */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Status</label>\n                <select\n                  value={formData.status}\n                  onChange={(e) => setFormData({ ...formData, status: e.target.value })}\n                  className=\"w-full px-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition\"\n                >\n                  <option value=\"available\">Available</option>\n                  <option value=\"rented\">Rented</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Available Date</label>\n                <input\n                  type=\"date\"\n                  value={formData.availableDate}\n                  onChange={(e) => setFormData({ ...formData, availableDate: e.target.value })}\n                  className=\"w-full px-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition\"\n                />\n              </div>\n            </div>\n\n            {/* Payment Method */}\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Payment Method</label>\n              <select\n                value={formData.paymentMethod}\n                onChange={(e) => setFormData({ ...formData, paymentMethod: e.target.value })}\n                className=\"w-full px-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition\"\n              >\n                <option value=\"Bank and Cash\">Bank and Cash</option>\n                <option value=\"Cash Only\">Cash Only</option>\n                <option value=\"Bank Only\">Bank Only</option>\n              </select>\n            </div>\n\n            {/* Room Type and Lease Duration - Two columns */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Room Type</label>\n                <select\n                  value={formData.roomType}\n                  onChange={(e) => setFormData({ ...formData, roomType: e.target.value })}\n                  className=\"w-full px-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition\"\n                >\n                  <option value=\"private\">Private Room</option>\n                  <option value=\"shared\">Shared Room</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Lease Duration (months)</label>\n                <select\n                  value={formData.leaseDuration}\n                  onChange={(e) => setFormData({ ...formData, leaseDuration: e.target.value })}\n                  className=\"w-full px-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition\"\n                >\n                  <option value=\"1-3\">1-3 months</option>\n                  <option value=\"4-6\">4-6 months</option>\n                  <option value=\"7-12\">7-12 months</option>\n                  <option value=\"12+\">12+ months</option>\n                </select>\n              </div>\n            </div>\n\n            {/* Pet Friendly and Gender Preference */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div className=\"flex items-center gap-3\">\n                <input\n                  type=\"checkbox\"\n                  checked={formData.petFriendly}\n                  onChange={(e) => setFormData({ ...formData, petFriendly: e.target.checked })}\n                  id=\"petFriendly\"\n                  className=\"w-5 h-5 text-teal-600 border-gray-300 rounded focus:ring-teal-500\"\n                />\n                <label htmlFor=\"petFriendly\" className=\"text-sm font-medium text-gray-700\">\n                   Pet Friendly\n                </label>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Gender Preference</label>\n                <select\n                  value={formData.genderPreference}\n                  onChange={(e) => setFormData({ ...formData, genderPreference: e.target.value })}\n                  className=\"w-full px-4 py-3 border-2 border-gray-200 bg-white text-gray-800 rounded-xl focus:ring-2 focus:ring-teal-400 focus:border-transparent transition\"\n                >\n                  <option value=\"any\">Any</option>\n                  <option value=\"male\">Male Only</option>\n                  <option value=\"female\">Female Only</option>\n                </select>\n              </div>\n            </div>\n\n            {/* Premium Flag */}\n            <div className=\"flex items-center gap-3\">\n              <input\n                type=\"checkbox\"\n                checked={!!formData.premium}\n                onChange={(e) => setFormData({ ...formData, premium: e.target.checked })}\n                id=\"premiumFlag\"\n              />\n              <label htmlFor=\"premiumFlag\" className=\"text-sm font-medium text-gray-700\">\n                Premium listing (highlight & priority sorting)\n              </label>\n            </div>\n\n            {/* Description */}\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-2\">\n                Description \n                {formData.description && (\n                  <span className={`ml-2 text-xs ${formData.description.length > 500 ? 'text-red-500' : 'text-gray-500'}`}>\n                    ({formData.description.length}/500 characters)\n                  </span>\n                )}\n              </label>\n              <textarea\n                value={formData.description}\n                onChange={(e) => {\n                  setFormData({ ...formData, description: e.target.value });\n                  validateField('description', e.target.value);\n                }}\n                onBlur={(e) => validateField('description', e.target.value)}\n                placeholder=\"Describe the room, amenities, rules, and any other details...\"\n                rows=\"4\"\n                className={`w-full px-4 py-3 border-2 ${errors.description ? 'border-red-400' : 'border-gray-200'} bg-white text-gray-800 rounded-xl focus:ring-2 ${errors.description ? 'focus:ring-red-400' : 'focus:ring-teal-400'} focus:border-transparent transition placeholder-gray-400`}\n              />\n              {errors.description && <p className=\"text-red-500 text-xs mt-1\">{errors.description}</p>}\n            </div>\n\n            {/* Amenities */}\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-3\">Amenities</label>\n              <div className=\"grid grid-cols-2 md:grid-cols-3 gap-2\">\n                {availableAmenities.map(amenity => (\n                  <button\n                    key={amenity}\n                    type=\"button\"\n                    onClick={() => toggleAmenity(amenity)}\n                    className={`px-4 py-2.5 rounded-xl text-sm font-medium transition-all ${\n                      formData.amenities.includes(amenity)\n                        ? 'bg-gradient-to-r from-teal-500 to-cyan-500 text-white shadow-md'\n                        : 'bg-gray-100 text-gray-700 border-2 border-gray-200 hover:border-teal-300 hover:bg-teal-50'\n                    }`}\n                  >\n                    {amenity}\n                  </button>\n                ))}\n              </div>\n            </div>\n\n            {/* Photos */}\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-800 mb-2\">Photos (Max 5)</label>\n              <div \n                className=\"relative border-2 border-dashed border-gray-300 bg-gradient-to-br from-gray-50 to-slate-50 rounded-xl p-6 hover:border-teal-400 hover:bg-teal-50/30 transition-all duration-300 cursor-pointer group\"\n                onClick={() => setShowPhotoEditor(true)}\n              >\n                <div className=\"text-center\">\n                  <div className=\"w-16 h-16 bg-gradient-to-br from-teal-100 to-cyan-100 rounded-2xl flex items-center justify-center mx-auto mb-3 group-hover:scale-110 transition-transform duration-300\">\n                    <span className=\"text-3xl\"></span>\n                  </div>\n                  <p className=\"text-gray-700 font-semibold mb-1\">\n                    {formData.photos.length === 0 ? 'Add Photos' : `${formData.photos.length}/5 Photos Added`}\n                  </p>\n                  <p className=\"text-xs text-gray-500\">\n                    Click to upload  JPG, PNG up to 5MB each\n                  </p>\n                  {formData.photos.length === 0 && (\n                    <p className=\"text-xs text-teal-600 mt-2 font-medium\">\n                      Tip: Listings with photos get 3x more views!\n                    </p>\n                  )}\n                </div>\n              </div>\n              {formData.photos.length > 0 && (\n                <div className=\"mt-4 grid grid-cols-2 md:grid-cols-3 gap-3\">\n                  {formData.photos.map((photo, index) => (\n                    <div key={index} className=\"relative group\">\n                      {index === 0 && (\n                        <div className=\"absolute top-2 left-2 bg-gradient-to-r from-teal-500 to-cyan-500 text-white text-xs px-2 py-1 rounded-full font-semibold z-10\">\n                          Cover\n                        </div>\n                      )}\n                      <img \n                        src={photo} \n                        alt={`Preview ${index + 1}`} \n                        className=\"w-full h-32 object-cover rounded-xl border-2 border-gray-200 shadow-sm\" \n                      />\n                    </div>\n                  ))}\n                </div>\n              )}\n              <button\n                type=\"button\"\n                onClick={() => setShowPhotoEditor(true)}\n                className=\"mt-3 text-sm text-teal-600 hover:text-teal-700 font-medium\"\n              >\n                {formData.photos.length > 0 ? ' Edit Photos' : ''}\n              </button>\n            </div>\n\n            {showPhotoEditor && (\n              <PhotoEditor\n                photos={formData.photos}\n                onPhotosChange={(newPhotos) => setFormData({ ...formData, photos: newPhotos })}\n                onClose={() => setShowPhotoEditor(false)}\n                maxPhotos={5}\n              />\n            )}\n\n            {/* Submit Button */}\n            <div className=\"border-t border-gray-200 pt-6\">\n              <button\n                onClick={handleSubmit}\n                disabled={isSubmitting || Object.keys(errors).length > 0}\n                className={`w-full font-semibold py-3.5 rounded-xl transition-all shadow-lg relative ${\n                  isSubmitting || Object.keys(errors).length > 0\n                    ? 'bg-gray-400 cursor-not-allowed'\n                    : 'bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white hover:shadow-xl hover:shadow-teal-500/25'\n                }`}\n              >\n                {isSubmitting ? (\n                  <>\n                    <span className=\"opacity-0\">Post Room</span>\n                    <div className=\"absolute inset-0 flex items-center justify-center\">\n                      <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                    </div>\n                  </>\n                ) : (\n                  'Post Room'\n                )}\n              </button>\n              {Object.keys(errors).length > 0 && (\n                <p className=\"text-red-500 text-xs mt-2 text-center\">Please fix the errors above before submitting</p>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\n// MessagesView removed - using direct contact instead\n\nfunction MyListingsView({ listings, onDelete }) {\n  return (\n    <div className=\"p-4 min-h-screen bg-gradient-to-b from-slate-50 to-gray-100 pb-24\">\n      <div className=\"max-w-7xl mx-auto mt-8\">\n        {/* Landlord reminder banner */}\n        {listings.length > 0 && (\n          <div className=\"mb-6 bg-gradient-to-r from-amber-50 to-orange-50 border border-amber-200 rounded-2xl p-4 shadow-sm\">\n            <div className=\"flex items-start gap-3\">\n              <div className=\"w-10 h-10 bg-amber-100 rounded-xl flex items-center justify-center flex-shrink-0\">\n                <AlertTriangle className=\"w-5 h-5 text-amber-600\" />\n              </div>\n              <div>\n                <h3 className=\"font-semibold text-amber-800 mb-1\">Found a tenant?</h3>\n                <p className=\"text-amber-700 text-sm leading-relaxed\">\n                  Remember to <span className=\"font-medium\">delete your listing</span> once you've found a tenant. \n                  This will stop new calls and messages from other renters looking at your ad.\n                </p>\n              </div>\n            </div>\n          </div>\n        )}\n\n        <div className=\"mb-8\">\n          <div className=\"flex items-center gap-4 mb-3\">\n            <div className=\"w-14 h-14 bg-gradient-to-br from-teal-100 to-cyan-100 rounded-2xl flex items-center justify-center shadow-sm\">\n              <Home className=\"w-7 h-7 text-teal-600\" />\n            </div>\n            <div>\n              <h2 className=\"text-3xl font-extrabold text-gray-900\">My Listings</h2>\n              <p className=\"text-gray-600\">\n                {listings.length === 0\n                  ? 'Your properties will appear here'\n                  : `${listings.length} active ${listings.length === 1 ? 'listing' : 'listings'}`}\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {listings.length === 0 ? (\n          <div className=\"bg-white rounded-2xl border border-gray-100 shadow-sm p-12 text-center\">\n            <div className=\"w-24 h-24 bg-gradient-to-br from-teal-50 to-cyan-50 rounded-full flex items-center justify-center mx-auto mb-6\">\n              <Home className=\"w-12 h-12 text-teal-400\" />\n            </div>\n            <h3 className=\"text-xl font-bold text-gray-800 mb-2\">No Listings Yet</h3>\n            <p className=\"text-gray-500 text-sm mb-6 max-w-md mx-auto\">\n              Start earning by posting your first room. It only takes a few minutes!\n            </p>\n            <button\n              onClick={() => window.location.hash = '#add'}\n              className=\"inline-flex items-center gap-2 bg-gradient-to-r from-teal-600 to-cyan-600 hover:from-teal-700 hover:to-cyan-700 text-white font-semibold px-6 py-3 rounded-xl transition-all shadow-md hover:shadow-lg\"\n            >\n              <PlusCircle className=\"w-5 h-5\" />\n              Post Your First Room\n            </button>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {listings.map(listing => (\n              <div key={listing.id} className=\"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow\">\n                {listing.photos && listing.photos.length > 0 && (\n                  <div className=\"relative\">\n                    <img src={listing.photos[0]} alt=\"Room\" className=\"w-full h-48 object-cover\" />\n                    {listing.photos.length > 1 && (\n                      <div className=\"absolute top-3 right-3 bg-black/60 backdrop-blur-sm text-white px-2.5 py-1 rounded-full text-xs font-medium\">\n                        {listing.photos.length} photos\n                      </div>\n                    )}\n                    <div className={`absolute top-3 left-3 px-2.5 py-1 rounded-full text-xs font-semibold ${\n                      listing.status === 'available' \n                        ? 'bg-emerald-500 text-white' \n                        : 'bg-gray-500 text-white'\n                    }`}>\n                      {listing.status === 'available' ? 'Active' : 'Rented'}\n                    </div>\n                  </div>\n                )}\n                <div className=\"p-5\">\n                  <h3 className=\"font-bold text-lg text-gray-900 mb-1 line-clamp-1\">{listing.title}</h3>\n                  <div className=\"text-teal-600 font-bold text-xl mb-2\">R{listing.price?.toLocaleString()}/month</div>\n                  <div className=\"flex items-center text-gray-500 text-sm mb-4\">\n                    <MapPin className=\"w-4 h-4 mr-1.5 text-gray-400\" />\n                    <span className=\"line-clamp-1\">{listing.location}</span>\n                  </div>\n                  <div className=\"flex gap-2\">\n                    <button\n                      onClick={() => onDelete(listing.id)}\n                      className=\"flex-1 bg-red-50 hover:bg-red-100 text-red-600 font-medium py-2.5 rounded-xl transition-colors text-sm\"\n                    >\n                      Delete\n                    </button>\n                  </div>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\n\n// Inline message box component with validation for listing detail view\n// ListingInlineMessageBox removed\n\n// ConversationModal removed\n\nfunction AuthModal({ defaultType = 'renter', onClose, onSuccess, authFunctions }) {\n  const [mode, setMode] = useState('signin'); // 'signin', 'signup', 'reset', 'phone', 'phone-verify'\n  const [form, setForm] = useState({ \n    name: '', \n    phone: '', \n    email: '', \n    password: '',\n    confirmPassword: '',\n    otp: '',\n    type: defaultType \n  });\n  const [errors, setErrors] = useState({});\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [authError, setAuthError] = useState('');\n  const [resetSent, setResetSent] = useState(false);\n  const [otpSent, setOtpSent] = useState(false);\n  const [phoneFormatted, setPhoneFormatted] = useState('');\n\n  const validateForm = () => {\n    const newErrors = {};\n    \n    if (mode === 'phone') {\n      if (!form.phone || form.phone.trim().length < 9) {\n        newErrors.phone = 'Please enter a valid phone number';\n      }\n    } else if (mode === 'phone-verify') {\n      if (!form.otp || form.otp.length !== 6) {\n        newErrors.otp = 'Please enter the 6-digit code';\n      }\n    } else {\n      if (mode === 'signup') {\n        if (!form.name || form.name.trim().length < 2) {\n          newErrors.name = 'Name must be at least 2 characters';\n        }\n      }\n      \n      if (!form.email || !/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(form.email)) {\n        newErrors.email = 'Please enter a valid email address';\n      }\n      \n      if (mode !== 'reset') {\n        if (!form.password || form.password.length < 6) {\n          newErrors.password = 'Password must be at least 6 characters';\n        }\n      }\n      \n      if (mode === 'signup' && form.password !== form.confirmPassword) {\n        newErrors.confirmPassword = 'Passwords do not match';\n      }\n    }\n    \n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async () => {\n    if (!validateForm()) return;\n    setIsSubmitting(true);\n    setAuthError('');\n    \n    try {\n      if (mode === 'signup') {\n        await authFunctions.signUp(form.email, form.password, form.name, form.type, form.phone);\n        onSuccess?.();\n        onClose();\n      } else if (mode === 'signin') {\n        await authFunctions.signIn(form.email, form.password);\n        onSuccess?.();\n        onClose();\n      } else if (mode === 'reset') {\n        await authFunctions.sendPasswordReset(form.email);\n        setResetSent(true);\n      } else if (mode === 'phone') {\n        // Send OTP\n        const result = await authFunctions.sendPhoneOTP(form.phone);\n        setPhoneFormatted(result.formattedNumber);\n        setOtpSent(true);\n        setMode('phone-verify');\n      } else if (mode === 'phone-verify') {\n        // Verify OTP\n        await authFunctions.verifyPhoneOTP(form.otp, form.type, form.name);\n        onSuccess?.();\n        onClose();\n      }\n    } catch (err) {\n      console.error('Auth error:', err);\n      let errorMessage = 'An error occurred. Please try again.';\n      if (err.code === 'auth/invalid-phone-number') {\n        errorMessage = 'Invalid phone number format. Please use format: 0XX XXX XXXX';\n      } else if (err.code === 'auth/too-many-requests') {\n        errorMessage = 'Too many attempts. Please try again later.';\n      } else if (err.code === 'auth/invalid-verification-code') {\n        errorMessage = 'Invalid code. Please check and try again.';\n      } else if (err.code === 'auth/code-expired') {\n        errorMessage = 'Code expired. Please request a new one.';\n      } else if (err.message) {\n        errorMessage = err.message;\n      }\n      setAuthError(errorMessage);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleGoogleSignIn = async () => {\n    setIsSubmitting(true);\n    setAuthError('');\n    \n    try {\n      await authFunctions.signInGoogle(form.type);\n      onSuccess?.();\n      onClose();\n    } catch (err) {\n      setAuthError(err.message || 'Google sign-in failed. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const startPhoneAuth = () => {\n    setMode('phone');\n    setAuthError('');\n    setOtpSent(false);\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-gray-900/60 backdrop-blur-sm flex items-start sm:items-center justify-center p-4 pt-16 sm:pt-4 z-50 overflow-y-auto\">\n      <div className=\"bg-white rounded-2xl w-full max-w-md p-8 my-auto shadow-2xl fade-in border border-gray-100\">\n        {/* Header */}\n        <div className=\"flex items-start justify-between mb-6\">\n          <div>\n            <div className=\"flex items-center gap-2 mb-2\">\n              <div className=\"w-10 h-10 bg-gradient-to-br from-teal-500 to-cyan-500 rounded-xl flex items-center justify-center shadow-lg\">\n                <Home className=\"w-5 h-5 text-white\" />\n              </div>\n              <span className=\"text-xl font-extrabold\">\n                <span className=\"bg-gradient-to-r from-teal-600 to-cyan-600 bg-clip-text text-transparent\">Room</span>\n                <span className=\"text-rose-500\">24</span>\n              </span>\n            </div>\n            <h3 className=\"text-xl font-bold text-gray-900 mt-4\">\n              {mode === 'signin' && 'Welcome back!'}\n              {mode === 'signup' && 'Create your account'}\n              {mode === 'reset' && 'Reset password'}\n              {mode === 'phone' && 'Sign in with phone'}\n              {mode === 'phone-verify' && 'Enter verification code'}\n            </h3>\n            <p className=\"text-sm text-gray-500 mt-1\">\n              {mode === 'signin' && 'Sign in to continue'}\n              {mode === 'signup' && 'Join Room24 today'}\n              {mode === 'reset' && \"We'll send you a reset link\"}\n              {mode === 'phone' && \"We'll send you a verification code\"}\n              {mode === 'phone-verify' && `Code sent to ${phoneFormatted}`}\n            </p>\n          </div>\n          <button \n            onClick={onClose} \n            className=\"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-colors\"\n          >\n            <X className=\"w-5 h-5\" />\n          </button>\n        </div>\n\n        {/* Auth Error */}\n        {authError && (\n          <div className=\"mb-4 p-3 bg-rose-50 border border-rose-200 rounded-xl text-rose-700 text-sm flex items-center gap-2\">\n            <AlertTriangle className=\"w-4 h-4 flex-shrink-0\" />\n            {authError}\n          </div>\n        )}\n\n        {/* Reset Success Message */}\n        {resetSent && (\n          <div className=\"mb-4 p-3 bg-green-50 border border-green-200 rounded-xl text-green-700 text-sm flex items-center gap-2\">\n            <CheckCircle className=\"w-4 h-4 flex-shrink-0\" />\n            Password reset email sent! Check your inbox.\n          </div>\n        )}\n\n        <div className=\"space-y-4\">\n          {/* Phone OTP Verification Mode */}\n          {mode === 'phone-verify' && (\n            <>\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Verification Code *</label>\n                <input \n                  type=\"text\" \n                  inputMode=\"numeric\"\n                  maxLength={6}\n                  value={form.otp} \n                  onChange={(e) => { \n                    const val = e.target.value.replace(/\\D/g, '').slice(0, 6);\n                    setForm({ ...form, otp: val }); \n                    setErrors({ ...errors, otp: '' }); \n                    setAuthError(''); \n                  }}\n                  className={`w-full px-4 py-4 border-2 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500 text-center text-2xl font-bold tracking-[0.5em] ${\n                    errors.otp ? 'border-rose-400 bg-rose-50' : 'border-gray-200 hover:border-gray-300'\n                  }`}\n                  placeholder=\"000000\"\n                  autoFocus\n                />\n                {errors.otp && <p className=\"text-rose-500 text-xs mt-1.5 flex items-center gap-1\"><span></span>{errors.otp}</p>}\n              </div>\n\n              {/* Name for new phone users */}\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Your Name *</label>\n                <input \n                  type=\"text\" \n                  value={form.name} \n                  onChange={(e) => { setForm({ ...form, name: e.target.value }); setErrors({ ...errors, name: '' }); }}\n                  className=\"w-full px-4 py-3 border-2 border-gray-200 hover:border-gray-300 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500\"\n                  placeholder=\"John Doe\"\n                />\n              </div>\n\n              {/* User Type for new phone users */}\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">I am a</label>\n                <div className=\"grid grid-cols-2 gap-3\">\n                  <button\n                    type=\"button\"\n                    onClick={() => setForm({ ...form, type: 'renter' })}\n                    className={`p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-1 ${\n                      form.type === 'renter' \n                        ? 'border-teal-500 bg-gradient-to-br from-teal-50 to-cyan-50 text-teal-700 shadow-md' \n                        : 'border-gray-200 hover:border-gray-300 text-gray-600 hover:bg-gray-50'\n                    }`}\n                  >\n                    <Search className={`w-5 h-5 ${form.type === 'renter' ? 'text-teal-500' : ''}`} />\n                    <span className=\"text-xs font-semibold\">Looking for a room</span>\n                  </button>\n                  <button\n                    type=\"button\"\n                    onClick={() => setForm({ ...form, type: 'landlord' })}\n                    className={`p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-1 ${\n                      form.type === 'landlord' \n                        ? 'border-rose-500 bg-gradient-to-br from-rose-50 to-pink-50 text-rose-700 shadow-md' \n                        : 'border-gray-200 hover:border-gray-300 text-gray-600 hover:bg-gray-50'\n                    }`}\n                  >\n                    <Home className={`w-5 h-5 ${form.type === 'landlord' ? 'text-rose-500' : ''}`} />\n                    <span className=\"text-xs font-semibold\">Listing rooms</span>\n                  </button>\n                </div>\n              </div>\n\n              <button\n                type=\"button\"\n                onClick={() => { setMode('phone'); setOtpSent(false); setForm({ ...form, otp: '' }); }}\n                className=\"text-sm text-teal-600 hover:text-teal-700 font-medium\"\n              >\n                 Change phone number\n              </button>\n            </>\n          )}\n\n          {/* Phone Entry Mode */}\n          {mode === 'phone' && (\n            <>\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Phone Number *</label>\n                <div className=\"flex gap-2\">\n                  <div className=\"flex items-center px-3 bg-gray-100 border-2 border-gray-200 rounded-xl text-gray-600 font-medium\">\n                     +27\n                  </div>\n                  <input \n                    type=\"tel\" \n                    value={form.phone} \n                    onChange={(e) => { \n                      setForm({ ...form, phone: e.target.value }); \n                      setErrors({ ...errors, phone: '' }); \n                      setAuthError(''); \n                    }}\n                    className={`flex-1 px-4 py-3 border-2 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500 ${\n                      errors.phone ? 'border-rose-400 bg-rose-50' : 'border-gray-200 hover:border-gray-300'\n                    }`}\n                    placeholder=\"72 123 4567\"\n                    autoFocus\n                  />\n                </div>\n                {errors.phone && <p className=\"text-rose-500 text-xs mt-1.5 flex items-center gap-1\"><span></span>{errors.phone}</p>}\n                <p className=\"text-xs text-gray-500 mt-2\">We'll send you an SMS with a verification code</p>\n              </div>\n\n              <button\n                type=\"button\"\n                onClick={() => { setMode('signin'); setAuthError(''); }}\n                className=\"text-sm text-teal-600 hover:text-teal-700 font-medium\"\n              >\n                 Use email instead\n              </button>\n            </>\n          )}\n\n          {/* Google & Phone Sign In Buttons */}\n          {(mode === 'signin' || mode === 'signup') && (\n            <>\n              <div className=\"grid grid-cols-2 gap-3\">\n                <button\n                  type=\"button\"\n                  onClick={handleGoogleSignIn}\n                  disabled={isSubmitting}\n                  className=\"flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 hover:border-gray-300 rounded-xl transition-all hover:bg-gray-50 font-medium text-gray-700\"\n                >\n                  <svg className=\"w-5 h-5\" viewBox=\"0 0 24 24\">\n                    <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\n                    <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\n                    <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\n                    <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\n                  </svg>\n                  Google\n                </button>\n\n                <button\n                  type=\"button\"\n                  onClick={startPhoneAuth}\n                  disabled={isSubmitting}\n                  className=\"flex items-center justify-center gap-2 px-4 py-3 border-2 border-gray-200 hover:border-gray-300 rounded-xl transition-all hover:bg-gray-50 font-medium text-gray-700\"\n                >\n                  <Phone className=\"w-5 h-5 text-green-600\" />\n                  Phone\n                </button>\n              </div>\n\n              <div className=\"relative\">\n                <div className=\"absolute inset-0 flex items-center\">\n                  <div className=\"w-full border-t border-gray-200\"></div>\n                </div>\n                <div className=\"relative flex justify-center text-sm\">\n                  <span className=\"px-4 bg-white text-gray-500\">or use email</span>\n                </div>\n              </div>\n            </>\n          )}\n\n          {/* Reset Mode */}\n          {mode === 'reset' && (\n            <div>\n              <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Email *</label>\n              <input \n                type=\"email\" \n                value={form.email} \n                onChange={(e) => { setForm({ ...form, email: e.target.value }); setErrors({ ...errors, email: '' }); setAuthError(''); }}\n                className={`w-full px-4 py-3 border-2 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500 ${\n                  errors.email ? 'border-rose-400 bg-rose-50' : 'border-gray-200 hover:border-gray-300'\n                }`}\n                placeholder=\"john@example.com\"\n              />\n              {errors.email && <p className=\"text-rose-500 text-xs mt-1.5 flex items-center gap-1\"><span></span>{errors.email}</p>}\n            </div>\n          )}\n\n          {/* Email/Password Form (signin/signup) */}\n          {(mode === 'signin' || mode === 'signup') && (\n            <>\n              {/* Name (signup only) */}\n              {mode === 'signup' && (\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Full name *</label>\n                  <input \n                    type=\"text\" \n                    value={form.name} \n                    onChange={(e) => { setForm({ ...form, name: e.target.value }); setErrors({ ...errors, name: '' }); }}\n                    className={`w-full px-4 py-3 border-2 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500 ${\n                      errors.name ? 'border-rose-400 bg-rose-50' : 'border-gray-200 hover:border-gray-300'\n                    }`}\n                    placeholder=\"John Doe\"\n                  />\n                  {errors.name && <p className=\"text-rose-500 text-xs mt-1.5 flex items-center gap-1\"><span></span>{errors.name}</p>}\n                </div>\n              )}\n\n              {/* Email */}\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Email *</label>\n                <input \n                  type=\"email\" \n                  value={form.email} \n                  onChange={(e) => { setForm({ ...form, email: e.target.value }); setErrors({ ...errors, email: '' }); setAuthError(''); }}\n                  className={`w-full px-4 py-3 border-2 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500 ${\n                    errors.email ? 'border-rose-400 bg-rose-50' : 'border-gray-200 hover:border-gray-300'\n                  }`}\n                  placeholder=\"john@example.com\"\n                />\n                {errors.email && <p className=\"text-rose-500 text-xs mt-1.5 flex items-center gap-1\"><span></span>{errors.email}</p>}\n              </div>\n\n              {/* Password */}\n              <div>\n                <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Password *</label>\n                <input \n                  type=\"password\" \n                  value={form.password} \n                  onChange={(e) => { setForm({ ...form, password: e.target.value }); setErrors({ ...errors, password: '' }); setAuthError(''); }}\n                  className={`w-full px-4 py-3 border-2 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500 ${\n                    errors.password ? 'border-rose-400 bg-rose-50' : 'border-gray-200 hover:border-gray-300'\n                  }`}\n                  placeholder=\"\"\n                />\n                {errors.password && <p className=\"text-rose-500 text-xs mt-1.5 flex items-center gap-1\"><span></span>{errors.password}</p>}\n              </div>\n\n              {/* Confirm Password (signup only) */}\n              {mode === 'signup' && (\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-2\">Confirm Password *</label>\n                  <input \n                    type=\"password\" \n                    value={form.confirmPassword} \n                    onChange={(e) => { setForm({ ...form, confirmPassword: e.target.value }); setErrors({ ...errors, confirmPassword: '' }); }}\n                    className={`w-full px-4 py-3 border-2 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500 ${\n                      errors.confirmPassword ? 'border-rose-400 bg-rose-50' : 'border-gray-200 hover:border-gray-300'\n                    }`}\n                    placeholder=\"\"\n                  />\n                  {errors.confirmPassword && <p className=\"text-rose-500 text-xs mt-1.5 flex items-center gap-1\"><span></span>{errors.confirmPassword}</p>}\n                </div>\n              )}\n\n              {/* Phone (signup only) */}\n              {mode === 'signup' && (\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                    Phone <span className=\"text-gray-400 font-normal\">(optional)</span>\n                  </label>\n                  <input \n                    type=\"tel\" \n                    value={form.phone} \n                    onChange={(e) => setForm({ ...form, phone: e.target.value })}\n                    className=\"w-full px-4 py-3 border-2 border-gray-200 hover:border-gray-300 rounded-xl transition-all focus:ring-2 focus:ring-teal-100 focus:border-teal-500\"\n                    placeholder=\"+27 12 345 6789\"\n                  />\n                </div>\n              )}\n\n              {/* User Type (signup only) */}\n              {mode === 'signup' && (\n                <div>\n                  <label className=\"block text-sm font-semibold text-gray-700 mb-2\">I am a</label>\n                  <div className=\"grid grid-cols-2 gap-3\">\n                    <button\n                      type=\"button\"\n                      onClick={() => setForm({ ...form, type: 'renter' })}\n                      className={`p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-1 ${\n                        form.type === 'renter' \n                          ? 'border-teal-500 bg-gradient-to-br from-teal-50 to-cyan-50 text-teal-700 shadow-md' \n                          : 'border-gray-200 hover:border-gray-300 text-gray-600 hover:bg-gray-50'\n                      }`}\n                    >\n                      <Search className={`w-5 h-5 ${form.type === 'renter' ? 'text-teal-500' : ''}`} />\n                      <span className=\"text-xs font-semibold\">Looking for a room</span>\n                    </button>\n                    <button\n                      type=\"button\"\n                      onClick={() => setForm({ ...form, type: 'landlord' })}\n                      className={`p-3 rounded-xl border-2 transition-all flex flex-col items-center gap-1 ${\n                        form.type === 'landlord' \n                          ? 'border-rose-500 bg-gradient-to-br from-rose-50 to-pink-50 text-rose-700 shadow-md' \n                          : 'border-gray-200 hover:border-gray-300 text-gray-600 hover:bg-gray-50'\n                      }`}\n                    >\n                      <Home className={`w-5 h-5 ${form.type === 'landlord' ? 'text-rose-500' : ''}`} />\n                      <span className=\"text-xs font-semibold\">Listing rooms</span>\n                    </button>\n                  </div>\n                </div>\n              )}\n\n              {/* Forgot Password Link (signin only) */}\n              {mode === 'signin' && (\n                <button\n                  type=\"button\"\n                  onClick={() => { setMode('reset'); setAuthError(''); setResetSent(false); }}\n                  className=\"text-sm text-teal-600 hover:text-teal-700 font-medium\"\n                >\n                  Forgot your password?\n                </button>\n              )}\n            </>\n          )}\n\n          {/* Submit Button */}\n          <button \n            id=\"phone-sign-in-button\"\n            onClick={handleSubmit}\n            disabled={isSubmitting}\n            className={`w-full font-bold py-3 rounded-xl transition-all relative ${\n              isSubmitting \n                ? 'bg-teal-400 cursor-not-allowed' \n                : 'bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white shadow-lg hover:shadow-xl hover:shadow-teal-500/25'\n            }`}\n          >\n            {isSubmitting ? (\n              <>\n                <span className=\"opacity-0\">Submit</span>\n                <div className=\"absolute inset-0 flex items-center justify-center\">\n                  <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                </div>\n              </>\n            ) : (\n              <>\n                {mode === 'signin' && 'Sign In'}\n                {mode === 'signup' && 'Create Account'}\n                {mode === 'reset' && 'Send Reset Link'}\n                {mode === 'phone' && 'Send Verification Code'}\n                {mode === 'phone-verify' && 'Verify & Sign In'}\n              </>\n            )}\n          </button>\n\n          {/* reCAPTCHA container for phone auth */}\n          <div id=\"recaptcha-container\" className=\"flex justify-center\"></div>\n\n          {/* Toggle Mode */}\n          <div className=\"text-center text-sm text-gray-600\">\n            {mode === 'signin' && (\n              <>\n                Don't have an account?{' '}\n                <button \n                  onClick={() => { setMode('signup'); setAuthError(''); }} \n                  className=\"text-teal-600 hover:text-teal-700 font-semibold\"\n                >\n                  Sign up\n                </button>\n              </>\n            )}\n            {mode === 'signup' && (\n              <>\n                Already have an account?{' '}\n                <button \n                  onClick={() => { setMode('signin'); setAuthError(''); }} \n                  className=\"text-teal-600 hover:text-teal-700 font-semibold\"\n                >\n                  Sign in\n                </button>\n              </>\n            )}\n            {mode === 'reset' && (\n              <button \n                onClick={() => { setMode('signin'); setAuthError(''); setResetSent(false); }} \n                className=\"text-teal-600 hover:text-teal-700 font-semibold\"\n              >\n                 Back to sign in\n              </button>\n            )}\n            {(mode === 'phone' || mode === 'phone-verify') && (\n              <button \n                onClick={() => { setMode('signin'); setAuthError(''); setOtpSent(false); }} \n                className=\"text-teal-600 hover:text-teal-700 font-semibold\"\n              >\n                 Back to sign in\n              </button>\n            )}\n          </div>\n        </div>\n\n        {/* Footer */}\n        <p className=\"text-xs text-gray-400 text-center mt-6\">\n          By continuing, you agree to our <button className=\"text-teal-600 hover:underline\">Terms of Service</button> and <button className=\"text-teal-600 hover:underline\">Privacy Policy</button>\n        </p>\n      </div>\n    </div>\n  );\n}\n\nfunction BottomNav({ currentView, setCurrentView, userType }) {\n  const navItems = [\n    { id: 'browse', label: 'Browse', icon: <Search className=\"w-5 h-5\" />, activeColor: 'teal' },\n    { id: 'add', label: 'List', icon: <PlusCircle className=\"w-5 h-5\" />, requiresLandlord: true, activeColor: 'rose' },\n    { id: 'favorites', label: 'Saved', icon: <Heart className=\"w-5 h-5\" />, activeColor: 'rose' },\n    { id: 'profile', label: 'Profile', icon: <User className=\"w-5 h-5\" />, activeColor: 'blue' }\n  ];\n\n  return (\n    <div className=\"fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-md border-t border-gray-100 px-4 py-2 z-20 md:hidden safe-area-bottom\">\n      <div className=\"grid grid-cols-4 gap-1 max-w-md mx-auto\">\n        {navItems.map(item => {\n          const disabled = item.requiresLandlord && userType !== 'landlord';\n          const isActive = currentView === item.id;\n          const colorClasses = {\n            teal: 'text-teal-600 bg-teal-50',\n            rose: 'text-rose-600 bg-rose-50',\n            blue: 'text-blue-600 bg-blue-50'\n          };\n          return (\n            <button\n              key={item.id}\n              type=\"button\"\n              disabled={disabled}\n              onClick={() => !disabled && setCurrentView(item.id)}\n              className={`flex flex-col items-center gap-0.5 py-2 px-1 rounded-xl transition-all duration-200 ${\n                disabled \n                  ? 'opacity-40 cursor-not-allowed' \n                  : 'active:scale-95'\n              } ${\n                isActive \n                  ? `${colorClasses[item.activeColor]} font-semibold` \n                  : 'text-gray-400 hover:text-gray-600 hover:bg-gray-50'\n              }`}\n            >\n              <span className={`transition-transform duration-200 ${isActive ? 'scale-110' : ''}`}>\n                {item.icon}\n              </span>\n              <span className=\"text-[10px] font-medium\">{item.label}</span>\n            </button>\n          );\n        })}\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}