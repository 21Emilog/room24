// Multi-language translations for RentMzansi
// Supports: English, Zulu, Xhosa, Afrikaans

export const translations = {
  en: {
    // Navigation
    explore: 'Explore',
    list: 'List',
    myRooms: 'My Rooms',
    saved: 'Saved',
    profile: 'Profile',
    
    // Browse View
    searchPlaceholder: 'Search by location...',
    filterByPrice: 'Filter by price',
    allPrices: 'All Prices',
    sortBy: 'Sort by',
    newest: 'Newest',
    priceLowHigh: 'Price: Low to High',
    priceHighLow: 'Price: High to Low',
    noListingsFound: 'No rooms found',
    tryDifferentSearch: 'Try a different search or filter',
    
    // Listing Card
    perMonth: '/month',
    available: 'Available',
    rented: 'Rented',
    newListing: 'New',
    videoTour: 'Video Tour',
    
    // Listing Detail
    roomDetails: 'Room Details',
    viewAllPhotos: 'View all photos',
    description: 'Description',
    amenities: 'Amenities',
    location: 'Location',
    availableFrom: 'Available from',
    roomType: 'Room Type',
    privateRoom: 'Private Room',
    sharedRoom: 'Shared Room',
    entirePlace: 'Entire Place',
    
    // Contact
    contactLandlord: 'Contact Landlord',
    callNow: 'Call Now',
    whatsapp: 'WhatsApp',
    requestToView: 'Request to View Room',
    landlordInfo: 'Landlord Information',
    showContact: 'Show Contact',
    hideContact: 'Hide Contact',
    verified: 'Verified',
    
    // Safety Warning
    safetyWarning: 'Safety Warning',
    safetyMessage: 'Never pay a deposit or any money before viewing the room in person. Always meet the landlord at the property and verify everything before making any payments.',
    
    // Viewing Request
    scheduleViewing: 'Schedule a viewing',
    preferredDate: 'Preferred Date',
    preferredTime: 'Preferred Time',
    selectTime: 'Select a time',
    additionalMessage: 'Additional Message (Optional)',
    sendRequest: 'Send Request via WhatsApp',
    requestSent: 'Request Sent!',
    requestSentMessage: 'Your viewing request has been sent to the landlord via WhatsApp.',
    
    // Reviews
    reviews: 'Reviews',
    noReviews: 'No reviews yet',
    beFirstReview: 'Be the first to leave a review!',
    leaveReview: 'Leave a Review',
    submitReview: 'Submit Review',
    
    // Similar Rooms
    similarRooms: 'Similar Rooms',
    viewDetails: 'View Details',
    
    // Add Listing
    postRoom: 'Post a Room',
    listingTitle: 'Listing Title',
    monthlyRent: 'Monthly Rent',
    additionalCosts: 'Additional Costs',
    address: 'Address',
    uploadPhotos: 'Upload Photos',
    addVideoTour: 'Add Video Tour',
    publish: 'Publish Listing',
    
    // Profile
    myProfile: 'My Profile',
    editProfile: 'Edit Profile',
    signOut: 'Sign Out',
    notificationPrefs: 'Notification Preferences',
    roomAlerts: 'Room Alerts',
    tipsUpdates: 'Tips & Updates',
    locationAlerts: 'Location Alerts',
    
    // Quality Score
    qualityScore: 'Quality Score',
    excellent: 'Excellent',
    good: 'Good',
    fair: 'Fair',
    needsImprovement: 'Needs Improvement',
    
    // Compare
    compare: 'Compare',
    inCompare: 'In Compare',
    
    // Misc
    loading: 'Loading...',
    error: 'Error',
    retry: 'Retry',
    cancel: 'Cancel',
    save: 'Save',
    delete: 'Delete',
    edit: 'Edit',
    close: 'Close',
    back: 'Back',
    next: 'Next',
    done: 'Done',
    peopleViewed: 'people viewed',
    
    // Dark Mode
    darkMode: 'Dark Mode',
    lightMode: 'Light Mode',
    systemDefault: 'System Default',
    
    // Additional UI
    welcomeBack: 'Welcome back',
    phoneNumber: 'Phone Number',
    emailAddress: 'Email Address',
    memberSince: 'Member Since',
    notSet: 'Not set',
    justJoined: 'Just joined!',
    appSettings: 'App Settings',
    customizeExperience: 'Customize your experience',
    switchToLight: 'Switch to light theme',
    switchToDark: 'Switch to dark theme',
    chooseLanguage: 'Choose your preferred language',
    settingsSaved: 'Settings are saved automatically',
    linkedAccounts: 'Linked Accounts',
    connectMethods: 'Connect multiple sign-in methods',
    findRoom: 'Find a Room',
    findRoomDesc: 'Find your perfect room in South Africa',
    searchByLocation: 'Search by location...',
    filters: 'Filters',
    clearAll: 'Clear All',
    noRoomsFound: 'No rooms found',
    tryDifferentFilters: 'Try adjusting your search or filters',
    viewListing: 'View Listing',
    getAlerts: 'Get Alerts',
    pricePerMonth: 'per month',
  },
  
  zu: {
    // Navigation - Zulu
    explore: 'Hlola',
    list: 'Faka',
    myRooms: 'Amakamelo Ami',
    saved: 'Okugciniwe',
    profile: 'Iphrofayela',
    
    // Browse View
    searchPlaceholder: 'Sesha ngendawo...',
    filterByPrice: 'Hlunga ngenani',
    allPrices: 'Wonke Amanani',
    sortBy: 'Hlela nge',
    newest: 'Okusha',
    priceLowHigh: 'Inani: Liphansi kuya Phezulu',
    priceHighLow: 'Inani: Liphezulu kuya Phansi',
    noListingsFound: 'Awekho amakamelo atholakele',
    tryDifferentSearch: 'Zama ukusesha okunye',
    
    // Listing Card
    perMonth: '/ngenyanga',
    available: 'Iyatholakala',
    rented: 'Iqashiwe',
    newListing: 'Okusha',
    videoTour: 'Ividiyo',
    
    // Listing Detail
    roomDetails: 'Imininingwane Yekamelo',
    viewAllPhotos: 'Buka zonke izithombe',
    description: 'Incazelo',
    amenities: 'Izinto Ezinhle',
    location: 'Indawo',
    availableFrom: 'Iyatholakala kusukela',
    roomType: 'Uhlobo Lwekamelo',
    privateRoom: 'Ikamelo Eliyimfihlo',
    sharedRoom: 'Ikamelo Elihlanganyele',
    entirePlace: 'Indawo Yonke',
    
    // Contact
    contactLandlord: 'Xhumana Nomnikazi',
    callNow: 'Shayela Manje',
    whatsapp: 'WhatsApp',
    requestToView: 'Cela Ukubona Ikamelo',
    landlordInfo: 'Ulwazi Lomnikazi',
    showContact: 'Bonisa Ukuxhumana',
    hideContact: 'Fihla Ukuxhumana',
    verified: 'Iqinisekisiwe',
    
    // Safety Warning
    safetyWarning: 'Isexwayiso Sokuphepha',
    safetyMessage: 'Ungalokothi ukhokhe idiphozi noma imali ngaphambi kokubona ikamelo. Hlangana nomnikazi endaweni.',
    
    // Viewing Request
    scheduleViewing: 'Hlela ukubona',
    preferredDate: 'Usuku Olukhethiwe',
    preferredTime: 'Isikhathi Esikhethiwe',
    selectTime: 'Khetha isikhathi',
    additionalMessage: 'Umlayezo Owengeziwe',
    sendRequest: 'Thumela Isicelo nge-WhatsApp',
    requestSent: 'Isicelo Sithunyelwe!',
    requestSentMessage: 'Isicelo sakho sokubona sithunyelwe kumnikazi.',
    
    // Reviews
    reviews: 'Izibuyekezo',
    noReviews: 'Azikho izibuyekezo okwamanje',
    beFirstReview: 'Yiba owokuqala ukushiya isibuyekezo!',
    leaveReview: 'Shiya Isibuyekezo',
    submitReview: 'Thumela Isibuyekezo',
    
    // Similar Rooms
    similarRooms: 'Amakamelo Afanayo',
    viewDetails: 'Buka Imininingwane',
    
    // Add Listing
    postRoom: 'Faka Ikamelo',
    listingTitle: 'Isihloko',
    monthlyRent: 'Irenti Yanyanga Zonke',
    additionalCosts: 'Izindleko Ezengeziwe',
    address: 'Ikheli',
    uploadPhotos: 'Layisha Izithombe',
    addVideoTour: 'Faka Ividiyo',
    publish: 'Shicilela',
    
    // Profile
    myProfile: 'Iphrofayela Yami',
    editProfile: 'Hlela Iphrofayela',
    signOut: 'Phuma',
    notificationPrefs: 'Izaziso',
    roomAlerts: 'Izaziso Zamakamelo',
    tipsUpdates: 'Amathiphu Nezibuyekezo',
    locationAlerts: 'Izaziso Zendawo',
    
    // Quality Score
    qualityScore: 'Amamaki Ekhwalithi',
    excellent: 'Kuhle Kakhulu',
    good: 'Kuhle',
    fair: 'Kulungile',
    needsImprovement: 'Kudinga Ukuthuthukiswa',
    
    // Compare
    compare: 'Qhathanisa',
    inCompare: 'Kuqhathaniswa',
    
    // Misc
    loading: 'Iyalayisha...',
    error: 'Iphutha',
    retry: 'Zama Futhi',
    cancel: 'Khansela',
    save: 'Gcina',
    delete: 'Susa',
    edit: 'Hlela',
    close: 'Vala',
    back: 'Emuva',
    next: 'Okulandelayo',
    done: 'Kwenziwe',
    peopleViewed: 'abantu ababukile',
    
    // Dark Mode
    darkMode: 'Imodi Emnyama',
    lightMode: 'Imodi Ekhanyayo',
    systemDefault: 'Okuzenzakalelayo',
    
    // Additional UI
    welcomeBack: 'Wamkelekile futhi',
    phoneNumber: 'Inombolo Yocingo',
    emailAddress: 'Ikheli Le-imeyili',
    memberSince: 'Ilungu Kusukela',
    notSet: 'Akusetiwe',
    justJoined: 'Usanda kujoyina!',
    appSettings: 'Izilungiselelo Zohlelo',
    customizeExperience: 'Lungiselela ulwazi lwakho',
    switchToLight: 'Shintshela ku-light mode',
    switchToDark: 'Shintshela ku-dark mode',
    chooseLanguage: 'Khetha ulimi oluthandayo',
    settingsSaved: 'Izilungiselelo zigcinwa ngokuzenzakalelayo',
    linkedAccounts: 'Ama-akhawunti Axhunyiwe',
    connectMethods: 'Xhuma izindlela zokungena eziningi',
    findRoom: 'Thola Ikamelo',
    findRoomDesc: 'Thola ikamelo lakho elilungile eNingizimu Afrika',
    searchByLocation: 'Sesha ngendawo...',
    filters: 'Izihluzi',
    clearAll: 'Sula Konke',
    noRoomsFound: 'Awekho amakamelo atholakele',
    tryDifferentFilters: 'Zama ukuguqula ukusesha noma izihluzi',
    viewListing: 'Buka Uhlu',
    getAlerts: 'Thola Izaziso',
    pricePerMonth: 'ngenyanga',
  },
  
  xh: {
    // Navigation - Xhosa
    explore: 'Phonononga',
    list: 'Bhalisela',
    myRooms: 'Amagumbi Am',
    saved: 'Egciniweyo',
    profile: 'Iprofayile',
    
    // Browse View
    searchPlaceholder: 'Khangela ngendawo...',
    filterByPrice: 'Hlela ngexabiso',
    allPrices: 'Onke Amaxabiso',
    sortBy: 'Hlela nge',
    newest: 'Okutsha',
    priceLowHigh: 'Ixabiso: Eliphantsi kuya Phezulu',
    priceHighLow: 'Ixabiso: Eliphezulu kuya Phantsi',
    noListingsFound: 'Akukho magumbi afunyenweyo',
    tryDifferentSearch: 'Zama ukukhangela okunye',
    
    // Listing Card
    perMonth: '/ngenyanga',
    available: 'Iyafumaneka',
    rented: 'Iqeshiwe',
    newListing: 'Okutsha',
    videoTour: 'Ividiyo',
    
    // Listing Detail
    roomDetails: 'Iinkcukacha Zegumbi',
    viewAllPhotos: 'Jonga zonke iifoto',
    description: 'Inkcazelo',
    amenities: 'Izinto Ezilungileyo',
    location: 'Indawo',
    availableFrom: 'Iyafumaneka ukususela',
    roomType: 'Uhlobo Lwegumbi',
    privateRoom: 'Igumbi Labucala',
    sharedRoom: 'Igumbi Elihlangeneyo',
    entirePlace: 'Indawo Yonke',
    
    // Contact
    contactLandlord: 'Qhagamshelana Nomnini',
    callNow: 'Fowunela Ngoku',
    whatsapp: 'WhatsApp',
    requestToView: 'Cela Ukubona Igumbi',
    landlordInfo: 'Ulwazi Lomnini',
    showContact: 'Bonisa Unxibelelwano',
    hideContact: 'Fihla Unxibelelwano',
    verified: 'Iqinisekisiwe',
    
    // Safety Warning
    safetyWarning: 'Isilumkiso Sokhuseleko',
    safetyMessage: 'Ungaze uhlawule idipozithi okanye imali ngaphambi kokubona igumbi. Hlangana nomnini kwindawo.',
    
    // Viewing Request
    scheduleViewing: 'Cwangcisa ukubona',
    preferredDate: 'Umhla Okhethiweyo',
    preferredTime: 'Ixesha Elikhethiweyo',
    selectTime: 'Khetha ixesha',
    additionalMessage: 'Umyalezo Owongeziweyo',
    sendRequest: 'Thumela Isicelo nge-WhatsApp',
    requestSent: 'Isicelo Sithunyelwe!',
    requestSentMessage: 'Isicelo sakho sokubona sithunyelwe kumnini.',
    
    // Reviews
    reviews: 'Izimvo',
    noReviews: 'Azikho izimvo okwangoku',
    beFirstReview: 'Yiba ngowokuqala ukushiya uluvo!',
    leaveReview: 'Shiya Uluvo',
    submitReview: 'Thumela Uluvo',
    
    // Similar Rooms
    similarRooms: 'Amagumbi Afanayo',
    viewDetails: 'Jonga Iinkcukacha',
    
    // Add Listing
    postRoom: 'Faka Igumbi',
    listingTitle: 'Isihloko',
    monthlyRent: 'Irenti Yenyanga',
    additionalCosts: 'Iindleko Ezongezelelweyo',
    address: 'Idilesi',
    uploadPhotos: 'Layisha Iifoto',
    addVideoTour: 'Faka Ividiyo',
    publish: 'Papasha',
    
    // Profile
    myProfile: 'Iprofayile Yam',
    editProfile: 'Hlela Iprofayile',
    signOut: 'Phuma',
    notificationPrefs: 'Izaziso',
    roomAlerts: 'Izaziso Zamagumbi',
    tipsUpdates: 'Amacebiso Nezibuyekezo',
    locationAlerts: 'Izaziso Zendawo',
    
    // Quality Score
    qualityScore: 'Amanqaku Omgangatho',
    excellent: 'Kuhle Kakhulu',
    good: 'Kuhle',
    fair: 'Kulungile',
    needsImprovement: 'Kufuna Ukuphuculwa',
    
    // Compare
    compare: 'Thelekisa',
    inCompare: 'Kuthelekiswa',
    
    // Misc
    loading: 'Iyalayisha...',
    error: 'Impazamo',
    retry: 'Zama Kwakhona',
    cancel: 'Rhoxisa',
    save: 'Gcina',
    delete: 'Cima',
    edit: 'Hlela',
    close: 'Vala',
    back: 'Emva',
    next: 'Okulandelayo',
    done: 'Kwenziwe',
    peopleViewed: 'abantu abajongileyo',
    
    // Dark Mode
    darkMode: 'Imowudi Emnyama',
    lightMode: 'Imowudi Ekhanyayo',
    systemDefault: 'Okuzenzakalelayo',
    
    // Additional UI
    welcomeBack: 'Wamkelekile kwakhona',
    phoneNumber: 'Inombolo Yomnxeba',
    emailAddress: 'Idilesi Ye-imeyile',
    memberSince: 'Ilungu Ukusukela',
    notSet: 'Akumiselwanga',
    justJoined: 'Usandula kujoyina!',
    appSettings: 'Izicwangciso Ze-app',
    customizeExperience: 'Lungiselela amava akho',
    switchToLight: 'Tshintshela kwimowudi ekhanyayo',
    switchToDark: 'Tshintshela kwimowudi emnyama',
    chooseLanguage: 'Khetha ulwimi lwakho',
    settingsSaved: 'Izicwangciso zigcinwa ngokuzenzekelayo',
    linkedAccounts: 'Iiakhawunti Ezinxulumeneyo',
    connectMethods: 'Dibanisa iindlela zokungena ezininzi',
    findRoom: 'Fumana Igumbi',
    findRoomDesc: 'Fumana igumbi lakho elifanelekileyo eMzantsi Afrika',
    searchByLocation: 'Khangela ngendawo...',
    filters: 'Izihluzi',
    clearAll: 'Sula Konke',
    noRoomsFound: 'Akukho magumbi afunyenweyo',
    tryDifferentFilters: 'Zama ukutshintsha ukukhangela okanye izihluzi',
    viewListing: 'Jonga Uluhlu',
    getAlerts: 'Fumana Izilumkiso',
    pricePerMonth: 'ngenyanga',
  },
  
  af: {
    // Navigation - Afrikaans
    explore: 'Verken',
    list: 'Lys',
    myRooms: 'My Kamers',
    saved: 'Gestoor',
    profile: 'Profiel',
    
    // Browse View
    searchPlaceholder: 'Soek volgens ligging...',
    filterByPrice: 'Filter volgens prys',
    allPrices: 'Alle Pryse',
    sortBy: 'Sorteer volgens',
    newest: 'Nuutste',
    priceLowHigh: 'Prys: Laag na Hoog',
    priceHighLow: 'Prys: Hoog na Laag',
    noListingsFound: 'Geen kamers gevind nie',
    tryDifferentSearch: 'Probeer \'n ander soektog',
    
    // Listing Card
    perMonth: '/maand',
    available: 'Beskikbaar',
    rented: 'Verhuur',
    newListing: 'Nuut',
    videoTour: 'Video Toer',
    
    // Listing Detail
    roomDetails: 'Kamer Besonderhede',
    viewAllPhotos: 'Bekyk alle fotos',
    description: 'Beskrywing',
    amenities: 'Geriewe',
    location: 'Ligging',
    availableFrom: 'Beskikbaar vanaf',
    roomType: 'Kamer Tipe',
    privateRoom: 'Privaat Kamer',
    sharedRoom: 'Gedeelde Kamer',
    entirePlace: 'Hele Plek',
    
    // Contact
    contactLandlord: 'Kontak Verhuurder',
    callNow: 'Bel Nou',
    whatsapp: 'WhatsApp',
    requestToView: 'Versoek om Kamer te Besigtig',
    landlordInfo: 'Verhuurder Inligting',
    showContact: 'Wys Kontak',
    hideContact: 'Verberg Kontak',
    verified: 'Geverifieer',
    
    // Safety Warning
    safetyWarning: 'Veiligheidswaarskuwing',
    safetyMessage: 'Moet nooit \'n deposito of enige geld betaal voor jy die kamer persoonlik gesien het nie. Ontmoet altyd die verhuurder by die eiendom.',
    
    // Viewing Request
    scheduleViewing: 'Beplan \'n besigtiging',
    preferredDate: 'Voorkeur Datum',
    preferredTime: 'Voorkeur Tyd',
    selectTime: 'Kies \'n tyd',
    additionalMessage: 'Bykomende Boodskap',
    sendRequest: 'Stuur Versoek via WhatsApp',
    requestSent: 'Versoek Gestuur!',
    requestSentMessage: 'Jou besigtigingsversoek is aan die verhuurder gestuur.',
    
    // Reviews
    reviews: 'Resensies',
    noReviews: 'Nog geen resensies nie',
    beFirstReview: 'Wees die eerste om \'n resensie te laat!',
    leaveReview: 'Laat \'n Resensie',
    submitReview: 'Dien Resensie In',
    
    // Similar Rooms
    similarRooms: 'Soortgelyke Kamers',
    viewDetails: 'Bekyk Besonderhede',
    
    // Add Listing
    postRoom: 'Plaas \'n Kamer',
    listingTitle: 'Lysing Titel',
    monthlyRent: 'Maandelikse Huur',
    additionalCosts: 'Bykomende Kostes',
    address: 'Adres',
    uploadPhotos: 'Laai Fotos Op',
    addVideoTour: 'Voeg Video Toer By',
    publish: 'Publiseer',
    
    // Profile
    myProfile: 'My Profiel',
    editProfile: 'Wysig Profiel',
    signOut: 'Teken Uit',
    notificationPrefs: 'Kennisgewing Voorkeure',
    roomAlerts: 'Kamer Waarskuwings',
    tipsUpdates: 'Wenke & Opdaterings',
    locationAlerts: 'Ligging Waarskuwings',
    
    // Quality Score
    qualityScore: 'Kwaliteit Telling',
    excellent: 'Uitstekend',
    good: 'Goed',
    fair: 'Redelik',
    needsImprovement: 'Benodig Verbetering',
    
    // Compare
    compare: 'Vergelyk',
    inCompare: 'In Vergelyking',
    
    // Misc
    loading: 'Laai...',
    error: 'Fout',
    retry: 'Probeer Weer',
    cancel: 'Kanselleer',
    save: 'Stoor',
    delete: 'Verwyder',
    edit: 'Wysig',
    close: 'Maak Toe',
    back: 'Terug',
    next: 'Volgende',
    done: 'Klaar',
    peopleViewed: 'mense het gekyk',
    
    // Dark Mode
    darkMode: 'Donker Modus',
    lightMode: 'Lig Modus',
    systemDefault: 'Stelsel Verstek',
    
    // Additional UI
    welcomeBack: 'Welkom terug',
    phoneNumber: 'Telefoonnommer',
    emailAddress: 'E-pos Adres',
    memberSince: 'Lid Sedert',
    notSet: 'Nie gestel nie',
    justJoined: 'Pas aangesluit!',
    appSettings: 'App Instellings',
    customizeExperience: 'Pasmaak jou ervaring',
    switchToLight: 'Skakel na lig modus',
    switchToDark: 'Skakel na donker modus',
    chooseLanguage: 'Kies jou voorkeur taal',
    settingsSaved: 'Instellings word outomaties gestoor',
    linkedAccounts: 'Gekoppelde Rekeninge',
    connectMethods: 'Koppel verskeie aanmeld metodes',
    findRoom: 'Vind \'n Kamer',
    findRoomDesc: 'Vind jou perfekte kamer in Suid-Afrika',
    searchByLocation: 'Soek volgens ligging...',
    filters: 'Filters',
    clearAll: 'Maak Alles Skoon',
    noRoomsFound: 'Geen kamers gevind nie',
    tryDifferentFilters: 'Probeer om jou soektog of filters aan te pas',
    viewListing: 'Bekyk Lys',
    getAlerts: 'Kry Waarskuwings',
    pricePerMonth: 'per maand',
  }
};

// Language names for the switcher
export const languageNames = {
  en: 'English',
  zu: 'isiZulu',
  xh: 'isiXhosa',
  af: 'Afrikaans'
};

// Get current language from localStorage or default to English
export const getCurrentLanguage = () => {
  return localStorage.getItem('rentmzansi-language') || 'en';
};

// Set language
export const setLanguage = (lang) => {
  localStorage.setItem('rentmzansi-language', lang);
};

// Get translation
export const t = (key, lang = null) => {
  const currentLang = lang || getCurrentLanguage();
  return translations[currentLang]?.[key] || translations.en[key] || key;
};

// Calculate listing quality score (0-100)
export const calculateQualityScore = (listing) => {
  let score = 0;
  const maxScore = 100;
  
  // Photos (max 25 points)
  const photoCount = listing.photos?.length || 0;
  if (photoCount >= 5) score += 25;
  else if (photoCount >= 3) score += 20;
  else if (photoCount >= 1) score += 10;
  
  // Video tour (15 points)
  if (listing.videoTour) score += 15;
  
  // Description length (max 20 points)
  const descLength = listing.description?.length || 0;
  if (descLength >= 200) score += 20;
  else if (descLength >= 100) score += 15;
  else if (descLength >= 50) score += 10;
  else if (descLength > 0) score += 5;
  
  // Title quality (max 10 points)
  const titleLength = listing.title?.length || 0;
  if (titleLength >= 20 && titleLength <= 60) score += 10;
  else if (titleLength >= 10) score += 5;
  
  // Amenities (max 15 points)
  const amenityCount = listing.amenities?.length || 0;
  if (amenityCount >= 5) score += 15;
  else if (amenityCount >= 3) score += 10;
  else if (amenityCount >= 1) score += 5;
  
  // Location details (max 10 points)
  if (listing.latitude && listing.longitude) score += 5;
  if (listing.streetAddress) score += 5;
  
  // Contact info (5 points)
  if (listing.contactPhone || listing.contactWhatsapp) score += 5;
  
  return Math.min(score, maxScore);
};

// Get quality label and color
export const getQualityLabel = (score, lang = null) => {
  const currentLang = lang || getCurrentLanguage();
  
  if (score >= 80) {
    return { 
      label: t('excellent', currentLang), 
      color: 'emerald',
      emoji: 'ðŸŒŸ'
    };
  } else if (score >= 60) {
    return { 
      label: t('good', currentLang), 
      color: 'blue',
      emoji: 'ðŸ‘'
    };
  } else if (score >= 40) {
    return { 
      label: t('fair', currentLang), 
      color: 'amber',
      emoji: 'ðŸ“'
    };
  } else {
    return { 
      label: t('needsImprovement', currentLang), 
      color: 'red',
      emoji: 'âš ï¸'
    };
  }
};

// Find similar rooms
export const findSimilarRooms = (listing, allListings, maxResults = 4) => {
  if (!listing || !allListings || allListings.length === 0) return [];
  
  const listingPrice = parseFloat(listing.price) || 0;
  const listingLocation = (listing.location || '').toLowerCase();
  const listingRoomType = listing.roomType || 'private';
  
  // Filter out the current listing and calculate similarity scores
  const scored = allListings
    .filter(l => l.id !== listing.id && l.status !== 'rented')
    .map(l => {
      let score = 0;
      const lPrice = parseFloat(l.price) || 0;
      const lLocation = (l.location || '').toLowerCase();
      
      // Price similarity (within 30% range = high score)
      const priceDiff = Math.abs(listingPrice - lPrice) / Math.max(listingPrice, 1);
      if (priceDiff <= 0.1) score += 40;
      else if (priceDiff <= 0.2) score += 30;
      else if (priceDiff <= 0.3) score += 20;
      else if (priceDiff <= 0.5) score += 10;
      
      // Location similarity
      if (lLocation === listingLocation) {
        score += 35;
      } else {
        // Check for partial matches (same suburb/city)
        const listingWords = listingLocation.split(/[\s,]+/);
        const lWords = lLocation.split(/[\s,]+/);
        const commonWords = listingWords.filter(w => lWords.includes(w) && w.length > 2);
        score += Math.min(commonWords.length * 10, 25);
      }
      
      // Room type match
      if (l.roomType === listingRoomType) score += 15;
      
      // Amenity overlap
      const listingAmenities = listing.amenities || [];
      const lAmenities = l.amenities || [];
      const commonAmenities = listingAmenities.filter(a => lAmenities.includes(a));
      score += Math.min(commonAmenities.length * 2, 10);
      
      return { listing: l, score };
    })
    .filter(item => item.score > 20) // Only reasonably similar
    .sort((a, b) => b.score - a.score)
    .slice(0, maxResults);
  
  return scored.map(item => item.listing);
};
